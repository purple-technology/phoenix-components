var ni=Object.defineProperty;var ii=(t,n,r)=>n in t?ni(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var ne=(t,n,r)=>(ii(t,typeof n!="symbol"?n+"":n,r),r),Ne=(t,n,r)=>{if(!n.has(t))throw TypeError("Cannot "+r)};var a=(t,n,r)=>(Ne(t,n,"read from private field"),r?r.call(t):n.get(t)),H=(t,n,r)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,r)},lt=(t,n,r,i)=>(Ne(t,n,"write to private field"),i?i.call(t,r):n.set(t,r),r);var ge=(t,n,r,i)=>({set _(s){lt(t,n,s,r)},get _(){return a(t,n,i)}}),et=(t,n,r)=>(Ne(t,n,"access private method"),r);import{r as reactExports,e,a as getAugmentedNamespace,g as getDefaultExportFromCjs,s as styled,Z as Ze}from"./iframe-22864007.js";import{P as PropTypes,c as clsx}from"./clsx-71a93803.js";import{B as Button}from"./index-9fcc56cb.js";import{F as FormControlWarningError}from"./index-3434f921.js";import{I as Icon}from"./index-15f66ba7.js";import{F as Flex}from"./index-6224c4f9.js";import{T as Text}from"./index-05bf6054.js";import{j as jsxRuntimeExports}from"./jsx-runtime-9bc08dc0.js";import{B as Box}from"./index-71c111d9.js";import{M as Modal}from"./index-1a10741f.js";import{N as Notice}from"./index-eb7b80d0.js";import{P as Paragraph}from"./index-2644b403.js";import{T as TextInput}from"./index-223a013d.js";function _mergeNamespaces(t,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const y=Object.getOwnPropertyDescriptor(i,s);y&&Object.defineProperty(t,s,y.get?y:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function __awaiter$1(t,n,r,i){function s(y){return y instanceof r?y:new r(function(S){S(y)})}return new(r||(r=Promise))(function(y,S){function J(v){try{E(i.next(v))}catch(B){S(B)}}function T(v){try{E(i.throw(v))}catch(B){S(B)}}function E(v){v.done?y(v.value):s(v.value).then(J,T)}E((i=i.apply(t,n||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(t,n,r){const i=withMimeType(t),{webkitRelativePath:s}=t,y=typeof n=="string"?n:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof i.path!="string"&&setObjProp(i,"path",y),r!==void 0&&Object.defineProperty(i,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),setObjProp(i,"relativePath",y),i}function withMimeType(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const i=n.split(".").pop().toLowerCase(),s=COMMON_MIME_TYPES.get(i);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function setObjProp(t,n,r){Object.defineProperty(t,n,{value:r,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(t){return __awaiter$1(this,void 0,void 0,function*(){return isObject$2(t)&&isDataTransfer(t.dataTransfer)?getDataTransferFiles(t.dataTransfer,t.type):isChangeEvt(t)?getInputFiles(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?getFsHandleFiles(t):[]})}function isDataTransfer(t){return isObject$2(t)}function isChangeEvt(t){return isObject$2(t)&&isObject$2(t.target)}function isObject$2(t){return typeof t=="object"&&t!==null}function getInputFiles(t){return fromList(t.target.files).map(n=>toFileWithPath(n))}function getFsHandleFiles(t){return __awaiter$1(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>toFileWithPath(r))})}function getDataTransferFiles(t,n){return __awaiter$1(this,void 0,void 0,function*(){if(t.items){const r=fromList(t.items).filter(s=>s.kind==="file");if(n!=="drop")return r;const i=yield Promise.all(r.map(toFilePromises));return noIgnoredFiles(flatten(i))}return noIgnoredFiles(fromList(t.files).map(r=>toFileWithPath(r)))})}function noIgnoredFiles(t){return t.filter(n=>FILES_TO_IGNORE.indexOf(n.name)===-1)}function fromList(t){if(t===null)return[];const n=[];for(let r=0;r<t.length;r++){const i=t[r];n.push(i)}return n}function toFilePromises(t){if(typeof t.webkitGetAsEntry!="function")return fromDataTransferItem(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?fromDirEntry(n):fromDataTransferItem(t,n)}function flatten(t){return t.reduce((n,r)=>[...n,...Array.isArray(r)?flatten(r):[r]],[])}function fromDataTransferItem(t,n){return __awaiter$1(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const y=yield t.getAsFileSystemHandle();if(y===null)throw new Error(`${t} is not a File`);if(y!==void 0){const S=yield y.getFile();return S.handle=y,toFileWithPath(S)}}const i=t.getAsFile();if(!i)throw new Error(`${t} is not a File`);return toFileWithPath(i,(r=n==null?void 0:n.fullPath)!==null&&r!==void 0?r:void 0)})}function fromEntry(t){return __awaiter$1(this,void 0,void 0,function*(){return t.isDirectory?fromDirEntry(t):fromFileEntry(t)})}function fromDirEntry(t){const n=t.createReader();return new Promise((r,i)=>{const s=[];function y(){n.readEntries(S=>__awaiter$1(this,void 0,void 0,function*(){if(S.length){const J=Promise.all(S.map(fromEntry));s.push(J),y()}else try{const J=yield Promise.all(s);r(J)}catch(J){i(J)}}),S=>{i(S)})}y()})}function fromFileEntry(t){return __awaiter$1(this,void 0,void 0,function*(){return new Promise((n,r)=>{t.file(i=>{const s=toFileWithPath(i,t.fullPath);n(s)},i=>{r(i)})})})}var _default=function(t,n){if(t&&n){var r=Array.isArray(n)?n:n.split(",");if(r.length===0)return!0;var i=t.name||"",s=(t.type||"").toLowerCase(),y=s.replace(/\/.*$/,"");return r.some(function(S){var J=S.trim().toLowerCase();return J.charAt(0)==="."?i.toLowerCase().endsWith(J):J.endsWith("/*")?y===J.replace(/\/.*$/,""):s===J})}return!0};function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function ownKeys$1(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function _objectSpread$1(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(i){_defineProperty$1(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function _defineProperty$1(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _slicedToArray$1(t,n){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,n)||_unsupportedIterableToArray$1(t,n)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,n){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray$1(t,n)}}function _arrayLikeToArray$1(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function _iterableToArrayLimit$1(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],s=!0,y=!1,S,J;try{for(r=r.call(t);!(s=(S=r.next()).done)&&(i.push(S.value),!(n&&i.length===n));s=!0);}catch(T){y=!0,J=T}finally{try{!s&&r.return!=null&&r.return()}finally{if(y)throw J}}return i}}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=n.split(","),i=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(i)}},getTooLargeRejectionErr=function(n){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},getTooSmallRejectionErr=function(n){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(t,n){var r=t.type==="application/x-moz-file"||accepts(t,n);return[r,r?null:getInvalidTypeRejectionErr(n)]}function fileMatchSize(t,n,r){if(isDefined$1(t.size))if(isDefined$1(n)&&isDefined$1(r)){if(t.size>r)return[!1,getTooLargeRejectionErr(r)];if(t.size<n)return[!1,getTooSmallRejectionErr(n)]}else{if(isDefined$1(n)&&t.size<n)return[!1,getTooSmallRejectionErr(n)];if(isDefined$1(r)&&t.size>r)return[!1,getTooLargeRejectionErr(r)]}return[!0,null]}function isDefined$1(t){return t!=null}function allFilesAccepted(t){var n=t.files,r=t.accept,i=t.minSize,s=t.maxSize,y=t.multiple,S=t.maxFiles,J=t.validator;return!y&&n.length>1||y&&S>=1&&n.length>S?!1:n.every(function(T){var E=fileAccepted(T,r),v=_slicedToArray$1(E,1),B=v[0],R=fileMatchSize(T,i,s),C=_slicedToArray$1(R,1),w=C[0],x=J?J(T):null;return B&&w&&!x})}function isPropagationStopped(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function isEvtWithFiles(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function onDocumentDragOver(t){t.preventDefault()}function isIe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function isEdge(t){return t.indexOf("Edge/")!==-1}function isIeOrEdge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(t)||isEdge(t)}function composeEventHandlers(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){for(var s=arguments.length,y=new Array(s>1?s-1:0),S=1;S<s;S++)y[S-1]=arguments[S];return n.some(function(J){return!isPropagationStopped(i)&&J&&J.apply(void 0,[i].concat(y)),isPropagationStopped(i)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(t){if(isDefined$1(t)){var n=Object.entries(t).filter(function(r){var i=_slicedToArray$1(r,2),s=i[0],y=i[1],S=!0;return isMIMEType(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),S=!1),(!Array.isArray(y)||!y.every(isExt))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),S=!1),S}).reduce(function(r,i){var s=_slicedToArray$1(i,2),y=s[0],S=s[1];return _objectSpread$1(_objectSpread$1({},r),{},_defineProperty$1({},y,S))},{});return[{description:"Files",accept:n}]}return t}function acceptPropAsAcceptAttr(t){if(isDefined$1(t))return Object.entries(t).reduce(function(n,r){var i=_slicedToArray$1(r,2),s=i[0],y=i[1];return[].concat(_toConsumableArray$1(n),[s],_toConsumableArray$1(y))},[]).filter(function(n){return isMIMEType(n)||isExt(n)}).join(",")}function isAbort(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function isSecurityError(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function isMIMEType(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function isExt(t){return/^.*\.[\w]+$/.test(t)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,n){return _arrayWithHoles(t)||_iterableToArrayLimit(t,n)||_unsupportedIterableToArray(t,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,n){if(t){if(typeof t=="string")return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}}function _arrayLikeToArray(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function _iterableToArrayLimit(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],s=!0,y=!1,S,J;try{for(r=r.call(t);!(s=(S=r.next()).done)&&(i.push(S.value),!(n&&i.length===n));s=!0);}catch(T){y=!0,J=T}finally{try{!s&&r.return!=null&&r.return()}finally{if(y)throw J}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(i){_defineProperty(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _objectWithoutProperties(t,n){if(t==null)return{};var r=_objectWithoutPropertiesLoose$1(t,n),i,s;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(t);for(s=0;s<y.length;s++)i=y[s],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function _objectWithoutPropertiesLoose$1(t,n){if(t==null)return{};var r={},i=Object.keys(t),s,y;for(y=0;y<i.length;y++)s=i[y],!(n.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Dropzone=reactExports.forwardRef(function(t,n){var r=t.children,i=_objectWithoutProperties(t,_excluded),s=useDropzone(i),y=s.open,S=_objectWithoutProperties(s,_excluded2);return reactExports.useImperativeHandle(n,function(){return{open:y}},[y]),e.createElement(reactExports.Fragment,null,r(_objectSpread(_objectSpread({},S),{},{open:y})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=_objectSpread(_objectSpread({},defaultProps),t),r=n.accept,i=n.disabled,s=n.getFilesFromEvent,y=n.maxSize,S=n.minSize,J=n.multiple,T=n.maxFiles,E=n.onDragEnter,v=n.onDragLeave,B=n.onDragOver,R=n.onDrop,C=n.onDropAccepted,w=n.onDropRejected,x=n.onFileDialogCancel,m=n.onFileDialogOpen,_=n.useFsAccessApi,D=n.autoFocus,O=n.preventDropOnDocument,k=n.noClick,u=n.noKeyboard,p=n.noDrag,I=n.noDragEventsBubbling,A=n.onError,h=n.validator,j=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(r)},[r]),b=reactExports.useMemo(function(){return pickerOptionsFromAccept(r)},[r]),V=reactExports.useMemo(function(){return typeof m=="function"?m:noop},[m]),X=reactExports.useMemo(function(){return typeof x=="function"?x:noop},[x]),P=reactExports.useRef(null),Z=reactExports.useRef(null),ot=reactExports.useReducer(reducer$1,initialState),ct=_slicedToArray(ot,2),Y=ct[0],dt=ct[1],gt=Y.isFocused,xt=Y.isFileDialogActive,_t=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&_&&canUseFileSystemAccessAPI()),L=function(){!_t.current&&xt&&setTimeout(function(){if(Z.current){var K=Z.current.files;K.length||(dt({type:"closeDialog"}),X())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[Z,xt,X,_t]);var o=reactExports.useRef([]),d=function(K){P.current&&P.current.contains(K.target)||(K.preventDefault(),o.current=[])};reactExports.useEffect(function(){return O&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",d,!1)),function(){O&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",d))}},[P,O]),reactExports.useEffect(function(){return!i&&D&&P.current&&P.current.focus(),function(){}},[P,D,i]);var c=reactExports.useCallback(function(N){A?A(N):console.error(N)},[A]),f=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),St(N),o.current=[].concat(_toConsumableArray(o.current),[N.target]),isEvtWithFiles(N)&&Promise.resolve(s(N)).then(function(K){if(!(isPropagationStopped(N)&&!I)){var pt=K.length,bt=pt>0&&allFilesAccepted({files:K,accept:j,minSize:S,maxSize:y,multiple:J,maxFiles:T,validator:h}),Rt=pt>0&&!bt;dt({isDragAccept:bt,isDragReject:Rt,isDragActive:!0,type:"setDraggedFiles"}),E&&E(N)}}).catch(function(K){return c(K)})},[s,E,c,I,j,S,y,J,T,h]),g=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),St(N);var K=isEvtWithFiles(N);if(K&&N.dataTransfer)try{N.dataTransfer.dropEffect="copy"}catch{}return K&&B&&B(N),!1},[B,I]),M=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),St(N);var K=o.current.filter(function(bt){return P.current&&P.current.contains(bt)}),pt=K.indexOf(N.target);pt!==-1&&K.splice(pt,1),o.current=K,!(K.length>0)&&(dt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(N)&&v&&v(N))},[P,v,I]),$=reactExports.useCallback(function(N,K){var pt=[],bt=[];N.forEach(function(Rt){var jt=fileAccepted(Rt,j),Bt=_slicedToArray(jt,2),Ht=Bt[0],Gt=Bt[1],Wt=fileMatchSize(Rt,S,y),qt=_slicedToArray(Wt,2),vt=qt[0],at=qt[1],tt=h?h(Rt):null;if(Ht&&vt&&!tt)pt.push(Rt);else{var At=[Gt,at];tt&&(At=At.concat(tt)),bt.push({file:Rt,errors:At.filter(function(wt){return wt})})}}),(!J&&pt.length>1||J&&T>=1&&pt.length>T)&&(pt.forEach(function(Rt){bt.push({file:Rt,errors:[TOO_MANY_FILES_REJECTION]})}),pt.splice(0)),dt({acceptedFiles:pt,fileRejections:bt,isDragReject:bt.length>0,type:"setFiles"}),R&&R(pt,bt,K),bt.length>0&&w&&w(bt,K),pt.length>0&&C&&C(pt,K)},[dt,J,j,S,y,T,R,C,w,h]),q=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),St(N),o.current=[],isEvtWithFiles(N)&&Promise.resolve(s(N)).then(function(K){isPropagationStopped(N)&&!I||$(K,N)}).catch(function(K){return c(K)}),dt({type:"reset"})},[s,$,c,I]),rt=reactExports.useCallback(function(){if(_t.current){dt({type:"openDialog"}),V();var N={multiple:J,types:b};window.showOpenFilePicker(N).then(function(K){return s(K)}).then(function(K){$(K,null),dt({type:"closeDialog"})}).catch(function(K){isAbort(K)?(X(K),dt({type:"closeDialog"})):isSecurityError(K)?(_t.current=!1,Z.current?(Z.current.value=null,Z.current.click()):c(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):c(K)});return}Z.current&&(dt({type:"openDialog"}),V(),Z.current.value=null,Z.current.click())},[dt,V,X,_,$,c,b,J]),nt=reactExports.useCallback(function(N){!P.current||!P.current.isEqualNode(N.target)||(N.key===" "||N.key==="Enter"||N.keyCode===32||N.keyCode===13)&&(N.preventDefault(),rt())},[P,rt]),ut=reactExports.useCallback(function(){dt({type:"focus"})},[]),mt=reactExports.useCallback(function(){dt({type:"blur"})},[]),yt=reactExports.useCallback(function(){k||(isIeOrEdge()?setTimeout(rt,0):rt())},[k,rt]),ft=function(K){return i?null:K},Pt=function(K){return u?null:ft(K)},It=function(K){return p?null:ft(K)},St=function(K){I&&K.stopPropagation()},Dt=reactExports.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=N.refKey,pt=K===void 0?"ref":K,bt=N.role,Rt=N.onKeyDown,jt=N.onFocus,Bt=N.onBlur,Ht=N.onClick,Gt=N.onDragEnter,Wt=N.onDragOver,qt=N.onDragLeave,vt=N.onDrop,at=_objectWithoutProperties(N,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Pt(composeEventHandlers(Rt,nt)),onFocus:Pt(composeEventHandlers(jt,ut)),onBlur:Pt(composeEventHandlers(Bt,mt)),onClick:ft(composeEventHandlers(Ht,yt)),onDragEnter:It(composeEventHandlers(Gt,f)),onDragOver:It(composeEventHandlers(Wt,g)),onDragLeave:It(composeEventHandlers(qt,M)),onDrop:It(composeEventHandlers(vt,q)),role:typeof bt=="string"&&bt!==""?bt:"presentation"},pt,P),!i&&!u?{tabIndex:0}:{}),at)}},[P,nt,ut,mt,yt,f,g,M,q,u,p,i]),U=reactExports.useCallback(function(N){N.stopPropagation()},[]),G=reactExports.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=N.refKey,pt=K===void 0?"ref":K,bt=N.onChange,Rt=N.onClick,jt=_objectWithoutProperties(N,_excluded4),Bt=_defineProperty({accept:j,multiple:J,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ft(composeEventHandlers(bt,q)),onClick:ft(composeEventHandlers(Rt,U)),tabIndex:-1},pt,Z);return _objectSpread(_objectSpread({},Bt),jt)}},[Z,r,J,q,i]);return _objectSpread(_objectSpread({},Y),{},{isFocused:gt&&!i,getRootProps:Dt,getInputProps:G,rootRef:P,inputRef:Z,open:ft(rt)})}function reducer$1(t,n){switch(n.type){case"focus":return _objectSpread(_objectSpread({},t),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},t),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return _objectSpread({},initialState);default:return t}}function noop(){}const uploadIcon=""+new URL("file-upload-421da4b6.svg",import.meta.url).href;function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(n,r){module.exports=n.pdfjsLib=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,n)=>{var qt;Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PromiseCapability=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationReplyType=n.AnnotationPrefix=n.AnnotationMode=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=dt,n.bytesToString=q,n.createValidAbsoluteUrl=xt,n.getModificationDate=bt,n.getUuid=Gt,n.getVerbosityLevel=Z,n.info=ot,n.isArrayBuffer=K,n.isArrayEqual=pt,n.isNodeJS=void 0,n.normalizeUnicode=Ht,n.objectFromMap=mt,n.objectSize=ut,n.setVerbosityLevel=P,n.shadow=_t,n.string32=nt,n.stringToBytes=rt,n.stringToPDFString=U,n.stringToUTF8String=G,n.unreachable=Y,n.utf8StringToString=N,n.warn=ct;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r;const i=[1,0,0,1,0,0];n.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=s;const y=1e7;n.MAX_IMAGE_SIZE_TO_CACHE=y;const S=1.35;n.LINE_FACTOR=S;const J=.35;n.LINE_DESCENT_FACTOR=J;const T=J/S;n.BASELINE_FACTOR=T;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=E;const v={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=v;const B="pdfjs_internal_editor_";n.AnnotationEditorPrefix=B;const R={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};n.AnnotationEditorType=R;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};n.AnnotationEditorParamsType=C;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=w;const x={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=x;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=m;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=_;const D={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=D;const O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=O;const k={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=k;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=u;const p={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=p;const I={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=I;const A={O:"PageOpen",C:"PageClose"};n.PageActionEventType=A;const h={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=h;const j={NONE:0,BINARY:1};n.CMapCompressionType=j;const b={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=b;const V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=V;let X=h.WARNINGS;function P(vt){Number.isInteger(vt)&&(X=vt)}function Z(){return X}function ot(vt){X>=h.INFOS&&console.log(`Info: ${vt}`)}function ct(vt){X>=h.WARNINGS&&console.log(`Warning: ${vt}`)}function Y(vt){throw new Error(vt)}function dt(vt,at){vt||Y(at)}function gt(vt){switch(vt==null?void 0:vt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xt(vt,at=null,tt=null){if(!vt)return null;try{if(tt&&typeof vt=="string"){if(tt.addDefaultProtocol&&vt.startsWith("www.")){const wt=vt.match(/\./g);(wt==null?void 0:wt.length)>=2&&(vt=`http://${vt}`)}if(tt.tryConvertEncoding)try{vt=G(vt)}catch{}}const At=at?new URL(vt,at):new URL(vt);if(gt(At))return At}catch{}return null}function _t(vt,at,tt,At=!1){return Object.defineProperty(vt,at,{value:tt,enumerable:!At,configurable:!0,writable:!1}),tt}const L=function(){function at(tt,At){this.constructor===at&&Y("Cannot initialize BaseException."),this.message=tt,this.name=At}return at.prototype=new Error,at.constructor=at,at}();n.BaseException=L;class o extends L{constructor(at,tt){super(at,"PasswordException"),this.code=tt}}n.PasswordException=o;class d extends L{constructor(at,tt){super(at,"UnknownErrorException"),this.details=tt}}n.UnknownErrorException=d;class c extends L{constructor(at){super(at,"InvalidPDFException")}}n.InvalidPDFException=c;class f extends L{constructor(at){super(at,"MissingPDFException")}}n.MissingPDFException=f;class g extends L{constructor(at,tt){super(at,"UnexpectedResponseException"),this.status=tt}}n.UnexpectedResponseException=g;class M extends L{constructor(at){super(at,"FormatError")}}n.FormatError=M;class $ extends L{constructor(at){super(at,"AbortException")}}n.AbortException=$;function q(vt){(typeof vt!="object"||(vt==null?void 0:vt.length)===void 0)&&Y("Invalid argument for bytesToString");const at=vt.length,tt=8192;if(at<tt)return String.fromCharCode.apply(null,vt);const At=[];for(let wt=0;wt<at;wt+=tt){const ee=Math.min(wt+tt,at),te=vt.subarray(wt,ee);At.push(String.fromCharCode.apply(null,te))}return At.join("")}function rt(vt){typeof vt!="string"&&Y("Invalid argument for stringToBytes");const at=vt.length,tt=new Uint8Array(at);for(let At=0;At<at;++At)tt[At]=vt.charCodeAt(At)&255;return tt}function nt(vt){return String.fromCharCode(vt>>24&255,vt>>16&255,vt>>8&255,vt&255)}function ut(vt){return Object.keys(vt).length}function mt(vt){const at=Object.create(null);for(const[tt,At]of vt)at[tt]=At;return at}function yt(){const vt=new Uint8Array(4);return vt[0]=1,new Uint32Array(vt.buffer,0,1)[0]===1}function ft(){try{return new Function(""),!0}catch{return!1}}class Pt{static get isLittleEndian(){return _t(this,"isLittleEndian",yt())}static get isEvalSupported(){return _t(this,"isEvalSupported",ft())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_t(this,"platform",{isWin:!1,isMac:!1}):_t(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var at,tt;return _t(this,"isCSSRoundSupported",(tt=(at=globalThis.CSS)==null?void 0:at.supports)==null?void 0:tt.call(at,"width: round(1.5px, 1px)"))}}n.FeatureTest=Pt;const It=[...Array(256).keys()].map(vt=>vt.toString(16).padStart(2,"0"));class St{static makeHexColor(at,tt,At){return`#${It[at]}${It[tt]}${It[At]}`}static scaleMinMax(at,tt){let At;at[0]?(at[0]<0&&(At=tt[0],tt[0]=tt[1],tt[1]=At),tt[0]*=at[0],tt[1]*=at[0],at[3]<0&&(At=tt[2],tt[2]=tt[3],tt[3]=At),tt[2]*=at[3],tt[3]*=at[3]):(At=tt[0],tt[0]=tt[2],tt[2]=At,At=tt[1],tt[1]=tt[3],tt[3]=At,at[1]<0&&(At=tt[2],tt[2]=tt[3],tt[3]=At),tt[2]*=at[1],tt[3]*=at[1],at[2]<0&&(At=tt[0],tt[0]=tt[1],tt[1]=At),tt[0]*=at[2],tt[1]*=at[2]),tt[0]+=at[4],tt[1]+=at[4],tt[2]+=at[5],tt[3]+=at[5]}static transform(at,tt){return[at[0]*tt[0]+at[2]*tt[1],at[1]*tt[0]+at[3]*tt[1],at[0]*tt[2]+at[2]*tt[3],at[1]*tt[2]+at[3]*tt[3],at[0]*tt[4]+at[2]*tt[5]+at[4],at[1]*tt[4]+at[3]*tt[5]+at[5]]}static applyTransform(at,tt){const At=at[0]*tt[0]+at[1]*tt[2]+tt[4],wt=at[0]*tt[1]+at[1]*tt[3]+tt[5];return[At,wt]}static applyInverseTransform(at,tt){const At=tt[0]*tt[3]-tt[1]*tt[2],wt=(at[0]*tt[3]-at[1]*tt[2]+tt[2]*tt[5]-tt[4]*tt[3])/At,ee=(-at[0]*tt[1]+at[1]*tt[0]+tt[4]*tt[1]-tt[5]*tt[0])/At;return[wt,ee]}static getAxialAlignedBoundingBox(at,tt){const At=this.applyTransform(at,tt),wt=this.applyTransform(at.slice(2,4),tt),ee=this.applyTransform([at[0],at[3]],tt),te=this.applyTransform([at[2],at[1]],tt);return[Math.min(At[0],wt[0],ee[0],te[0]),Math.min(At[1],wt[1],ee[1],te[1]),Math.max(At[0],wt[0],ee[0],te[0]),Math.max(At[1],wt[1],ee[1],te[1])]}static inverseTransform(at){const tt=at[0]*at[3]-at[1]*at[2];return[at[3]/tt,-at[1]/tt,-at[2]/tt,at[0]/tt,(at[2]*at[5]-at[4]*at[3])/tt,(at[4]*at[1]-at[5]*at[0])/tt]}static singularValueDecompose2dScale(at){const tt=[at[0],at[2],at[1],at[3]],At=at[0]*tt[0]+at[1]*tt[2],wt=at[0]*tt[1]+at[1]*tt[3],ee=at[2]*tt[0]+at[3]*tt[2],te=at[2]*tt[1]+at[3]*tt[3],st=(At+te)/2,Ct=Math.sqrt((At+te)**2-4*(At*te-ee*wt))/2,$t=st+Ct||1,kt=st-Ct||1;return[Math.sqrt($t),Math.sqrt(kt)]}static normalizeRect(at){const tt=at.slice(0);return at[0]>at[2]&&(tt[0]=at[2],tt[2]=at[0]),at[1]>at[3]&&(tt[1]=at[3],tt[3]=at[1]),tt}static intersect(at,tt){const At=Math.max(Math.min(at[0],at[2]),Math.min(tt[0],tt[2])),wt=Math.min(Math.max(at[0],at[2]),Math.max(tt[0],tt[2]));if(At>wt)return null;const ee=Math.max(Math.min(at[1],at[3]),Math.min(tt[1],tt[3])),te=Math.min(Math.max(at[1],at[3]),Math.max(tt[1],tt[3]));return ee>te?null:[At,ee,wt,te]}static bezierBoundingBox(at,tt,At,wt,ee,te,st,Ct){const $t=[],kt=[[],[]];let Ut,zt,Zt,Tt,Yt,Nt,z,l;for(let it=0;it<2;++it){if(it===0?(zt=6*at-12*At+6*ee,Ut=-3*at+9*At-9*ee+3*st,Zt=3*At-3*at):(zt=6*tt-12*wt+6*te,Ut=-3*tt+9*wt-9*te+3*Ct,Zt=3*wt-3*tt),Math.abs(Ut)<1e-12){if(Math.abs(zt)<1e-12)continue;Tt=-Zt/zt,0<Tt&&Tt<1&&$t.push(Tt);continue}z=zt*zt-4*Zt*Ut,l=Math.sqrt(z),!(z<0)&&(Yt=(-zt+l)/(2*Ut),0<Yt&&Yt<1&&$t.push(Yt),Nt=(-zt-l)/(2*Ut),0<Nt&&Nt<1&&$t.push(Nt))}let F=$t.length,W;const Q=F;for(;F--;)Tt=$t[F],W=1-Tt,kt[0][F]=W*W*W*at+3*W*W*Tt*At+3*W*Tt*Tt*ee+Tt*Tt*Tt*st,kt[1][F]=W*W*W*tt+3*W*W*Tt*wt+3*W*Tt*Tt*te+Tt*Tt*Tt*Ct;return kt[0][Q]=at,kt[1][Q]=tt,kt[0][Q+1]=st,kt[1][Q+1]=Ct,kt[0].length=kt[1].length=Q+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}n.Util=St;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function U(vt){if(vt[0]>="ï"){let tt;if(vt[0]==="þ"&&vt[1]==="ÿ"?tt="utf-16be":vt[0]==="ÿ"&&vt[1]==="þ"?tt="utf-16le":vt[0]==="ï"&&vt[1]==="»"&&vt[2]==="¿"&&(tt="utf-8"),tt)try{const At=new TextDecoder(tt,{fatal:!0}),wt=rt(vt);return At.decode(wt)}catch(At){ct(`stringToPDFString: "${At}".`)}}const at=[];for(let tt=0,At=vt.length;tt<At;tt++){const wt=Dt[vt.charCodeAt(tt)];at.push(wt?String.fromCharCode(wt):vt.charAt(tt))}return at.join("")}function G(vt){return decodeURIComponent(escape(vt))}function N(vt){return unescape(encodeURIComponent(vt))}function K(vt){return typeof vt=="object"&&(vt==null?void 0:vt.byteLength)!==void 0}function pt(vt,at){if(vt.length!==at.length)return!1;for(let tt=0,At=vt.length;tt<At;tt++)if(vt[tt]!==at[tt])return!1;return!0}function bt(vt=new Date){return[vt.getUTCFullYear().toString(),(vt.getUTCMonth()+1).toString().padStart(2,"0"),vt.getUTCDate().toString().padStart(2,"0"),vt.getUTCHours().toString().padStart(2,"0"),vt.getUTCMinutes().toString().padStart(2,"0"),vt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Rt{constructor(){H(this,qt,!1);this.promise=new Promise((at,tt)=>{this.resolve=At=>{lt(this,qt,!0),at(At)},this.reject=At=>{lt(this,qt,!0),tt(At)}})}get settled(){return a(this,qt)}}qt=new WeakMap,n.PromiseCapability=Rt;let jt=null,Bt=null;function Ht(vt){return jt||(jt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bt=new Map([["ﬅ","ſt"]])),vt.replaceAll(jt,(at,tt,At)=>tt?tt.normalize("NFKC"):Bt.get(At))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const vt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(vt);else for(let at=0;at<32;at++)vt[at]=Math.floor(Math.random()*255);return q(vt)}const Wt="pdfjs_internal_id_";n.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,r,i,s,ue,S,Se,T,E,v,B,R,C,w,x,m,we,D,O,$e,u,p;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(A){if(typeof A=="string"||A instanceof URL?A={url:A}:(0,_util.isArrayBuffer)(A)&&(A={data:A}),typeof A!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:j}=h,b=A.url?getUrlProp(A.url):null,V=A.data?getDataProp(A.data):null,X=A.httpHeaders||null,P=A.withCredentials===!0,Z=A.password??null,ot=A.range instanceof PDFDataRangeTransport?A.range:null,ct=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Y=A.worker instanceof PDFWorker?A.worker:null;const dt=A.verbosity,gt=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,xt=typeof A.cMapUrl=="string"?A.cMapUrl:null,_t=A.cMapPacked!==!1,L=A.CMapReaderFactory||DefaultCMapReaderFactory,o=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,d=A.StandardFontDataFactory||DefaultStandardFontDataFactory,c=A.stopAtErrors!==!0,f=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,g=A.isEvalSupported!==!1,M=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(A.canvasMaxAreaInBytes)?A.canvasMaxAreaInBytes:-1,q=typeof A.disableFontFace=="boolean"?A.disableFontFace:_util.isNodeJS,rt=A.fontExtraProperties===!0,nt=A.enableXfa===!0,ut=A.ownerDocument||globalThis.document,mt=A.disableRange===!0,yt=A.disableStream===!0,ft=A.disableAutoFetch===!0,Pt=A.pdfBug===!0,It=ot?ot.length:A.length??NaN,St=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_util.isNodeJS&&!q,Dt=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:L===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&xt&&o&&(0,_display_utils.isValidFetchUrl)(xt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(o,document.baseURI),U=A.canvasFactory||new DefaultCanvasFactory({ownerDocument:ut}),G=A.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:ut}),N=null;(0,_util.setVerbosityLevel)(dt);const K={canvasFactory:U,filterFactory:G};if(Dt||(K.cMapReaderFactory=new L({baseUrl:xt,isCompressed:_t}),K.standardFontDataFactory=new d({baseUrl:o})),!Y){const Rt={verbosity:dt,port:_worker_options.GlobalWorkerOptions.workerPort};Y=Rt.port?PDFWorker.fromPort(Rt):new PDFWorker(Rt),h._worker=Y}const pt={docId:j,apiVersion:"3.11.174",data:V,password:Z,disableAutoFetch:ft,rangeChunkSize:ct,length:It,docBaseUrl:gt,enableXfa:nt,evaluatorOptions:{maxImageSize:f,disableFontFace:q,ignoreErrors:c,isEvalSupported:g,isOffscreenCanvasSupported:M,canvasMaxAreaInBytes:$,fontExtraProperties:rt,useSystemFonts:St,cMapUrl:Dt?xt:null,standardFontDataUrl:Dt?o:null}},bt={ignoreErrors:c,isEvalSupported:g,disableFontFace:q,fontExtraProperties:rt,enableXfa:nt,ownerDocument:ut,disableAutoFetch:ft,pdfBug:Pt,styleElement:N};return Y.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Rt=_fetchDocument(Y,pt),jt=new Promise(function(Bt){let Ht;ot?Ht=new _transport_stream.PDFDataTransportStream({length:It,initialData:ot.initialData,progressiveDone:ot.progressiveDone,contentDispositionFilename:ot.contentDispositionFilename,disableRange:mt,disableStream:yt},ot):V||(Ht=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:b,length:It,httpHeaders:X,withCredentials:P,rangeChunkSize:ct,disableRange:mt,disableStream:yt})),Bt(Ht)});return Promise.all([Rt,jt]).then(function([Bt,Ht]){if(h.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(j,Bt,Y.port),Wt=new WorkerTransport(Gt,h,Ht,bt,K);h._transport=Wt,Gt.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(A,h){if(A.destroyed)throw new Error("Worker was destroyed");const j=await A.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_util.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_util.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A==null?void 0:A.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const n=class n{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(n,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,j,b;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(V){throw(b=this._worker)!=null&&b.port&&delete this._worker._pendingDestroy,V}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,H(n,t,0);let PDFDocumentLoadingTask=n;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,j,b=!1,V=null){this.length=h,this.initialData=j,this.progressiveDone=b,this.contentDispositionFilename=V,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,j){for(const b of this._rangeListeners)b(h,j)}onDataProgress(h,j){this._readyCapability.promise.then(()=>{for(const b of this._progressListeners)b(h,j)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,j){this._pdfInfo=h,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(b=>{if(!b)return b;const V=[];for(const X in b)V.push(...b[X]);return V}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,j,b,V=!1){H(this,s);H(this,S);H(this,r,null);H(this,i,!1);this._pageIndex=h,this._pageInfo=j,this._transport=b,this._stats=V?new _display_utils.StatTimer:null,this._pdfBug=V,this.commonObjs=b.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:j=this.rotate,offsetX:b=0,offsetY:V=0,dontFlip:X=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:j,offsetX:b,offsetY:V,dontFlip:X})}getAnnotations({intent:h="display"}={}){const j=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:j,intent:b="display",annotationMode:V=_util.AnnotationMode.ENABLE,transform:X=null,background:P=null,optionalContentConfigPromise:Z=null,annotationCanvasMap:ot=null,pageColors:ct=null,printAnnotationStorage:Y=null}){var d,c;(d=this._stats)==null||d.time("Overall");const dt=this._transport.getRenderingIntent(b,V,Y);lt(this,i,!1),et(this,S,Se).call(this),Z||(Z=this._transport.getOptionalContentConfig());let gt=this._intentStates.get(dt.cacheKey);gt||(gt=Object.create(null),this._intentStates.set(dt.cacheKey,gt)),gt.streamReaderCancelTimeout&&(clearTimeout(gt.streamReaderCancelTimeout),gt.streamReaderCancelTimeout=null);const xt=!!(dt.renderingIntent&_util.RenderingIntentFlag.PRINT);gt.displayReadyCapability||(gt.displayReadyCapability=new _util.PromiseCapability,gt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(dt));const _t=f=>{var g,M;gt.renderTasks.delete(L),(this._maybeCleanupAfterRender||xt)&&lt(this,i,!0),et(this,s,ue).call(this,!xt),f?(L.capability.reject(f),this._abortOperatorList({intentState:gt,reason:f instanceof Error?f:new Error(f)})):L.capability.resolve(),(g=this._stats)==null||g.timeEnd("Rendering"),(M=this._stats)==null||M.timeEnd("Overall")},L=new InternalRenderTask({callback:_t,params:{canvasContext:h,viewport:j,transform:X,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ot,operatorList:gt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!xt,pdfBug:this._pdfBug,pageColors:ct});(gt.renderTasks||(gt.renderTasks=new Set)).add(L);const o=L.task;return Promise.all([gt.displayReadyCapability.promise,Z]).then(([f,g])=>{var M;if(this.destroyed){_t();return}(M=this._stats)==null||M.time("Rendering"),L.initializeGraphics({transparency:f,optionalContentConfig:g}),L.operatorListChanged()}).catch(_t),o}getOperatorList({intent:h="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:b=null}={}){var ot;function V(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(Z))}const X=this._transport.getRenderingIntent(h,j,b,!0);let P=this._intentStates.get(X.cacheKey);P||(P=Object.create(null),this._intentStates.set(X.cacheKey,P));let Z;return P.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=V,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||(P.renderTasks=new Set)).add(Z),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ot=this._stats)==null||ot.time("Page Request"),this._pumpOperatorList(X)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:j===!0},{highWaterMark:100,size(V){return V.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(b=>_xfa_text.XfaText.textContent(b));const j=this.streamTextContent(h);return new Promise(function(b,V){function X(){P.read().then(function({value:ot,done:ct}){if(ct){b(Z);return}Object.assign(Z.styles,ot.styles),Z.items.push(...ot.items),X()},V)}const P=j.getReader(),Z={items:[],styles:Object.create(null)};X()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const b of j.renderTasks)h.push(b.completed),b.cancel();return this.objs.clear(),lt(this,i,!1),et(this,S,Se).call(this),Promise.all(h)}cleanup(h=!1){lt(this,i,!0);const j=et(this,s,ue).call(this,!1);return h&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(h,j){var V,X;const b=this._intentStates.get(j);b&&((V=this._stats)==null||V.timeEnd("Page Request"),(X=b.displayReadyCapability)==null||X.resolve(h))}_renderPageChunk(h,j){for(let b=0,V=h.length;b<V;b++)j.operatorList.fnArray.push(h.fnArray[b]),j.operatorList.argsArray.push(h.argsArray[b]);j.operatorList.lastChunk=h.lastChunk,j.operatorList.separateAnnots=h.separateAnnots;for(const b of j.renderTasks)b.operatorListChanged();h.lastChunk&&et(this,s,ue).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:j,annotationStorageSerializable:b}){const{map:V,transfers:X}=b,Z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:j,annotationStorage:V},X).getReader(),ot=this._intentStates.get(j);ot.streamReader=Z;const ct=()=>{Z.read().then(({value:Y,done:dt})=>{if(dt){ot.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Y,ot),ct())},Y=>{if(ot.streamReader=null,!this._transport.destroyed){if(ot.operatorList){ot.operatorList.lastChunk=!0;for(const dt of ot.renderTasks)dt.operatorListChanged();et(this,s,ue).call(this,!0)}if(ot.displayReadyCapability)ot.displayReadyCapability.reject(Y);else if(ot.opListReadCapability)ot.opListReadCapability.reject(Y);else throw Y}})};ct()}_abortOperatorList({intentState:h,reason:j,force:b=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!b){if(h.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let V=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(V+=j.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:j,force:!0})},V);return}}if(h.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[V,X]of this._intentStates)if(X===h){this._intentStates.delete(V);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,i=new WeakMap,s=new WeakSet,ue=function(h=!1){if(et(this,S,Se).call(this),!a(this,i)||this.destroyed)return!1;if(h)return lt(this,r,setTimeout(()=>{lt(this,r,null),et(this,s,ue).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:b}of this._intentStates.values())if(j.size>0||!b.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),lt(this,i,!1),!0},S=new WeakSet,Se=function(){a(this,r)&&(clearTimeout(a(this,r)),lt(this,r,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){H(this,T,new Set);H(this,E,Promise.resolve())}postMessage(h,j){const b={data:structuredClone(h,j?{transfer:j}:null)};a(this,E).then(()=>{for(const V of a(this,T))V.call(this,b)})}addEventListener(h,j){a(this,T).add(j)}removeEventListener(h,j){a(this,T).delete(j)}terminate(){a(this,T).clear()}}T=new WeakMap,E=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,h){let j;try{if(j=new URL(A),!j.origin||j.origin==="null")return!1}catch{return!1}const b=new URL(h,j);return j.origin===b.origin},PDFWorkerUtil.createCDNWrapper=function(A){const h=`importScripts("${A}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:A=null,port:h=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var b;if(this.name=A,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((b=a(_PDFWorker,B))!=null&&b.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,B)||lt(_PDFWorker,B,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const h=new Worker(A),j=new _message_handler.MessageHandler("main","worker",h),b=()=>{h.removeEventListener("error",V),j.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},V=()=>{this._webWorker||b()};h.addEventListener("error",V),j.on("test",P=>{if(h.removeEventListener("error",V),this.destroyed){b();return}P?(this._messageHandler=j,this._port=h,this._webWorker=h,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),h.terminate())}),j.on("ready",P=>{if(h.removeEventListener("error",V),this.destroyed){b();return}try{X()}catch{this._setupFakeWorker()}});const X=()=>{const P=new Uint8Array;j.send("test",P,[P.buffer])};X();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,b=new _message_handler.MessageHandler(j+"_worker",j,h);A.setup(b,h);const V=new _message_handler.MessageHandler(j,j+"_worker",h);this._messageHandler=V,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){var A;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(A=a(_PDFWorker,B))==null||A.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){var j;if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(j=a(this,B))==null?void 0:j.get(A.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};B=new WeakMap,H(_PDFWorker,B,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,j,b,V,X){H(this,m);H(this,R,new Map);H(this,C,new Map);H(this,w,new Map);H(this,x,null);this.messageHandler=h,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:V.ownerDocument,styleElement:V.styleElement}),this._params=V,this.canvasFactory=X.canvasFactory,this.filterFactory=X.filterFactory,this.cMapReaderFactory=X.cMapReaderFactory,this.standardFontDataFactory=X.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=b,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,j=_util.AnnotationMode.ENABLE,b=null,V=!1){let X=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(h){case"any":X=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":X=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(j){case _util.AnnotationMode.DISABLE:X+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:X+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:X+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(X&_util.RenderingIntentFlag.PRINT&&b instanceof _annotation_storage.PrintAnnotationStorage?b:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return V&&(X+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:X,cacheKey:`${X}_${P.hash}`,annotationStorageSerializable:P}}destroy(){var b;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(b=a(this,x))==null||b.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const V of a(this,C).values())h.push(V._destroy());a(this,C).clear(),a(this,w).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return h.push(j),Promise.all(h).then(()=>{var V;this.commonObjs.clear(),this.fontLoader.clear(),a(this,R).clear(),this.filterFactory.destroy(),(V=this._networkStream)==null||V.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:j}=this;h.on("GetReader",(b,V)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=X=>{this._lastProgress={loaded:X.loaded,total:X.total}},V.onPull=()=>{this._fullReader.read().then(function({value:X,done:P}){if(P){V.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{V.error(X)})},V.onCancel=X=>{this._fullReader.cancel(X),V.ready.catch(P=>{if(!this.destroyed)throw P})}}),h.on("ReaderHeadersReady",b=>{const V=new _util.PromiseCapability,X=this._fullReader;return X.headersReady.then(()=>{var P;(!X.isStreamingSupported||!X.isRangeSupported)&&(this._lastProgress&&((P=j.onProgress)==null||P.call(j,this._lastProgress)),X.onProgress=Z=>{var ot;(ot=j.onProgress)==null||ot.call(j,{loaded:Z.loaded,total:Z.total})}),V.resolve({isStreamingSupported:X.isStreamingSupported,isRangeSupported:X.isRangeSupported,contentLength:X.contentLength})},V.reject),V.promise}),h.on("GetRangeReader",(b,V)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const X=this._networkStream.getRangeReader(b.begin,b.end);if(!X){V.close();return}V.onPull=()=>{X.read().then(function({value:P,done:Z}){if(Z){V.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{V.error(P)})},V.onCancel=P=>{X.cancel(P),V.ready.catch(Z=>{if(!this.destroyed)throw Z})}}),h.on("GetDoc",({pdfInfo:b})=>{this._numPages=b.numPages,this._htmlForXfa=b.htmlForXfa,delete b.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(b,this))}),h.on("DocException",function(b){let V;switch(b.name){case"PasswordException":V=new _util.PasswordException(b.message,b.code);break;case"InvalidPDFException":V=new _util.InvalidPDFException(b.message);break;case"MissingPDFException":V=new _util.MissingPDFException(b.message);break;case"UnexpectedResponseException":V=new _util.UnexpectedResponseException(b.message,b.status);break;case"UnknownErrorException":V=new _util.UnknownErrorException(b.message,b.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(V)}),h.on("PasswordRequest",b=>{if(lt(this,x,new _util.PromiseCapability),j.onPassword){const V=X=>{X instanceof Error?a(this,x).reject(X):a(this,x).resolve({password:X})};try{j.onPassword(V,b.code)}catch(X){a(this,x).reject(X)}}else a(this,x).reject(new _util.PasswordException(b.message,b.code));return a(this,x).promise}),h.on("DataLoaded",b=>{var V;(V=j.onProgress)==null||V.call(j,{loaded:b.length,total:b.length}),this.downloadInfoCapability.resolve(b)}),h.on("StartRenderPage",b=>{if(this.destroyed)return;a(this,C).get(b.pageIndex)._startRenderPage(b.transparency,b.cacheKey)}),h.on("commonobj",([b,V,X])=>{var P;if(!this.destroyed&&!this.commonObjs.has(b))switch(V){case"Font":const Z=this._params;if("error"in X){const Y=X.error;(0,_util.warn)(`Error during font loading: ${Y}`),this.commonObjs.resolve(b,Y);break}const ot=Z.pdfBug&&((P=globalThis.FontInspector)!=null&&P.enabled)?(Y,dt)=>globalThis.FontInspector.fontAdded(Y,dt):null,ct=new _font_loader.FontFaceObject(X,{isEvalSupported:Z.isEvalSupported,disableFontFace:Z.disableFontFace,ignoreErrors:Z.ignoreErrors,inspectFont:ot});this.fontLoader.bind(ct).catch(Y=>h.sendWithPromise("FontFallback",{id:b})).finally(()=>{!Z.fontExtraProperties&&ct.data&&(ct.data=null),this.commonObjs.resolve(b,ct)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(b,X);break;default:throw new Error(`Got unknown common object type ${V}`)}}),h.on("obj",([b,V,X,P])=>{var ot;if(this.destroyed)return;const Z=a(this,C).get(V);if(!Z.objs.has(b))switch(X){case"Image":if(Z.objs.resolve(b,P),P){let ct;if(P.bitmap){const{width:Y,height:dt}=P;ct=Y*dt*4}else ct=((ot=P.data)==null?void 0:ot.length)||0;ct>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Z._maybeCleanupAfterRender=!0)}break;case"Pattern":Z.objs.resolve(b,P);break;default:throw new Error(`Got unknown object type ${X}`)}}),h.on("DocProgress",b=>{var V;this.destroyed||(V=j.onProgress)==null||V.call(j,{loaded:b.loaded,total:b.total})}),h.on("FetchBuiltInCMap",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(b):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(b):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var b;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((b=this._fullReader)==null?void 0:b.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=h-1,b=a(this,w).get(j);if(b)return b;const V=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(X=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(j,X,this,this._params.pdfBug);return a(this,C).set(j,P),P});return a(this,w).set(j,V),V}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:j})}getFieldObjects(){return et(this,m,we).call(this,"GetFieldObjects")}hasJSActions(){return et(this,m,we).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return et(this,m,we).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",j=a(this,R).get(h);if(j)return j;const b=this.messageHandler.sendWithPromise(h,null).then(V=>{var X,P;return{info:V[0],metadata:V[1]?new _metadata.Metadata(V[1]):null,contentDispositionFilename:((X=this._fullReader)==null?void 0:X.filename)??null,contentLength:((P=this._fullReader)==null?void 0:P.contentLength)??null}});return a(this,R).set(h,b),b}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of a(this,C).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),a(this,R).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:j})}}R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakSet,we=function(h,j=null){const b=a(this,R).get(h);if(b)return b;const V=this.messageHandler.sendWithPromise(h,j);return a(this,R).set(h,V),V};class PDFObjects{constructor(){H(this,O);H(this,D,Object.create(null))}get(h,j=null){if(j){const V=et(this,O,$e).call(this,h);return V.capability.promise.then(()=>j(V.data)),null}const b=a(this,D)[h];if(!(b!=null&&b.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return b.data}has(h){const j=a(this,D)[h];return(j==null?void 0:j.capability.settled)||!1}resolve(h,j=null){const b=et(this,O,$e).call(this,h);b.data=j,b.capability.resolve()}clear(){var h;for(const j in a(this,D)){const{data:b}=a(this,D)[j];(h=b==null?void 0:b.bitmap)==null||h.close()}lt(this,D,Object.create(null))}}D=new WeakMap,O=new WeakSet,$e=function(h){var j;return(j=a(this,D))[h]||(j[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){H(this,u,null);lt(this,u,h),this.onContinue=null}get promise(){return a(this,u).capability.promise}cancel(h=0){a(this,u).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=a(this,u).operatorList;if(!h)return!1;const{annotationCanvasMap:j}=a(this,u);return h.form||h.canvas&&(j==null?void 0:j.size)>0}}u=new WeakMap,exports.RenderTask=RenderTask;const I=class I{constructor({callback:h,params:j,objs:b,commonObjs:V,annotationCanvasMap:X,operatorList:P,pageIndex:Z,canvasFactory:ot,filterFactory:ct,useRequestAnimationFrame:Y=!1,pdfBug:dt=!1,pageColors:gt=null}){this.callback=h,this.params=j,this.objs=b,this.commonObjs=V,this.annotationCanvasMap=X,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=Z,this.canvasFactory=ot,this.filterFactory=ct,this._pdfBug=dt,this.pageColors=gt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Y===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:j}){var Z,ot;if(this.cancelled)return;if(this._canvas){if(a(I,p).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(I,p).add(this._canvas)}this._pdfBug&&((Z=globalThis.StepperManager)!=null&&Z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:b,viewport:V,transform:X,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(b,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:X,viewport:V,transparency:h,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,(ot=this.graphicsReadyCallback)==null||ot.call(this)}cancel(h=null,j=0){var b;this.running=!1,this.cancelled=!0,(b=this.gfx)==null||b.endDrawing(),a(I,p).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(I,p).delete(this._canvas),this.callback())))}};p=new WeakMap,H(I,p,new WeakSet);let InternalRenderTask=I;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,n,r)=>{var E,v,B,An,C;Object.defineProperty(n,"__esModule",{value:!0}),n.SerializableEmpty=n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var i=r(1),s=r(4),y=r(8);const S=Object.freeze({map:null,hash:"",transfers:void 0});n.SerializableEmpty=S;class J{constructor(){H(this,B);H(this,E,!1);H(this,v,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(x,m){const _=a(this,v).get(x);return _===void 0?m:Object.assign(m,_)}getRawValue(x){return a(this,v).get(x)}remove(x){if(a(this,v).delete(x),a(this,v).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const m of a(this,v).values())if(m instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(x,m){const _=a(this,v).get(x);let D=!1;if(_!==void 0)for(const[O,k]of Object.entries(m))_[O]!==k&&(D=!0,_[O]=k);else D=!0,a(this,v).set(x,m);D&&et(this,B,An).call(this),m instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(m.constructor._type)}has(x){return a(this,v).has(x)}getAll(){return a(this,v).size>0?(0,i.objectFromMap)(a(this,v)):null}setAll(x){for(const[m,_]of Object.entries(x))this.setValue(m,_)}get size(){return a(this,v).size}resetModified(){a(this,E)&&(lt(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(a(this,v).size===0)return S;const x=new Map,m=new y.MurmurHash3_64,_=[],D=Object.create(null);let O=!1;for(const[k,u]of a(this,v)){const p=u instanceof s.AnnotationEditor?u.serialize(!1,D):u;p&&(x.set(k,p),m.update(`${k}:${JSON.stringify(p)}`),O||(O=!!p.bitmap))}if(O)for(const k of x.values())k.bitmap&&_.push(k.bitmap);return x.size>0?{map:x,hash:m.hexdigest(),transfers:_}:S}}E=new WeakMap,v=new WeakMap,B=new WeakSet,An=function(){a(this,E)||(lt(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},n.AnnotationStorage=J;class T extends J{constructor(m){super();H(this,C,void 0);const{map:_,hash:D,transfers:O}=m.serializable,k=structuredClone(_,O?{transfer:O}:null);lt(this,C,{map:k,hash:D,transfers:O})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,C)}}C=new WeakMap,n.PrintAnnotationStorage=T},(t,n,r)=>{var T,E,v,B,R,C,w,x,m,_,D,O,k,u,p,Be,A,Ue,j,ze,V,We,P,En,ot,Sn,Y,wn,gt,He,_t,Tn;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var i=r(5),s=r(1),y=r(6);const o=class o{constructor(c){H(this,p);H(this,A);H(this,V);H(this,P);H(this,ot);H(this,Y);H(this,gt);H(this,_t);H(this,T,"");H(this,E,!1);H(this,v,null);H(this,B,null);H(this,R,null);H(this,C,!1);H(this,w,null);H(this,x,this.focusin.bind(this));H(this,m,this.focusout.bind(this));H(this,_,!1);H(this,D,!1);H(this,O,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);H(this,k,!1);H(this,u,o._zIndex++);this.constructor===o&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=c.parent,this.id=c.id,this.width=this.height=null,this.pageIndex=c.parent.pageIndex,this.name=c.name,this.div=null,this._uiManager=c.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=c.isCentered,this._structTreeParentId=null;const{rotation:f,rawDims:{pageWidth:g,pageHeight:M,pageX:$,pageY:q}}=this.parent.viewport;this.rotation=f,this.pageRotation=(360+f-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[g,M],this.pageTranslation=[$,q];const[rt,nt]=this.parentDimensions;this.x=c.x/rt,this.y=c.y/nt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(c){const f=new J({id:c.parent.getNextId(),parent:c.parent,uiManager:c._uiManager});f.annotationElementId=c.annotationElementId,f.deleted=!0,f._uiManager.addToAnnotationStorage(f)}static initialize(c,f=null){if(o._l10nPromise||(o._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(M=>[M,c.get(M)]))),f!=null&&f.strings)for(const M of f.strings)o._l10nPromise.set(M,c.get(M));if(o._borderLineWidth!==-1)return;const g=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(g.getPropertyValue("--outline-width"))||0}static updateDefaultParams(c,f){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(c){return!1}static paste(c,f){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,k)}set _isDraggable(c){var f;lt(this,k,c),(f=this.div)==null||f.classList.toggle("draggable",c)}center(){const[c,f]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*f/(c*2),this.y+=this.width*c/(f*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*f/(c*2),this.y-=this.width*c/(f*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(c){this._uiManager.addCommands(c)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,u)}setParent(c){c!==null&&(this.pageIndex=c.pageIndex,this.pageDimensions=c.pageDimensions),this.parent=c}focusin(c){this._focusEventsAllowed&&(a(this,_)?lt(this,_,!1):this.parent.setSelected(this))}focusout(c){var g;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const f=c.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(c.preventDefault(),(g=this.parent)!=null&&g.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(c,f,g,M){const[$,q]=this.parentDimensions;[g,M]=this.screenToPageTranslation(g,M),this.x=(c+g)/$,this.y=(f+M)/q,this.fixAndSetPosition()}translate(c,f){et(this,p,Be).call(this,this.parentDimensions,c,f)}translateInPage(c,f){et(this,p,Be).call(this,this.pageDimensions,c,f),this.div.scrollIntoView({block:"nearest"})}drag(c,f){const[g,M]=this.parentDimensions;if(this.x+=c/g,this.y+=f/M,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ut,y:mt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ut,mt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:$,y:q}=this;const[rt,nt]=et(this,A,Ue).call(this);$+=rt,q+=nt,this.div.style.left=`${(100*$).toFixed(2)}%`,this.div.style.top=`${(100*q).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[c,f]=this.pageDimensions;let{x:g,y:M,width:$,height:q}=this;switch($*=c,q*=f,g*=c,M*=f,this.rotation){case 0:g=Math.max(0,Math.min(c-$,g)),M=Math.max(0,Math.min(f-q,M));break;case 90:g=Math.max(0,Math.min(c-q,g)),M=Math.min(f,Math.max($,M));break;case 180:g=Math.min(c,Math.max($,g)),M=Math.min(f,Math.max(q,M));break;case 270:g=Math.min(c,Math.max(q,g)),M=Math.max(0,Math.min(f-$,M));break}this.x=g/=c,this.y=M/=f;const[rt,nt]=et(this,A,Ue).call(this);g+=rt,M+=nt;const{style:ut}=this.div;ut.left=`${(100*g).toFixed(2)}%`,ut.top=`${(100*M).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(c,f){var g;return et(g=o,j,ze).call(g,c,f,this.parentRotation)}pageTranslationToScreen(c,f){var g;return et(g=o,j,ze).call(g,c,f,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:c,pageDimensions:[f,g]}=this,M=f*c,$=g*c;return s.FeatureTest.isCSSRoundSupported?[Math.round(M),Math.round($)]:[M,$]}setDims(c,f){var $;const[g,M]=this.parentDimensions;this.div.style.width=`${(100*c/g).toFixed(2)}%`,a(this,C)||(this.div.style.height=`${(100*f/M).toFixed(2)}%`),($=a(this,v))==null||$.classList.toggle("small",c<o.SMALL_EDITOR_SIZE||f<o.SMALL_EDITOR_SIZE)}fixDims(){const{style:c}=this.div,{height:f,width:g}=c,M=g.endsWith("%"),$=!a(this,C)&&f.endsWith("%");if(M&&$)return;const[q,rt]=this.parentDimensions;M||(c.width=`${(100*parseFloat(g)/q).toFixed(2)}%`),!a(this,C)&&!$&&(c.height=`${(100*parseFloat(f)/rt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,v))return;const c=lt(this,v,document.createElement("button"));c.className="altText";const f=await o._l10nPromise.get("editor_alt_text_button_label");c.textContent=f,c.setAttribute("aria-label",f),c.tabIndex="0",c.addEventListener("contextmenu",y.noContextMenu),c.addEventListener("pointerdown",g=>g.stopPropagation()),c.addEventListener("click",g=>{g.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),c.addEventListener("keydown",g=>{g.target===c&&g.key==="Enter"&&(g.preventDefault(),this._uiManager.editAltText(this))}),et(this,gt,He).call(this),this.div.append(c),o.SMALL_EDITOR_SIZE||(o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(c.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,T),decorative:a(this,E)}}set altTextData({altText:c,decorative:f}){a(this,T)===c&&a(this,E)===f||(lt(this,T,c),lt(this,E,f),et(this,gt,He).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,x)),this.div.addEventListener("focusout",a(this,m));const[c,f]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*f/c).toFixed(2)}%`,this.div.style.maxHeight=`${(100*c/f).toFixed(2)}%`);const[g,M]=this.getInitialTranslation();return this.translate(g,M),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(c){const{isMac:f}=s.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&f){c.preventDefault();return}lt(this,_,!0),et(this,_t,Tn).call(this,c)}moveInDOM(){var c;(c=this.parent)==null||c.moveEditorInDOM(this)}_setParentAndPosition(c,f,g){c.changeParent(this),this.x=f,this.y=g,this.fixAndSetPosition()}getRect(c,f){const g=this.parentScale,[M,$]=this.pageDimensions,[q,rt]=this.pageTranslation,nt=c/g,ut=f/g,mt=this.x*M,yt=this.y*$,ft=this.width*M,Pt=this.height*$;switch(this.rotation){case 0:return[mt+nt+q,$-yt-ut-Pt+rt,mt+nt+ft+q,$-yt-ut+rt];case 90:return[mt+ut+q,$-yt+nt+rt,mt+ut+Pt+q,$-yt+nt+ft+rt];case 180:return[mt-nt-ft+q,$-yt+ut+rt,mt-nt+q,$-yt+ut+Pt+rt];case 270:return[mt-ut-Pt+q,$-yt-nt-ft+rt,mt-ut+q,$-yt-nt+rt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(c,f){const[g,M,$,q]=c,rt=$-g,nt=q-M;switch(this.rotation){case 0:return[g,f-q,rt,nt];case 90:return[g,f-M,nt,rt];case 180:return[$,f-M,rt,nt];case 270:return[$,f-q,nt,rt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){lt(this,O,!0)}disableEditMode(){lt(this,O,!1)}isInEditMode(){return a(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var c,f;(c=this.div)==null||c.addEventListener("focusin",a(this,x)),(f=this.div)==null||f.addEventListener("focusout",a(this,m))}serialize(c=!1,f=null){(0,s.unreachable)("An editor must be serializable")}static deserialize(c,f,g){const M=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:g});M.rotation=c.rotation;const[$,q]=M.pageDimensions,[rt,nt,ut,mt]=M.getRectInCurrentCoords(c.rect,q);return M.x=rt/$,M.y=nt/q,M.width=ut/$,M.height=mt/q,M}remove(){var c;this.div.removeEventListener("focusin",a(this,x)),this.div.removeEventListener("focusout",a(this,m)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(c=a(this,v))==null||c.remove(),lt(this,v,null),lt(this,B,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(et(this,P,En).call(this),a(this,w).classList.remove("hidden"))}select(){var c;this.makeResizable(),(c=this.div)==null||c.classList.add("selectedEditor")}unselect(){var c,f,g;(c=a(this,w))==null||c.classList.add("hidden"),(f=this.div)==null||f.classList.remove("selectedEditor"),(g=this.div)!=null&&g.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(c,f){}disableEditing(){a(this,v)&&(a(this,v).hidden=!0)}enableEditing(){a(this,v)&&(a(this,v).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,D)}set isEditing(c){lt(this,D,c),this.parent&&(c?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(c,f){lt(this,C,!0);const g=c/f,{style:M}=this.div;M.aspectRatio=g,M.height="auto"}static get MIN_SIZE(){return 16}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakMap,u=new WeakMap,p=new WeakSet,Be=function([c,f],g,M){[g,M]=this.screenToPageTranslation(g,M),this.x+=g/c,this.y+=M/f,this.fixAndSetPosition()},A=new WeakSet,Ue=function(){const[c,f]=this.parentDimensions,{_borderLineWidth:g}=o,M=g/c,$=g/f;switch(this.rotation){case 90:return[-M,$];case 180:return[M,$];case 270:return[M,-$];default:return[-M,-$]}},j=new WeakSet,ze=function(c,f,g){switch(g){case 90:return[f,-c];case 180:return[-c,-f];case 270:return[-f,c];default:return[c,f]}},V=new WeakSet,We=function(c){switch(c){case 90:{const[f,g]=this.pageDimensions;return[0,-f/g,g/f,0]}case 180:return[-1,0,0,-1];case 270:{const[f,g]=this.pageDimensions;return[0,f/g,-g/f,0]}default:return[1,0,0,1]}},P=new WeakSet,En=function(){if(a(this,w))return;lt(this,w,document.createElement("div")),a(this,w).classList.add("resizers");const c=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||c.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const f of c){const g=document.createElement("div");a(this,w).append(g),g.classList.add("resizer",f),g.addEventListener("pointerdown",et(this,ot,Sn).bind(this,f)),g.addEventListener("contextmenu",y.noContextMenu)}this.div.prepend(a(this,w))},ot=new WeakSet,Sn=function(c,f){f.preventDefault();const{isMac:g}=s.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&g)return;const M=et(this,Y,wn).bind(this,c),$=this._isDraggable;this._isDraggable=!1;const q={passive:!0,capture:!0};window.addEventListener("pointermove",M,q);const rt=this.x,nt=this.y,ut=this.width,mt=this.height,yt=this.parent.div.style.cursor,ft=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(f.target).cursor;const Pt=()=>{this._isDraggable=$,window.removeEventListener("pointerup",Pt),window.removeEventListener("blur",Pt),window.removeEventListener("pointermove",M,q),this.parent.div.style.cursor=yt,this.div.style.cursor=ft;const It=this.x,St=this.y,Dt=this.width,U=this.height;It===rt&&St===nt&&Dt===ut&&U===mt||this.addCommands({cmd:()=>{this.width=Dt,this.height=U,this.x=It,this.y=St;const[G,N]=this.parentDimensions;this.setDims(G*Dt,N*U),this.fixAndSetPosition()},undo:()=>{this.width=ut,this.height=mt,this.x=rt,this.y=nt;const[G,N]=this.parentDimensions;this.setDims(G*ut,N*mt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Pt),window.addEventListener("blur",Pt)},Y=new WeakSet,wn=function(c,f){const[g,M]=this.parentDimensions,$=this.x,q=this.y,rt=this.width,nt=this.height,ut=o.MIN_SIZE/g,mt=o.MIN_SIZE/M,yt=At=>Math.round(At*1e4)/1e4,ft=et(this,V,We).call(this,this.rotation),Pt=(At,wt)=>[ft[0]*At+ft[2]*wt,ft[1]*At+ft[3]*wt],It=et(this,V,We).call(this,360-this.rotation),St=(At,wt)=>[It[0]*At+It[2]*wt,It[1]*At+It[3]*wt];let Dt,U,G=!1,N=!1;switch(c){case"topLeft":G=!0,Dt=(At,wt)=>[0,0],U=(At,wt)=>[At,wt];break;case"topMiddle":Dt=(At,wt)=>[At/2,0],U=(At,wt)=>[At/2,wt];break;case"topRight":G=!0,Dt=(At,wt)=>[At,0],U=(At,wt)=>[0,wt];break;case"middleRight":N=!0,Dt=(At,wt)=>[At,wt/2],U=(At,wt)=>[0,wt/2];break;case"bottomRight":G=!0,Dt=(At,wt)=>[At,wt],U=(At,wt)=>[0,0];break;case"bottomMiddle":Dt=(At,wt)=>[At/2,wt],U=(At,wt)=>[At/2,0];break;case"bottomLeft":G=!0,Dt=(At,wt)=>[0,wt],U=(At,wt)=>[At,0];break;case"middleLeft":N=!0,Dt=(At,wt)=>[0,wt/2],U=(At,wt)=>[At,wt/2];break}const K=Dt(rt,nt),pt=U(rt,nt);let bt=Pt(...pt);const Rt=yt($+bt[0]),jt=yt(q+bt[1]);let Bt=1,Ht=1,[Gt,Wt]=this.screenToPageTranslation(f.movementX,f.movementY);if([Gt,Wt]=St(Gt/g,Wt/M),G){const At=Math.hypot(rt,nt);Bt=Ht=Math.max(Math.min(Math.hypot(pt[0]-K[0]-Gt,pt[1]-K[1]-Wt)/At,1/rt,1/nt),ut/rt,mt/nt)}else N?Bt=Math.max(ut,Math.min(1,Math.abs(pt[0]-K[0]-Gt)))/rt:Ht=Math.max(mt,Math.min(1,Math.abs(pt[1]-K[1]-Wt)))/nt;const qt=yt(rt*Bt),vt=yt(nt*Ht);bt=Pt(...U(qt,vt));const at=Rt-bt[0],tt=jt-bt[1];this.width=qt,this.height=vt,this.x=at,this.y=tt,this.setDims(g*qt,M*vt),this.fixAndSetPosition()},gt=new WeakSet,He=async function(){var g;const c=a(this,v);if(!c)return;if(!a(this,T)&&!a(this,E)){c.classList.remove("done"),(g=a(this,B))==null||g.remove();return}o._l10nPromise.get("editor_alt_text_edit_button_label").then(M=>{c.setAttribute("aria-label",M)});let f=a(this,B);if(!f){lt(this,B,f=document.createElement("span")),f.className="tooltip",f.setAttribute("role","tooltip");const M=f.id=`alt-text-tooltip-${this.id}`;c.setAttribute("aria-describedby",M);const $=100;c.addEventListener("mouseenter",()=>{lt(this,R,setTimeout(()=>{lt(this,R,null),a(this,B).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$))}),c.addEventListener("mouseleave",()=>{var q;clearTimeout(a(this,R)),lt(this,R,null),(q=a(this,B))==null||q.classList.remove("show")})}c.classList.add("done"),f.innerText=a(this,E)?await o._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,T),f.parentNode||c.append(f)},_t=new WeakSet,Tn=function(c){if(!this._isDraggable)return;const f=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let g,M;f&&(g={passive:!0,capture:!0},M=q=>{const[rt,nt]=this.screenToPageTranslation(q.movementX,q.movementY);this._uiManager.dragSelectedEditors(rt,nt)},window.addEventListener("pointermove",M,g));const $=()=>{if(window.removeEventListener("pointerup",$),window.removeEventListener("blur",$),f&&window.removeEventListener("pointermove",M,g),lt(this,_,!1),!this._uiManager.endDragSession()){const{isMac:q}=s.FeatureTest.platform;c.ctrlKey&&!q||c.shiftKey||c.metaKey&&q?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",$),window.addEventListener("blur",$)},H(o,j),ne(o,"_borderLineWidth",-1),ne(o,"_colorManager",new i.ColorManager),ne(o,"_zIndex",1),ne(o,"SMALL_EDITOR_SIZE",0);let S=o;n.AnnotationEditor=S;class J extends S{constructor(c){super(c),this.annotationElementId=c.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,n,r)=>{var C,w,x,m,_,Ge,k,u,p,I,A,Cn,b,V,X,P,Z,ot,ct,Y,dt,gt,xt,_t,L,o,d,c,f,g,M,$,q,rt,nt,ut,mt,yt,ft,Pt,It,St,Dt,U,G,N,K,Pn,bt,Ve,jt,qe,Ht,Te,Wt,Xe,vt,Ke,tt,se,wt,ve,te,kn,Ct,Fn,kt,Ye,zt,be,Tt,Je;Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=y,n.opacityToHex=S;var i=r(1),s=r(6);function y(z,l,F){for(const W of F)l.addEventListener(W,z[W].bind(z))}function S(z){return Math.round(Math.min(255,Math.max(1,255*z))).toString(16).padStart(2,"0")}class J{constructor(){H(this,C,0)}getId(){return`${i.AnnotationEditorPrefix}${ge(this,C)._++}`}}C=new WeakMap;const O=class O{constructor(){H(this,_);H(this,w,(0,i.getUuid)());H(this,x,0);H(this,m,null)}static get _isSVGFittingCanvas(){const l='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',W=new OffscreenCanvas(1,3).getContext("2d"),Q=new Image;Q.src=l;const it=Q.decode().then(()=>(W.drawImage(Q,0,0,1,1,0,0,1,3),new Uint32Array(W.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",it)}async getFromFile(l){const{lastModified:F,name:W,size:Q,type:it}=l;return et(this,_,Ge).call(this,`${F}_${W}_${Q}_${it}`,l)}async getFromUrl(l){return et(this,_,Ge).call(this,l,l)}async getFromId(l){a(this,m)||lt(this,m,new Map);const F=a(this,m).get(l);return F?F.bitmap?(F.refCounter+=1,F):F.file?this.getFromFile(F.file):this.getFromUrl(F.url):null}getSvgUrl(l){const F=a(this,m).get(l);return F!=null&&F.isSvg?F.svgUrl:null}deleteId(l){a(this,m)||lt(this,m,new Map);const F=a(this,m).get(l);F&&(F.refCounter-=1,F.refCounter===0&&(F.bitmap=null))}isValidId(l){return l.startsWith(`image_${a(this,w)}_`)}};w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakSet,Ge=async function(l,F){a(this,m)||lt(this,m,new Map);let W=a(this,m).get(l);if(W===null)return null;if(W!=null&&W.bitmap)return W.refCounter+=1,W;try{W||(W={bitmap:null,id:`image_${a(this,w)}_${ge(this,x)._++}`,refCounter:0,isSvg:!1});let Q;if(typeof F=="string"){W.url=F;const it=await fetch(F);if(!it.ok)throw new Error(it.statusText);Q=await it.blob()}else Q=W.file=F;if(Q.type==="image/svg+xml"){const it=O._isSVGFittingCanvas,ht=new FileReader,Et=new Image,Mt=new Promise((Ft,Xt)=>{Et.onload=()=>{W.bitmap=Et,W.isSvg=!0,Ft()},ht.onload=async()=>{const Ot=W.svgUrl=ht.result;Et.src=await it?`${Ot}#svgView(preserveAspectRatio(none))`:Ot},Et.onerror=ht.onerror=Xt});ht.readAsDataURL(Q),await Mt}else W.bitmap=await createImageBitmap(Q);W.refCounter=1}catch(Q){console.error(Q),W=null}return a(this,m).set(l,W),W&&a(this,m).set(W.id,W),W};let T=O;class E{constructor(l=128){H(this,k,[]);H(this,u,!1);H(this,p,void 0);H(this,I,-1);lt(this,p,l)}add({cmd:l,undo:F,mustExec:W,type:Q=NaN,overwriteIfSameType:it=!1,keepUndo:ht=!1}){if(W&&l(),a(this,u))return;const Et={cmd:l,undo:F,type:Q};if(a(this,I)===-1){a(this,k).length>0&&(a(this,k).length=0),lt(this,I,0),a(this,k).push(Et);return}if(it&&a(this,k)[a(this,I)].type===Q){ht&&(Et.undo=a(this,k)[a(this,I)].undo),a(this,k)[a(this,I)]=Et;return}const Mt=a(this,I)+1;Mt===a(this,p)?a(this,k).splice(0,1):(lt(this,I,Mt),Mt<a(this,k).length&&a(this,k).splice(Mt)),a(this,k).push(Et)}undo(){a(this,I)!==-1&&(lt(this,u,!0),a(this,k)[a(this,I)].undo(),lt(this,u,!1),lt(this,I,a(this,I)-1))}redo(){a(this,I)<a(this,k).length-1&&(lt(this,I,a(this,I)+1),lt(this,u,!0),a(this,k)[a(this,I)].cmd(),lt(this,u,!1))}hasSomethingToUndo(){return a(this,I)!==-1}hasSomethingToRedo(){return a(this,I)<a(this,k).length-1}destroy(){lt(this,k,null)}}k=new WeakMap,u=new WeakMap,p=new WeakMap,I=new WeakMap,n.CommandManager=E;class v{constructor(l){H(this,A);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:F}=i.FeatureTest.platform;for(const[W,Q,it={}]of l)for(const ht of W){const Et=ht.startsWith("mac+");F&&Et?(this.callbacks.set(ht.slice(4),{callback:Q,options:it}),this.allKeys.add(ht.split("+").at(-1))):!F&&!Et&&(this.callbacks.set(ht,{callback:Q,options:it}),this.allKeys.add(ht.split("+").at(-1)))}}exec(l,F){if(!this.allKeys.has(F.key))return;const W=this.callbacks.get(et(this,A,Cn).call(this,F));if(!W)return;const{callback:Q,options:{bubbles:it=!1,args:ht=[],checker:Et=null}}=W;Et&&!Et(l,F)||(Q.bind(l,...ht)(),it||(F.stopPropagation(),F.preventDefault()))}}A=new WeakSet,Cn=function(l){l.altKey&&this.buffer.push("alt"),l.ctrlKey&&this.buffer.push("ctrl"),l.metaKey&&this.buffer.push("meta"),l.shiftKey&&this.buffer.push("shift"),this.buffer.push(l.key);const F=this.buffer.join("+");return this.buffer.length=0,F},n.KeyboardManager=v;const j=class j{get _colors(){const l=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(l),(0,i.shadow)(this,"_colors",l)}convert(l){const F=(0,s.getRGB)(l);if(!window.matchMedia("(forced-colors: active)").matches)return F;for(const[W,Q]of this._colors)if(Q.every((it,ht)=>it===F[ht]))return j._colorsMapping.get(W);return F}getHexCode(l){const F=this._colors.get(l);return F?i.Util.makeHexColor(...F):l}};ne(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let B=j;n.ColorManager=B;const Nt=class Nt{constructor(l,F,W,Q,it,ht){H(this,K);H(this,bt);H(this,jt);H(this,Ht);H(this,Wt);H(this,vt);H(this,tt);H(this,wt);H(this,te);H(this,Ct);H(this,kt);H(this,zt);H(this,Tt);H(this,b,null);H(this,V,new Map);H(this,X,new Map);H(this,P,null);H(this,Z,null);H(this,ot,new E);H(this,ct,0);H(this,Y,new Set);H(this,dt,null);H(this,gt,null);H(this,xt,new Set);H(this,_t,null);H(this,L,new J);H(this,o,!1);H(this,d,!1);H(this,c,null);H(this,f,i.AnnotationEditorType.NONE);H(this,g,new Set);H(this,M,null);H(this,$,this.blur.bind(this));H(this,q,this.focus.bind(this));H(this,rt,this.copy.bind(this));H(this,nt,this.cut.bind(this));H(this,ut,this.paste.bind(this));H(this,mt,this.keydown.bind(this));H(this,yt,this.onEditingAction.bind(this));H(this,ft,this.onPageChanging.bind(this));H(this,Pt,this.onScaleChanging.bind(this));H(this,It,this.onRotationChanging.bind(this));H(this,St,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});H(this,Dt,[0,0]);H(this,U,null);H(this,G,null);H(this,N,null);lt(this,G,l),lt(this,N,F),lt(this,P,W),this._eventBus=Q,this._eventBus._on("editingaction",a(this,yt)),this._eventBus._on("pagechanging",a(this,ft)),this._eventBus._on("scalechanging",a(this,Pt)),this._eventBus._on("rotationchanging",a(this,It)),lt(this,Z,it.annotationStorage),lt(this,_t,it.filterFactory),lt(this,M,ht),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const l=Nt.prototype,F=it=>{const{activeElement:ht}=document;return ht&&a(it,G).contains(ht)&&it.hasSomethingToControl()},W=this.TRANSLATE_SMALL,Q=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new v([[["ctrl+a","mac+meta+a"],l.selectAll],[["ctrl+z","mac+meta+z"],l.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],l.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],l.delete],[["Escape","mac+Escape"],l.unselectAll],[["ArrowLeft","mac+ArrowLeft"],l.translateSelectedEditors,{args:[-W,0],checker:F}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],l.translateSelectedEditors,{args:[-Q,0],checker:F}],[["ArrowRight","mac+ArrowRight"],l.translateSelectedEditors,{args:[W,0],checker:F}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],l.translateSelectedEditors,{args:[Q,0],checker:F}],[["ArrowUp","mac+ArrowUp"],l.translateSelectedEditors,{args:[0,-W],checker:F}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],l.translateSelectedEditors,{args:[0,-Q],checker:F}],[["ArrowDown","mac+ArrowDown"],l.translateSelectedEditors,{args:[0,W],checker:F}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],l.translateSelectedEditors,{args:[0,Q],checker:F}]]))}destroy(){et(this,Ht,Te).call(this),et(this,bt,Ve).call(this),this._eventBus._off("editingaction",a(this,yt)),this._eventBus._off("pagechanging",a(this,ft)),this._eventBus._off("scalechanging",a(this,Pt)),this._eventBus._off("rotationchanging",a(this,It));for(const l of a(this,X).values())l.destroy();a(this,X).clear(),a(this,V).clear(),a(this,xt).clear(),lt(this,b,null),a(this,g).clear(),a(this,ot).destroy(),a(this,P).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",a(this,M)?a(this,_t).addHCMFilter(a(this,M).foreground,a(this,M).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(a(this,G)).direction)}editAltText(l){var F;(F=a(this,P))==null||F.editAltText(this,l)}onPageChanging({pageNumber:l}){lt(this,ct,l-1)}focusMainContainer(){a(this,G).focus()}findParent(l,F){for(const W of a(this,X).values()){const{x:Q,y:it,width:ht,height:Et}=W.div.getBoundingClientRect();if(l>=Q&&l<=Q+ht&&F>=it&&F<=it+Et)return W}return null}disableUserSelect(l=!1){a(this,N).classList.toggle("noUserSelect",l)}addShouldRescale(l){a(this,xt).add(l)}removeShouldRescale(l){a(this,xt).delete(l)}onScaleChanging({scale:l}){this.commitOrRemove(),this.viewParameters.realScale=l*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const F of a(this,xt))F.onScaleChanging()}onRotationChanging({pagesRotation:l}){this.commitOrRemove(),this.viewParameters.rotation=l}addToAnnotationStorage(l){!l.isEmpty()&&a(this,Z)&&!a(this,Z).has(l.id)&&a(this,Z).setValue(l.id,l)}blur(){if(!this.hasSelection)return;const{activeElement:l}=document;for(const F of a(this,g))if(F.div.contains(l)){lt(this,c,[F,l]),F._focusEventsAllowed=!1;break}}focus(){if(!a(this,c))return;const[l,F]=a(this,c);lt(this,c,null),F.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),F.focus()}addEditListeners(){et(this,jt,qe).call(this),et(this,Wt,Xe).call(this)}removeEditListeners(){et(this,Ht,Te).call(this),et(this,vt,Ke).call(this)}copy(l){var W;if(l.preventDefault(),(W=a(this,b))==null||W.commitOrRemove(),!this.hasSelection)return;const F=[];for(const Q of a(this,g)){const it=Q.serialize(!0);it&&F.push(it)}F.length!==0&&l.clipboardData.setData("application/pdfjs",JSON.stringify(F))}cut(l){this.copy(l),this.delete()}paste(l){l.preventDefault();const{clipboardData:F}=l;for(const it of F.items)for(const ht of a(this,gt))if(ht.isHandlingMimeForPasting(it.type)){ht.paste(it,this.currentLayer);return}let W=F.getData("application/pdfjs");if(!W)return;try{W=JSON.parse(W)}catch(it){(0,i.warn)(`paste: "${it.message}".`);return}if(!Array.isArray(W))return;this.unselectAll();const Q=this.currentLayer;try{const it=[];for(const Mt of W){const Ft=Q.deserialize(Mt);if(!Ft)return;it.push(Ft)}const ht=()=>{for(const Mt of it)et(this,kt,Ye).call(this,Mt);et(this,Tt,Je).call(this,it)},Et=()=>{for(const Mt of it)Mt.remove()};this.addCommands({cmd:ht,undo:Et,mustExec:!0})}catch(it){(0,i.warn)(`paste: "${it.message}".`)}}keydown(l){var F;(F=this.getActive())!=null&&F.shouldGetKeyboardEvents()||Nt._keyboardManager.exec(this,l)}onEditingAction(l){["undo","redo","delete","selectAll"].includes(l.name)&&this[l.name]()}setEditingState(l){l?(et(this,K,Pn).call(this),et(this,jt,qe).call(this),et(this,Wt,Xe).call(this),et(this,tt,se).call(this,{isEditing:a(this,f)!==i.AnnotationEditorType.NONE,isEmpty:et(this,zt,be).call(this),hasSomethingToUndo:a(this,ot).hasSomethingToUndo(),hasSomethingToRedo:a(this,ot).hasSomethingToRedo(),hasSelectedEditor:!1})):(et(this,bt,Ve).call(this),et(this,Ht,Te).call(this),et(this,vt,Ke).call(this),et(this,tt,se).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(l){if(!a(this,gt)){lt(this,gt,l);for(const F of a(this,gt))et(this,wt,ve).call(this,F.defaultPropertiesToUpdate)}}getId(){return a(this,L).getId()}get currentLayer(){return a(this,X).get(a(this,ct))}getLayer(l){return a(this,X).get(l)}get currentPageIndex(){return a(this,ct)}addLayer(l){a(this,X).set(l.pageIndex,l),a(this,o)?l.enable():l.disable()}removeLayer(l){a(this,X).delete(l.pageIndex)}updateMode(l,F=null){if(a(this,f)!==l){if(lt(this,f,l),l===i.AnnotationEditorType.NONE){this.setEditingState(!1),et(this,Ct,Fn).call(this);return}this.setEditingState(!0),et(this,te,kn).call(this),this.unselectAll();for(const W of a(this,X).values())W.updateMode(l);if(F){for(const W of a(this,V).values())if(W.annotationElementId===F){this.setSelected(W),W.enterInEditMode();break}}}}updateToolbar(l){l!==a(this,f)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:l})}updateParams(l,F){if(a(this,gt)){if(l===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(l);return}for(const W of a(this,g))W.updateParams(l,F);for(const W of a(this,gt))W.updateDefaultParams(l,F)}}enableWaiting(l=!1){if(a(this,d)!==l){lt(this,d,l);for(const F of a(this,X).values())l?F.disableClick():F.enableClick(),F.div.classList.toggle("waiting",l)}}getEditors(l){const F=[];for(const W of a(this,V).values())W.pageIndex===l&&F.push(W);return F}getEditor(l){return a(this,V).get(l)}addEditor(l){a(this,V).set(l.id,l)}removeEditor(l){var F;a(this,V).delete(l.id),this.unselect(l),(!l.annotationElementId||!a(this,Y).has(l.annotationElementId))&&((F=a(this,Z))==null||F.remove(l.id))}addDeletedAnnotationElement(l){a(this,Y).add(l.annotationElementId),l.deleted=!0}isDeletedAnnotationElement(l){return a(this,Y).has(l)}removeDeletedAnnotationElement(l){a(this,Y).delete(l.annotationElementId),l.deleted=!1}setActiveEditor(l){a(this,b)!==l&&(lt(this,b,l),l&&et(this,wt,ve).call(this,l.propertiesToUpdate))}toggleSelected(l){if(a(this,g).has(l)){a(this,g).delete(l),l.unselect(),et(this,tt,se).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,g).add(l),l.select(),et(this,wt,ve).call(this,l.propertiesToUpdate),et(this,tt,se).call(this,{hasSelectedEditor:!0})}setSelected(l){for(const F of a(this,g))F!==l&&F.unselect();a(this,g).clear(),a(this,g).add(l),l.select(),et(this,wt,ve).call(this,l.propertiesToUpdate),et(this,tt,se).call(this,{hasSelectedEditor:!0})}isSelected(l){return a(this,g).has(l)}unselect(l){l.unselect(),a(this,g).delete(l),et(this,tt,se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,g).size!==0}undo(){a(this,ot).undo(),et(this,tt,se).call(this,{hasSomethingToUndo:a(this,ot).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:et(this,zt,be).call(this)})}redo(){a(this,ot).redo(),et(this,tt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ot).hasSomethingToRedo(),isEmpty:et(this,zt,be).call(this)})}addCommands(l){a(this,ot).add(l),et(this,tt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:et(this,zt,be).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const l=[...a(this,g)],F=()=>{for(const Q of l)Q.remove()},W=()=>{for(const Q of l)et(this,kt,Ye).call(this,Q)};this.addCommands({cmd:F,undo:W,mustExec:!0})}commitOrRemove(){var l;(l=a(this,b))==null||l.commitOrRemove()}hasSomethingToControl(){return a(this,b)||this.hasSelection}selectAll(){for(const l of a(this,g))l.commit();et(this,Tt,Je).call(this,a(this,V).values())}unselectAll(){if(a(this,b)){a(this,b).commitOrRemove();return}if(this.hasSelection){for(const l of a(this,g))l.unselect();a(this,g).clear(),et(this,tt,se).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(l,F,W=!1){if(W||this.commitOrRemove(),!this.hasSelection)return;a(this,Dt)[0]+=l,a(this,Dt)[1]+=F;const[Q,it]=a(this,Dt),ht=[...a(this,g)],Et=1e3;a(this,U)&&clearTimeout(a(this,U)),lt(this,U,setTimeout(()=>{lt(this,U,null),a(this,Dt)[0]=a(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const Mt of ht)a(this,V).has(Mt.id)&&Mt.translateInPage(Q,it)},undo:()=>{for(const Mt of ht)a(this,V).has(Mt.id)&&Mt.translateInPage(-Q,-it)},mustExec:!1})},Et));for(const Mt of ht)Mt.translateInPage(l,F)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),lt(this,dt,new Map);for(const l of a(this,g))a(this,dt).set(l,{savedX:l.x,savedY:l.y,savedPageIndex:l.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,dt))return!1;this.disableUserSelect(!1);const l=a(this,dt);lt(this,dt,null);let F=!1;for(const[{x:Q,y:it,pageIndex:ht},Et]of l)Et.newX=Q,Et.newY=it,Et.newPageIndex=ht,F||(F=Q!==Et.savedX||it!==Et.savedY||ht!==Et.savedPageIndex);if(!F)return!1;const W=(Q,it,ht,Et)=>{if(a(this,V).has(Q.id)){const Mt=a(this,X).get(Et);Mt?Q._setParentAndPosition(Mt,it,ht):(Q.pageIndex=Et,Q.x=it,Q.y=ht)}};return this.addCommands({cmd:()=>{for(const[Q,{newX:it,newY:ht,newPageIndex:Et}]of l)W(Q,it,ht,Et)},undo:()=>{for(const[Q,{savedX:it,savedY:ht,savedPageIndex:Et}]of l)W(Q,it,ht,Et)},mustExec:!0}),!0}dragSelectedEditors(l,F){if(a(this,dt))for(const W of a(this,dt).keys())W.drag(l,F)}rebuild(l){if(l.parent===null){const F=this.getLayer(l.pageIndex);F?(F.changeParent(l),F.addOrRebuild(l)):(this.addEditor(l),this.addToAnnotationStorage(l),l.rebuild())}else l.parent.addOrRebuild(l)}isActive(l){return a(this,b)===l}getActive(){return a(this,b)}getMode(){return a(this,f)}get imageManager(){return(0,i.shadow)(this,"imageManager",new T)}};b=new WeakMap,V=new WeakMap,X=new WeakMap,P=new WeakMap,Z=new WeakMap,ot=new WeakMap,ct=new WeakMap,Y=new WeakMap,dt=new WeakMap,gt=new WeakMap,xt=new WeakMap,_t=new WeakMap,L=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,f=new WeakMap,g=new WeakMap,M=new WeakMap,$=new WeakMap,q=new WeakMap,rt=new WeakMap,nt=new WeakMap,ut=new WeakMap,mt=new WeakMap,yt=new WeakMap,ft=new WeakMap,Pt=new WeakMap,It=new WeakMap,St=new WeakMap,Dt=new WeakMap,U=new WeakMap,G=new WeakMap,N=new WeakMap,K=new WeakSet,Pn=function(){window.addEventListener("focus",a(this,q)),window.addEventListener("blur",a(this,$))},bt=new WeakSet,Ve=function(){window.removeEventListener("focus",a(this,q)),window.removeEventListener("blur",a(this,$))},jt=new WeakSet,qe=function(){window.addEventListener("keydown",a(this,mt),{capture:!0})},Ht=new WeakSet,Te=function(){window.removeEventListener("keydown",a(this,mt),{capture:!0})},Wt=new WeakSet,Xe=function(){document.addEventListener("copy",a(this,rt)),document.addEventListener("cut",a(this,nt)),document.addEventListener("paste",a(this,ut))},vt=new WeakSet,Ke=function(){document.removeEventListener("copy",a(this,rt)),document.removeEventListener("cut",a(this,nt)),document.removeEventListener("paste",a(this,ut))},tt=new WeakSet,se=function(l){Object.entries(l).some(([W,Q])=>a(this,St)[W]!==Q)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,St),l)})},wt=new WeakSet,ve=function(l){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:l})},te=new WeakSet,kn=function(){if(!a(this,o)){lt(this,o,!0);for(const l of a(this,X).values())l.enable()}},Ct=new WeakSet,Fn=function(){if(this.unselectAll(),a(this,o)){lt(this,o,!1);for(const l of a(this,X).values())l.disable()}},kt=new WeakSet,Ye=function(l){const F=a(this,X).get(l.pageIndex);F?F.addOrRebuild(l):this.addEditor(l)},zt=new WeakSet,be=function(){if(a(this,V).size===0)return!0;if(a(this,V).size===1)for(const l of a(this,V).values())return l.isEmpty();return!1},Tt=new WeakSet,Je=function(l){a(this,g).clear();for(const F of l)F.isEmpty()||(a(this,g).add(F),F.select());et(this,tt,se).call(this,{hasSelectedEditor:!0})},ne(Nt,"TRANSLATE_SMALL",1),ne(Nt,"TRANSLATE_BIG",10);let R=Nt;n.AnnotationEditorUIManager=R},(t,n,r)=>{var ct,Y,dt,gt,xt,_t,L,o,d,c,f,g,he,$,pe,rt,Qe,ut,Ce,yt,Pe,Pt,ye,St,_e;Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.deprecated=I,n.getColorValues=V,n.getCurrentTransform=X,n.getCurrentTransformInverse=P,n.getFilenameFromUrl=_,n.getPdfFilenameFromUrl=D,n.getRGB=b,n.getXfaPageViewport=j,n.isDataScheme=x,n.isPdfFile=m,n.isValidFetchUrl=k,n.loadScript=p,n.noContextMenu=u,n.setLayerDimensions=Z;var i=r(7),s=r(1);const y="http://www.w3.org/2000/svg",ot=class ot{};ne(ot,"CSS",96),ne(ot,"PDF",72),ne(ot,"PDF_TO_CSS_UNITS",ot.CSS/ot.PDF);let S=ot;n.PixelsPerInch=S;class J extends i.BaseFilterFactory{constructor({docId:N,ownerDocument:K=globalThis.document}={}){super();H(this,g);H(this,$);H(this,rt);H(this,ut);H(this,yt);H(this,Pt);H(this,St);H(this,ct,void 0);H(this,Y,void 0);H(this,dt,void 0);H(this,gt,void 0);H(this,xt,void 0);H(this,_t,void 0);H(this,L,void 0);H(this,o,void 0);H(this,d,void 0);H(this,c,void 0);H(this,f,0);lt(this,dt,N),lt(this,gt,K)}addFilter(N){if(!N)return"none";let K=a(this,g,he).get(N);if(K)return K;let pt,bt,Rt,jt;if(N.length===1){const Wt=N[0],qt=new Array(256);for(let vt=0;vt<256;vt++)qt[vt]=Wt[vt]/255;jt=pt=bt=Rt=qt.join(",")}else{const[Wt,qt,vt]=N,at=new Array(256),tt=new Array(256),At=new Array(256);for(let wt=0;wt<256;wt++)at[wt]=Wt[wt]/255,tt[wt]=qt[wt]/255,At[wt]=vt[wt]/255;pt=at.join(","),bt=tt.join(","),Rt=At.join(","),jt=`${pt}${bt}${Rt}`}if(K=a(this,g,he).get(jt),K)return a(this,g,he).set(N,K),K;const Bt=`g_${a(this,dt)}_transfer_map_${ge(this,f)._++}`,Ht=`url(#${Bt})`;a(this,g,he).set(N,Ht),a(this,g,he).set(jt,Ht);const Gt=et(this,ut,Ce).call(this,Bt);return et(this,Pt,ye).call(this,pt,bt,Rt,Gt),Ht}addHCMFilter(N,K){var qt;const pt=`${N}-${K}`;if(a(this,_t)===pt)return a(this,L);if(lt(this,_t,pt),lt(this,L,"none"),(qt=a(this,xt))==null||qt.remove(),!N||!K)return a(this,L);const bt=et(this,St,_e).call(this,N);N=s.Util.makeHexColor(...bt);const Rt=et(this,St,_e).call(this,K);if(K=s.Util.makeHexColor(...Rt),a(this,$,pe).style.color="",N==="#000000"&&K==="#ffffff"||N===K)return a(this,L);const jt=new Array(256);for(let vt=0;vt<=255;vt++){const at=vt/255;jt[vt]=at<=.03928?at/12.92:((at+.055)/1.055)**2.4}const Bt=jt.join(","),Ht=`g_${a(this,dt)}_hcm_filter`,Gt=lt(this,o,et(this,ut,Ce).call(this,Ht));et(this,Pt,ye).call(this,Bt,Bt,Bt,Gt),et(this,rt,Qe).call(this,Gt);const Wt=(vt,at)=>{const tt=bt[vt]/255,At=Rt[vt]/255,wt=new Array(at+1);for(let ee=0;ee<=at;ee++)wt[ee]=tt+ee/at*(At-tt);return wt.join(",")};return et(this,Pt,ye).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Gt),lt(this,L,`url(#${Ht})`),a(this,L)}addHighlightHCMFilter(N,K,pt,bt){var At;const Rt=`${N}-${K}-${pt}-${bt}`;if(a(this,d)===Rt)return a(this,c);if(lt(this,d,Rt),lt(this,c,"none"),(At=a(this,o))==null||At.remove(),!N||!K)return a(this,c);const[jt,Bt]=[N,K].map(et(this,St,_e).bind(this));let Ht=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),Gt=Math.round(.2126*Bt[0]+.7152*Bt[1]+.0722*Bt[2]),[Wt,qt]=[pt,bt].map(et(this,St,_e).bind(this));Gt<Ht&&([Ht,Gt,Wt,qt]=[Gt,Ht,qt,Wt]),a(this,$,pe).style.color="";const vt=(wt,ee,te)=>{const st=new Array(256),Ct=(Gt-Ht)/te,$t=wt/255,kt=(ee-wt)/(255*te);let Ut=0;for(let zt=0;zt<=te;zt++){const Zt=Math.round(Ht+zt*Ct),Tt=$t+zt*kt;for(let Yt=Ut;Yt<=Zt;Yt++)st[Yt]=Tt;Ut=Zt+1}for(let zt=Ut;zt<256;zt++)st[zt]=st[Ut-1];return st.join(",")},at=`g_${a(this,dt)}_hcm_highlight_filter`,tt=lt(this,o,et(this,ut,Ce).call(this,at));return et(this,rt,Qe).call(this,tt),et(this,Pt,ye).call(this,vt(Wt[0],qt[0],5),vt(Wt[1],qt[1],5),vt(Wt[2],qt[2],5),tt),lt(this,c,`url(#${at})`),a(this,c)}destroy(N=!1){N&&(a(this,L)||a(this,c))||(a(this,Y)&&(a(this,Y).parentNode.parentNode.remove(),lt(this,Y,null)),a(this,ct)&&(a(this,ct).clear(),lt(this,ct,null)),lt(this,f,0))}}ct=new WeakMap,Y=new WeakMap,dt=new WeakMap,gt=new WeakMap,xt=new WeakMap,_t=new WeakMap,L=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,f=new WeakMap,g=new WeakSet,he=function(){return a(this,ct)||lt(this,ct,new Map)},$=new WeakSet,pe=function(){if(!a(this,Y)){const N=a(this,gt).createElement("div"),{style:K}=N;K.visibility="hidden",K.contain="strict",K.width=K.height=0,K.position="absolute",K.top=K.left=0,K.zIndex=-1;const pt=a(this,gt).createElementNS(y,"svg");pt.setAttribute("width",0),pt.setAttribute("height",0),lt(this,Y,a(this,gt).createElementNS(y,"defs")),N.append(pt),pt.append(a(this,Y)),a(this,gt).body.append(N)}return a(this,Y)},rt=new WeakSet,Qe=function(N){const K=a(this,gt).createElementNS(y,"feColorMatrix");K.setAttribute("type","matrix"),K.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(K)},ut=new WeakSet,Ce=function(N){const K=a(this,gt).createElementNS(y,"filter");return K.setAttribute("color-interpolation-filters","sRGB"),K.setAttribute("id",N),a(this,$,pe).append(K),K},yt=new WeakSet,Pe=function(N,K,pt){const bt=a(this,gt).createElementNS(y,K);bt.setAttribute("type","discrete"),bt.setAttribute("tableValues",pt),N.append(bt)},Pt=new WeakSet,ye=function(N,K,pt,bt){const Rt=a(this,gt).createElementNS(y,"feComponentTransfer");bt.append(Rt),et(this,yt,Pe).call(this,Rt,"feFuncR",N),et(this,yt,Pe).call(this,Rt,"feFuncG",K),et(this,yt,Pe).call(this,Rt,"feFuncB",pt)},St=new WeakSet,_e=function(N){return a(this,$,pe).style.color=N,b(getComputedStyle(a(this,$,pe)).getPropertyValue("color"))},n.DOMFilterFactory=J;class T extends i.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,N){const K=this._document.createElement("canvas");return K.width=G,K.height=N,K}}n.DOMCanvasFactory=T;async function E(U,G=!1){if(k(U,document.baseURI)){const N=await fetch(U);if(!N.ok)throw new Error(N.statusText);return G?new Uint8Array(await N.arrayBuffer()):(0,s.stringToBytes)(await N.text())}return new Promise((N,K)=>{const pt=new XMLHttpRequest;pt.open("GET",U,!0),G&&(pt.responseType="arraybuffer"),pt.onreadystatechange=()=>{if(pt.readyState===XMLHttpRequest.DONE){if(pt.status===200||pt.status===0){let bt;if(G&&pt.response?bt=new Uint8Array(pt.response):!G&&pt.responseText&&(bt=(0,s.stringToBytes)(pt.responseText)),bt){N(bt);return}}K(new Error(pt.statusText))}},pt.send(null)})}class v extends i.BaseCMapReaderFactory{_fetchData(G,N){return E(G,this.isCompressed).then(K=>({cMapData:K,compressionType:N}))}}n.DOMCMapReaderFactory=v;class B extends i.BaseStandardFontDataFactory{_fetchData(G){return E(G,!0)}}n.DOMStandardFontDataFactory=B;class R extends i.BaseSVGFactory{_createSVG(G){return document.createElementNS(y,G)}}n.DOMSVGFactory=R;class C{constructor({viewBox:G,scale:N,rotation:K,offsetX:pt=0,offsetY:bt=0,dontFlip:Rt=!1}){this.viewBox=G,this.scale=N,this.rotation=K,this.offsetX=pt,this.offsetY=bt;const jt=(G[2]+G[0])/2,Bt=(G[3]+G[1])/2;let Ht,Gt,Wt,qt;switch(K%=360,K<0&&(K+=360),K){case 180:Ht=-1,Gt=0,Wt=0,qt=1;break;case 90:Ht=0,Gt=1,Wt=1,qt=0;break;case 270:Ht=0,Gt=-1,Wt=-1,qt=0;break;case 0:Ht=1,Gt=0,Wt=0,qt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Rt&&(Wt=-Wt,qt=-qt);let vt,at,tt,At;Ht===0?(vt=Math.abs(Bt-G[1])*N+pt,at=Math.abs(jt-G[0])*N+bt,tt=(G[3]-G[1])*N,At=(G[2]-G[0])*N):(vt=Math.abs(jt-G[0])*N+pt,at=Math.abs(Bt-G[1])*N+bt,tt=(G[2]-G[0])*N,At=(G[3]-G[1])*N),this.transform=[Ht*N,Gt*N,Wt*N,qt*N,vt-Ht*N*jt-Wt*N*Bt,at-Gt*N*jt-qt*N*Bt],this.width=tt,this.height=At}get rawDims(){const{viewBox:G}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:G[2]-G[0],pageHeight:G[3]-G[1],pageX:G[0],pageY:G[1]})}clone({scale:G=this.scale,rotation:N=this.rotation,offsetX:K=this.offsetX,offsetY:pt=this.offsetY,dontFlip:bt=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:G,rotation:N,offsetX:K,offsetY:pt,dontFlip:bt})}convertToViewportPoint(G,N){return s.Util.applyTransform([G,N],this.transform)}convertToViewportRectangle(G){const N=s.Util.applyTransform([G[0],G[1]],this.transform),K=s.Util.applyTransform([G[2],G[3]],this.transform);return[N[0],N[1],K[0],K[1]]}convertToPdfPoint(G,N){return s.Util.applyInverseTransform([G,N],this.transform)}}n.PageViewport=C;class w extends s.BaseException{constructor(G,N=0){super(G,"RenderingCancelledException"),this.extraDelay=N}}n.RenderingCancelledException=w;function x(U){const G=U.length;let N=0;for(;N<G&&U[N].trim()==="";)N++;return U.substring(N,N+5).toLowerCase()==="data:"}function m(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function _(U,G=!1){return G||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function D(U,G="document.pdf"){if(typeof U!="string")return G;if(x(U))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,K=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,pt=N.exec(U);let bt=K.exec(pt[1])||K.exec(pt[2])||K.exec(pt[3]);if(bt&&(bt=bt[0],bt.includes("%")))try{bt=K.exec(decodeURIComponent(bt))[0]}catch{}return bt||G}class O{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(G){G in this.started&&(0,s.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,s.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let N=0;for(const{name:K}of this.times)N=Math.max(K.length,N);for(const{name:K,start:pt,end:bt}of this.times)G.push(`${K.padEnd(N)} ${bt-pt}ms
`);return G.join("")}}n.StatTimer=O;function k(U,G){try{const{protocol:N}=G?new URL(U,G):new URL(U);return N==="http:"||N==="https:"}catch{return!1}}function u(U){U.preventDefault()}function p(U,G=!1){return new Promise((N,K)=>{const pt=document.createElement("script");pt.src=U,pt.onload=function(bt){G&&pt.remove(),N(bt)},pt.onerror=function(){K(new Error(`Cannot load script at: ${pt.src}`))},(document.head||document.documentElement).append(pt)})}function I(U){console.log("Deprecated API usage: "+U)}let A;class h{static toDateObject(G){if(!G||typeof G!="string")return null;A||(A=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const N=A.exec(G);if(!N)return null;const K=parseInt(N[1],10);let pt=parseInt(N[2],10);pt=pt>=1&&pt<=12?pt-1:0;let bt=parseInt(N[3],10);bt=bt>=1&&bt<=31?bt:1;let Rt=parseInt(N[4],10);Rt=Rt>=0&&Rt<=23?Rt:0;let jt=parseInt(N[5],10);jt=jt>=0&&jt<=59?jt:0;let Bt=parseInt(N[6],10);Bt=Bt>=0&&Bt<=59?Bt:0;const Ht=N[7]||"Z";let Gt=parseInt(N[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Wt=parseInt(N[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,Ht==="-"?(Rt+=Gt,jt+=Wt):Ht==="+"&&(Rt-=Gt,jt-=Wt),new Date(Date.UTC(K,pt,bt,Rt,jt,Bt))}}n.PDFDateString=h;function j(U,{scale:G=1,rotation:N=0}){const{width:K,height:pt}=U.attributes.style,bt=[0,0,parseInt(K),parseInt(pt)];return new C({viewBox:bt,scale:G,rotation:N})}function b(U){if(U.startsWith("#")){const G=parseInt(U.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(G=>parseInt(G)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,s.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function V(U){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const N of U.keys()){G.style.color=N;const K=window.getComputedStyle(G).color;U.set(N,b(K))}G.remove()}function X(U){const{a:G,b:N,c:K,d:pt,e:bt,f:Rt}=U.getTransform();return[G,N,K,pt,bt,Rt]}function P(U){const{a:G,b:N,c:K,d:pt,e:bt,f:Rt}=U.getTransform().invertSelf();return[G,N,K,pt,bt,Rt]}function Z(U,G,N=!1,K=!0){if(G instanceof C){const{pageWidth:pt,pageHeight:bt}=G.rawDims,{style:Rt}=U,jt=s.FeatureTest.isCSSRoundSupported,Bt=`var(--scale-factor) * ${pt}px`,Ht=`var(--scale-factor) * ${bt}px`,Gt=jt?`round(${Bt}, 1px)`:`calc(${Bt})`,Wt=jt?`round(${Ht}, 1px)`:`calc(${Ht})`;!N||G.rotation%180===0?(Rt.width=Gt,Rt.height=Wt):(Rt.width=Wt,Rt.height=Gt)}K&&U.setAttribute("data-main-rotation",G.rotation)}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var i=r(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(v){return"none"}addHCMFilter(v,B){return"none"}addHighlightHCMFilter(v,B,R,C){return"none"}destroy(v=!1){}}n.BaseFilterFactory=s;class y{constructor(){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,B){if(v<=0||B<=0)throw new Error("Invalid canvas size");const R=this._createCanvas(v,B);return{canvas:R,context:R.getContext("2d")}}reset(v,B,R){if(!v.canvas)throw new Error("Canvas is not specified");if(B<=0||R<=0)throw new Error("Invalid canvas size");v.canvas.width=B,v.canvas.height=R}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,B){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=y;class S{constructor({baseUrl:v=null,isCompressed:B=!0}){this.constructor===S&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=B}async fetch({name:v}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const B=this.baseUrl+v+(this.isCompressed?".bcmap":""),R=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(B,R).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${B}`)})}_fetchData(v,B){(0,i.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=S;class J{constructor({baseUrl:v=null}){this.constructor===J&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch({filename:v}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const B=`${this.baseUrl}${v}`;return this._fetchData(B).catch(R=>{throw new Error(`Unable to load font data at: ${B}`)})}_fetchData(v){(0,i.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=J;class T{constructor(){this.constructor===T&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,B,R=!1){if(v<=0||B<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),R||(C.setAttribute("width",`${v}px`),C.setAttribute("height",`${B}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${v} ${B}`),C}createElement(v){if(typeof v!="string")throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,i.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=T},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var i=r(1);const s=3285377520,y=4294901760,S=65535;class J{constructor(E){this.h1=E?E&4294967295:s,this.h2=E?E&4294967295:s}update(E){let v,B;if(typeof E=="string"){v=new Uint8Array(E.length*2),B=0;for(let I=0,A=E.length;I<A;I++){const h=E.charCodeAt(I);h<=255?v[B++]=h:(v[B++]=h>>>8,v[B++]=h&255)}}else if((0,i.isArrayBuffer)(E))v=E.slice(),B=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const R=B>>2,C=B-R*4,w=new Uint32Array(v.buffer,0,R);let x=0,m=0,_=this.h1,D=this.h2;const O=3432918353,k=461845907,u=O&S,p=k&S;for(let I=0;I<R;I++)I&1?(x=w[I],x=x*O&y|x*u&S,x=x<<15|x>>>17,x=x*k&y|x*p&S,_^=x,_=_<<13|_>>>19,_=_*5+3864292196):(m=w[I],m=m*O&y|m*u&S,m=m<<15|m>>>17,m=m*k&y|m*p&S,D^=m,D=D<<13|D>>>19,D=D*5+3864292196);switch(x=0,C){case 3:x^=v[R*4+2]<<16;case 2:x^=v[R*4+1]<<8;case 1:x^=v[R*4],x=x*O&y|x*u&S,x=x<<15|x>>>17,x=x*k&y|x*p&S,R&1?_^=x:D^=x}this.h1=_,this.h2=D}hexdigest(){let E=this.h1,v=this.h2;return E^=v>>>1,E=E*3981806797&y|E*36045&S,v=v*4283543511&y|((v<<16|E>>>16)*2950163797&y)>>>16,E^=v>>>1,E=E*444984403&y|E*60499&S,v=v*3301882366&y|((v<<16|E>>>16)*3120437893&y)>>>16,E^=v>>>1,(E>>>0).toString(16).padStart(8,"0")+(v>>>0).toString(16).padStart(8,"0")}}n.MurmurHash3_64=J},(t,n,r)=>{var S;Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var i=r(1);class s{constructor({ownerDocument:T=globalThis.document,styleElement:E=null}){H(this,S,new Set);this._document=T,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.add(T),this._document.fonts.add(T)}removeNativeFontFace(T){this.nativeFontFaces.delete(T),this._document.fonts.delete(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(T,E.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.clear(),a(this,S).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(T){if(!(!T||a(this,S).has(T.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:E,src:v,style:B}=T,R=new FontFace(E,v,B);this.addNativeFontFace(R);try{await R.load(),a(this,S).add(E)}catch{(0,i.warn)(`Cannot load system font: ${T.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(R)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(T){if(T.attached||T.missingFile&&!T.systemFontInfo)return;if(T.attached=!0,T.systemFontInfo){await this.loadSystemFont(T.systemFontInfo);return}if(this.isFontLoadingAPISupported){const v=T.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(B){throw(0,i.warn)(`Failed to load font '${v.family}': '${B}'.`),T.disableFontFace=!0,B}}return}const E=T.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const B=this._queueLoadingCallback(v);this._prepareFontLoadEvent(T,B)})}}get isFontLoadingAPISupported(){var E;const T=!!((E=this._document)!=null&&E.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function E(){for((0,i.assert)(!B.done,"completeRequest() cannot be called twice."),B.done=!0;v.length>0&&v[0].done;){const R=v.shift();setTimeout(R.callback,0)}}const{loadingRequests:v}=this,B={done:!1,complete:E,callback:T};return v.push(B),B}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,E){function v(b,V){return b.charCodeAt(V)<<24|b.charCodeAt(V+1)<<16|b.charCodeAt(V+2)<<8|b.charCodeAt(V+3)&255}function B(b,V,X,P){const Z=b.substring(0,V),ot=b.substring(V+X);return Z+P+ot}let R,C;const w=this._document.createElement("canvas");w.width=1,w.height=1;const x=w.getContext("2d");let m=0;function _(b,V){if(++m>30){(0,i.warn)("Load test font never loaded."),V();return}if(x.font="30px "+b,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(_.bind(null,b,V))}const D=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=B(O,976,D.length,D);const u=16,p=1482184792;let I=v(O,u);for(R=0,C=D.length-3;R<C;R+=4)I=I-p+v(D,R)|0;R<D.length&&(I=I-p+v(D+"XXX",R)|0),O=B(O,u,4,(0,i.string32)(I));const A=`url(data:font/opentype;base64,${btoa(O)});`,h=`@font-face {font-family:"${D}";src:${A}}`;this.insertRule(h);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const b of[T.loadedName,D]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=b,j.append(V)}this._document.body.append(j),_(D,()=>{j.remove(),E.complete()})}}S=new WeakMap,n.FontLoader=s;class y{constructor(T,{isEvalSupported:E=!0,disableFontFace:v=!1,ignoreErrors:B=!1,inspectFont:R=null}){this.compiledGlyphs=Object.create(null);for(const C in T)this[C]=T[C];this.isEvalSupported=E!==!1,this.disableFontFace=v===!0,this.ignoreErrors=B===!0,this._inspectFont=R}createNativeFontFace(){var E;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return(E=this._inspectFont)==null||E.call(this,this),T}createFontFaceRule(){var B;if(!this.data||this.disableFontFace)return null;const T=(0,i.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(T)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${E}}`}return(B=this._inspectFont)==null||B.call(this,this,E),v}getPathGenerator(T,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let v;try{v=T.get(this.loadedName+"_path_"+E)}catch(B){if(!this.ignoreErrors)throw B;return(0,i.warn)(`getPathGenerator - ignoring character: "${B}".`),this.compiledGlyphs[E]=function(R,C){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const B=[];for(const R of v){const C=R.args!==void 0?R.args.join(","):"";B.push("c.",R.cmd,"(",C,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",B.join(""))}return this.compiledGlyphs[E]=function(B,R){for(const C of v)C.cmd==="scale"&&(C.args=[R,-R]),B[C.cmd].apply(B,C.args)}}}n.FontFaceObject=y},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var i=r(7);r(1);const s=function(E){return new Promise((v,B)=>{require$$5.readFile(E,(C,w)=>{if(C||!w){B(new Error(C));return}v(new Uint8Array(w))})})};class y extends i.BaseFilterFactory{}n.NodeFilterFactory=y;class S extends i.BaseCanvasFactory{_createCanvas(v,B){return require$$5.createCanvas(v,B)}}n.NodeCanvasFactory=S;class J extends i.BaseCMapReaderFactory{_fetchData(v,B){return s(v).then(R=>({cMapData:R,compressionType:B}))}}n.NodeCMapReaderFactory=J;class T extends i.BaseStandardFontDataFactory{_fetchData(v){return s(v)}}n.NodeStandardFontDataFactory=T},(t,n,r)=>{var Y,tn,gt,en;Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var i=r(1),s=r(6),y=r(12),S=r(13);const J=16,T=100,E=4096,v=15,B=10,R=1e3,C=16;function w(L,o){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){o.save(),this.__originalSave()},L.restore=function(){o.restore(),this.__originalRestore()},L.translate=function(c,f){o.translate(c,f),this.__originalTranslate(c,f)},L.scale=function(c,f){o.scale(c,f),this.__originalScale(c,f)},L.transform=function(c,f,g,M,$,q){o.transform(c,f,g,M,$,q),this.__originalTransform(c,f,g,M,$,q)},L.setTransform=function(c,f,g,M,$,q){o.setTransform(c,f,g,M,$,q),this.__originalSetTransform(c,f,g,M,$,q)},L.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},L.rotate=function(c){o.rotate(c),this.__originalRotate(c)},L.clip=function(c){o.clip(c),this.__originalClip(c)},L.moveTo=function(d,c){o.moveTo(d,c),this.__originalMoveTo(d,c)},L.lineTo=function(d,c){o.lineTo(d,c),this.__originalLineTo(d,c)},L.bezierCurveTo=function(d,c,f,g,M,$){o.bezierCurveTo(d,c,f,g,M,$),this.__originalBezierCurveTo(d,c,f,g,M,$)},L.rect=function(d,c,f,g){o.rect(d,c,f,g),this.__originalRect(d,c,f,g)},L.closePath=function(){o.closePath(),this.__originalClosePath()},L.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}class x{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,d,c){let f;return this.cache[o]!==void 0?(f=this.cache[o],this.canvasFactory.reset(f,d,c)):(f=this.canvasFactory.create(d,c),this.cache[o]=f),f}delete(o){delete this.cache[o]}clear(){for(const o in this.cache){const d=this.cache[o];this.canvasFactory.destroy(d),delete this.cache[o]}}}function m(L,o,d,c,f,g,M,$,q,rt){const[nt,ut,mt,yt,ft,Pt]=(0,s.getCurrentTransform)(L);if(ut===0&&mt===0){const Dt=M*nt+ft,U=Math.round(Dt),G=$*yt+Pt,N=Math.round(G),K=(M+q)*nt+ft,pt=Math.abs(Math.round(K)-U)||1,bt=($+rt)*yt+Pt,Rt=Math.abs(Math.round(bt)-N)||1;return L.setTransform(Math.sign(nt),0,0,Math.sign(yt),U,N),L.drawImage(o,d,c,f,g,0,0,pt,Rt),L.setTransform(nt,ut,mt,yt,ft,Pt),[pt,Rt]}if(nt===0&&yt===0){const Dt=$*mt+ft,U=Math.round(Dt),G=M*ut+Pt,N=Math.round(G),K=($+rt)*mt+ft,pt=Math.abs(Math.round(K)-U)||1,bt=(M+q)*ut+Pt,Rt=Math.abs(Math.round(bt)-N)||1;return L.setTransform(0,Math.sign(ut),Math.sign(mt),0,U,N),L.drawImage(o,d,c,f,g,0,0,Rt,pt),L.setTransform(nt,ut,mt,yt,ft,Pt),[Rt,pt]}L.drawImage(o,d,c,f,g,M,$,q,rt);const It=Math.hypot(nt,ut),St=Math.hypot(mt,yt);return[It*q,St*rt]}function _(L){const{width:o,height:d}=L;if(o>R||d>R)return null;const c=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),g=o+1;let M=new Uint8Array(g*(d+1)),$,q,rt;const nt=o+7&-8;let ut=new Uint8Array(nt*d),mt=0;for(const St of L.data){let Dt=128;for(;Dt>0;)ut[mt++]=St&Dt?0:255,Dt>>=1}let yt=0;for(mt=0,ut[mt]!==0&&(M[0]=1,++yt),q=1;q<o;q++)ut[mt]!==ut[mt+1]&&(M[q]=ut[mt]?2:1,++yt),mt++;for(ut[mt]!==0&&(M[q]=2,++yt),$=1;$<d;$++){mt=$*nt,rt=$*g,ut[mt-nt]!==ut[mt]&&(M[rt]=ut[mt]?1:8,++yt);let St=(ut[mt]?4:0)+(ut[mt-nt]?8:0);for(q=1;q<o;q++)St=(St>>2)+(ut[mt+1]?4:0)+(ut[mt-nt+1]?8:0),f[St]&&(M[rt+q]=f[St],++yt),mt++;if(ut[mt-nt]!==ut[mt]&&(M[rt+q]=ut[mt]?2:4,++yt),yt>c)return null}for(mt=nt*(d-1),rt=$*g,ut[mt]!==0&&(M[rt]=8,++yt),q=1;q<o;q++)ut[mt]!==ut[mt+1]&&(M[rt+q]=ut[mt]?4:8,++yt),mt++;if(ut[mt]!==0&&(M[rt+q]=4,++yt),yt>c)return null;const ft=new Int32Array([0,g,-1,0,-g,0,0,0,1]),Pt=new Path2D;for($=0;yt&&$<=d;$++){let St=$*g;const Dt=St+o;for(;St<Dt&&!M[St];)St++;if(St===Dt)continue;Pt.moveTo(St%g,$);const U=St;let G=M[St];do{const N=ft[G];do St+=N;while(!M[St]);const K=M[St];K!==5&&K!==10?(G=K,M[St]=0):(G=K&51*G>>4,M[St]&=G>>2|G<<2),Pt.lineTo(St%g,St/g|0),M[St]||--yt}while(U!==St);--$}return ut=null,M=null,function(St){St.save(),St.scale(1/o,-1/d),St.translate(0,-d),St.fill(Pt),St.beginPath(),St.restore()}}class D{constructor(o,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,o,d])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,d){this.x=o,this.y=d}updatePathMinMax(o,d,c){[d,c]=i.Util.applyTransform([d,c],o),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,c)}updateRectMinMax(o,d){const c=i.Util.applyTransform(d,o),f=i.Util.applyTransform(d.slice(2),o);this.minX=Math.min(this.minX,c[0],f[0]),this.minY=Math.min(this.minY,c[1],f[1]),this.maxX=Math.max(this.maxX,c[0],f[0]),this.maxY=Math.max(this.maxY,c[1],f[1])}updateScalingPathMinMax(o,d){i.Util.scaleMinMax(o,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(o,d,c,f,g,M,$,q,rt,nt){const ut=i.Util.bezierBoundingBox(d,c,f,g,M,$,q,rt);if(nt){nt[0]=Math.min(nt[0],ut[0],ut[2]),nt[1]=Math.max(nt[1],ut[0],ut[2]),nt[2]=Math.min(nt[2],ut[1],ut[3]),nt[3]=Math.max(nt[3],ut[1],ut[3]);return}this.updateRectMinMax(o,ut)}getPathBoundingBox(o=y.PathType.FILL,d=null){const c=[this.minX,this.minY,this.maxX,this.maxY];if(o===y.PathType.STROKE){d||(0,i.unreachable)("Stroke bounding box must include transform.");const f=i.Util.singularValueDecompose2dScale(d),g=f[0]*this.lineWidth/2,M=f[1]*this.lineWidth/2;c[0]-=g,c[1]-=M,c[2]+=g,c[3]+=M}return c}updateClipFromPath(){const o=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=y.PathType.FILL,d=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(o,d))}}function O(L,o){if(typeof ImageData<"u"&&o instanceof ImageData){L.putImageData(o,0,0);return}const d=o.height,c=o.width,f=d%C,g=(d-f)/C,M=f===0?g:g+1,$=L.createImageData(c,C);let q=0,rt;const nt=o.data,ut=$.data;let mt,yt,ft,Pt;if(o.kind===i.ImageKind.GRAYSCALE_1BPP){const It=nt.byteLength,St=new Uint32Array(ut.buffer,0,ut.byteLength>>2),Dt=St.length,U=c+7>>3,G=4294967295,N=i.FeatureTest.isLittleEndian?4278190080:255;for(mt=0;mt<M;mt++){for(ft=mt<g?C:f,rt=0,yt=0;yt<ft;yt++){const K=It-q;let pt=0;const bt=K>U?c:K*8-7,Rt=bt&-8;let jt=0,Bt=0;for(;pt<Rt;pt+=8)Bt=nt[q++],St[rt++]=Bt&128?G:N,St[rt++]=Bt&64?G:N,St[rt++]=Bt&32?G:N,St[rt++]=Bt&16?G:N,St[rt++]=Bt&8?G:N,St[rt++]=Bt&4?G:N,St[rt++]=Bt&2?G:N,St[rt++]=Bt&1?G:N;for(;pt<bt;pt++)jt===0&&(Bt=nt[q++],jt=128),St[rt++]=Bt&jt?G:N,jt>>=1}for(;rt<Dt;)St[rt++]=0;L.putImageData($,0,mt*C)}}else if(o.kind===i.ImageKind.RGBA_32BPP){for(yt=0,Pt=c*C*4,mt=0;mt<g;mt++)ut.set(nt.subarray(q,q+Pt)),q+=Pt,L.putImageData($,0,yt),yt+=C;mt<M&&(Pt=c*f*4,ut.set(nt.subarray(q,q+Pt)),L.putImageData($,0,yt))}else if(o.kind===i.ImageKind.RGB_24BPP)for(ft=C,Pt=c*ft,mt=0;mt<M;mt++){for(mt>=g&&(ft=f,Pt=c*ft),rt=0,yt=Pt;yt--;)ut[rt++]=nt[q++],ut[rt++]=nt[q++],ut[rt++]=nt[q++],ut[rt++]=255;L.putImageData($,0,mt*C)}else throw new Error(`bad image kind: ${o.kind}`)}function k(L,o){if(o.bitmap){L.drawImage(o.bitmap,0,0);return}const d=o.height,c=o.width,f=d%C,g=(d-f)/C,M=f===0?g:g+1,$=L.createImageData(c,C);let q=0;const rt=o.data,nt=$.data;for(let ut=0;ut<M;ut++){const mt=ut<g?C:f;({srcPos:q}=(0,S.convertBlackAndWhiteToRGBA)({src:rt,srcPos:q,dest:nt,width:c,height:mt,nonBlackColor:0})),L.putImageData($,0,ut*C)}}function u(L,o){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const c of d)L[c]!==void 0&&(o[c]=L[c]);L.setLineDash!==void 0&&(o.setLineDash(L.getLineDash()),o.lineDashOffset=L.lineDashOffset)}function p(L){if(L.strokeStyle=L.fillStyle="#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0),!i.isNodeJS){const{filter:o}=L;o!=="none"&&o!==""&&(L.filter="none")}}function I(L,o,d,c){const f=L.length;for(let g=3;g<f;g+=4){const M=L[g];if(M===0)L[g-3]=o,L[g-2]=d,L[g-1]=c;else if(M<255){const $=255-M;L[g-3]=L[g-3]*M+o*$>>8,L[g-2]=L[g-2]*M+d*$>>8,L[g-1]=L[g-1]*M+c*$>>8}}}function A(L,o,d){const c=L.length,f=1/255;for(let g=3;g<c;g+=4){const M=d?d[L[g]]:L[g];o[g]=o[g]*M*f|0}}function h(L,o,d){const c=L.length;for(let f=3;f<c;f+=4){const g=L[f-3]*77+L[f-2]*152+L[f-1]*28;o[f]=d?o[f]*d[g>>8]>>8:o[f]*g>>16}}function j(L,o,d,c,f,g,M,$,q,rt,nt){const ut=!!g,mt=ut?g[0]:0,yt=ut?g[1]:0,ft=ut?g[2]:0,Pt=f==="Luminosity"?h:A,St=Math.min(c,Math.ceil(1048576/d));for(let Dt=0;Dt<c;Dt+=St){const U=Math.min(St,c-Dt),G=L.getImageData($-rt,Dt+(q-nt),d,U),N=o.getImageData($,Dt+q,d,U);ut&&I(G.data,mt,yt,ft),Pt(G.data,N.data,M),o.putImageData(N,$,Dt+q)}}function b(L,o,d,c){const f=c[0],g=c[1],M=c[2]-f,$=c[3]-g;M===0||$===0||(j(o.context,d,M,$,o.subtype,o.backdrop,o.transferMap,f,g,o.offsetX,o.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(d.canvas,0,0),L.restore())}function V(L,o){const d=i.Util.singularValueDecompose2dScale(L);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const c=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:d[0]<=c||d[1]<=c}const X=["butt","round","square"],P=["miter","round","bevel"],Z={},ot={},_t=class _t{constructor(o,d,c,f,g,{optionalContentConfig:M,markedContentStack:$=null},q,rt){H(this,Y);H(this,gt);this.ctx=o,this.current=new D(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=c,this.canvasFactory=f,this.filterFactory=g,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$||[],this.optionalContentConfig=M,this.cachedCanvases=new x(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=rt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,d=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):d}beginDrawing({transform:o,viewport:d,transparency:c=!1,background:f=null}){const g=this.ctx.canvas.width,M=this.ctx.canvas.height,$=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,g,M),this.ctx.fillStyle=$,c){const q=this.cachedCanvases.getCanvas("transparent",g,M);this.compositeCtx=this.ctx,this.transparentCanvas=q.canvas,this.ctx=q.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),p(this.ctx),o&&(this.ctx.transform(...o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(o,d,c,f){const g=o.argsArray,M=o.fnArray;let $=d||0;const q=g.length;if(q===$)return $;const rt=q-$>B&&typeof c=="function",nt=rt?Date.now()+v:0;let ut=0;const mt=this.commonObjs,yt=this.objs;let ft;for(;;){if(f!==void 0&&$===f.nextBreakPoint)return f.breakIt($,c),$;if(ft=M[$],ft!==i.OPS.dependency)this[ft].apply(this,g[$]);else for(const Pt of g[$]){const It=Pt.startsWith("g_")?mt:yt;if(!It.has(Pt))return It.get(Pt,c),$}if($++,$===q)return $;if(rt&&++ut>B){if(Date.now()>nt)return c(),$;ut=0}}}endDrawing(){et(this,Y,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const o of this._cachedBitmapsMap.values()){for(const d of o.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);o.clear()}this._cachedBitmapsMap.clear(),et(this,gt,en).call(this)}_scaleImage(o,d){const c=o.width,f=o.height;let g=Math.max(Math.hypot(d[0],d[1]),1),M=Math.max(Math.hypot(d[2],d[3]),1),$=c,q=f,rt="prescale1",nt,ut;for(;g>2&&$>1||M>2&&q>1;){let mt=$,yt=q;g>2&&$>1&&(mt=$>=16384?Math.floor($/2)-1||1:Math.ceil($/2),g/=$/mt),M>2&&q>1&&(yt=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q)/2,M/=q/yt),nt=this.cachedCanvases.getCanvas(rt,mt,yt),ut=nt.context,ut.clearRect(0,0,mt,yt),ut.drawImage(o,0,0,$,q,0,0,mt,yt),o=nt.canvas,$=mt,q=yt,rt=rt==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:$,paintHeight:q}}_createMaskCanvas(o){const d=this.ctx,{width:c,height:f}=o,g=this.current.fillColor,M=this.current.patternFill,$=(0,s.getCurrentTransform)(d);let q,rt,nt,ut;if((o.bitmap||o.data)&&o.count>1){const pt=o.bitmap||o.data.buffer;rt=JSON.stringify(M?$:[$.slice(0,4),g]),q=this._cachedBitmapsMap.get(pt),q||(q=new Map,this._cachedBitmapsMap.set(pt,q));const bt=q.get(rt);if(bt&&!M){const Rt=Math.round(Math.min($[0],$[2])+$[4]),jt=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:bt,offsetX:Rt,offsetY:jt}}nt=bt}nt||(ut=this.cachedCanvases.getCanvas("maskCanvas",c,f),k(ut.context,o));let mt=i.Util.transform($,[1/c,0,0,-1/f,0,0]);mt=i.Util.transform(mt,[1,0,0,1,0,-f]);const yt=i.Util.applyTransform([0,0],mt),ft=i.Util.applyTransform([c,f],mt),Pt=i.Util.normalizeRect([yt[0],yt[1],ft[0],ft[1]]),It=Math.round(Pt[2]-Pt[0])||1,St=Math.round(Pt[3]-Pt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",It,St),U=Dt.context,G=Math.min(yt[0],ft[0]),N=Math.min(yt[1],ft[1]);U.translate(-G,-N),U.transform(...mt),nt||(nt=this._scaleImage(ut.canvas,(0,s.getCurrentTransformInverse)(U)),nt=nt.img,q&&M&&q.set(rt,nt)),U.imageSmoothingEnabled=V((0,s.getCurrentTransform)(U),o.interpolate),m(U,nt,0,0,nt.width,nt.height,0,0,c,f),U.globalCompositeOperation="source-in";const K=i.Util.transform((0,s.getCurrentTransformInverse)(U),[1,0,0,1,-G,-N]);return U.fillStyle=M?g.getPattern(d,this,K,y.PathType.FILL):g,U.fillRect(0,0,c,f),q&&!M&&(this.cachedCanvases.delete("fillCanvas"),q.set(rt,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(G),offsetY:Math.round(N)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=X[o]}setLineJoin(o){this.ctx.lineJoin=P[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,d){const c=this.ctx;c.setLineDash!==void 0&&(c.setLineDash(o),c.lineDashOffset=d)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[d,c]of o)switch(d){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c[0],c[1]);break;case"CA":this.current.strokeAlpha=c;break;case"ca":this.current.fillAlpha=c,this.ctx.globalAlpha=c;break;case"BM":this.ctx.globalCompositeOperation=c;break;case"SMask":this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,d=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(c,o,d);this.suspendedCtx=this.ctx,this.ctx=f.context;const g=this.ctx;g.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,g),w(g,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,c=this.suspendedCtx;b(c,d,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(o,d,c,f,g,M){this.ctx.transform(o,d,c,f,g,M),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(o,d,c){const f=this.ctx,g=this.current;let M=g.x,$=g.y,q,rt;const nt=(0,s.getCurrentTransform)(f),ut=nt[0]===0&&nt[3]===0||nt[1]===0&&nt[2]===0,mt=ut?c.slice(0):null;for(let yt=0,ft=0,Pt=o.length;yt<Pt;yt++)switch(o[yt]|0){case i.OPS.rectangle:M=d[ft++],$=d[ft++];const It=d[ft++],St=d[ft++],Dt=M+It,U=$+St;f.moveTo(M,$),It===0||St===0?f.lineTo(Dt,U):(f.lineTo(Dt,$),f.lineTo(Dt,U),f.lineTo(M,U)),ut||g.updateRectMinMax(nt,[M,$,Dt,U]),f.closePath();break;case i.OPS.moveTo:M=d[ft++],$=d[ft++],f.moveTo(M,$),ut||g.updatePathMinMax(nt,M,$);break;case i.OPS.lineTo:M=d[ft++],$=d[ft++],f.lineTo(M,$),ut||g.updatePathMinMax(nt,M,$);break;case i.OPS.curveTo:q=M,rt=$,M=d[ft+4],$=d[ft+5],f.bezierCurveTo(d[ft],d[ft+1],d[ft+2],d[ft+3],M,$),g.updateCurvePathMinMax(nt,q,rt,d[ft],d[ft+1],d[ft+2],d[ft+3],M,$,mt),ft+=6;break;case i.OPS.curveTo2:q=M,rt=$,f.bezierCurveTo(M,$,d[ft],d[ft+1],d[ft+2],d[ft+3]),g.updateCurvePathMinMax(nt,q,rt,M,$,d[ft],d[ft+1],d[ft+2],d[ft+3],mt),M=d[ft+2],$=d[ft+3],ft+=4;break;case i.OPS.curveTo3:q=M,rt=$,M=d[ft+2],$=d[ft+3],f.bezierCurveTo(d[ft],d[ft+1],M,$,M,$),g.updateCurvePathMinMax(nt,q,rt,d[ft],d[ft+1],M,$,M,$,mt),ft+=4;break;case i.OPS.closePath:f.closePath();break}ut&&g.updateScalingPathMinMax(nt,mt),g.setCurrentPoint(M,$)}closePath(){this.ctx.closePath()}stroke(o=!0){const d=this.ctx,c=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof c=="object"&&(c!=null&&c.getPattern)?(d.save(),d.strokeStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o=!0){const d=this.ctx,c=this.current.fillColor,f=this.current.patternFill;let g=!1;f&&(d.save(),d.fillStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.FILL),g=!0);const M=this.current.getClippedPathBoundingBox();this.contentVisible&&M!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),g&&d.restore(),o&&this.consumePath(M)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Z}eoClip(){this.pendingClip=ot}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,d=this.ctx;if(o===void 0){d.beginPath();return}d.save(),d.beginPath();for(const c of o)d.setTransform(...c.transform),d.translate(c.x,c.y),c.addToPath(d,c.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,d){var nt;const c=this.commonObjs.get(o),f=this.current;if(!c)throw new Error(`Can't find font for ${o}`);if(f.fontMatrix=c.fontMatrix||i.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+o),d<0?(d=-d,f.fontDirection=-1):f.fontDirection=1,this.current.font=c,this.current.fontSize=d,c.isType3Font)return;const g=c.loadedName||"sans-serif",M=((nt=c.systemFontInfo)==null?void 0:nt.css)||`"${g}", ${c.fallbackName}`;let $="normal";c.black?$="900":c.bold&&($="bold");const q=c.italic?"italic":"normal";let rt=d;d<J?rt=J:d>T&&(rt=T),this.current.fontSizeScale=d/rt,this.ctx.font=`${q} ${$} ${rt}px ${M}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,d){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=d}setLeadingMoveText(o,d){this.setLeading(-d),this.moveText(o,d)}setTextMatrix(o,d,c,f,g,M){this.current.textMatrix=[o,d,c,f,g,M],this.current.textMatrixScale=Math.hypot(o,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,d,c,f){const g=this.ctx,M=this.current,$=M.font,q=M.textRenderingMode,rt=M.fontSize/M.fontSizeScale,nt=q&i.TextRenderingMode.FILL_STROKE_MASK,ut=!!(q&i.TextRenderingMode.ADD_TO_PATH_FLAG),mt=M.patternFill&&!$.missingFile;let yt;($.disableFontFace||ut||mt)&&(yt=$.getPathGenerator(this.commonObjs,o)),$.disableFontFace||mt?(g.save(),g.translate(d,c),g.beginPath(),yt(g,rt),f&&g.setTransform(...f),(nt===i.TextRenderingMode.FILL||nt===i.TextRenderingMode.FILL_STROKE)&&g.fill(),(nt===i.TextRenderingMode.STROKE||nt===i.TextRenderingMode.FILL_STROKE)&&g.stroke(),g.restore()):((nt===i.TextRenderingMode.FILL||nt===i.TextRenderingMode.FILL_STROKE)&&g.fillText(o,d,c),(nt===i.TextRenderingMode.STROKE||nt===i.TextRenderingMode.FILL_STROKE)&&g.strokeText(o,d,c)),ut&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(g),x:d,y:c,fontSize:rt,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const d=o.getImageData(0,0,10,10).data;let c=!1;for(let f=3;f<d.length;f+=4)if(d[f]>0&&d[f]<255){c=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",c)}showText(o){const d=this.current,c=d.font;if(c.isType3Font)return this.showType3Text(o);const f=d.fontSize;if(f===0)return;const g=this.ctx,M=d.fontSizeScale,$=d.charSpacing,q=d.wordSpacing,rt=d.fontDirection,nt=d.textHScale*rt,ut=o.length,mt=c.vertical,yt=mt?1:-1,ft=c.defaultVMetrics,Pt=f*d.fontMatrix[0],It=d.textRenderingMode===i.TextRenderingMode.FILL&&!c.disableFontFace&&!d.patternFill;g.save(),g.transform(...d.textMatrix),g.translate(d.x,d.y+d.textRise),rt>0?g.scale(nt,-1):g.scale(nt,1);let St;if(d.patternFill){g.save();const K=d.fillColor.getPattern(g,this,(0,s.getCurrentTransformInverse)(g),y.PathType.FILL);St=(0,s.getCurrentTransform)(g),g.restore(),g.fillStyle=K}let Dt=d.lineWidth;const U=d.textMatrixScale;if(U===0||Dt===0){const K=d.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(K===i.TextRenderingMode.STROKE||K===i.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=U;if(M!==1&&(g.scale(M,M),Dt/=M),g.lineWidth=Dt,c.isInvalidPDFjsFont){const K=[];let pt=0;for(const bt of o)K.push(bt.unicode),pt+=bt.width;g.fillText(K.join(""),0,0),d.x+=pt*Pt*nt,g.restore(),this.compose();return}let G=0,N;for(N=0;N<ut;++N){const K=o[N];if(typeof K=="number"){G+=yt*K*f/1e3;continue}let pt=!1;const bt=(K.isSpace?q:0)+$,Rt=K.fontChar,jt=K.accent;let Bt,Ht,Gt=K.width;if(mt){const qt=K.vmetric||ft,vt=-(K.vmetric?qt[1]:Gt*.5)*Pt,at=qt[2]*Pt;Gt=qt?-qt[0]:Gt,Bt=vt/M,Ht=(G+at)/M}else Bt=G/M,Ht=0;if(c.remeasure&&Gt>0){const qt=g.measureText(Rt).width*1e3/f*M;if(Gt<qt&&this.isFontSubpixelAAEnabled){const vt=Gt/qt;pt=!0,g.save(),g.scale(vt,1),Bt/=vt}else Gt!==qt&&(Bt+=(Gt-qt)/2e3*f/M)}if(this.contentVisible&&(K.isInFont||c.missingFile)){if(It&&!jt)g.fillText(Rt,Bt,Ht);else if(this.paintChar(Rt,Bt,Ht,St),jt){const qt=Bt+f*jt.offset.x/M,vt=Ht-f*jt.offset.y/M;this.paintChar(jt.fontChar,qt,vt,St)}}const Wt=mt?Gt*Pt-bt*rt:Gt*Pt+bt*rt;G+=Wt,pt&&g.restore()}mt?d.y-=G:d.x+=G*nt,g.restore(),this.compose()}showType3Text(o){const d=this.ctx,c=this.current,f=c.font,g=c.fontSize,M=c.fontDirection,$=f.vertical?1:-1,q=c.charSpacing,rt=c.wordSpacing,nt=c.textHScale*M,ut=c.fontMatrix||i.FONT_IDENTITY_MATRIX,mt=o.length,yt=c.textRenderingMode===i.TextRenderingMode.INVISIBLE;let ft,Pt,It,St;if(!(yt||g===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...c.textMatrix),d.translate(c.x,c.y),d.scale(nt,M),ft=0;ft<mt;++ft){if(Pt=o[ft],typeof Pt=="number"){St=$*Pt*g/1e3,this.ctx.translate(St,0),c.x+=St*nt;continue}const Dt=(Pt.isSpace?rt:0)+q,U=f.charProcOperatorList[Pt.operatorListId];if(!U){(0,i.warn)(`Type3 character "${Pt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Pt,this.save(),d.scale(g,g),d.transform(...ut),this.executeOperatorList(U),this.restore()),It=i.Util.applyTransform([Pt.width,0],ut)[0]*g+Dt,d.translate(It,0),c.x+=It*nt}d.restore(),this.processingType3=null}}setCharWidth(o,d){}setCharWidthAndBounds(o,d,c,f,g,M){this.ctx.rect(c,f,g-c,M-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let d;if(o[0]==="TilingPattern"){const c=o[1],f=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),g={createCanvasGraphics:M=>new _t(M,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new y.TilingPattern(o,c,this.ctx,g,f)}else d=this._getPattern(o[1],o[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,d,c){const f=i.Util.makeHexColor(o,d,c);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(o,d,c){const f=i.Util.makeHexColor(o,d,c);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(o,d=null){let c;return this.cachedPatterns.has(o)?c=this.cachedPatterns.get(o):(c=(0,y.getShadingPattern)(this.getObject(o)),this.cachedPatterns.set(o,c)),d&&(c.matrix=d),c}shadingFill(o){if(!this.contentVisible)return;const d=this.ctx;this.save();const c=this._getPattern(o);d.fillStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.SHADING);const f=(0,s.getCurrentTransformInverse)(d);if(f){const{width:g,height:M}=d.canvas,[$,q,rt,nt]=i.Util.getAxialAlignedBoundingBox([0,0,g,M],f);this.ctx.fillRect($,q,rt-$,nt-q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform(...o),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),d)){const c=d[2]-d[0],f=d[3]-d[1];this.ctx.rect(d[0],d[1],c,f),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;o.isolated||(0,i.info)("TODO: Support non-isolated groups."),o.knockout&&(0,i.warn)("Knockout groups not supported.");const c=(0,s.getCurrentTransform)(d);if(o.matrix&&d.transform(...o.matrix),!o.bbox)throw new Error("Bounding box is required.");let f=i.Util.getAxialAlignedBoundingBox(o.bbox,(0,s.getCurrentTransform)(d));const g=[0,0,d.canvas.width,d.canvas.height];f=i.Util.intersect(f,g)||[0,0,0,0];const M=Math.floor(f[0]),$=Math.floor(f[1]);let q=Math.max(Math.ceil(f[2])-M,1),rt=Math.max(Math.ceil(f[3])-$,1),nt=1,ut=1;q>E&&(nt=q/E,q=E),rt>E&&(ut=rt/E,rt=E),this.current.startNewPathAndClipBox([0,0,q,rt]);let mt="groupAt"+this.groupLevel;o.smask&&(mt+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(mt,q,rt),ft=yt.context;ft.scale(1/nt,1/ut),ft.translate(-M,-$),ft.transform(...c),o.smask?this.smaskStack.push({canvas:yt.canvas,context:ft,offsetX:M,offsetY:$,scaleX:nt,scaleY:ut,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(M,$),d.scale(nt,ut),d.save()),u(d,ft),this.ctx=ft,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const g=i.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],f);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(g)}}beginAnnotation(o,d,c,f,g){if(et(this,Y,tn).call(this),p(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const M=d[2]-d[0],$=d[3]-d[1];if(g&&this.annotationCanvasMap){c=c.slice(),c[4]-=d[0],c[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=M,d[3]=$;const[q,rt]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:nt}=this,ut=Math.ceil(M*this.outputScaleX*nt),mt=Math.ceil($*this.outputScaleY*nt);this.annotationCanvas=this.canvasFactory.create(ut,mt);const{canvas:yt,context:ft}=this.annotationCanvas;this.annotationCanvasMap.set(o,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ft,this.ctx.save(),this.ctx.setTransform(q,0,0,-rt,0,$*rt),p(this.ctx)}else p(this.ctx),this.ctx.rect(d[0],d[1],M,$),this.ctx.clip(),this.endPath()}this.current=new D(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...c),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),et(this,gt,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(o){if(!this.contentVisible)return;const d=o.count;o=this.getObject(o.data,o),o.count=d;const c=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=_(o)),f.compiled)){f.compiled(c);return}const g=this._createMaskCanvas(o),M=g.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(M,g.offsetX,g.offsetY),c.restore(),this.compose()}paintImageMaskXObjectRepeat(o,d,c=0,f=0,g,M){if(!this.contentVisible)return;o=this.getObject(o.data,o);const $=this.ctx;$.save();const q=(0,s.getCurrentTransform)($);$.transform(d,c,f,g,0,0);const rt=this._createMaskCanvas(o);$.setTransform(1,0,0,1,rt.offsetX-q[4],rt.offsetY-q[5]);for(let nt=0,ut=M.length;nt<ut;nt+=2){const mt=i.Util.transform(q,[d,c,f,g,M[nt],M[nt+1]]),[yt,ft]=i.Util.applyTransform([0,0],mt);$.drawImage(rt.canvas,yt,ft)}$.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const d=this.ctx,c=this.current.fillColor,f=this.current.patternFill;for(const g of o){const{data:M,width:$,height:q,transform:rt}=g,nt=this.cachedCanvases.getCanvas("maskCanvas",$,q),ut=nt.context;ut.save();const mt=this.getObject(M,g);k(ut,mt),ut.globalCompositeOperation="source-in",ut.fillStyle=f?c.getPattern(ut,this,(0,s.getCurrentTransformInverse)(d),y.PathType.FILL):c,ut.fillRect(0,0,$,q),ut.restore(),d.save(),d.transform(...rt),d.scale(1,-1),m(d,nt.canvas,0,0,$,q,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const d=this.getObject(o);if(!d){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(o,d,c,f){if(!this.contentVisible)return;const g=this.getObject(o);if(!g){(0,i.warn)("Dependent image isn't ready yet");return}const M=g.width,$=g.height,q=[];for(let rt=0,nt=f.length;rt<nt;rt+=2)q.push({transform:[d,0,0,c,f[rt],f[rt+1]],x:0,y:0,w:M,h:$});this.paintInlineImageXObjectGroup(g,q)}applyTransferMapsToCanvas(o){return this.current.transferMaps!=="none"&&(o.filter=this.current.transferMaps,o.drawImage(o.canvas,0,0),o.filter="none"),o.canvas}applyTransferMapsToBitmap(o){if(this.current.transferMaps==="none")return o.bitmap;const{bitmap:d,width:c,height:f}=o,g=this.cachedCanvases.getCanvas("inlineImage",c,f),M=g.context;return M.filter=this.current.transferMaps,M.drawImage(d,0,0),M.filter="none",g.canvas}paintInlineImageXObject(o){if(!this.contentVisible)return;const d=o.width,c=o.height,f=this.ctx;if(this.save(),!i.isNodeJS){const{filter:$}=f;$!=="none"&&$!==""&&(f.filter="none")}f.scale(1/d,-1/c);let g;if(o.bitmap)g=this.applyTransferMapsToBitmap(o);else if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)g=o;else{const q=this.cachedCanvases.getCanvas("inlineImage",d,c).context;O(q,o),g=this.applyTransferMapsToCanvas(q)}const M=this._scaleImage(g,(0,s.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=V((0,s.getCurrentTransform)(f),o.interpolate),m(f,M.img,0,0,M.paintWidth,M.paintHeight,0,-c,d,c),this.compose(),this.restore()}paintInlineImageXObjectGroup(o,d){if(!this.contentVisible)return;const c=this.ctx;let f;if(o.bitmap)f=o.bitmap;else{const g=o.width,M=o.height,q=this.cachedCanvases.getCanvas("inlineImage",g,M).context;O(q,o),f=this.applyTransferMapsToCanvas(q)}for(const g of d)c.save(),c.transform(...g.transform),c.scale(1,-1),m(c,f,g.x,g.y,g.w,g.h,0,-1,1,1),c.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,d){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,d){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const c=this.ctx;this.pendingClip&&(d||(this.pendingClip===ot?c.clip("evenodd"):c.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const o=(0,s.getCurrentTransform)(this.ctx);if(o[1]===0&&o[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{const d=Math.abs(o[0]*o[3]-o[2]*o[1]),c=Math.hypot(o[0],o[2]),f=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(c,f)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:o}=this.current,{a:d,b:c,c:f,d:g}=this.ctx.getTransform();let M,$;if(c===0&&f===0){const q=Math.abs(d),rt=Math.abs(g);if(q===rt)if(o===0)M=$=1/q;else{const nt=q*o;M=$=nt<1?1/nt:1}else if(o===0)M=1/q,$=1/rt;else{const nt=q*o,ut=rt*o;M=nt<1?1/nt:1,$=ut<1?1/ut:1}}else{const q=Math.abs(d*g-c*f),rt=Math.hypot(d,c),nt=Math.hypot(f,g);if(o===0)M=nt/q,$=rt/q;else{const ut=o*q;M=nt>ut?nt/ut:1,$=rt>ut?rt/ut:1}}this._cachedScaleForStroking[0]=M,this._cachedScaleForStroking[1]=$}return this._cachedScaleForStroking}rescaleAndStroke(o){const{ctx:d}=this,{lineWidth:c}=this.current,[f,g]=this.getScaleForStroking();if(d.lineWidth=c||1,f===1&&g===1){d.stroke();return}const M=d.getLineDash();if(o&&d.save(),d.scale(f,g),M.length>0){const $=Math.max(f,g);d.setLineDash(M.map(q=>q/$)),d.lineDashOffset/=$}d.stroke(),o&&d.restore()}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}};Y=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gt=new WeakSet,en=function(){if(this.pageColors){const o=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(o!=="none"){const d=this.ctx.filter;this.ctx.filter=o,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let ct=_t;n.CanvasGraphics=ct;for(const L in i.OPS)ct.prototype[L]!==void 0&&(ct.prototype[i.OPS[L]]=ct.prototype[L])},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=C;var i=r(1),s=r(6);const y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=y;function S(_,D){if(!D)return;const O=D[2]-D[0],k=D[3]-D[1],u=new Path2D;u.rect(D[0],D[1],O,k),_.clip(u)}class J{constructor(){this.constructor===J&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class T extends J{constructor(D){super(),this._type=D[1],this._bbox=D[2],this._colorStops=D[3],this._p0=D[4],this._p1=D[5],this._r0=D[6],this._r1=D[7],this.matrix=null}_createGradient(D){let O;this._type==="axial"?O=D.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=D.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)O.addColorStop(k[0],k[1]);return O}getPattern(D,O,k,u){let p;if(u===y.STROKE||u===y.FILL){const I=O.current.getClippedPathBoundingBox(u,(0,s.getCurrentTransform)(D))||[0,0,0,0],A=Math.ceil(I[2]-I[0])||1,h=Math.ceil(I[3]-I[1])||1,j=O.cachedCanvases.getCanvas("pattern",A,h,!0),b=j.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-I[0],-I[1]),k=i.Util.transform(k,[1,0,0,1,I[0],I[1]]),b.transform(...O.baseTransform),this.matrix&&b.transform(...this.matrix),S(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),p=D.createPattern(j.canvas,"no-repeat");const V=new DOMMatrix(k);p.setTransform(V)}else S(D,this._bbox),p=this._createGradient(D);return p}}function E(_,D,O,k,u,p,I,A){const h=D.coords,j=D.colors,b=_.data,V=_.width*4;let X;h[O+1]>h[k+1]&&(X=O,O=k,k=X,X=p,p=I,I=X),h[k+1]>h[u+1]&&(X=k,k=u,u=X,X=I,I=A,A=X),h[O+1]>h[k+1]&&(X=O,O=k,k=X,X=p,p=I,I=X);const P=(h[O]+D.offsetX)*D.scaleX,Z=(h[O+1]+D.offsetY)*D.scaleY,ot=(h[k]+D.offsetX)*D.scaleX,ct=(h[k+1]+D.offsetY)*D.scaleY,Y=(h[u]+D.offsetX)*D.scaleX,dt=(h[u+1]+D.offsetY)*D.scaleY;if(Z>=dt)return;const gt=j[p],xt=j[p+1],_t=j[p+2],L=j[I],o=j[I+1],d=j[I+2],c=j[A],f=j[A+1],g=j[A+2],M=Math.round(Z),$=Math.round(dt);let q,rt,nt,ut,mt,yt,ft,Pt;for(let It=M;It<=$;It++){if(It<ct){const N=It<Z?0:(Z-It)/(Z-ct);q=P-(P-ot)*N,rt=gt-(gt-L)*N,nt=xt-(xt-o)*N,ut=_t-(_t-d)*N}else{let N;It>dt?N=1:ct===dt?N=0:N=(ct-It)/(ct-dt),q=ot-(ot-Y)*N,rt=L-(L-c)*N,nt=o-(o-f)*N,ut=d-(d-g)*N}let St;It<Z?St=0:It>dt?St=1:St=(Z-It)/(Z-dt),mt=P-(P-Y)*St,yt=gt-(gt-c)*St,ft=xt-(xt-f)*St,Pt=_t-(_t-g)*St;const Dt=Math.round(Math.min(q,mt)),U=Math.round(Math.max(q,mt));let G=V*It+Dt*4;for(let N=Dt;N<=U;N++)St=(q-N)/(q-mt),St<0?St=0:St>1&&(St=1),b[G++]=rt-(rt-yt)*St|0,b[G++]=nt-(nt-ft)*St|0,b[G++]=ut-(ut-Pt)*St|0,b[G++]=255}}function v(_,D,O){const k=D.coords,u=D.colors;let p,I;switch(D.type){case"lattice":const A=D.verticesPerRow,h=Math.floor(k.length/A)-1,j=A-1;for(p=0;p<h;p++){let b=p*A;for(let V=0;V<j;V++,b++)E(_,O,k[b],k[b+1],k[b+A],u[b],u[b+1],u[b+A]),E(_,O,k[b+A+1],k[b+1],k[b+A],u[b+A+1],u[b+1],u[b+A])}break;case"triangles":for(p=0,I=k.length;p<I;p+=3)E(_,O,k[p],k[p+1],k[p+2],u[p],u[p+1],u[p+2]);break;default:throw new Error("illegal figure")}}class B extends J{constructor(D){super(),this._coords=D[2],this._colors=D[3],this._figures=D[4],this._bounds=D[5],this._bbox=D[7],this._background=D[8],this.matrix=null}_createMeshCanvas(D,O,k){const A=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-A,b=Math.ceil(this._bounds[3])-h,V=Math.min(Math.ceil(Math.abs(j*D[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(b*D[1]*1.1)),3e3),P=j/V,Z=b/X,ot={coords:this._coords,colors:this._colors,offsetX:-A,offsetY:-h,scaleX:1/P,scaleY:1/Z},ct=V+2*2,Y=X+2*2,dt=k.getCanvas("mesh",ct,Y,!1),gt=dt.context,xt=gt.createImageData(V,X);if(O){const L=xt.data;for(let o=0,d=L.length;o<d;o+=4)L[o]=O[0],L[o+1]=O[1],L[o+2]=O[2],L[o+3]=255}for(const L of this._figures)v(xt,L,ot);return gt.putImageData(xt,2,2),{canvas:dt.canvas,offsetX:A-2*P,offsetY:h-2*Z,scaleX:P,scaleY:Z}}getPattern(D,O,k,u){S(D,this._bbox);let p;if(u===y.SHADING)p=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(D));else if(p=i.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const A=i.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*A[0],p[1]*A[1]]}const I=this._createMeshCanvas(p,u===y.SHADING?null:this._background,O.cachedCanvases);return u!==y.SHADING&&(D.setTransform(...O.baseTransform),this.matrix&&D.transform(...this.matrix)),D.translate(I.offsetX,I.offsetY),D.scale(I.scaleX,I.scaleY),D.createPattern(I.canvas,"no-repeat")}}class R extends J{getPattern(){return"hotpink"}}function C(_){switch(_[0]){case"RadialAxial":return new T(_);case"Mesh":return new B(_);case"Dummy":return new R}throw new Error(`Unknown IR type: ${_[0]}`)}const w={COLORED:1,UNCOLORED:2},m=class m{constructor(D,O,k,u,p){this.operatorList=D[2],this.matrix=D[3]||[1,0,0,1,0,0],this.bbox=D[4],this.xstep=D[5],this.ystep=D[6],this.paintType=D[7],this.tilingType=D[8],this.color=O,this.ctx=k,this.canvasGraphicsFactory=u,this.baseTransform=p}createPatternCanvas(D){const O=this.operatorList,k=this.bbox,u=this.xstep,p=this.ystep,I=this.paintType,A=this.tilingType,h=this.color,j=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+A);const b=k[0],V=k[1],X=k[2],P=k[3],Z=i.Util.singularValueDecompose2dScale(this.matrix),ot=i.Util.singularValueDecompose2dScale(this.baseTransform),ct=[Z[0]*ot[0],Z[1]*ot[1]],Y=this.getSizeAndScale(u,this.ctx.canvas.width,ct[0]),dt=this.getSizeAndScale(p,this.ctx.canvas.height,ct[1]),gt=D.cachedCanvases.getCanvas("pattern",Y.size,dt.size,!0),xt=gt.context,_t=j.createCanvasGraphics(xt);_t.groupLevel=D.groupLevel,this.setFillAndStrokeStyleToContext(_t,I,h);let L=b,o=V,d=X,c=P;return b<0&&(L=0,d+=Math.abs(b)),V<0&&(o=0,c+=Math.abs(V)),xt.translate(-(Y.scale*L),-(dt.scale*o)),_t.transform(Y.scale,0,0,dt.scale,0,0),xt.save(),this.clipBbox(_t,L,o,d,c),_t.baseTransform=(0,s.getCurrentTransform)(_t.ctx),_t.executeOperatorList(O),_t.endDrawing(),{canvas:gt.canvas,scaleX:Y.scale,scaleY:dt.scale,offsetX:L,offsetY:o}}getSizeAndScale(D,O,k){D=Math.abs(D);const u=Math.max(m.MAX_PATTERN_SIZE,O);let p=Math.ceil(D*k);return p>=u?p=u:k=p/D,{scale:k,size:p}}clipBbox(D,O,k,u,p){const I=u-O,A=p-k;D.ctx.rect(O,k,I,A),D.current.updateRectMinMax((0,s.getCurrentTransform)(D.ctx),[O,k,u,p]),D.clip(),D.endPath()}setFillAndStrokeStyleToContext(D,O,k){const u=D.ctx,p=D.current;switch(O){case w.COLORED:const I=this.ctx;u.fillStyle=I.fillStyle,u.strokeStyle=I.strokeStyle,p.fillColor=I.fillStyle,p.strokeColor=I.strokeStyle;break;case w.UNCOLORED:const A=i.Util.makeHexColor(k[0],k[1],k[2]);u.fillStyle=A,u.strokeStyle=A,p.fillColor=A,p.strokeColor=A;break;default:throw new i.FormatError(`Unsupported paint type: ${O}`)}}getPattern(D,O,k,u){let p=k;u!==y.SHADING&&(p=i.Util.transform(p,O.baseTransform),this.matrix&&(p=i.Util.transform(p,this.matrix)));const I=this.createPatternCanvas(O);let A=new DOMMatrix(p);A=A.translate(I.offsetX,I.offsetY),A=A.scale(1/I.scaleX,1/I.scaleY);const h=D.createPattern(I.canvas,"repeat");return h.setTransform(A),h}};ne(m,"MAX_PATTERN_SIZE",3e3);let x=m;n.TilingPattern=x},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=y,n.convertToRGBA=s,n.grayToRGBA=J;var i=r(1);function s(T){switch(T.kind){case i.ImageKind.GRAYSCALE_1BPP:return y(T);case i.ImageKind.RGB_24BPP:return S(T)}return null}function y({src:T,srcPos:E=0,dest:v,width:B,height:R,nonBlackColor:C=4294967295,inverseDecode:w=!1}){const x=i.FeatureTest.isLittleEndian?4278190080:255,[m,_]=w?[C,x]:[x,C],D=B>>3,O=B&7,k=T.length;v=new Uint32Array(v.buffer);let u=0;for(let p=0;p<R;p++){for(const A=E+D;E<A;E++){const h=E<k?T[E]:255;v[u++]=h&128?_:m,v[u++]=h&64?_:m,v[u++]=h&32?_:m,v[u++]=h&16?_:m,v[u++]=h&8?_:m,v[u++]=h&4?_:m,v[u++]=h&2?_:m,v[u++]=h&1?_:m}if(O===0)continue;const I=E<k?T[E++]:255;for(let A=0;A<O;A++)v[u++]=I&1<<7-A?_:m}return{srcPos:E,destPos:u}}function S({src:T,srcPos:E=0,dest:v,destPos:B=0,width:R,height:C}){let w=0;const x=T.length>>2,m=new Uint32Array(T.buffer,E,x);if(i.FeatureTest.isLittleEndian){for(;w<x-2;w+=3,B+=4){const _=m[w],D=m[w+1],O=m[w+2];v[B]=_|4278190080,v[B+1]=_>>>24|D<<8|4278190080,v[B+2]=D>>>16|O<<16|4278190080,v[B+3]=O>>>8|4278190080}for(let _=w*4,D=T.length;_<D;_+=3)v[B++]=T[_]|T[_+1]<<8|T[_+2]<<16|4278190080}else{for(;w<x-2;w+=3,B+=4){const _=m[w],D=m[w+1],O=m[w+2];v[B]=_|255,v[B+1]=_<<24|D>>>8|255,v[B+2]=D<<16|O>>>16|255,v[B+3]=O<<8|255}for(let _=w*4,D=T.length;_<D;_+=3)v[B++]=T[_]<<24|T[_+1]<<16|T[_+2]<<8|255}return{srcPos:E,destPos:B}}function J(T,E){if(i.FeatureTest.isLittleEndian)for(let v=0,B=T.length;v<B;v++)E[v]=T[v]*65793|4278190080;else for(let v=0,B=T.length;v<B;v++)E[v]=T[v]*16843008|255}},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const r=Object.create(null);n.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(t,n,r)=>{var T,Rn,v,Mn,R,ke;Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var i=r(1);const s={UNKNOWN:0,DATA:1,ERROR:2},y={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new i.AbortException(w.message);case"MissingPDFException":return new i.MissingPDFException(w.message);case"PasswordException":return new i.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new i.UnknownErrorException(w.message,w.details);default:return new i.UnknownErrorException(w.message,w.toString())}}class J{constructor(x,m,_){H(this,T);H(this,v);H(this,R);this.sourceName=x,this.targetName=m,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=D=>{const O=D.data;if(O.targetName!==this.sourceName)return;if(O.stream){et(this,v,Mn).call(this,O);return}if(O.callback){const u=O.callbackId,p=this.callbackCapabilities[u];if(!p)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],O.callback===s.DATA)p.resolve(O.data);else if(O.callback===s.ERROR)p.reject(S(O.reason));else throw new Error("Unexpected callback case");return}const k=this.actionHandler[O.action];if(!k)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const u=this.sourceName,p=O.sourceName;new Promise(function(I){I(k(O.data))}).then(function(I){_.postMessage({sourceName:u,targetName:p,callback:s.DATA,callbackId:O.callbackId,data:I})},function(I){_.postMessage({sourceName:u,targetName:p,callback:s.ERROR,callbackId:O.callbackId,reason:S(I)})});return}if(O.streamId){et(this,T,Rn).call(this,O);return}k(O.data)},_.addEventListener("message",this._onComObjOnMessage)}on(x,m){const _=this.actionHandler;if(_[x])throw new Error(`There is already an actionName called "${x}"`);_[x]=m}send(x,m,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,data:m},_)}sendWithPromise(x,m,_){const D=this.callbackId++,O=new i.PromiseCapability;this.callbackCapabilities[D]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,callbackId:D,data:m},_)}catch(k){O.reject(k)}return O.promise}sendWithStream(x,m,_,D){const O=this.streamId++,k=this.sourceName,u=this.targetName,p=this.comObj;return new ReadableStream({start:I=>{const A=new i.PromiseCapability;return this.streamControllers[O]={controller:I,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:k,targetName:u,action:x,streamId:O,data:m,desiredSize:I.desiredSize},D),A.promise},pull:I=>{const A=new i.PromiseCapability;return this.streamControllers[O].pullCall=A,p.postMessage({sourceName:k,targetName:u,stream:y.PULL,streamId:O,desiredSize:I.desiredSize}),A.promise},cancel:I=>{(0,i.assert)(I instanceof Error,"cancel must have a valid reason");const A=new i.PromiseCapability;return this.streamControllers[O].cancelCall=A,this.streamControllers[O].isClosed=!0,p.postMessage({sourceName:k,targetName:u,stream:y.CANCEL,streamId:O,reason:S(I)}),A.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,Rn=function(x){const m=x.streamId,_=this.sourceName,D=x.sourceName,O=this.comObj,k=this,u=this.actionHandler[x.action],p={enqueue(I,A=1,h){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=A,j>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),O.postMessage({sourceName:_,targetName:D,stream:y.ENQUEUE,streamId:m,chunk:I},h)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:_,targetName:D,stream:y.CLOSE,streamId:m}),delete k.streamSinks[m])},error(I){(0,i.assert)(I instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:_,targetName:D,stream:y.ERROR,streamId:m,reason:S(I)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:x.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[m]=p,new Promise(function(I){I(u(x.data,p))}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:y.START_COMPLETE,streamId:m,success:!0})},function(I){O.postMessage({sourceName:_,targetName:D,stream:y.START_COMPLETE,streamId:m,reason:S(I)})})},v=new WeakSet,Mn=function(x){const m=x.streamId,_=this.sourceName,D=x.sourceName,O=this.comObj,k=this.streamControllers[m],u=this.streamSinks[m];switch(x.stream){case y.START_COMPLETE:x.success?k.startCall.resolve():k.startCall.reject(S(x.reason));break;case y.PULL_COMPLETE:x.success?k.pullCall.resolve():k.pullCall.reject(S(x.reason));break;case y.PULL:if(!u){O.postMessage({sourceName:_,targetName:D,stream:y.PULL_COMPLETE,streamId:m,success:!0});break}u.desiredSize<=0&&x.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=x.desiredSize,new Promise(function(p){var I;p((I=u.onPull)==null?void 0:I.call(u))}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:y.PULL_COMPLETE,streamId:m,success:!0})},function(p){O.postMessage({sourceName:_,targetName:D,stream:y.PULL_COMPLETE,streamId:m,reason:S(p)})});break;case y.ENQUEUE:if((0,i.assert)(k,"enqueue should have stream controller"),k.isClosed)break;k.controller.enqueue(x.chunk);break;case y.CLOSE:if((0,i.assert)(k,"close should have stream controller"),k.isClosed)break;k.isClosed=!0,k.controller.close(),et(this,R,ke).call(this,k,m);break;case y.ERROR:(0,i.assert)(k,"error should have stream controller"),k.controller.error(S(x.reason)),et(this,R,ke).call(this,k,m);break;case y.CANCEL_COMPLETE:x.success?k.cancelCall.resolve():k.cancelCall.reject(S(x.reason)),et(this,R,ke).call(this,k,m);break;case y.CANCEL:if(!u)break;new Promise(function(p){var I;p((I=u.onCancel)==null?void 0:I.call(u,S(x.reason)))}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:y.CANCEL_COMPLETE,streamId:m,success:!0})},function(p){O.postMessage({sourceName:_,targetName:D,stream:y.CANCEL_COMPLETE,streamId:m,reason:S(p)})}),u.sinkCapability.reject(S(x.reason)),u.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},R=new WeakSet,ke=async function(x,m){var _,D,O;await Promise.allSettled([(_=x.startCall)==null?void 0:_.promise,(D=x.pullCall)==null?void 0:D.promise,(O=x.cancelCall)==null?void 0:O.promise]),delete this.streamControllers[m]},n.MessageHandler=J},(t,n,r)=>{var y,S;Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var i=r(1);class s{constructor({parsedData:T,rawData:E}){H(this,y,void 0);H(this,S,void 0);lt(this,y,T),lt(this,S,E)}getRaw(){return a(this,S)}get(T){return a(this,y).get(T)??null}getAll(){return(0,i.objectFromMap)(a(this,y))}has(T){return a(this,y).has(T)}}y=new WeakMap,S=new WeakMap,n.Metadata=s},(t,n,r)=>{var T,E,v,B,R,C,nn;Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var i=r(1),s=r(8);const y=Symbol("INTERNAL");class S{constructor(m,_){H(this,T,!0);this.name=m,this.intent=_}get visible(){return a(this,T)}_setVisible(m,_){m!==y&&(0,i.unreachable)("Internal method `_setVisible` called."),lt(this,T,_)}}T=new WeakMap;class J{constructor(m){H(this,C);H(this,E,null);H(this,v,new Map);H(this,B,null);H(this,R,null);if(this.name=null,this.creator=null,m!==null){this.name=m.name,this.creator=m.creator,lt(this,R,m.order);for(const _ of m.groups)a(this,v).set(_.id,new S(_.name,_.intent));if(m.baseState==="OFF")for(const _ of a(this,v).values())_._setVisible(y,!1);for(const _ of m.on)a(this,v).get(_)._setVisible(y,!0);for(const _ of m.off)a(this,v).get(_)._setVisible(y,!1);lt(this,B,this.getHash())}}isVisible(m){if(a(this,v).size===0)return!0;if(!m)return(0,i.warn)("Optional content group not defined."),!0;if(m.type==="OCG")return a(this,v).has(m.id)?a(this,v).get(m.id).visible:((0,i.warn)(`Optional content group not found: ${m.id}`),!0);if(m.type==="OCMD"){if(m.expression)return et(this,C,nn).call(this,m.expression);if(!m.policy||m.policy==="AnyOn"){for(const _ of m.ids){if(!a(this,v).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(a(this,v).get(_).visible)return!0}return!1}else if(m.policy==="AllOn"){for(const _ of m.ids){if(!a(this,v).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(!a(this,v).get(_).visible)return!1}return!0}else if(m.policy==="AnyOff"){for(const _ of m.ids){if(!a(this,v).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(!a(this,v).get(_).visible)return!0}return!1}else if(m.policy==="AllOff"){for(const _ of m.ids){if(!a(this,v).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(a(this,v).get(_).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${m.policy}.`),!0}return(0,i.warn)(`Unknown group type ${m.type}.`),!0}setVisibility(m,_=!0){if(!a(this,v).has(m)){(0,i.warn)(`Optional content group not found: ${m}`);return}a(this,v).get(m)._setVisible(y,!!_),lt(this,E,null)}get hasInitialVisibility(){return a(this,B)===null||this.getHash()===a(this,B)}getOrder(){return a(this,v).size?a(this,R)?a(this,R).slice():[...a(this,v).keys()]:null}getGroups(){return a(this,v).size>0?(0,i.objectFromMap)(a(this,v)):null}getGroup(m){return a(this,v).get(m)||null}getHash(){if(a(this,E)!==null)return a(this,E);const m=new s.MurmurHash3_64;for(const[_,D]of a(this,v))m.update(`${_}:${D.visible}`);return lt(this,E,m.hexdigest())}}E=new WeakMap,v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakSet,nn=function(m){const _=m.length;if(_<2)return!0;const D=m[0];for(let O=1;O<_;O++){const k=m[O];let u;if(Array.isArray(k))u=et(this,C,nn).call(this,k);else if(a(this,v).has(k))u=a(this,v).get(k).visible;else return(0,i.warn)(`Optional content group not found: ${k}`),!0;switch(D){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return D==="And"},n.OptionalContentConfig=J},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var i=r(1),s=r(6);class y{constructor({length:E,initialData:v,progressiveDone:B=!1,contentDispositionFilename:R=null,disableRange:C=!1,disableStream:w=!1},x){if((0,i.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=B,this._contentDispositionFilename=R,(v==null?void 0:v.length)>0){const m=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!w,this._isRangeSupported=!C,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,_)=>{this._onReceiveData({begin:m,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((m,_)=>{this._onProgress({loaded:m,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:v}){const B=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(B):this._queuedChunks.push(B);else{const R=this._rangeReaders.some(function(C){return C._begin!==E?!1:(C._enqueue(B),!0)});(0,i.assert)(R,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}_onProgress(E){var v,B,R,C;E.total===void 0?(B=(v=this._rangeReaders[0])==null?void 0:v.onProgress)==null||B.call(v,{loaded:E.loaded}):(C=(R=this._fullRequestReader)==null?void 0:R.onProgress)==null||C.call(R,{loaded:E.loaded,total:E.total})}_onProgressiveDone(){var E;(E=this._fullRequestReader)==null||E.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const v=this._rangeReaders.indexOf(E);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new S(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,v){if(v<=this._progressiveDataLength)return null;const B=new J(this,E,v);return this._pdfDataRangeTransport.requestDataRange(E,v),this._rangeReaders.push(B),B}cancelAllRequests(E){var v;(v=this._fullRequestReader)==null||v.cancel(E);for(const B of this._rangeReaders.slice(0))B.cancel(E);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=y;class S{constructor(E,v,B=!1,R=null){this._stream=E,this._done=B||!1,this._filename=(0,s.isPdfFile)(R)?R:null,this._queuedChunks=v||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class J{constructor(E,v,B){this._stream=E,this._begin=v,this._end=B,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var i=r(1),s=r(20);function y(B,R,C){return{method:"GET",headers:B,signal:C.signal,mode:"cors",credentials:R?"include":"same-origin",redirect:"follow"}}function S(B){const R=new Headers;for(const C in B){const w=B[C];w!==void 0&&R.append(C,w)}return R}function J(B){return B instanceof Uint8Array?B.buffer:B instanceof ArrayBuffer?B:((0,i.warn)(`getArrayBuffer - unexpected data format: ${B}`),new Uint8Array(B).buffer)}class T{constructor(R){this.source=R,this.isHttp=/^https?:/i.test(R.url),this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(R,C){if(C<=this._progressiveDataLength)return null;const w=new v(this,R,C);return this._rangeRequestReaders.push(w),w}cancelAllRequests(R){var C;(C=this._fullRequestReader)==null||C.cancel(R);for(const w of this._rangeRequestReaders.slice(0))w.cancel(R)}}n.PDFFetchStream=T;class E{constructor(R){this._stream=R,this._reader=null,this._loaded=0,this._filename=null;const C=R.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new i.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=S(this._stream.httpHeaders);const w=C.url;fetch(w,y(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,s.validateResponseStatus)(x.status))throw(0,s.createResponseStatusError)(x.status,w);this._reader=x.body.getReader(),this._headersCapability.resolve();const m=O=>x.headers.get(O),{allowRangeRequests:_,suggestedLength:D}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=D||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._headersCapability.promise;const{value:R,done:C}=await this._reader.read();return C?{value:R,done:C}:(this._loaded+=R.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J(R),done:!1})}cancel(R){var C;(C=this._reader)==null||C.cancel(R),this._abortController.abort()}}class v{constructor(R,C,w){this._stream=R,this._reader=null,this._loaded=0;const x=R.source;this._withCredentials=x.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!x.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${w-1}`);const m=x.url;fetch(m,y(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,s.validateResponseStatus)(_.status))throw(0,s.createResponseStatusError)(_.status,m);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._readCapability.promise;const{value:R,done:C}=await this._reader.read();return C?{value:R,done:C}:(this._loaded+=R.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:J(R),done:!1})}cancel(R){var C;(C=this._reader)==null||C.cancel(R),this._abortController.abort()}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=T,n.extractFilenameFromHeader=J,n.validateRangeRequestCapabilities=S,n.validateResponseStatus=E;var i=r(1),s=r(21),y=r(6);function S({getResponseHeader:v,isHttp:B,rangeChunkSize:R,disableRange:C}){const w={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(v("Content-Length"),10);return!Number.isInteger(x)||(w.suggestedLength=x,x<=2*R)||C||!B||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(w.allowRangeRequests=!0),w}function J(v){const B=v("Content-Disposition");if(B){let R=(0,s.getFilenameFromContentDispositionHeader)(B);if(R.includes("%"))try{R=decodeURIComponent(R)}catch{}if((0,y.isPdfFile)(R))return R}return null}function T(v,B){return v===404||v===0&&B.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+B+'".'):new i.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${B}".`,v)}function E(v){return v===200||v===206}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=s;var i=r(1);function s(y){let S=!0,J=T("filename\\*","i").exec(y);if(J){J=J[1];let x=R(J);return x=unescape(x),x=C(x),x=w(x),v(x)}if(J=B(y),J){const x=w(J);return v(x)}if(J=T("filename","i").exec(y),J){J=J[1];let x=R(J);return x=w(x),v(x)}function T(x,m){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function E(x,m){if(x){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const _=new TextDecoder(x,{fatal:!0}),D=(0,i.stringToBytes)(m);m=_.decode(D),S=!1}catch{}}return m}function v(x){return S&&/[\x80-\xff]/.test(x)&&(x=E("utf-8",x),S&&(x=E("iso-8859-1",x))),x}function B(x){const m=[];let _;const D=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=D.exec(x))!==null;){let[,k,u,p]=_;if(k=parseInt(k,10),k in m){if(k===0)break;continue}m[k]=[u,p]}const O=[];for(let k=0;k<m.length&&k in m;++k){let[u,p]=m[k];p=R(p),u&&(p=unescape(p),k===0&&(p=C(p))),O.push(p)}return O.join("")}function R(x){if(x.startsWith('"')){const m=x.slice(1).split('\\"');for(let _=0;_<m.length;++_){const D=m[_].indexOf('"');D!==-1&&(m[_]=m[_].slice(0,D),m.length=_+1),m[_]=m[_].replaceAll(/\\(.)/g,"$1")}x=m.join('"')}return x}function C(x){const m=x.indexOf("'");if(m===-1)return x;const _=x.slice(0,m),O=x.slice(m+1).replace(/^[^']*'/,"");return E(_,O)}function w(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,_,D,O){if(D==="q"||D==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,u){return String.fromCharCode(parseInt(u,16))}),E(_,O);try{O=atob(O)}catch{}return E(_,O)})}return""}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var i=r(1),s=r(20);const y=200,S=206;function J(R){const C=R.response;return typeof C!="string"?C:(0,i.stringToBytes)(C).buffer}class T{constructor(C,w={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,w,x){const m={begin:C,end:w};for(const _ in x)m[_]=x[_];return this.request(m)}requestFull(C){return this.request(C)}request(C){const w=new XMLHttpRequest,x=this.currXhrId++,m=this.pendingRequests[x]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const D=this.httpHeaders[_];D!==void 0&&w.setRequestHeader(_,D)}return this.isHttp&&"begin"in C&&"end"in C?(w.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),m.expectedStatus=S):m.expectedStatus=y,w.responseType="arraybuffer",C.onError&&(w.onerror=function(_){C.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,x),w.onprogress=this.onProgress.bind(this,x),m.onHeadersReceived=C.onHeadersReceived,m.onDone=C.onDone,m.onError=C.onError,m.onProgress=C.onProgress,w.send(null),x}onProgress(C,w){var m;const x=this.pendingRequests[C];x&&((m=x.onProgress)==null||m.call(x,w))}onStateChange(C,w){var k,u,p;const x=this.pendingRequests[C];if(!x)return;const m=x.xhr;if(m.readyState>=2&&x.onHeadersReceived&&(x.onHeadersReceived(),delete x.onHeadersReceived),m.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],m.status===0&&this.isHttp){(k=x.onError)==null||k.call(x,m.status);return}const _=m.status||y;if(!(_===y&&x.expectedStatus===S)&&_!==x.expectedStatus){(u=x.onError)==null||u.call(x,m.status);return}const O=J(m);if(_===S){const I=m.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(I);x.onDone({begin:parseInt(A[1],10),chunk:O})}else O?x.onDone({begin:0,chunk:O}):(p=x.onError)==null||p.call(x,m.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const w=this.pendingRequests[C].xhr;delete this.pendingRequests[C],w.abort()}}class E{constructor(C){this._source=C,this._manager=new T(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const w=this._rangeRequestReaders.indexOf(C);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(C,w){const x=new B(this._manager,C,w);return x.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(x),x}cancelAllRequests(C){var w;(w=this._fullRequestReader)==null||w.cancel(C);for(const x of this._rangeRequestReaders.slice(0))x.cancel(C)}}n.PDFNetworkStream=E;class v{constructor(C,w){this._manager=C;const x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=C.requestFull(x),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,w=this._manager.getRequestXhr(C),x=D=>w.getResponseHeader(D),{allowRangeRequests:m,suggestedLength:_}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});m&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(x),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var w;(w=this.onProgress)==null||w.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class B{constructor(C,w,x){this._manager=C;const m={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(w,x,m),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const w=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var w;this.isStreamingSupported||(w=this.onProgress)==null||w.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var i=r(1),s=r(20);const y=/^file:\/\/\/[a-zA-Z]:\//;function S(x){const m=require$$5,_=m.parse(x);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(x)?m.parse(`file:///${x}`):(_.host||(_.protocol="file:"),_)}class J{constructor(m){this.source=m,this.url=S(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new B(this),this._fullRequestReader}getRangeReader(m,_){if(_<=this._progressiveDataLength)return null;const D=this.isFsUrl?new w(this,m,_):new R(this,m,_);return this._rangeRequestReaders.push(D),D}cancelAllRequests(m){var _;(_=this._fullRequestReader)==null||_.cancel(m);for(const D of this._rangeRequestReaders.slice(0))D.cancel(m)}}n.PDFNodeStream=J;class T{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=m.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const _=m.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function v(x,m){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:m}}class B extends T{constructor(m){super(m);const _=D=>{if(D.statusCode===404){const p=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p,this._headersCapability.reject(p);return}this._headersCapability.resolve(),this._setReadableStream(D);const O=p=>this._readableStream.headers[p.toLowerCase()],{allowRangeRequests:k,suggestedLength:u}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=u||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const D=require$$5;this._request=D.request(v(this._url,m.httpHeaders),_)}else{const D=require$$5;this._request=D.request(v(this._url,m.httpHeaders),_)}this._request.on("error",D=>{this._storedError=D,this._headersCapability.reject(D)}),this._request.end()}}class R extends E{constructor(m,_,D){super(m),this._httpHeaders={};for(const k in m.httpHeaders){const u=m.httpHeaders[k];u!==void 0&&(this._httpHeaders[k]=u)}this._httpHeaders.Range=`bytes=${_}-${D-1}`;const O=k=>{if(k.statusCode===404){const u=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(k)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(v(this._url,this._httpHeaders),O)}else{const k=require$$5;this._request=k.request(v(this._url,this._httpHeaders),O)}this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class C extends T{constructor(m){super(m);let _=decodeURIComponent(this._url.path);y.test(this._url.href)&&(_=_.replace(/^\//,""));const D=require$$5;D.lstat(_,(O,k)=>{if(O){O.code==="ENOENT"&&(O=new i.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=k.size,this._setReadableStream(D.createReadStream(_)),this._headersCapability.resolve()})}}class w extends E{constructor(m,_,D){super(m);let O=decodeURIComponent(this._url.path);y.test(this._url.href)&&(O=O.replace(/^\//,""));const k=require$$5;this._setReadableStream(k.createReadStream(O,{start:_,end:D-1}))}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var i=r(6),s=r(1);const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",J="http://www.w3.org/1999/xlink",T=["butt","round","square"],E=["miter","round","bevel"],v=function(k,u="",p=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!p)return URL.createObjectURL(new Blob([k],{type:u}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${u};base64,`;for(let h=0,j=k.length;h<j;h+=3){const b=k[h]&255,V=k[h+1]&255,X=k[h+2]&255,P=b>>2,Z=(b&3)<<4|V>>4,ot=h+1<j?(V&15)<<2|X>>6:64,ct=h+2<j?X&63:64;A+=I[P]+I[Z]+I[ot]+I[ct]}return A},B=function(){const k=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,p=new Int32Array(256);for(let X=0;X<256;X++){let P=X;for(let Z=0;Z<8;Z++)P=P&1?3988292384^P>>1&2147483647:P>>1&2147483647;p[X]=P}function I(X,P,Z){let ot=-1;for(let ct=P;ct<Z;ct++){const Y=(ot^X[ct])&255,dt=p[Y];ot=ot>>>8^dt}return ot^-1}function A(X,P,Z,ot){let ct=ot;const Y=P.length;Z[ct]=Y>>24&255,Z[ct+1]=Y>>16&255,Z[ct+2]=Y>>8&255,Z[ct+3]=Y&255,ct+=4,Z[ct]=X.charCodeAt(0)&255,Z[ct+1]=X.charCodeAt(1)&255,Z[ct+2]=X.charCodeAt(2)&255,Z[ct+3]=X.charCodeAt(3)&255,ct+=4,Z.set(P,ct),ct+=P.length;const dt=I(Z,ot+4,ct);Z[ct]=dt>>24&255,Z[ct+1]=dt>>16&255,Z[ct+2]=dt>>8&255,Z[ct+3]=dt&255}function h(X,P,Z){let ot=1,ct=0;for(let Y=P;Y<Z;++Y)ot=(ot+(X[Y]&255))%65521,ct=(ct+ot)%65521;return ct<<16|ot}function j(X){if(!s.isNodeJS)return b(X);try{const P=parseInt(process.versions.node)>=8?X:Buffer.from(X),Z=require$$5.deflateSync(P,{level:9});return Z instanceof Uint8Array?Z:new Uint8Array(Z)}catch(P){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+P)}return b(X)}function b(X){let P=X.length;const Z=65535,ot=Math.ceil(P/Z),ct=new Uint8Array(2+P+ot*5+4);let Y=0;ct[Y++]=120,ct[Y++]=156;let dt=0;for(;P>Z;)ct[Y++]=0,ct[Y++]=255,ct[Y++]=255,ct[Y++]=0,ct[Y++]=0,ct.set(X.subarray(dt,dt+Z),Y),Y+=Z,dt+=Z,P-=Z;ct[Y++]=1,ct[Y++]=P&255,ct[Y++]=P>>8&255,ct[Y++]=~P&65535&255,ct[Y++]=(~P&65535)>>8&255,ct.set(X.subarray(dt),Y),Y+=X.length-dt;const gt=h(X,0,X.length);return ct[Y++]=gt>>24&255,ct[Y++]=gt>>16&255,ct[Y++]=gt>>8&255,ct[Y++]=gt&255,ct}function V(X,P,Z,ot){const ct=X.width,Y=X.height;let dt,gt,xt;const _t=X.data;switch(P){case s.ImageKind.GRAYSCALE_1BPP:gt=0,dt=1,xt=ct+7>>3;break;case s.ImageKind.RGB_24BPP:gt=2,dt=8,xt=ct*3;break;case s.ImageKind.RGBA_32BPP:gt=6,dt=8,xt=ct*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+xt)*Y);let o=0,d=0;for(let q=0;q<Y;++q)L[o++]=0,L.set(_t.subarray(d,d+xt),o),d+=xt,o+=xt;if(P===s.ImageKind.GRAYSCALE_1BPP&&ot){o=0;for(let q=0;q<Y;q++){o++;for(let rt=0;rt<xt;rt++)L[o++]^=255}}const c=new Uint8Array([ct>>24&255,ct>>16&255,ct>>8&255,ct&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,dt,gt,0,0,0]),f=j(L),g=k.length+u*3+c.length+f.length,M=new Uint8Array(g);let $=0;return M.set(k,$),$+=k.length,A("IHDR",c,M,$),$+=u+c.length,A("IDATA",f,M,$),$+=u+f.length,A("IEND",new Uint8Array(0),M,$),v(M,"image/png",Z)}return function(P,Z,ot){const ct=P.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:P.kind;return V(P,ct,Z,ot)}}();class R{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,p){this.x=u,this.y=p}}function C(k){let u=[];const p=[];for(const I of k){if(I.fn==="save"){u.push({fnId:92,fn:"group",items:[]}),p.push(u),u=u.at(-1).items;continue}I.fn==="restore"?u=p.pop():u.push(I)}return u}function w(k){if(Number.isInteger(k))return k.toString();const u=k.toFixed(10);let p=u.length-1;if(u[p]!=="0")return u;do p--;while(u[p]==="0");return u.substring(0,u[p]==="."?p:p+1)}function x(k){if(k[4]===0&&k[5]===0){if(k[1]===0&&k[2]===0)return k[0]===1&&k[3]===1?"":`scale(${w(k[0])} ${w(k[3])})`;if(k[0]===k[3]&&k[1]===-k[2]){const u=Math.acos(k[0])*180/Math.PI;return`rotate(${w(u)})`}}else if(k[0]===1&&k[1]===0&&k[2]===0&&k[3]===1)return`translate(${w(k[4])} ${w(k[5])})`;return`matrix(${w(k[0])} ${w(k[1])} ${w(k[2])} ${w(k[3])} ${w(k[4])} ${w(k[5])})`}let m=0,_=0,D=0;class O{constructor(u,p,I=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new R,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!I,this._operatorIdMapping=[];for(const A in s.OPS)this._operatorIdMapping[s.OPS[A]]=A}getObject(u,p=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):p}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const p=u.fnArray,I=u.argsArray;for(let A=0,h=p.length;A<h;A++)if(p[A]===s.OPS.dependency)for(const j of I[A]){const b=j.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(X=>{b.get(j,X)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(u,p,I,A,h,j){const b=[u,p,I,A,h,j];this.transformMatrix=s.Util.transform(this.transformMatrix,b),this.tgrp=null}getSVG(u,p){this.viewport=p;const I=this._initialize(p);return this.loadDependencies(u).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),I))}convertOpList(u){const p=this._operatorIdMapping,I=u.argsArray,A=u.fnArray,h=[];for(let j=0,b=A.length;j<b;j++){const V=A[j];h.push({fnId:V,fn:p[V],args:I[j]})}return C(h)}executeOpTree(u){for(const p of u){const I=p.fn,A=p.fnId,h=p.args;switch(A|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(h);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case s.OPS.setFont:this.setFont(h);break;case s.OPS.showText:this.showText(h[0]);break;case s.OPS.showSpacedText:this.showText(h[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(h[0],h[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case s.OPS.setHScale:this.setHScale(h[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.setTextRise:this.setTextRise(h[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case s.OPS.setLineWidth:this.setLineWidth(h[0]);break;case s.OPS.setLineJoin:this.setLineJoin(h[0]);break;case s.OPS.setLineCap:this.setLineCap(h[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case s.OPS.setFillColorN:this.setFillColorN(h);break;case s.OPS.shadingFill:this.shadingFill(h[0]);break;case s.OPS.setDash:this.setDash(h[0],h[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case s.OPS.setFlatness:this.setFlatness(h[0]);break;case s.OPS.setGState:this.setGState(h[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.constructPath:this.constructPath(h[0],h[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,s.warn)(`Unimplemented operator ${I}`);break}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,p,I,A,h,j){const b=this.current;b.textMatrix=b.lineMatrix=[u,p,I,A,h,j],b.textMatrixScale=Math.hypot(u,p),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${w(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",w(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.append(b.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=s.IDENTITY_MATRIX,u.lineMatrix=s.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,p){const I=this.current;I.x=I.lineX+=u,I.y=I.lineY+=p,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${w(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",w(-I.y))}showText(u){const p=this.current,I=p.font,A=p.fontSize;if(A===0)return;const h=p.fontSizeScale,j=p.charSpacing,b=p.wordSpacing,V=p.fontDirection,X=p.textHScale*V,P=I.vertical,Z=P?1:-1,ot=I.defaultVMetrics,ct=A*p.fontMatrix[0];let Y=0;for(const xt of u){if(xt===null){Y+=V*b;continue}else if(typeof xt=="number"){Y+=Z*xt*A/1e3;continue}const _t=(xt.isSpace?b:0)+j,L=xt.fontChar;let o,d,c=xt.width;if(P){let g;const M=xt.vmetric||ot;g=xt.vmetric?M[1]:c*.5,g=-g*ct;const $=M[2]*ct;c=M?-M[0]:c,o=g/h,d=(Y+$)/h}else o=Y/h,d=0;(xt.isInFont||I.missingFile)&&(p.xcoords.push(p.x+o),P&&p.ycoords.push(-p.y+d),p.tspan.textContent+=L);const f=P?c*ct-_t*V:c*ct+_t*V;Y+=f}p.tspan.setAttributeNS(null,"x",p.xcoords.map(w).join(" ")),P?p.tspan.setAttributeNS(null,"y",p.ycoords.map(w).join(" ")):p.tspan.setAttributeNS(null,"y",w(-p.y)),P?p.y-=Y:p.x+=Y*X,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${w(p.fontSize)}px`),p.fontStyle!==y.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==y.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const dt=p.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(dt===s.TextRenderingMode.FILL||dt===s.TextRenderingMode.FILL_STROKE?(p.fillColor!==y.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),dt===s.TextRenderingMode.STROKE||dt===s.TextRenderingMode.FILL_STROKE){const xt=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,xt)}let gt=p.textMatrix;p.textRise!==0&&(gt=gt.slice(),gt[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${x(gt)} scale(${w(X)}, -1)`),p.txtElement.setAttributeNS(S,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(u,p){this.setLeading(-p),this.moveText(u,p)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=v(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${p}); }
`}setFont(u){const p=this.current,I=this.commonObjs.get(u[0]);let A=u[1];p.font=I,this.embedFonts&&!I.missingFile&&!this.embeddedFonts[I.loadedName]&&(this.addFontStyle(I),this.embeddedFonts[I.loadedName]=I),p.fontMatrix=I.fontMatrix||s.FONT_IDENTITY_MATRIX;let h="normal";I.black?h="900":I.bold&&(h="bold");const j=I.italic?"italic":"normal";A<0?(A=-A,p.fontDirection=-1):p.fontDirection=1,p.fontSize=A,p.fontFamily=I.loadedName,p.fontWeight=h,p.fontStyle=j,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",w(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const u=this.current;u.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=u.txtElement)!=null&&p.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=T[u]}setLineJoin(u){this.current.lineJoin=E[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,p,I){this.current.strokeColor=s.Util.makeHexColor(u,p,I)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,p,I){this.current.fillColor=s.Util.makeHexColor(u,p,I),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const{width:p,height:I}=this.viewport,A=s.Util.inverseTransform(this.transformMatrix),[h,j,b,V]=s.Util.getAxialAlignedBoundingBox([0,0,p,I],A),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",h),X.setAttributeNS(null,"y",j),X.setAttributeNS(null,"width",b-h),X.setAttributeNS(null,"height",V-j),X.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(u){return u[0]==="TilingPattern"?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const p=u[1],I=u[2],A=u[3]||s.IDENTITY_MATRIX,[h,j,b,V]=u[4],X=u[5],P=u[6],Z=u[7],ot=`shading${D++}`,[ct,Y,dt,gt]=s.Util.normalizeRect([...s.Util.applyTransform([h,j],A),...s.Util.applyTransform([b,V],A)]),[xt,_t]=s.Util.singularValueDecompose2dScale(A),L=X*xt,o=P*_t,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",ot),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",L),d.setAttributeNS(null,"height",o),d.setAttributeNS(null,"x",`${ct}`),d.setAttributeNS(null,"y",`${Y}`);const c=this.svg,f=this.transformMatrix,g=this.current.fillColor,M=this.current.strokeColor,$=this.svgFactory.create(dt-ct,gt-Y);if(this.svg=$,this.transformMatrix=A,Z===2){const q=s.Util.makeHexColor(...p);this.current.fillColor=q,this.current.strokeColor=q}return this.executeOpTree(this.convertOpList(I)),this.svg=c,this.transformMatrix=f,this.current.fillColor=g,this.current.strokeColor=M,d.append($.childNodes[0]),this.defs.append(d),`url(#${ot})`}_makeShadingPattern(u){switch(typeof u=="string"&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const p=`shading${D++}`,I=u[3];let A;switch(u[1]){case"axial":const h=u[4],j=u[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",p),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",h[0]),A.setAttributeNS(null,"y1",h[1]),A.setAttributeNS(null,"x2",j[0]),A.setAttributeNS(null,"y2",j[1]);break;case"radial":const b=u[4],V=u[5],X=u[6],P=u[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",p),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",V[0]),A.setAttributeNS(null,"cy",V[1]),A.setAttributeNS(null,"r",P),A.setAttributeNS(null,"fx",b[0]),A.setAttributeNS(null,"fy",b[1]),A.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const h of I){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",h[0]),j.setAttributeNS(null,"stop-color",h[1]),A.append(j)}return this.defs.append(A),`url(#${p})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,p){this.current.dashArray=u,this.current.dashPhase=p}constructPath(u,p){const I=this.current;let A=I.x,h=I.y,j=[],b=0;for(const V of u)switch(V|0){case s.OPS.rectangle:A=p[b++],h=p[b++];const X=p[b++],P=p[b++],Z=A+X,ot=h+P;j.push("M",w(A),w(h),"L",w(Z),w(h),"L",w(Z),w(ot),"L",w(A),w(ot),"Z");break;case s.OPS.moveTo:A=p[b++],h=p[b++],j.push("M",w(A),w(h));break;case s.OPS.lineTo:A=p[b++],h=p[b++],j.push("L",w(A),w(h));break;case s.OPS.curveTo:A=p[b+4],h=p[b+5],j.push("C",w(p[b]),w(p[b+1]),w(p[b+2]),w(p[b+3]),w(A),w(h)),b+=6;break;case s.OPS.curveTo2:j.push("C",w(A),w(h),w(p[b]),w(p[b+1]),w(p[b+2]),w(p[b+3])),A=p[b+2],h=p[b+3],b+=4;break;case s.OPS.curveTo3:A=p[b+2],h=p[b+3],j.push("C",w(p[b]),w(p[b+1]),w(A),w(h),w(A),w(h)),b+=4;break;case s.OPS.closePath:j.push("Z");break}j=j.join(" "),I.path&&u.length>0&&u[0]!==s.OPS.rectangle&&u[0]!==s.OPS.moveTo?j=I.path.getAttributeNS(null,"d")+j:(I.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(I.path)),I.path.setAttributeNS(null,"d",j),I.path.setAttributeNS(null,"fill","none"),I.element=I.path,I.setCurrentPoint(A,h)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element){this.pendingClip=null;return}const p=`clippath${m++}`,I=this.svgFactory.createElement("svg:clipPath");I.setAttributeNS(null,"id",p),I.setAttributeNS(null,"transform",x(this.transformMatrix));const A=u.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,I.append(A),this.defs.append(I),u.activeClipUrl){u.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;I.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const p=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",p)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[p,I]of u)switch(p){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I);break;case"CA":this.setStrokeAlpha(I);break;case"ca":this.setFillAlpha(I);break;default:(0,s.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,p=1){const I=this.current;let A=I.dashArray;p!==1&&A.length>0&&(A=A.map(function(h){return p*h})),u.setAttributeNS(null,"stroke",I.strokeColor),u.setAttributeNS(null,"stroke-opacity",I.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",w(I.miterLimit)),u.setAttributeNS(null,"stroke-linecap",I.lineCap),u.setAttributeNS(null,"stroke-linejoin",I.lineJoin),u.setAttributeNS(null,"stroke-width",w(p*I.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",A.map(w).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",w(p*I.dashPhase)+"px")}eoFill(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(u)}paintImageXObject(u){const p=this.getObject(u);if(!p){(0,s.warn)(`Dependent image with object ID ${u} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(u,p){const I=u.width,A=u.height,h=B(u,this.forceDataSchema,!!p),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",w(I)),j.setAttributeNS(null,"height",w(A)),this.current.element=j,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(J,"xlink:href",h),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",w(-A)),b.setAttributeNS(null,"width",w(I)+"px"),b.setAttributeNS(null,"height",w(A)+"px"),b.setAttributeNS(null,"transform",`scale(${w(1/I)} ${w(-1/A)})`),p?p.append(b):this._ensureTransformGroup().append(b)}paintImageMaskXObject(u){const p=this.getObject(u.data,u);if(p.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const I=this.current,A=p.width,h=p.height,j=I.fillColor;I.maskId=`mask${_++}`;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",I.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",w(A)),V.setAttributeNS(null,"height",w(h)),V.setAttributeNS(null,"fill",j),V.setAttributeNS(null,"mask",`url(#${I.maskId})`),this.defs.append(b),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(p,b)}paintFormXObjectBegin(u,p){if(Array.isArray(u)&&u.length===6&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),p){const I=p[2]-p[0],A=p[3]-p[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",p[0]),h.setAttributeNS(null,"y",p[1]),h.setAttributeNS(null,"width",w(I)),h.setAttributeNS(null,"height",w(A)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const p=this.svgFactory.create(u.width,u.height),I=this.svgFactory.createElement("svg:defs");p.append(I),this.defs=I;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",x(u.transform)),p.append(A),this.svg=A,p}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",x(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}n.SVGGraphics=O},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class r{static textContent(s){const y=[],S={items:y,styles:Object.create(null)};function J(T){var B;if(!T)return;let E=null;const v=T.name;if(v==="#text")E=T.value;else if(r.shouldBuildText(v))(B=T==null?void 0:T.attributes)!=null&&B.textContent?E=T.attributes.textContent:T.value&&(E=T.value);else return;if(E!==null&&y.push({str:E}),!!T.children)for(const R of T.children)J(R)}return J(s),S}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}n.XfaText=r},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=x,n.updateTextLayer=m;var i=r(1),s=r(6);const y=1e5,S=30,J=.8,T=new Map;function E(_,D){let O;if(D&&i.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=_,O=k.getContext("2d",{alpha:!1})}return O}function v(_,D){const O=T.get(_);if(O)return O;const k=E(S,D);k.font=`${S}px ${_}`;const u=k.measureText("");let p=u.fontBoundingBoxAscent,I=Math.abs(u.fontBoundingBoxDescent);if(p){const h=p/(p+I);return T.set(_,h),k.canvas.width=k.canvas.height=0,h}k.strokeStyle="red",k.clearRect(0,0,S,S),k.strokeText("g",0,0);let A=k.getImageData(0,0,S,S).data;I=0;for(let h=A.length-1-3;h>=0;h-=4)if(A[h]>0){I=Math.ceil(h/4/S);break}k.clearRect(0,0,S,S),k.strokeText("A",0,S),A=k.getImageData(0,0,S,S).data,p=0;for(let h=0,j=A.length;h<j;h+=4)if(A[h]>0){p=S-Math.floor(h/4/S);break}if(k.canvas.width=k.canvas.height=0,p){const h=p/(p+I);return T.set(_,h),h}return T.set(_,J),J}function B(_,D,O){const k=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,fontSize:0};_._textDivs.push(k);const p=i.Util.transform(_._transform,D.transform);let I=Math.atan2(p[1],p[0]);const A=O[D.fontName];A.vertical&&(I+=Math.PI/2);const h=Math.hypot(p[2],p[3]),j=h*v(A.fontFamily,_._isOffscreenCanvasSupported);let b,V;I===0?(b=p[4],V=p[5]-j):(b=p[4]+j*Math.sin(I),V=p[5]-j*Math.cos(I));const X="calc(var(--scale-factor)*",P=k.style;_._container===_._rootContainer?(P.left=`${(100*b/_._pageWidth).toFixed(2)}%`,P.top=`${(100*V/_._pageHeight).toFixed(2)}%`):(P.left=`${X}${b.toFixed(2)}px)`,P.top=`${X}${V.toFixed(2)}px)`),P.fontSize=`${X}${h.toFixed(2)}px)`,P.fontFamily=A.fontFamily,u.fontSize=h,k.setAttribute("role","presentation"),k.textContent=D.str,k.dir=D.dir,_._fontInspectorEnabled&&(k.dataset.fontName=D.fontName),I!==0&&(u.angle=I*(180/Math.PI));let Z=!1;if(D.str.length>1)Z=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const ot=Math.abs(D.transform[0]),ct=Math.abs(D.transform[3]);ot!==ct&&Math.max(ot,ct)/Math.min(ot,ct)>1.5&&(Z=!0)}Z&&(u.canvasWidth=A.vertical?D.height:D.width),_._textDivProperties.set(k,u),_._isReadableStream&&_._layoutText(k)}function R(_){const{div:D,scale:O,properties:k,ctx:u,prevFontSize:p,prevFontFamily:I}=_,{style:A}=D;let h="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:j}=A,{canvasWidth:b,fontSize:V}=k;(p!==V||I!==j)&&(u.font=`${V*O}px ${j}`,_.prevFontSize=V,_.prevFontFamily=j);const{width:X}=u.measureText(D.textContent);X>0&&(h=`scaleX(${b*O/X})`)}k.angle!==0&&(h=`rotate(${k.angle}deg) ${h}`),h.length>0&&(A.transform=h)}function C(_){if(_._canceled)return;const D=_._textDivs,O=_._capability;if(D.length>y){O.resolve();return}if(!_._isReadableStream)for(const u of D)_._layoutText(u);O.resolve()}class w{constructor({textContentSource:D,container:O,viewport:k,textDivs:u,textDivProperties:p,textContentItemsStr:I,isOffscreenCanvasSupported:A}){var X;this._textContentSource=D,this._isReadableStream=D instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=u||[],this._textContentItemsStr=I||[],this._isOffscreenCanvasSupported=A,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,A)};const{pageWidth:h,pageHeight:j,pageX:b,pageY:V}=k.rawDims;this._transform=[1,0,0,-1,-b,V+j],this._pageWidth=h,this._pageHeight=j,(0,s.setLayerDimensions)(O,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(D,O){for(const k of D){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),u.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),B(this,k,O)}}_layoutText(D){const O=this._layoutTextParams.properties=this._textDivProperties.get(D);if(this._layoutTextParams.div=D,R(this._layoutTextParams),O.hasText&&this._container.append(D),O.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const D=new i.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:u,done:p})=>{if(p){D.resolve();return}Object.assign(O,u.styles),this._processItems(u.items,O),k()},D.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:u}=this._textContentSource;this._processItems(k,u),D.resolve()}else throw new Error('No "textContentSource" parameter specified.');D.promise.then(()=>{O=null,C(this)},this._capability.reject)}}n.TextLayerRenderTask=w;function x(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:D,viewport:O}=_,k=getComputedStyle(D),u=k.getPropertyValue("visibility"),p=parseFloat(k.getPropertyValue("--scale-factor"));u==="visible"&&(!p||Math.abs(p-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const I=new w(_);return I._render(),I}function m({container:_,viewport:D,textDivs:O,textDivProperties:k,isOffscreenCanvasSupported:u,mustRotate:p=!0,mustRescale:I=!0}){if(p&&(0,s.setLayerDimensions)(_,{rotation:D.rotation}),I){const A=E(0,u),j={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:A};for(const b of O)j.properties=k.get(b),j.div=b,R(j)}}},(t,n,r)=>{var v,B,R,C,w,x,m,_,D,O,k,rn,p,Fe,A,an,j,sn;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var i=r(1),s=r(4),y=r(28),S=r(33),J=r(6),T=r(34);const V=class V{constructor({uiManager:P,pageIndex:Z,div:ot,accessibilityManager:ct,annotationLayer:Y,viewport:dt,l10n:gt}){H(this,k);H(this,p);H(this,A);H(this,j);H(this,v,void 0);H(this,B,!1);H(this,R,null);H(this,C,this.pointerup.bind(this));H(this,w,this.pointerdown.bind(this));H(this,x,new Map);H(this,m,!1);H(this,_,!1);H(this,D,!1);H(this,O,void 0);const xt=[y.FreeTextEditor,S.InkEditor,T.StampEditor];if(!V._initialized){V._initialized=!0;for(const _t of xt)_t.initialize(gt)}P.registerEditorTypes(xt),lt(this,O,P),this.pageIndex=Z,this.div=ot,lt(this,v,ct),lt(this,R,Y),this.viewport=dt,a(this,O).addLayer(this)}get isEmpty(){return a(this,x).size===0}updateToolbar(P){a(this,O).updateToolbar(P)}updateMode(P=a(this,O).getMode()){et(this,j,sn).call(this),P===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),P!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",P===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&a(this,O).getMode()!==i.AnnotationEditorType.INK)return;if(!P){for(const ot of a(this,x).values())if(ot.isEmpty()){ot.setInBackground();return}}et(this,p,Fe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(P){a(this,O).setEditingState(P)}addCommands(P){a(this,O).addCommands(P)}enable(){this.div.style.pointerEvents="auto";const P=new Set;for(const ot of a(this,x).values())ot.enableEditing(),ot.annotationElementId&&P.add(ot.annotationElementId);if(!a(this,R))return;const Z=a(this,R).getEditableAnnotations();for(const ot of Z){if(ot.hide(),a(this,O).isDeletedAnnotationElement(ot.data.id)||P.has(ot.data.id))continue;const ct=this.deserialize(ot);ct&&(this.addOrRebuild(ct),ct.enableEditing())}}disable(){var Z;lt(this,D,!0),this.div.style.pointerEvents="none";const P=new Set;for(const ot of a(this,x).values()){if(ot.disableEditing(),!ot.annotationElementId||ot.serialize()!==null){P.add(ot.annotationElementId);continue}(Z=this.getEditableAnnotation(ot.annotationElementId))==null||Z.show(),ot.remove()}if(a(this,R)){const ot=a(this,R).getEditableAnnotations();for(const ct of ot){const{id:Y}=ct.data;P.has(Y)||a(this,O).isDeletedAnnotationElement(Y)||ct.show()}}et(this,j,sn).call(this),this.isEmpty&&(this.div.hidden=!0),lt(this,D,!1)}getEditableAnnotation(P){var Z;return((Z=a(this,R))==null?void 0:Z.getEditableAnnotation(P))||null}setActiveEditor(P){a(this,O).getActive()!==P&&a(this,O).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",a(this,w)),this.div.addEventListener("pointerup",a(this,C))}disableClick(){this.div.removeEventListener("pointerdown",a(this,w)),this.div.removeEventListener("pointerup",a(this,C))}attach(P){a(this,x).set(P.id,P);const{annotationElementId:Z}=P;Z&&a(this,O).isDeletedAnnotationElement(Z)&&a(this,O).removeDeletedAnnotationElement(P)}detach(P){var Z;a(this,x).delete(P.id),(Z=a(this,v))==null||Z.removePointerInTextLayer(P.contentDiv),!a(this,D)&&P.annotationElementId&&a(this,O).addDeletedAnnotationElement(P)}remove(P){this.detach(P),a(this,O).removeEditor(P),P.div.contains(document.activeElement)&&setTimeout(()=>{a(this,O).focusMainContainer()},0),P.div.remove(),P.isAttachedToDOM=!1,a(this,_)||this.addInkEditorIfNeeded(!1)}changeParent(P){var Z;P.parent!==this&&(P.annotationElementId&&(a(this,O).addDeletedAnnotationElement(P.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(P),P.annotationElementId=null),this.attach(P),(Z=P.parent)==null||Z.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))}add(P){if(this.changeParent(P),a(this,O).addEditor(P),this.attach(P),!P.isAttachedToDOM){const Z=P.render();this.div.append(Z),P.isAttachedToDOM=!0}P.fixAndSetPosition(),P.onceAdded(),a(this,O).addToAnnotationStorage(P)}moveEditorInDOM(P){var ot;if(!P.isAttachedToDOM)return;const{activeElement:Z}=document;P.div.contains(Z)&&(P._focusEventsAllowed=!1,setTimeout(()=>{P.div.contains(document.activeElement)?P._focusEventsAllowed=!0:(P.div.addEventListener("focusin",()=>{P._focusEventsAllowed=!0},{once:!0}),Z.focus())},0)),P._structTreeParentId=(ot=a(this,v))==null?void 0:ot.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addUndoableEditor(P){const Z=()=>P._uiManager.rebuild(P),ot=()=>{P.remove()};this.addCommands({cmd:Z,undo:ot,mustExec:!1})}getNextId(){return a(this,O).getId()}pasteEditor(P,Z){a(this,O).updateToolbar(P),a(this,O).updateMode(P);const{offsetX:ot,offsetY:ct}=et(this,A,an).call(this),Y=this.getNextId(),dt=et(this,k,rn).call(this,{parent:this,id:Y,x:ot,y:ct,uiManager:a(this,O),isCentered:!0,...Z});dt&&this.add(dt)}deserialize(P){switch(P.annotationType??P.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return y.FreeTextEditor.deserialize(P,this,a(this,O));case i.AnnotationEditorType.INK:return S.InkEditor.deserialize(P,this,a(this,O));case i.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(P,this,a(this,O))}return null}addNewEditor(){et(this,p,Fe).call(this,et(this,A,an).call(this),!0)}setSelected(P){a(this,O).setSelected(P)}toggleSelected(P){a(this,O).toggleSelected(P)}isSelected(P){return a(this,O).isSelected(P)}unselect(P){a(this,O).unselect(P)}pointerup(P){const{isMac:Z}=i.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&Z)&&P.target===this.div&&a(this,m)){if(lt(this,m,!1),!a(this,B)){lt(this,B,!0);return}if(a(this,O).getMode()===i.AnnotationEditorType.STAMP){a(this,O).unselectAll();return}et(this,p,Fe).call(this,P,!1)}}pointerdown(P){if(a(this,m)){lt(this,m,!1);return}const{isMac:Z}=i.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&Z||P.target!==this.div)return;lt(this,m,!0);const ot=a(this,O).getActive();lt(this,B,!ot||ot.isEmpty())}findNewParent(P,Z,ot){const ct=a(this,O).findParent(Z,ot);return ct===null||ct===this?!1:(ct.changeParent(P),!0)}destroy(){var P,Z;((P=a(this,O).getActive())==null?void 0:P.parent)===this&&(a(this,O).commitOrRemove(),a(this,O).setActiveEditor(null));for(const ot of a(this,x).values())(Z=a(this,v))==null||Z.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,a(this,x).clear(),a(this,O).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,J.setLayerDimensions)(this.div,P);for(const Z of a(this,O).getEditors(this.pageIndex))this.add(Z);this.updateMode()}update({viewport:P}){a(this,O).commitOrRemove(),this.viewport=P,(0,J.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:Z}=this.viewport.rawDims;return[P,Z]}};v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakSet,rn=function(P){switch(a(this,O).getMode()){case i.AnnotationEditorType.FREETEXT:return new y.FreeTextEditor(P);case i.AnnotationEditorType.INK:return new S.InkEditor(P);case i.AnnotationEditorType.STAMP:return new T.StampEditor(P)}return null},p=new WeakSet,Fe=function(P,Z){const ot=this.getNextId(),ct=et(this,k,rn).call(this,{parent:this,id:ot,x:P.offsetX,y:P.offsetY,uiManager:a(this,O),isCentered:Z});return ct&&this.add(ct),ct},A=new WeakSet,an=function(){const{x:P,y:Z,width:ot,height:ct}=this.div.getBoundingClientRect(),Y=Math.max(0,P),dt=Math.max(0,Z),gt=Math.min(window.innerWidth,P+ot),xt=Math.min(window.innerHeight,Z+ct),_t=(Y+gt)/2-P,L=(dt+xt)/2-Z,[o,d]=this.viewport.rotation%180===0?[_t,L]:[L,_t];return{offsetX:o,offsetY:d}},j=new WeakSet,sn=function(){lt(this,_,!0);for(const P of a(this,x).values())P.isEmpty()&&P.remove();lt(this,_,!1)},ne(V,"_initialized",!1);let E=V;n.AnnotationEditorLayer=E},(t,n,r)=>{var T,E,v,B,R,C,w,x,m,_,Dn,O,In,u,On,I,xe,h,on,b,Ln,X,ln;Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var i=r(1),s=r(5),y=r(4),S=r(29);const Z=class Z extends y.AnnotationEditor{constructor(Y){super({...Y,name:"freeTextEditor"});H(this,_);H(this,O);H(this,u);H(this,I);H(this,h);H(this,b);H(this,X);H(this,T,this.editorDivBlur.bind(this));H(this,E,this.editorDivFocus.bind(this));H(this,v,this.editorDivInput.bind(this));H(this,B,this.editorDivKeydown.bind(this));H(this,R,void 0);H(this,C,"");H(this,w,`${this.id}-editor`);H(this,x,void 0);H(this,m,null);lt(this,R,Y.color||Z._defaultColor||y.AnnotationEditor._defaultLineColor),lt(this,x,Y.fontSize||Z._defaultFontSize)}static get _keyboardManager(){const Y=Z.prototype,dt=_t=>_t.isEmpty(),gt=s.AnnotationEditorUIManager.TRANSLATE_SMALL,xt=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Y.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Y.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Y._translateEmpty,{args:[-gt,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Y._translateEmpty,{args:[-xt,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],Y._translateEmpty,{args:[gt,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Y._translateEmpty,{args:[xt,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],Y._translateEmpty,{args:[0,-gt],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Y._translateEmpty,{args:[0,-xt],checker:dt}],[["ArrowDown","mac+ArrowDown"],Y._translateEmpty,{args:[0,gt],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Y._translateEmpty,{args:[0,xt],checker:dt}]]))}static initialize(Y){y.AnnotationEditor.initialize(Y,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const dt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(dt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Y,dt){switch(Y){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Z._defaultFontSize=dt;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Z._defaultColor=dt;break}}updateParams(Y,dt){switch(Y){case i.AnnotationEditorParamsType.FREETEXT_SIZE:et(this,_,Dn).call(this,dt);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:et(this,O,In).call(this,dt);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,Z._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,Z._defaultColor||y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,x)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,R)]]}_translateEmpty(Y,dt){this._uiManager.translateSelectedEditors(Y,dt,!0)}getInitialTranslation(){const Y=this.parentScale;return[-Z._internalPadding*Y,-(Z._internalPadding+a(this,x))*Y]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,B)),this.editorDiv.addEventListener("focus",a(this,E)),this.editorDiv.addEventListener("blur",a(this,T)),this.editorDiv.addEventListener("input",a(this,v)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,w)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,B)),this.editorDiv.removeEventListener("focus",a(this,E)),this.editorDiv.removeEventListener("blur",a(this,T)),this.editorDiv.removeEventListener("input",a(this,v)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Y){this._focusEventsAllowed&&(super.focusin(Y),Y.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Y;if(this.width){et(this,X,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Y=this._initialOptions)!=null&&Y.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Y=a(this,C),dt=lt(this,C,et(this,u,On).call(this).trimEnd());if(Y===dt)return;const gt=xt=>{if(lt(this,C,xt),!xt){this.remove();return}et(this,h,on).call(this),this._uiManager.rebuild(this),et(this,I,xe).call(this)};this.addCommands({cmd:()=>{gt(dt)},undo:()=>{gt(Y)},mustExec:!1}),et(this,I,xe).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Y){this.enterInEditMode()}keydown(Y){Y.target===this.div&&Y.key==="Enter"&&(this.enterInEditMode(),Y.preventDefault())}editorDivKeydown(Y){Z._keyboardManager.exec(this,Y)}editorDivFocus(Y){this.isEditing=!0}editorDivBlur(Y){this.isEditing=!1}editorDivInput(Y){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Y,dt;this.width&&(Y=this.x,dt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,w)),this.enableEditing(),y.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(xt=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("aria-label",xt)}),y.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(xt=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("default-content",xt)}),this.editorDiv.contentEditable=!0;const{style:gt}=this.editorDiv;if(gt.fontSize=`calc(${a(this,x)}px * var(--scale-factor))`,gt.color=a(this,R),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[xt,_t]=this.parentDimensions;if(this.annotationElementId){const{position:L}=a(this,m);let[o,d]=this.getInitialTranslation();[o,d]=this.pageTranslationToScreen(o,d);const[c,f]=this.pageDimensions,[g,M]=this.pageTranslation;let $,q;switch(this.rotation){case 0:$=Y+(L[0]-g)/c,q=dt+this.height-(L[1]-M)/f;break;case 90:$=Y+(L[0]-g)/c,q=dt-(L[1]-M)/f,[o,d]=[d,-o];break;case 180:$=Y-this.width+(L[0]-g)/c,q=dt-(L[1]-M)/f,[o,d]=[-o,-d];break;case 270:$=Y+(L[0]-g-this.height*f)/c,q=dt+(L[1]-M-this.width*c)/f,[o,d]=[-d,o];break}this.setAt($*xt,q*_t,o,d)}else this.setAt(Y*xt,dt*_t,this.width*xt,this.height*_t);et(this,h,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Y,dt,gt){let xt=null;if(Y instanceof S.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:L,fontColor:o},rect:d,rotation:c,id:f},textContent:g,textPosition:M,parent:{page:{pageNumber:$}}}=Y;if(!g||g.length===0)return null;xt=Y={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(o),fontSize:L,value:g.join(`
`),position:M,pageIndex:$-1,rect:d,rotation:c,id:f,deleted:!1}}const _t=super.deserialize(Y,dt,gt);return lt(_t,x,Y.fontSize),lt(_t,R,i.Util.makeHexColor(...Y.color)),lt(_t,C,Y.value),_t.annotationElementId=Y.id||null,lt(_t,m,xt),_t}serialize(Y=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const dt=Z._internalPadding*this.parentScale,gt=this.getRect(dt,dt),xt=y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,R)),_t={annotationType:i.AnnotationEditorType.FREETEXT,color:xt,fontSize:a(this,x),value:a(this,C),pageIndex:this.pageIndex,rect:gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Y?_t:this.annotationElementId&&!et(this,b,Ln).call(this,_t)?null:(_t.id=this.annotationElementId,_t)}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakSet,Dn=function(Y){const dt=xt=>{this.editorDiv.style.fontSize=`calc(${xt}px * var(--scale-factor))`,this.translate(0,-(xt-a(this,x))*this.parentScale),lt(this,x,xt),et(this,I,xe).call(this)},gt=a(this,x);this.addCommands({cmd:()=>{dt(Y)},undo:()=>{dt(gt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,In=function(Y){const dt=a(this,R);this.addCommands({cmd:()=>{lt(this,R,this.editorDiv.style.color=Y)},undo:()=>{lt(this,R,this.editorDiv.style.color=dt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,On=function(){const Y=this.editorDiv.getElementsByTagName("div");if(Y.length===0)return this.editorDiv.innerText;const dt=[];for(const gt of Y)dt.push(gt.innerText.replace(/\r\n?|\n/,""));return dt.join(`
`)},I=new WeakSet,xe=function(){const[Y,dt]=this.parentDimensions;let gt;if(this.isAttachedToDOM)gt=this.div.getBoundingClientRect();else{const{currentLayer:xt,div:_t}=this,L=_t.style.display;_t.style.display="hidden",xt.div.append(this.div),gt=_t.getBoundingClientRect(),_t.remove(),_t.style.display=L}this.rotation%180===this.parentRotation%180?(this.width=gt.width/Y,this.height=gt.height/dt):(this.width=gt.height/Y,this.height=gt.width/dt),this.fixAndSetPosition()},h=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!a(this,C))for(const Y of a(this,C).split(`
`)){const dt=document.createElement("div");dt.append(Y?document.createTextNode(Y):document.createElement("br")),this.editorDiv.append(dt)}},b=new WeakSet,Ln=function(Y){const{value:dt,fontSize:gt,color:xt,rect:_t,pageIndex:L}=a(this,m);return Y.value!==dt||Y.fontSize!==gt||Y.rect.some((o,d)=>Math.abs(o-_t[d])>=1)||Y.color.some((o,d)=>o!==xt[d])||Y.pageIndex!==L},X=new WeakSet,ln=function(Y=!1){if(!this.annotationElementId)return;if(et(this,I,xe).call(this),!Y&&(this.width===0||this.height===0)){setTimeout(()=>et(this,X,ln).call(this,!0),0);return}const dt=Z._internalPadding*this.parentScale;a(this,m).rect=this.getRect(dt,dt)},ne(Z,"_freeTextDefaultContent",""),ne(Z,"_internalPadding",0),ne(Z,"_defaultColor",null),ne(Z,"_defaultFontSize",10),ne(Z,"_type","freetext");let J=Z;n.FreeTextEditor=J},(t,n,r)=>{var d,f,de,M,jn,q,rt,nt,ut,mt,yt,ft,Pt,It,St,Dt,U,G,N,K,pt,bt,Rt,Nn,Bt,Re,Gt,cn,qt,dn,at,tt,At,wt,ee,te,st,un,$t,kt,Ut,zt,$n,Tt,hn;Object.defineProperty(n,"__esModule",{value:!0}),n.StampAnnotationElement=n.InkAnnotationElement=n.FreeTextAnnotationElement=n.AnnotationLayer=void 0;var i=r(1),s=r(6),y=r(3),S=r(30),J=r(31),T=r(32);const E=1e3,v=9,B=new WeakSet;function R(Nt){return{width:Nt[2]-Nt[0],height:Nt[3]-Nt[1]}}class C{static create(z){switch(z.data.annotationType){case i.AnnotationType.LINK:return new x(z);case i.AnnotationType.TEXT:return new m(z);case i.AnnotationType.WIDGET:switch(z.data.fieldType){case"Tx":return new D(z);case"Btn":return z.data.radioButton?new u(z):z.data.checkBox?new k(z):new p(z);case"Ch":return new I(z);case"Sig":return new O(z)}return new _(z);case i.AnnotationType.POPUP:return new A(z);case i.AnnotationType.FREETEXT:return new j(z);case i.AnnotationType.LINE:return new b(z);case i.AnnotationType.SQUARE:return new V(z);case i.AnnotationType.CIRCLE:return new X(z);case i.AnnotationType.POLYLINE:return new P(z);case i.AnnotationType.CARET:return new ot(z);case i.AnnotationType.INK:return new ct(z);case i.AnnotationType.POLYGON:return new Z(z);case i.AnnotationType.HIGHLIGHT:return new Y(z);case i.AnnotationType.UNDERLINE:return new dt(z);case i.AnnotationType.SQUIGGLY:return new gt(z);case i.AnnotationType.STRIKEOUT:return new xt(z);case i.AnnotationType.STAMP:return new _t(z);case i.AnnotationType.FILEATTACHMENT:return new L(z);default:return new w(z)}}}const c=class c{constructor(z,{isRenderable:l=!1,ignoreBorder:F=!1,createQuadrilaterals:W=!1}={}){H(this,d,!1);this.isRenderable=l,this.data=z.data,this.layer=z.layer,this.linkService=z.linkService,this.downloadManager=z.downloadManager,this.imageResourcesPath=z.imageResourcesPath,this.renderForms=z.renderForms,this.svgFactory=z.svgFactory,this.annotationStorage=z.annotationStorage,this.enableScripting=z.enableScripting,this.hasJSActions=z.hasJSActions,this._fieldObjects=z.fieldObjects,this.parent=z.parent,l&&(this.container=this._createContainer(F)),W&&this._createQuadrilaterals()}static _hasPopupData({titleObj:z,contentsObj:l,richText:F}){return!!(z!=null&&z.str||l!=null&&l.str||F!=null&&F.str)}get hasPopupData(){return c._hasPopupData(this.data)}_createContainer(z){const{data:l,parent:{page:F,viewport:W}}=this,Q=document.createElement("section");Q.setAttribute("data-annotation-id",l.id),this instanceof _||(Q.tabIndex=E),Q.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Q.setAttribute("aria-haspopup","dialog"),l.noRotate&&Q.classList.add("norotate");const{pageWidth:it,pageHeight:ht,pageX:Et,pageY:Mt}=W.rawDims;if(!l.rect||this instanceof A){const{rotation:Vt}=l;return!l.hasOwnCanvas&&Vt!==0&&this.setRotation(Vt,Q),Q}const{width:Ft,height:Xt}=R(l.rect),Ot=i.Util.normalizeRect([l.rect[0],F.view[3]-l.rect[1]+F.view[1],l.rect[2],F.view[3]-l.rect[3]+F.view[1]]);if(!z&&l.borderStyle.width>0){Q.style.borderWidth=`${l.borderStyle.width}px`;const Vt=l.borderStyle.horizontalCornerRadius,Kt=l.borderStyle.verticalCornerRadius;if(Vt>0||Kt>0){const Qt=`calc(${Vt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;Q.style.borderRadius=Qt}else if(this instanceof u){const Qt=`calc(${Ft}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;Q.style.borderRadius=Qt}switch(l.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:Q.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:Q.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:Q.style.borderBottomStyle="solid";break}const Jt=l.borderColor||null;Jt?(lt(this,d,!0),Q.style.borderColor=i.Util.makeHexColor(Jt[0]|0,Jt[1]|0,Jt[2]|0)):Q.style.borderWidth=0}Q.style.left=`${100*(Ot[0]-Et)/it}%`,Q.style.top=`${100*(Ot[1]-Mt)/ht}%`;const{rotation:Lt}=l;return l.hasOwnCanvas||Lt===0?(Q.style.width=`${100*Ft/it}%`,Q.style.height=`${100*Xt/ht}%`):this.setRotation(Lt,Q),Q}setRotation(z,l=this.container){if(!this.data.rect)return;const{pageWidth:F,pageHeight:W}=this.parent.viewport.rawDims,{width:Q,height:it}=R(this.data.rect);let ht,Et;z%180===0?(ht=100*Q/F,Et=100*it/W):(ht=100*it/F,Et=100*Q/W),l.style.width=`${ht}%`,l.style.height=`${Et}%`,l.setAttribute("data-main-rotation",(360-z)%360)}get _commonActions(){const z=(l,F,W)=>{const Q=W.detail[l],it=Q[0],ht=Q.slice(1);W.target.style[F]=S.ColorConverters[`${it}_HTML`](ht),this.annotationStorage.setValue(this.data.id,{[F]:S.ColorConverters[`${it}_rgb`](ht)})};return(0,i.shadow)(this,"_commonActions",{display:l=>{const{display:F}=l.detail,W=F%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:W,noPrint:F===1||F===2})},print:l=>{this.annotationStorage.setValue(this.data.id,{noPrint:!l.detail.print})},hidden:l=>{const{hidden:F}=l.detail;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:F,noView:F})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.target.disabled=l.detail.readonly},required:l=>{this._setRequired(l.target,l.detail.required)},bgColor:l=>{z("bgColor","backgroundColor",l)},fillColor:l=>{z("fillColor","backgroundColor",l)},fgColor:l=>{z("fgColor","color",l)},textColor:l=>{z("textColor","color",l)},borderColor:l=>{z("borderColor","borderColor",l)},strokeColor:l=>{z("strokeColor","borderColor",l)},rotation:l=>{const F=l.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(z,l){const F=this._commonActions;for(const W of Object.keys(l.detail)){const Q=z[W]||F[W];Q==null||Q(l)}}_setDefaultPropertiesFromJS(z){if(!this.enableScripting)return;const l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;const F=this._commonActions;for(const[W,Q]of Object.entries(l)){const it=F[W];if(it){const ht={detail:{[W]:Q},target:z};it(ht),delete l[W]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:z}=this.data;if(!z)return;const[l,F,W,Q]=this.data.rect;if(z.length===1){const[,{x:Kt,y:Jt},{x:Qt,y:re}]=z[0];if(W===Kt&&Q===Jt&&l===Qt&&F===re)return}const{style:it}=this.container;let ht;if(a(this,d)){const{borderColor:Kt,borderWidth:Jt}=it;it.borderWidth=0,ht=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Jt}">`],this.container.classList.add("hasBorder")}const Et=W-l,Mt=Q-F,{svgFactory:Ft}=this,Xt=Ft.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Ot=Ft.createElement("defs");Xt.append(Ot);const Lt=Ft.createElement("clipPath"),Vt=`clippath_${this.data.id}`;Lt.setAttribute("id",Vt),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Ot.append(Lt);for(const[,{x:Kt,y:Jt},{x:Qt,y:re}]of z){const ie=Ft.createElement("rect"),ae=(Qt-l)/Et,le=(Q-Jt)/Mt,ce=(Kt-Qt)/Et,xn=(Jt-re)/Mt;ie.setAttribute("x",ae),ie.setAttribute("y",le),ie.setAttribute("width",ce),ie.setAttribute("height",xn),Lt.append(ie),ht==null||ht.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${le}" width="${ce}" height="${xn}"/>`)}a(this,d)&&(ht.push("</g></svg>')"),it.backgroundImage=ht.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${Vt})`}_createPopup(){const{container:z,data:l}=this;z.setAttribute("aria-haspopup","dialog");const F=new A({data:{color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,parentRect:l.rect,borderStyle:0,id:`popup_${l.id}`,rotation:l.rotation},parent:this.parent,elements:[this]});this.parent.div.append(F.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(z,l=null){const F=[];if(this._fieldObjects){const W=this._fieldObjects[z];if(W)for(const{page:Q,id:it,exportValues:ht}of W){if(Q===-1||it===l)continue;const Et=typeof ht=="string"?ht:null,Mt=document.querySelector(`[data-element-id="${it}"]`);if(Mt&&!B.has(Mt)){(0,i.warn)(`_getElementsByName - element not allowed: ${it}`);continue}F.push({id:it,exportValue:Et,domElement:Mt})}return F}for(const W of document.getElementsByName(z)){const{exportValue:Q}=W,it=W.getAttribute("data-element-id");it!==l&&B.has(W)&&F.push({id:it,exportValue:Q,domElement:W})}return F}show(){var z;this.container&&(this.container.hidden=!1),(z=this.popup)==null||z.maybeShow()}hide(){var z;this.container&&(this.container.hidden=!0),(z=this.popup)==null||z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const z=this.getElementsToTriggerPopup();if(Array.isArray(z))for(const l of z)l.classList.add("highlightArea");else z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:z,data:{id:l}}=this;this.container.addEventListener("dblclick",()=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("switchannotationeditormode",{source:this,mode:z,editId:l})})}};d=new WeakMap;let w=c;class x extends w{constructor(l,F=null){super(l,{isRenderable:!0,ignoreBorder:!!(F!=null&&F.ignoreBorder),createQuadrilaterals:!0});H(this,f);H(this,M);this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:F}=this,W=document.createElement("a");W.setAttribute("data-element-id",l.id);let Q=!1;return l.url?(F.addLinkAttributes(W,l.url,l.newWindow),Q=!0):l.action?(this._bindNamedAction(W,l.action),Q=!0):l.attachment?(this._bindAttachment(W,l.attachment),Q=!0):l.setOCGState?(et(this,M,jn).call(this,W,l.setOCGState),Q=!0):l.dest?(this._bindLink(W,l.dest),Q=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(W,l),Q=!0),l.resetForm?(this._bindResetFormAction(W,l.resetForm),Q=!0):this.isTooltipOnly&&!Q&&(this._bindLink(W,""),Q=!0)),this.container.classList.add("linkAnnotation"),Q&&this.container.append(W),this.container}_bindLink(l,F){l.href=this.linkService.getDestinationHash(F),l.onclick=()=>(F&&this.linkService.goToDestination(F),!1),(F||F==="")&&et(this,f,de).call(this)}_bindNamedAction(l,F){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(F),!1),et(this,f,de).call(this)}_bindAttachment(l,F){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>{var W;return(W=this.downloadManager)==null||W.openOrDownloadData(this.container,F.content,F.filename),!1},et(this,f,de).call(this)}_bindJSAction(l,F){l.href=this.linkService.getAnchorUrl("");const W=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Q of Object.keys(F.actions)){const it=W.get(Q);it&&(l[it]=()=>{var ht;return(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F.id,name:Q}}),!1})}l.onclick||(l.onclick=()=>!1),et(this,f,de).call(this)}_bindResetFormAction(l,F){const W=l.onclick;if(W||(l.href=this.linkService.getAnchorUrl("")),et(this,f,de).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),W||(l.onclick=()=>!1);return}l.onclick=()=>{var Xt;W==null||W();const{fields:Q,refs:it,include:ht}=F,Et=[];if(Q.length!==0||it.length!==0){const Ot=new Set(it);for(const Lt of Q){const Vt=this._fieldObjects[Lt]||[];for(const{id:Kt}of Vt)Ot.add(Kt)}for(const Lt of Object.values(this._fieldObjects))for(const Vt of Lt)Ot.has(Vt.id)===ht&&Et.push(Vt)}else for(const Ot of Object.values(this._fieldObjects))Et.push(...Ot);const Mt=this.annotationStorage,Ft=[];for(const Ot of Et){const{id:Lt}=Ot;switch(Ft.push(Lt),Ot.type){case"text":{const Kt=Ot.defaultValue||"";Mt.setValue(Lt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Ot.defaultValue===Ot.exportValues;Mt.setValue(Lt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Ot.defaultValue||"";Mt.setValue(Lt,{value:Kt});break}default:continue}const Vt=document.querySelector(`[data-element-id="${Lt}"]`);if(Vt){if(!B.has(Vt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Lt}`);continue}}else continue;Vt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ft,name:"ResetForm"}})),!1}}}f=new WeakSet,de=function(){this.container.setAttribute("data-internal-link","")},M=new WeakSet,jn=function(l,F){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(F),!1),et(this,f,de).call(this)};class m extends w{constructor(z){super(z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const z=document.createElement("img");return z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",z.alt="[{{type}} Annotation]",z.dataset.l10nId="text_annotation_type",z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(z),this.container}}class _ extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(z){var l;this.data.hasOwnCanvas&&(((l=z.previousSibling)==null?void 0:l.nodeName)==="CANVAS"&&(z.previousSibling.hidden=!0),z.hidden=!1)}_getKeyModifier(z){const{isWin:l,isMac:F}=i.FeatureTest.platform;return l&&z.ctrlKey||F&&z.metaKey}_setEventListener(z,l,F,W,Q){F.includes("mouse")?z.addEventListener(F,it=>{var ht;(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:Q(it),shift:it.shiftKey,modifier:this._getKeyModifier(it)}})}):z.addEventListener(F,it=>{var ht;if(F==="blur"){if(!l.focused||!it.relatedTarget)return;l.focused=!1}else if(F==="focus"){if(l.focused)return;l.focused=!0}Q&&((ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:Q(it)}}))})}_setEventListeners(z,l,F,W){var Q,it,ht;for(const[Et,Mt]of F)(Mt==="Action"||(Q=this.data.actions)!=null&&Q[Mt])&&((Mt==="Focus"||Mt==="Blur")&&(l||(l={focused:!1})),this._setEventListener(z,l,Et,Mt,W),Mt==="Focus"&&!((it=this.data.actions)!=null&&it.Blur)?this._setEventListener(z,l,"blur","Blur",null):Mt==="Blur"&&!((ht=this.data.actions)!=null&&ht.Focus)&&this._setEventListener(z,l,"focus","Focus",null))}_setBackgroundColor(z){const l=this.data.backgroundColor||null;z.style.backgroundColor=l===null?"transparent":i.Util.makeHexColor(l[0],l[1],l[2])}_setTextStyle(z){const l=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,W=this.data.defaultAppearanceData.fontSize||v,Q=z.style;let it;const ht=2,Et=Mt=>Math.round(10*Mt)/10;if(this.data.multiLine){const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-ht),Ft=Math.round(Mt/(i.LINE_FACTOR*W))||1,Xt=Mt/Ft;it=Math.min(W,Et(Xt/i.LINE_FACTOR))}else{const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-ht);it=Math.min(W,Et(Mt/i.LINE_FACTOR))}Q.fontSize=`calc(${it}px * var(--scale-factor))`,Q.color=i.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(Q.textAlign=l[this.data.textAlignment])}_setRequired(z,l){l?z.setAttribute("required",!0):z.removeAttribute("required"),z.setAttribute("aria-required",l)}}class D extends _{constructor(z){const l=z.renderForms||!z.data.hasAppearance&&!!z.data.fieldValue;super(z,{isRenderable:l})}setPropertyOnSiblings(z,l,F,W){const Q=this.annotationStorage;for(const it of this._getElementsByName(z.name,z.id))it.domElement&&(it.domElement[l]=F),Q.setValue(it.id,{[W]:F})}render(){var W,Q;const z=this.annotationStorage,l=this.data.id;this.container.classList.add("textWidgetAnnotation");let F=null;if(this.renderForms){const it=z.getValue(l,{value:this.data.fieldValue});let ht=it.value||"";const Et=z.getValue(l,{charLimit:this.data.maxLen}).charLimit;Et&&ht.length>Et&&(ht=ht.slice(0,Et));let Mt=it.formattedValue||((W=this.data.textContent)==null?void 0:W.join(`
`))||null;Mt&&this.data.comb&&(Mt=Mt.replaceAll(/\s+/g,""));const Ft={userValue:ht,formattedValue:Mt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=Mt??ht,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",Mt??ht),this.data.doNotScroll&&(F.style.overflowX="hidden")),this.data.hasOwnCanvas&&(F.hidden=!0),B.add(F),F.setAttribute("data-element-id",l),F.disabled=this.data.readOnly,F.name=this.data.fieldName,F.tabIndex=E,this._setRequired(F,this.data.required),Et&&(F.maxLength=Et),F.addEventListener("input",Ot=>{z.setValue(l,{value:Ot.target.value}),this.setPropertyOnSiblings(F,"value",Ot.target.value,"value"),Ft.formattedValue=null}),F.addEventListener("resetform",Ot=>{const Lt=this.data.defaultFieldValue??"";F.value=Ft.userValue=Lt,Ft.formattedValue=null});let Xt=Ot=>{const{formattedValue:Lt}=Ft;Lt!=null&&(Ot.target.value=Lt),Ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",Lt=>{if(Ft.focused)return;const{target:Vt}=Lt;Ft.userValue&&(Vt.value=Ft.userValue),Ft.lastCommittedValue=Vt.value,Ft.commitKey=1,Ft.focused=!0}),F.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const Vt={value(Kt){Ft.userValue=Kt.detail.value??"",z.setValue(l,{value:Ft.userValue.toString()}),Kt.target.value=Ft.userValue},formattedValue(Kt){const{formattedValue:Jt}=Kt.detail;Ft.formattedValue=Jt,Jt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Jt),z.setValue(l,{formattedValue:Jt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ie;const{charLimit:Jt}=Kt.detail,{target:Qt}=Kt;if(Jt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Jt);let re=Ft.userValue;!re||re.length<=Jt||(re=re.slice(0,Jt),Qt.value=Ft.userValue=re,z.setValue(l,{value:re}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Vt,Lt)}),F.addEventListener("keydown",Lt=>{var Jt;Ft.commitKey=1;let Vt=-1;if(Lt.key==="Escape"?Vt=0:Lt.key==="Enter"&&!this.data.multiLine?Vt=2:Lt.key==="Tab"&&(Ft.commitKey=3),Vt===-1)return;const{value:Kt}=Lt.target;Ft.lastCommittedValue!==Kt&&(Ft.lastCommittedValue=Kt,Ft.userValue=Kt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Kt,willCommit:!0,commitKey:Vt,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const Ot=Xt;Xt=null,F.addEventListener("blur",Lt=>{var Kt;if(!Ft.focused||!Lt.relatedTarget)return;Ft.focused=!1;const{value:Vt}=Lt.target;Ft.userValue=Vt,Ft.lastCommittedValue!==Vt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Vt,willCommit:!0,commitKey:Ft.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),Ot(Lt)}),(Q=this.data.actions)!=null&&Q.Keystroke&&F.addEventListener("beforeinput",Lt=>{var le;Ft.lastCommittedValue=null;const{data:Vt,target:Kt}=Lt,{value:Jt,selectionStart:Qt,selectionEnd:re}=Kt;let ie=Qt,ae=re;switch(Lt.inputType){case"deleteWordBackward":{const ce=Jt.substring(0,Qt).match(/\w*[^\w]*$/);ce&&(ie-=ce[0].length);break}case"deleteWordForward":{const ce=Jt.substring(Qt).match(/^[^\w]*\w*/);ce&&(ae+=ce[0].length);break}case"deleteContentBackward":Qt===re&&(ie-=1);break;case"deleteContentForward":Qt===re&&(ae+=1);break}Lt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Jt,change:Vt||"",willCommit:!1,selStart:ie,selEnd:ae}})}),this._setEventListeners(F,Ft,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Xt&&F.addEventListener("blur",Xt),this.data.comb){const Lt=(this.data.rect[2]-this.data.rect[0])/Et;F.classList.add("comb"),F.style.letterSpacing=`calc(${Lt}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class O extends _{constructor(z){super(z,{isRenderable:!!z.data.hasOwnCanvas})}}class k extends _{constructor(z){super(z,{isRenderable:z.renderForms})}render(){const z=this.annotationStorage,l=this.data,F=l.id;let W=z.getValue(F,{value:l.exportValue===l.fieldValue}).value;typeof W=="string"&&(W=W!=="Off",z.setValue(F,{value:W})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Q=document.createElement("input");return B.add(Q),Q.setAttribute("data-element-id",F),Q.disabled=l.readOnly,this._setRequired(Q,this.data.required),Q.type="checkbox",Q.name=l.fieldName,W&&Q.setAttribute("checked",!0),Q.setAttribute("exportValue",l.exportValue),Q.tabIndex=E,Q.addEventListener("change",it=>{const{name:ht,checked:Et}=it.target;for(const Mt of this._getElementsByName(ht,F)){const Ft=Et&&Mt.exportValue===l.exportValue;Mt.domElement&&(Mt.domElement.checked=Ft),z.setValue(Mt.id,{value:Ft})}z.setValue(F,{value:Et})}),Q.addEventListener("resetform",it=>{const ht=l.defaultFieldValue||"Off";it.target.checked=ht===l.exportValue}),this.enableScripting&&this.hasJSActions&&(Q.addEventListener("updatefromsandbox",it=>{const ht={value(Et){Et.target.checked=Et.detail.value!=="Off",z.setValue(F,{value:Et.target.checked})}};this._dispatchEventFromSandbox(ht,it)}),this._setEventListeners(Q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)),this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class u extends _{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const z=this.annotationStorage,l=this.data,F=l.id;let W=z.getValue(F,{value:l.fieldValue===l.buttonValue}).value;typeof W=="string"&&(W=W!==l.buttonValue,z.setValue(F,{value:W}));const Q=document.createElement("input");if(B.add(Q),Q.setAttribute("data-element-id",F),Q.disabled=l.readOnly,this._setRequired(Q,this.data.required),Q.type="radio",Q.name=l.fieldName,W&&Q.setAttribute("checked",!0),Q.tabIndex=E,Q.addEventListener("change",it=>{const{name:ht,checked:Et}=it.target;for(const Mt of this._getElementsByName(ht,F))z.setValue(Mt.id,{value:!1});z.setValue(F,{value:Et})}),Q.addEventListener("resetform",it=>{const ht=l.defaultFieldValue;it.target.checked=ht!=null&&ht===l.buttonValue}),this.enableScripting&&this.hasJSActions){const it=l.buttonValue;Q.addEventListener("updatefromsandbox",ht=>{const Et={value:Mt=>{const Ft=it===Mt.detail.value;for(const Xt of this._getElementsByName(Mt.target.name)){const Ot=Ft&&Xt.id===F;Xt.domElement&&(Xt.domElement.checked=Ot),z.setValue(Xt.id,{value:Ot})}}};this._dispatchEventFromSandbox(Et,ht)}),this._setEventListeners(Q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ht=>ht.target.checked)}return this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class p extends x{constructor(z){super(z,{ignoreBorder:z.data.hasAppearance})}render(){const z=super.render();z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(z.title=this.data.alternativeText);const l=z.lastChild;return this.enableScripting&&this.hasJSActions&&l&&(this._setDefaultPropertiesFromJS(l),l.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),z}}class I extends _{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const z=this.annotationStorage,l=this.data.id,F=z.getValue(l,{value:this.data.fieldValue}),W=document.createElement("select");B.add(W),W.setAttribute("data-element-id",l),W.disabled=this.data.readOnly,this._setRequired(W,this.data.required),W.name=this.data.fieldName,W.tabIndex=E;let Q=this.data.combo&&this.data.options.length>0;this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",Ft=>{const Xt=this.data.defaultFieldValue;for(const Ot of W.options)Ot.selected=Ot.value===Xt});for(const Ft of this.data.options){const Xt=document.createElement("option");Xt.textContent=Ft.displayValue,Xt.value=Ft.exportValue,F.value.includes(Ft.exportValue)&&(Xt.setAttribute("selected",!0),Q=!1),W.append(Xt)}let it=null;if(Q){const Ft=document.createElement("option");Ft.value=" ",Ft.setAttribute("hidden",!0),Ft.setAttribute("selected",!0),W.prepend(Ft),it=()=>{Ft.remove(),W.removeEventListener("input",it),it=null},W.addEventListener("input",it)}const ht=Ft=>{const Xt=Ft?"value":"textContent",{options:Ot,multiple:Lt}=W;return Lt?Array.prototype.filter.call(Ot,Vt=>Vt.selected).map(Vt=>Vt[Xt]):Ot.selectedIndex===-1?null:Ot[Ot.selectedIndex][Xt]};let Et=ht(!1);const Mt=Ft=>{const Xt=Ft.target.options;return Array.prototype.map.call(Xt,Ot=>({displayValue:Ot.textContent,exportValue:Ot.value}))};return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",Ft=>{const Xt={value(Ot){it==null||it();const Lt=Ot.detail.value,Vt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Kt of W.options)Kt.selected=Vt.has(Kt.value);z.setValue(l,{value:ht(!0)}),Et=ht(!1)},multipleSelection(Ot){W.multiple=!0},remove(Ot){const Lt=W.options,Vt=Ot.detail.remove;Lt[Vt].selected=!1,W.remove(Vt),Lt.length>0&&Array.prototype.findIndex.call(Lt,Jt=>Jt.selected)===-1&&(Lt[0].selected=!0),z.setValue(l,{value:ht(!0),items:Mt(Ot)}),Et=ht(!1)},clear(Ot){for(;W.length!==0;)W.remove(0);z.setValue(l,{value:null,items:[]}),Et=ht(!1)},insert(Ot){const{index:Lt,displayValue:Vt,exportValue:Kt}=Ot.detail.insert,Jt=W.children[Lt],Qt=document.createElement("option");Qt.textContent=Vt,Qt.value=Kt,Jt?Jt.before(Qt):W.append(Qt),z.setValue(l,{value:ht(!0),items:Mt(Ot)}),Et=ht(!1)},items(Ot){const{items:Lt}=Ot.detail;for(;W.length!==0;)W.remove(0);for(const Vt of Lt){const{displayValue:Kt,exportValue:Jt}=Vt,Qt=document.createElement("option");Qt.textContent=Kt,Qt.value=Jt,W.append(Qt)}W.options.length>0&&(W.options[0].selected=!0),z.setValue(l,{value:ht(!0),items:Mt(Ot)}),Et=ht(!1)},indices(Ot){const Lt=new Set(Ot.detail.indices);for(const Vt of Ot.target.options)Vt.selected=Lt.has(Vt.index);z.setValue(l,{value:ht(!0)}),Et=ht(!1)},editable(Ot){Ot.target.disabled=!Ot.detail.editable}};this._dispatchEventFromSandbox(Xt,Ft)}),W.addEventListener("input",Ft=>{var Ot;const Xt=ht(!0);z.setValue(l,{value:Xt}),Ft.preventDefault(),(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Et,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ft=>Ft.target.value)):W.addEventListener("input",function(Ft){z.setValue(l,{value:ht(!0)})}),this.data.combo&&this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class A extends w{constructor(z){const{data:l,elements:F}=z;super(z,{isRenderable:w._hasPopupData(l)}),this.elements=F}render(){this.container.classList.add("popupAnnotation");const z=new h({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),l=[];for(const F of this.elements)F.popup=z,l.push(F.data.id),F.addHighlightArea();return this.container.setAttribute("aria-controls",l.map(F=>`${i.AnnotationPrefix}${F}`).join(",")),this.container}}class h{constructor({container:z,color:l,elements:F,titleObj:W,modificationDate:Q,contentsObj:it,richText:ht,parent:Et,rect:Mt,parentRect:Ft,open:Xt}){H(this,Rt);H(this,Bt);H(this,Gt);H(this,qt);H(this,q,null);H(this,rt,et(this,Rt,Nn).bind(this));H(this,nt,et(this,qt,dn).bind(this));H(this,ut,et(this,Gt,cn).bind(this));H(this,mt,et(this,Bt,Re).bind(this));H(this,yt,null);H(this,ft,null);H(this,Pt,null);H(this,It,null);H(this,St,null);H(this,Dt,null);H(this,U,!1);H(this,G,null);H(this,N,null);H(this,K,null);H(this,pt,null);H(this,bt,!1);var Lt;lt(this,ft,z),lt(this,pt,W),lt(this,Pt,it),lt(this,K,ht),lt(this,St,Et),lt(this,yt,l),lt(this,N,Mt),lt(this,Dt,Ft),lt(this,It,F);const Ot=s.PDFDateString.toDateObject(Q);Ot&&lt(this,q,Et.l10n.get("annotation_date_string",{date:Ot.toLocaleDateString(),time:Ot.toLocaleTimeString()})),this.trigger=F.flatMap(Vt=>Vt.getElementsToTriggerPopup());for(const Vt of this.trigger)Vt.addEventListener("click",a(this,mt)),Vt.addEventListener("mouseenter",a(this,ut)),Vt.addEventListener("mouseleave",a(this,nt)),Vt.classList.add("popupTriggerArea");for(const Vt of F)(Lt=Vt.container)==null||Lt.addEventListener("keydown",a(this,rt));a(this,ft).hidden=!0,Xt&&et(this,Bt,Re).call(this)}render(){if(a(this,G))return;const{page:{view:z},viewport:{rawDims:{pageWidth:l,pageHeight:F,pageX:W,pageY:Q}}}=a(this,St),it=lt(this,G,document.createElement("div"));if(it.className="popup",a(this,yt)){const ie=it.style.outlineColor=i.Util.makeHexColor(...a(this,yt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?it.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:it.style.backgroundColor=i.Util.makeHexColor(...a(this,yt).map(le=>Math.floor(.7*(255-le)+le)))}const ht=document.createElement("span");ht.className="header";const Et=document.createElement("h1");if(ht.append(Et),{dir:Et.dir,str:Et.textContent}=a(this,pt),it.append(ht),a(this,q)){const ie=document.createElement("span");ie.classList.add("popupDate"),a(this,q).then(ae=>{ie.textContent=ae}),ht.append(ie)}const Mt=a(this,Pt),Ft=a(this,K);if(Ft!=null&&Ft.str&&(!(Mt!=null&&Mt.str)||Mt.str===Ft.str))T.XfaLayer.render({xfaHtml:Ft.html,intent:"richText",div:it}),it.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(Mt);it.append(ie)}let Xt=!!a(this,Dt),Ot=Xt?a(this,Dt):a(this,N);for(const ie of a(this,It))if(!Ot||i.Util.intersect(ie.data.rect,Ot)!==null){Ot=ie.data.rect,Xt=!0;break}const Lt=i.Util.normalizeRect([Ot[0],z[3]-Ot[1]+z[1],Ot[2],z[3]-Ot[3]+z[1]]),Vt=5,Kt=Xt?Ot[2]-Ot[0]+Vt:0,Jt=Lt[0]+Kt,Qt=Lt[1],{style:re}=a(this,ft);re.left=`${100*(Jt-W)/l}%`,re.top=`${100*(Qt-Q)/F}%`,a(this,ft).append(it)}_formatContents({str:z,dir:l}){const F=document.createElement("p");F.classList.add("popupContent"),F.dir=l;const W=z.split(/(?:\r\n?|\n)/);for(let Q=0,it=W.length;Q<it;++Q){const ht=W[Q];F.append(document.createTextNode(ht)),Q<it-1&&F.append(document.createElement("br"))}return F}forceHide(){lt(this,bt,this.isVisible),a(this,bt)&&(a(this,ft).hidden=!0)}maybeShow(){a(this,bt)&&(lt(this,bt,!1),a(this,ft).hidden=!1)}get isVisible(){return a(this,ft).hidden===!1}}q=new WeakMap,rt=new WeakMap,nt=new WeakMap,ut=new WeakMap,mt=new WeakMap,yt=new WeakMap,ft=new WeakMap,Pt=new WeakMap,It=new WeakMap,St=new WeakMap,Dt=new WeakMap,U=new WeakMap,G=new WeakMap,N=new WeakMap,K=new WeakMap,pt=new WeakMap,bt=new WeakMap,Rt=new WeakSet,Nn=function(z){z.altKey||z.shiftKey||z.ctrlKey||z.metaKey||(z.key==="Enter"||z.key==="Escape"&&a(this,U))&&et(this,Bt,Re).call(this)},Bt=new WeakSet,Re=function(){lt(this,U,!a(this,U)),a(this,U)?(et(this,Gt,cn).call(this),a(this,ft).addEventListener("click",a(this,mt)),a(this,ft).addEventListener("keydown",a(this,rt))):(et(this,qt,dn).call(this),a(this,ft).removeEventListener("click",a(this,mt)),a(this,ft).removeEventListener("keydown",a(this,rt)))},Gt=new WeakSet,cn=function(){a(this,G)||this.render(),this.isVisible?a(this,U)&&a(this,ft).classList.add("focused"):(a(this,ft).hidden=!1,a(this,ft).style.zIndex=parseInt(a(this,ft).style.zIndex)+1e3)},qt=new WeakSet,dn=function(){a(this,ft).classList.remove("focused"),!(a(this,U)||!this.isVisible)&&(a(this,ft).hidden=!0,a(this,ft).style.zIndex=parseInt(a(this,ft).style.zIndex)-1e3)};class j extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=z.data.textContent,this.textPosition=z.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const z=document.createElement("div");z.classList.add("annotationTextContent"),z.setAttribute("role","comment");for(const l of this.textContent){const F=document.createElement("span");F.textContent=l,z.append(F)}this.container.append(z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}n.FreeTextAnnotationElement=j;class b extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,at,null)}render(){this.container.classList.add("lineAnnotation");const l=this.data,{width:F,height:W}=R(l.rect),Q=this.svgFactory.create(F,W,!0),it=lt(this,at,this.svgFactory.createElement("svg:line"));return it.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),it.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),it.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),it.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),it.setAttribute("stroke-width",l.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),Q.append(it),this.container.append(Q),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap;class V extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,tt,null)}render(){this.container.classList.add("squareAnnotation");const l=this.data,{width:F,height:W}=R(l.rect),Q=this.svgFactory.create(F,W,!0),it=l.borderStyle.width,ht=lt(this,tt,this.svgFactory.createElement("svg:rect"));return ht.setAttribute("x",it/2),ht.setAttribute("y",it/2),ht.setAttribute("width",F-it),ht.setAttribute("height",W-it),ht.setAttribute("stroke-width",it||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),Q.append(ht),this.container.append(Q),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class X extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,At,null)}render(){this.container.classList.add("circleAnnotation");const l=this.data,{width:F,height:W}=R(l.rect),Q=this.svgFactory.create(F,W,!0),it=l.borderStyle.width,ht=lt(this,At,this.svgFactory.createElement("svg:ellipse"));return ht.setAttribute("cx",F/2),ht.setAttribute("cy",W/2),ht.setAttribute("rx",F/2-it/2),ht.setAttribute("ry",W/2-it/2),ht.setAttribute("stroke-width",it||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),Q.append(ht),this.container.append(Q),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class P extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,wt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:F,height:W}=R(l.rect),Q=this.svgFactory.create(F,W,!0);let it=[];for(const Et of l.vertices){const Mt=Et.x-l.rect[0],Ft=l.rect[3]-Et.y;it.push(Mt+","+Ft)}it=it.join(" ");const ht=lt(this,wt,this.svgFactory.createElement(this.svgElementName));return ht.setAttribute("points",it),ht.setAttribute("stroke-width",l.borderStyle.width||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),Q.append(ht),this.container.append(Q),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,wt)}addHighlightArea(){this.container.classList.add("highlightArea")}}wt=new WeakMap;class Z extends P{constructor(z){super(z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ot extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ct extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,ee,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:F,height:W}=R(l.rect),Q=this.svgFactory.create(F,W,!0);for(const it of l.inkLists){let ht=[];for(const Mt of it){const Ft=Mt.x-l.rect[0],Xt=l.rect[3]-Mt.y;ht.push(`${Ft},${Xt}`)}ht=ht.join(" ");const Et=this.svgFactory.createElement(this.svgElementName);a(this,ee).push(Et),Et.setAttribute("points",ht),Et.setAttribute("stroke-width",l.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),!l.popupRef&&this.hasPopupData&&this._createPopup(),Q.append(Et)}return this.container.append(Q),this.container}getElementsToTriggerPopup(){return a(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,n.InkAnnotationElement=ct;class Y extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class dt extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gt extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xt extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _t extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}n.StampAnnotationElement=_t;class L extends w{constructor(l){var Q;super(l,{isRenderable:!0});H(this,st);H(this,te,null);const{filename:F,content:W}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(F,!0),this.content=W,(Q=this.linkService.eventBus)==null||Q.dispatch("fileattachmentannotation",{source:this,filename:F,content:W})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:l,data:F}=this;let W;F.hasAppearance||F.fillAlpha===0?W=document.createElement("div"):(W=document.createElement("img"),W.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(F.name)?"paperclip":"pushpin"}.svg`,F.fillAlpha&&F.fillAlpha<1&&(W.style=`filter: opacity(${Math.round(F.fillAlpha*100)}%);`)),W.addEventListener("dblclick",et(this,st,un).bind(this)),lt(this,te,W);const{isMac:Q}=i.FeatureTest.platform;return l.addEventListener("keydown",it=>{it.key==="Enter"&&(Q?it.metaKey:it.ctrlKey)&&et(this,st,un).call(this)}),!F.popupRef&&this.hasPopupData?this._createPopup():W.classList.add("popupTriggerArea"),l.append(W),l}getElementsToTriggerPopup(){return a(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,st=new WeakSet,un=function(){var l;(l=this.downloadManager)==null||l.openOrDownloadData(this.container,this.content,this.filename)};class o{constructor({div:z,accessibilityManager:l,annotationCanvasMap:F,l10n:W,page:Q,viewport:it}){H(this,zt);H(this,Tt);H(this,$t,null);H(this,kt,null);H(this,Ut,new Map);this.div=z,lt(this,$t,l),lt(this,kt,F),this.l10n=W,this.page=Q,this.viewport=it,this.zIndex=0,this.l10n||(this.l10n=J.NullL10n)}async render(z){const{annotations:l}=z,F=this.div;(0,s.setLayerDimensions)(F,this.viewport);const W=new Map,Q={data:null,layer:F,linkService:z.linkService,downloadManager:z.downloadManager,imageResourcesPath:z.imageResourcesPath||"",renderForms:z.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:z.annotationStorage||new y.AnnotationStorage,enableScripting:z.enableScripting===!0,hasJSActions:z.hasJSActions,fieldObjects:z.fieldObjects,parent:this,elements:null};for(const it of l){if(it.noHTML)continue;const ht=it.annotationType===i.AnnotationType.POPUP;if(ht){const Ft=W.get(it.id);if(!Ft)continue;Q.elements=Ft}else{const{width:Ft,height:Xt}=R(it.rect);if(Ft<=0||Xt<=0)continue}Q.data=it;const Et=C.create(Q);if(!Et.isRenderable)continue;if(!ht&&it.popupRef){const Ft=W.get(it.popupRef);Ft?Ft.push(Et):W.set(it.popupRef,[Et])}Et.annotationEditorType>0&&a(this,Ut).set(Et.data.id,Et);const Mt=Et.render();it.hidden&&(Mt.style.visibility="hidden"),et(this,zt,$n).call(this,Mt,it.id)}et(this,Tt,hn).call(this),await this.l10n.translate(F)}update({viewport:z}){const l=this.div;this.viewport=z,(0,s.setLayerDimensions)(l,{rotation:z.rotation}),et(this,Tt,hn).call(this),l.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ut).values())}getEditableAnnotation(z){return a(this,Ut).get(z)}}$t=new WeakMap,kt=new WeakMap,Ut=new WeakMap,zt=new WeakSet,$n=function(z,l){var W;const F=z.firstChild||z;F.id=`${i.AnnotationPrefix}${l}`,this.div.append(z),(W=a(this,$t))==null||W.moveElementInDOM(this.div,z,F,!1)},Tt=new WeakSet,hn=function(){if(!a(this,kt))return;const z=this.div;for(const[l,F]of a(this,kt)){const W=z.querySelector(`[data-annotation-id="${l}"]`);if(!W)continue;const{firstChild:Q}=W;Q?Q.nodeName==="CANVAS"?Q.replaceWith(F):Q.before(F):W.append(F)}a(this,kt).clear()},n.AnnotationLayer=o},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function r(y){return Math.floor(Math.max(0,Math.min(1,y))*255).toString(16).padStart(2,"0")}function i(y){return Math.max(0,Math.min(255,255*y))}class s{static CMYK_G([S,J,T,E]){return["G",1-Math.min(1,.3*S+.59*T+.11*J+E)]}static G_CMYK([S]){return["CMYK",0,0,0,1-S]}static G_RGB([S]){return["RGB",S,S,S]}static G_rgb([S]){return S=i(S),[S,S,S]}static G_HTML([S]){const J=r(S);return`#${J}${J}${J}`}static RGB_G([S,J,T]){return["G",.3*S+.59*J+.11*T]}static RGB_rgb(S){return S.map(i)}static RGB_HTML(S){return`#${S.map(r).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([S,J,T,E]){return["RGB",1-Math.min(1,S+E),1-Math.min(1,T+E),1-Math.min(1,J+E)]}static CMYK_rgb([S,J,T,E]){return[i(1-Math.min(1,S+E)),i(1-Math.min(1,T+E)),i(1-Math.min(1,J+E))]}static CMYK_HTML(S){const J=this.CMYK_RGB(S).slice(1);return this.RGB_HTML(J)}static RGB_CMYK([S,J,T]){const E=1-S,v=1-J,B=1-T,R=Math.min(E,v,B);return["CMYK",E,v,B,R]}}n.ColorConverters=s},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NullL10n=void 0,n.getL10nFallback=i;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};r.print_progress_percent="{{progress}}%";function i(S,J){switch(S){case"find_match_count":S=`find_match_count[${J.total===1?"one":"other"}]`;break;case"find_match_count_limit":S=`find_match_count_limit[${J.limit===1?"one":"other"}]`;break}return r[S]||""}function s(S,J){return J?S.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(T,E)=>E in J?J[E]:"{{"+E+"}}"):S}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(S,J=null,T=i(S,J)){return s(T,J)},async translate(S){}};n.NullL10n=y},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var i=r(25);class s{static setupStorage(S,J,T,E,v){const B=E.getValue(J,{value:null});switch(T.name){case"textarea":if(B.value!==null&&(S.textContent=B.value),v==="print")break;S.addEventListener("input",R=>{E.setValue(J,{value:R.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(B.value===T.attributes.xfaOn?S.setAttribute("checked",!0):B.value===T.attributes.xfaOff&&S.removeAttribute("checked"),v==="print")break;S.addEventListener("change",R=>{E.setValue(J,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(B.value!==null&&S.setAttribute("value",B.value),v==="print")break;S.addEventListener("input",R=>{E.setValue(J,{value:R.target.value})})}break;case"select":if(B.value!==null){S.setAttribute("value",B.value);for(const R of T.children)R.attributes.value===B.value?R.attributes.selected=!0:R.attributes.hasOwnProperty("selected")&&delete R.attributes.selected}S.addEventListener("input",R=>{const C=R.target.options,w=C.selectedIndex===-1?"":C[C.selectedIndex].value;E.setValue(J,{value:w})});break}}static setAttributes({html:S,element:J,storage:T=null,intent:E,linkService:v}){const{attributes:B}=J,R=S instanceof HTMLAnchorElement;B.type==="radio"&&(B.name=`${B.name}-${E}`);for(const[C,w]of Object.entries(B))if(w!=null)switch(C){case"class":w.length&&S.setAttribute(C,w.join(" "));break;case"dataId":break;case"id":S.setAttribute("data-element-id",w);break;case"style":Object.assign(S.style,w);break;case"textContent":S.textContent=w;break;default:(!R||C!=="href"&&C!=="newWindow")&&S.setAttribute(C,w)}R&&v.addLinkAttributes(S,B.href,B.newWindow),T&&B.dataId&&this.setupStorage(S,B.dataId,J,T)}static render(S){var x;const J=S.annotationStorage,T=S.linkService,E=S.xfaHtml,v=S.intent||"display",B=document.createElement(E.name);E.attributes&&this.setAttributes({html:B,element:E,intent:v,linkService:T});const R=[[E,-1,B]],C=S.div;if(C.append(B),S.viewport){const m=`matrix(${S.viewport.transform.join(",")})`;C.style.transform=m}v!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const w=[];for(;R.length>0;){const[m,_,D]=R.at(-1);if(_+1===m.children.length){R.pop();continue}const O=m.children[++R.at(-1)[1]];if(O===null)continue;const{name:k}=O;if(k==="#text"){const p=document.createTextNode(O.value);w.push(p),D.append(p);continue}const u=(x=O==null?void 0:O.attributes)!=null&&x.xmlns?document.createElementNS(O.attributes.xmlns,k):document.createElement(k);if(D.append(u),O.attributes&&this.setAttributes({html:u,element:O,storage:J,intent:v,linkService:T}),O.children&&O.children.length>0)R.push([O,-1,u]);else if(O.value){const p=document.createTextNode(O.value);i.XfaText.shouldBuildText(k)&&w.push(p),u.append(p)}}for(const m of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:w}}static update(S){const J=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=J,S.div.hidden=!1}}n.XfaLayer=s},(t,n,r)=>{var E,v,B,R,C,w,x,m,_,D,O,k,u,p,I,Bn,h,Un,b,zn,X,Wn,Z,pn,ct,Hn,dt,fn,xt,Gn,L,Vn,d,qn,f,Xn,M,Kn,q,oe,nt,mn,mt,Me,ft,De,It,fe,Dt,gn,G,Ie,K,Yn,bt,vn,jt,Jn,Ht,Zn,Wt,bn,vt,Oe,tt,me;Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0;var i=r(1),s=r(4),y=r(29),S=r(6),J=r(5);const wt=class wt extends s.AnnotationEditor{constructor(st){super({...st,name:"inkEditor"});H(this,I);H(this,h);H(this,b);H(this,X);H(this,Z);H(this,ct);H(this,dt);H(this,xt);H(this,L);H(this,d);H(this,f);H(this,M);H(this,q);H(this,nt);H(this,mt);H(this,ft);H(this,It);H(this,Dt);H(this,G);H(this,Ht);H(this,Wt);H(this,vt);H(this,tt);H(this,E,0);H(this,v,0);H(this,B,this.canvasPointermove.bind(this));H(this,R,this.canvasPointerleave.bind(this));H(this,C,this.canvasPointerup.bind(this));H(this,w,this.canvasPointerdown.bind(this));H(this,x,new Path2D);H(this,m,!1);H(this,_,!1);H(this,D,!1);H(this,O,null);H(this,k,0);H(this,u,0);H(this,p,null);this.color=st.color||null,this.thickness=st.thickness||null,this.opacity=st.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(st){s.AnnotationEditor.initialize(st,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(st,Ct){switch(st){case i.AnnotationEditorParamsType.INK_THICKNESS:wt._defaultThickness=Ct;break;case i.AnnotationEditorParamsType.INK_COLOR:wt._defaultColor=Ct;break;case i.AnnotationEditorParamsType.INK_OPACITY:wt._defaultOpacity=Ct/100;break}}updateParams(st,Ct){switch(st){case i.AnnotationEditorParamsType.INK_THICKNESS:et(this,I,Bn).call(this,Ct);break;case i.AnnotationEditorParamsType.INK_COLOR:et(this,h,Un).call(this,Ct);break;case i.AnnotationEditorParamsType.INK_OPACITY:et(this,b,zn).call(this,Ct);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,wt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,wt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(wt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||wt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||wt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??wt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(et(this,mt,Me).call(this),et(this,ft,De).call(this)),this.isAttachedToDOM||(this.parent.add(this),et(this,It,fe).call(this)),et(this,tt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,O).disconnect(),lt(this,O,null),super.remove())}setParent(st){!this.parent&&st?this._uiManager.removeShouldRescale(this):this.parent&&st===null&&this._uiManager.addShouldRescale(this),super.setParent(st)}onScaleChanging(){const[st,Ct]=this.parentDimensions,$t=this.width*st,kt=this.height*Ct;this.setDimensions($t,kt)}enableEditMode(){a(this,m)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,w)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,w)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,m)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),lt(this,m,!0),this.div.classList.add("disabled"),et(this,tt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(st){this._focusEventsAllowed&&(super.focusin(st),this.enableEditMode())}canvasPointerdown(st){st.button!==0||!this.isInEditMode()||a(this,m)||(this.setInForeground(),st.preventDefault(),st.type!=="mouse"&&this.div.focus(),et(this,ct,Hn).call(this,st.offsetX,st.offsetY))}canvasPointermove(st){st.preventDefault(),et(this,dt,fn).call(this,st.offsetX,st.offsetY)}canvasPointerup(st){st.preventDefault(),et(this,nt,mn).call(this,st)}canvasPointerleave(st){et(this,nt,mn).call(this,st)}get isResizable(){return!this.isEmpty()&&a(this,m)}render(){if(this.div)return this.div;let st,Ct;this.width&&(st=this.x,Ct=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var Tt;return(Tt=this.div)==null?void 0:Tt.setAttribute("aria-label",Zt)});const[$t,kt,Ut,zt]=et(this,X,Wn).call(this);if(this.setAt($t,kt,0,0),this.setDims(Ut,zt),et(this,mt,Me).call(this),this.width){const[Zt,Tt]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*Tt),this.setAt(st*Zt,Ct*Tt,this.width*Zt,this.height*Tt),lt(this,D,!0),et(this,It,fe).call(this),this.setDims(this.width*Zt,this.height*Tt),et(this,q,oe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return et(this,ft,De).call(this),this.div}setDimensions(st,Ct){const $t=Math.round(st),kt=Math.round(Ct);if(a(this,k)===$t&&a(this,u)===kt)return;lt(this,k,$t),lt(this,u,kt),this.canvas.style.visibility="hidden";const[Ut,zt]=this.parentDimensions;this.width=st/Ut,this.height=Ct/zt,this.fixAndSetPosition(),a(this,m)&&et(this,Dt,gn).call(this,st,Ct),et(this,It,fe).call(this),et(this,q,oe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(st,Ct,$t){var Q,it,ht;if(st instanceof y.InkAnnotationElement)return null;const kt=super.deserialize(st,Ct,$t);kt.thickness=st.thickness,kt.color=i.Util.makeHexColor(...st.color),kt.opacity=st.opacity;const[Ut,zt]=kt.pageDimensions,Zt=kt.width*Ut,Tt=kt.height*zt,Yt=kt.parentScale,Nt=st.thickness/2;lt(kt,m,!0),lt(kt,k,Math.round(Zt)),lt(kt,u,Math.round(Tt));const{paths:z,rect:l,rotation:F}=st;for(let{bezier:Et}of z){Et=et(Q=wt,jt,Jn).call(Q,Et,l,F);const Mt=[];kt.paths.push(Mt);let Ft=Yt*(Et[0]-Nt),Xt=Yt*(Et[1]-Nt);for(let Lt=2,Vt=Et.length;Lt<Vt;Lt+=6){const Kt=Yt*(Et[Lt]-Nt),Jt=Yt*(Et[Lt+1]-Nt),Qt=Yt*(Et[Lt+2]-Nt),re=Yt*(Et[Lt+3]-Nt),ie=Yt*(Et[Lt+4]-Nt),ae=Yt*(Et[Lt+5]-Nt);Mt.push([[Ft,Xt],[Kt,Jt],[Qt,re],[ie,ae]]),Ft=ie,Xt=ae}const Ot=et(this,K,Yn).call(this,Mt);kt.bezierPath2D.push(Ot)}const W=et(it=kt,Wt,bn).call(it);return lt(kt,v,Math.max(s.AnnotationEditor.MIN_SIZE,W[2]-W[0])),lt(kt,E,Math.max(s.AnnotationEditor.MIN_SIZE,W[3]-W[1])),et(ht=kt,Dt,gn).call(ht,Zt,Tt),kt}serialize(){if(this.isEmpty())return null;const st=this.getRect(0,0),Ct=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:Ct,thickness:this.thickness,opacity:this.opacity,paths:et(this,Ht,Zn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,st),pageIndex:this.pageIndex,rect:st,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};E=new WeakMap,v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakMap,u=new WeakMap,p=new WeakMap,I=new WeakSet,Bn=function(st){const Ct=this.thickness;this.addCommands({cmd:()=>{this.thickness=st,et(this,tt,me).call(this)},undo:()=>{this.thickness=Ct,et(this,tt,me).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Un=function(st){const Ct=this.color;this.addCommands({cmd:()=>{this.color=st,et(this,q,oe).call(this)},undo:()=>{this.color=Ct,et(this,q,oe).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,zn=function(st){st/=100;const Ct=this.opacity;this.addCommands({cmd:()=>{this.opacity=st,et(this,q,oe).call(this)},undo:()=>{this.opacity=Ct,et(this,q,oe).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Wn=function(){const{parentRotation:st,parentDimensions:[Ct,$t]}=this;switch(st){case 90:return[0,$t,$t,Ct];case 180:return[Ct,$t,Ct,$t];case 270:return[Ct,0,$t,Ct];default:return[0,0,Ct,$t]}},Z=new WeakSet,pn=function(){const{ctx:st,color:Ct,opacity:$t,thickness:kt,parentScale:Ut,scaleFactor:zt}=this;st.lineWidth=kt*Ut/zt,st.lineCap="round",st.lineJoin="round",st.miterLimit=10,st.strokeStyle=`${Ct}${(0,J.opacityToHex)($t)}`},ct=new WeakSet,Hn=function(st,Ct){this.canvas.addEventListener("contextmenu",S.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,R)),this.canvas.addEventListener("pointermove",a(this,B)),this.canvas.addEventListener("pointerup",a(this,C)),this.canvas.removeEventListener("pointerdown",a(this,w)),this.isEditing=!0,a(this,D)||(lt(this,D,!0),et(this,It,fe).call(this),this.thickness||(this.thickness=wt._defaultThickness),this.color||(this.color=wt._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=wt._defaultOpacity)),this.currentPath.push([st,Ct]),lt(this,_,!1),et(this,Z,pn).call(this),lt(this,p,()=>{et(this,d,qn).call(this),a(this,p)&&window.requestAnimationFrame(a(this,p))}),window.requestAnimationFrame(a(this,p))},dt=new WeakSet,fn=function(st,Ct){const[$t,kt]=this.currentPath.at(-1);if(this.currentPath.length>1&&st===$t&&Ct===kt)return;const Ut=this.currentPath;let zt=a(this,x);if(Ut.push([st,Ct]),lt(this,_,!0),Ut.length<=2){zt.moveTo(...Ut[0]),zt.lineTo(st,Ct);return}Ut.length===3&&(lt(this,x,zt=new Path2D),zt.moveTo(...Ut[0])),et(this,f,Xn).call(this,zt,...Ut.at(-3),...Ut.at(-2),st,Ct)},xt=new WeakSet,Gn=function(){if(this.currentPath.length===0)return;const st=this.currentPath.at(-1);a(this,x).lineTo(...st)},L=new WeakSet,Vn=function(st,Ct){lt(this,p,null),st=Math.min(Math.max(st,0),this.canvas.width),Ct=Math.min(Math.max(Ct,0),this.canvas.height),et(this,dt,fn).call(this,st,Ct),et(this,xt,Gn).call(this);let $t;if(this.currentPath.length!==1)$t=et(this,M,Kn).call(this);else{const Tt=[st,Ct];$t=[[Tt,Tt.slice(),Tt.slice(),Tt]]}const kt=a(this,x),Ut=this.currentPath;this.currentPath=[],lt(this,x,new Path2D);const zt=()=>{this.allRawPaths.push(Ut),this.paths.push($t),this.bezierPath2D.push(kt),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(et(this,mt,Me).call(this),et(this,ft,De).call(this)),et(this,tt,me).call(this))};this.addCommands({cmd:zt,undo:Zt,mustExec:!0})},d=new WeakSet,qn=function(){if(!a(this,_))return;lt(this,_,!1);const st=Math.ceil(this.thickness*this.parentScale),Ct=this.currentPath.slice(-3),$t=Ct.map(zt=>zt[0]),kt=Ct.map(zt=>zt[1]);Math.min(...$t)-st,Math.max(...$t)+st,Math.min(...kt)-st,Math.max(...kt)+st;const{ctx:Ut}=this;Ut.save(),Ut.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zt of this.bezierPath2D)Ut.stroke(zt);Ut.stroke(a(this,x)),Ut.restore()},f=new WeakSet,Xn=function(st,Ct,$t,kt,Ut,zt,Zt){const Tt=(Ct+kt)/2,Yt=($t+Ut)/2,Nt=(kt+zt)/2,z=(Ut+Zt)/2;st.bezierCurveTo(Tt+2*(kt-Tt)/3,Yt+2*(Ut-Yt)/3,Nt+2*(kt-Nt)/3,z+2*(Ut-z)/3,Nt,z)},M=new WeakSet,Kn=function(){const st=this.currentPath;if(st.length<=2)return[[st[0],st[0],st.at(-1),st.at(-1)]];const Ct=[];let $t,[kt,Ut]=st[0];for($t=1;$t<st.length-2;$t++){const[l,F]=st[$t],[W,Q]=st[$t+1],it=(l+W)/2,ht=(F+Q)/2,Et=[kt+2*(l-kt)/3,Ut+2*(F-Ut)/3],Mt=[it+2*(l-it)/3,ht+2*(F-ht)/3];Ct.push([[kt,Ut],Et,Mt,[it,ht]]),[kt,Ut]=[it,ht]}const[zt,Zt]=st[$t],[Tt,Yt]=st[$t+1],Nt=[kt+2*(zt-kt)/3,Ut+2*(Zt-Ut)/3],z=[Tt+2*(zt-Tt)/3,Yt+2*(Zt-Yt)/3];return Ct.push([[kt,Ut],Nt,z,[Tt,Yt]]),Ct},q=new WeakSet,oe=function(){if(this.isEmpty()){et(this,G,Ie).call(this);return}et(this,Z,pn).call(this);const{canvas:st,ctx:Ct}=this;Ct.setTransform(1,0,0,1,0,0),Ct.clearRect(0,0,st.width,st.height),et(this,G,Ie).call(this);for(const $t of this.bezierPath2D)Ct.stroke($t)},nt=new WeakSet,mn=function(st){this.canvas.removeEventListener("pointerleave",a(this,R)),this.canvas.removeEventListener("pointermove",a(this,B)),this.canvas.removeEventListener("pointerup",a(this,C)),this.canvas.addEventListener("pointerdown",a(this,w)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",S.noContextMenu)},10),et(this,L,Vn).call(this,st.offsetX,st.offsetY),this.addToAnnotationStorage(),this.setInBackground()},mt=new WeakSet,Me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(st=>{var Ct;return(Ct=this.canvas)==null?void 0:Ct.setAttribute("aria-label",st)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ft=new WeakSet,De=function(){lt(this,O,new ResizeObserver(st=>{const Ct=st[0].contentRect;Ct.width&&Ct.height&&this.setDimensions(Ct.width,Ct.height)})),a(this,O).observe(this.div)},It=new WeakSet,fe=function(){if(!a(this,D))return;const[st,Ct]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*st),this.canvas.height=Math.ceil(this.height*Ct),et(this,G,Ie).call(this)},Dt=new WeakSet,gn=function(st,Ct){const $t=et(this,vt,Oe).call(this),kt=(st-$t)/a(this,v),Ut=(Ct-$t)/a(this,E);this.scaleFactor=Math.min(kt,Ut)},G=new WeakSet,Ie=function(){const st=et(this,vt,Oe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+st,this.translationY*this.scaleFactor+st)},K=new WeakSet,Yn=function(st){const Ct=new Path2D;for(let $t=0,kt=st.length;$t<kt;$t++){const[Ut,zt,Zt,Tt]=st[$t];$t===0&&Ct.moveTo(...Ut),Ct.bezierCurveTo(zt[0],zt[1],Zt[0],Zt[1],Tt[0],Tt[1])}return Ct},bt=new WeakSet,vn=function(st,Ct,$t){const[kt,Ut,zt,Zt]=Ct;switch($t){case 0:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2)st[Tt]+=kt,st[Tt+1]=Zt-st[Tt+1];break;case 90:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2){const Nt=st[Tt];st[Tt]=st[Tt+1]+kt,st[Tt+1]=Nt+Ut}break;case 180:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2)st[Tt]=zt-st[Tt],st[Tt+1]+=Ut;break;case 270:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2){const Nt=st[Tt];st[Tt]=zt-st[Tt+1],st[Tt+1]=Zt-Nt}break;default:throw new Error("Invalid rotation")}return st},jt=new WeakSet,Jn=function(st,Ct,$t){const[kt,Ut,zt,Zt]=Ct;switch($t){case 0:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2)st[Tt]-=kt,st[Tt+1]=Zt-st[Tt+1];break;case 90:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2){const Nt=st[Tt];st[Tt]=st[Tt+1]-Ut,st[Tt+1]=Nt-kt}break;case 180:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2)st[Tt]=zt-st[Tt],st[Tt+1]-=Ut;break;case 270:for(let Tt=0,Yt=st.length;Tt<Yt;Tt+=2){const Nt=st[Tt];st[Tt]=Zt-st[Tt+1],st[Tt+1]=zt-Nt}break;default:throw new Error("Invalid rotation")}return st},Ht=new WeakSet,Zn=function(st,Ct,$t,kt){var Yt,Nt;const Ut=[],zt=this.thickness/2,Zt=st*Ct+zt,Tt=st*$t+zt;for(const z of this.paths){const l=[],F=[];for(let W=0,Q=z.length;W<Q;W++){const[it,ht,Et,Mt]=z[W],Ft=st*it[0]+Zt,Xt=st*it[1]+Tt,Ot=st*ht[0]+Zt,Lt=st*ht[1]+Tt,Vt=st*Et[0]+Zt,Kt=st*Et[1]+Tt,Jt=st*Mt[0]+Zt,Qt=st*Mt[1]+Tt;W===0&&(l.push(Ft,Xt),F.push(Ft,Xt)),l.push(Ot,Lt,Vt,Kt,Jt,Qt),F.push(Ot,Lt),W===Q-1&&F.push(Jt,Qt)}Ut.push({bezier:et(Yt=wt,bt,vn).call(Yt,l,kt,this.rotation),points:et(Nt=wt,bt,vn).call(Nt,F,kt,this.rotation)})}return Ut},Wt=new WeakSet,bn=function(){let st=1/0,Ct=-1/0,$t=1/0,kt=-1/0;for(const Ut of this.paths)for(const[zt,Zt,Tt,Yt]of Ut){const Nt=i.Util.bezierBoundingBox(...zt,...Zt,...Tt,...Yt);st=Math.min(st,Nt[0]),$t=Math.min($t,Nt[1]),Ct=Math.max(Ct,Nt[2]),kt=Math.max(kt,Nt[3])}return[st,$t,Ct,kt]},vt=new WeakSet,Oe=function(){return a(this,m)?Math.ceil(this.thickness*this.parentScale):0},tt=new WeakSet,me=function(st=!1){if(this.isEmpty())return;if(!a(this,m)){et(this,q,oe).call(this);return}const Ct=et(this,Wt,bn).call(this),$t=et(this,vt,Oe).call(this);lt(this,v,Math.max(s.AnnotationEditor.MIN_SIZE,Ct[2]-Ct[0])),lt(this,E,Math.max(s.AnnotationEditor.MIN_SIZE,Ct[3]-Ct[1]));const kt=Math.ceil($t+a(this,v)*this.scaleFactor),Ut=Math.ceil($t+a(this,E)*this.scaleFactor),[zt,Zt]=this.parentDimensions;this.width=kt/zt,this.height=Ut/Zt,this.setAspectRatio(kt,Ut);const Tt=this.translationX,Yt=this.translationY;this.translationX=-Ct[0],this.translationY=-Ct[1],et(this,It,fe).call(this),et(this,q,oe).call(this),lt(this,k,kt),lt(this,u,Ut),this.setDims(kt,Ut);const Nt=st?$t/this.scaleFactor/2:0;this.translate(Tt-this.translationX-Nt,Yt-this.translationY-Nt)},H(wt,K),H(wt,bt),H(wt,jt),ne(wt,"_defaultColor",null),ne(wt,"_defaultOpacity",1),ne(wt,"_defaultThickness",1),ne(wt,"_type","ink");let T=wt;n.InkEditor=T},(t,n,r)=>{var T,E,v,B,R,C,w,x,m,_,D,Ae,k,Ee,p,Le,A,yn,j,Qn,V,ti,P,_n,ot,je,Y,ei;Object.defineProperty(n,"__esModule",{value:!0}),n.StampEditor=void 0;var i=r(1),s=r(4),y=r(6),S=r(29);const gt=class gt extends s.AnnotationEditor{constructor(L){super({...L,name:"stampEditor"});H(this,D);H(this,k);H(this,p);H(this,A);H(this,j);H(this,V);H(this,P);H(this,ot);H(this,Y);H(this,T,null);H(this,E,null);H(this,v,null);H(this,B,null);H(this,R,null);H(this,C,null);H(this,w,null);H(this,x,null);H(this,m,!1);H(this,_,!1);lt(this,B,L.bitmapUrl),lt(this,R,L.bitmapFile)}static initialize(L){s.AnnotationEditor.initialize(L)}static get supportedTypes(){const L=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",L.map(o=>`image/${o}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(L){return this.supportedTypes.includes(L)}static paste(L,o){o.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:L.getAsFile()})}remove(){var L,o;a(this,E)&&(lt(this,T,null),this._uiManager.imageManager.deleteId(a(this,E)),(L=a(this,C))==null||L.remove(),lt(this,C,null),(o=a(this,w))==null||o.disconnect(),lt(this,w,null)),super.remove()}rebuild(){if(!this.parent){a(this,E)&&et(this,p,Le).call(this);return}super.rebuild(),this.div!==null&&(a(this,E)&&et(this,p,Le).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,v)||a(this,T)||a(this,B)||a(this,R))}get isResizable(){return!0}render(){if(this.div)return this.div;let L,o;if(this.width&&(L=this.x,o=this.y),super.render(),this.div.hidden=!0,a(this,T)?et(this,A,yn).call(this):et(this,p,Le).call(this),this.width){const[d,c]=this.parentDimensions;this.setAt(L*d,o*c,this.width*d,this.height*c)}return this.div}static deserialize(L,o,d){if(L instanceof S.StampAnnotationElement)return null;const c=super.deserialize(L,o,d),{rect:f,bitmapUrl:g,bitmapId:M,isSvg:$,accessibilityData:q}=L;M&&d.imageManager.isValidId(M)?lt(c,E,M):lt(c,B,g),lt(c,m,$);const[rt,nt]=c.pageDimensions;return c.width=(f[2]-f[0])/rt,c.height=(f[3]-f[1])/nt,q&&(c.altTextData=q),c}serialize(L=!1,o=null){if(this.isEmpty())return null;const d={annotationType:i.AnnotationEditorType.STAMP,bitmapId:a(this,E),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,m),structTreeParentId:this._structTreeParentId};if(L)return d.bitmapUrl=et(this,ot,je).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:c,altText:f}=this.altTextData;if(!c&&f&&(d.accessibilityData={type:"Figure",alt:f}),o===null)return d;o.stamps||(o.stamps=new Map);const g=a(this,m)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!o.stamps.has(a(this,E)))o.stamps.set(a(this,E),{area:g,serialized:d}),d.bitmap=et(this,ot,je).call(this,!1);else if(a(this,m)){const M=o.stamps.get(a(this,E));g>M.area&&(M.area=g,M.serialized.bitmap.close(),M.serialized.bitmap=et(this,ot,je).call(this,!1))}return d}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,R=new WeakMap,C=new WeakMap,w=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakMap,D=new WeakSet,Ae=function(L,o=!1){if(!L){this.remove();return}lt(this,T,L.bitmap),o||(lt(this,E,L.id),lt(this,m,L.isSvg)),et(this,A,yn).call(this)},k=new WeakSet,Ee=function(){lt(this,v,null),this._uiManager.enableWaiting(!1),a(this,C)&&this.div.focus()},p=new WeakSet,Le=function(){if(a(this,E)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,E)).then(o=>et(this,D,Ae).call(this,o,!0)).finally(()=>et(this,k,Ee).call(this));return}if(a(this,B)){const o=a(this,B);lt(this,B,null),this._uiManager.enableWaiting(!0),lt(this,v,this._uiManager.imageManager.getFromUrl(o).then(d=>et(this,D,Ae).call(this,d)).finally(()=>et(this,k,Ee).call(this)));return}if(a(this,R)){const o=a(this,R);lt(this,R,null),this._uiManager.enableWaiting(!0),lt(this,v,this._uiManager.imageManager.getFromFile(o).then(d=>et(this,D,Ae).call(this,d)).finally(()=>et(this,k,Ee).call(this)));return}const L=document.createElement("input");L.type="file",L.accept=gt.supportedTypesStr,lt(this,v,new Promise(o=>{L.addEventListener("change",async()=>{if(!L.files||L.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(L.files[0]);et(this,D,Ae).call(this,d)}o()}),L.addEventListener("cancel",()=>{this.remove(),o()})}).finally(()=>et(this,k,Ee).call(this))),L.click()},A=new WeakSet,yn=function(){const{div:L}=this;let{width:o,height:d}=a(this,T);const[c,f]=this.pageDimensions,g=.75;if(this.width)o=this.width*c,d=this.height*f;else if(o>g*c||d>g*f){const rt=Math.min(g*c/o,g*f/d);o*=rt,d*=rt}const[M,$]=this.parentDimensions;this.setDims(o*M/c,d*$/f),this._uiManager.enableWaiting(!1);const q=lt(this,C,document.createElement("canvas"));L.append(q),L.hidden=!1,et(this,P,_n).call(this,o,d),et(this,Y,ei).call(this),a(this,_)||(this.parent.addUndoableEditor(this),lt(this,_,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},j=new WeakSet,Qn=function(L,o){var g;const[d,c]=this.parentDimensions;this.width=L/d,this.height=o/c,this.setDims(L,o),(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,x)!==null&&clearTimeout(a(this,x)),lt(this,x,setTimeout(()=>{lt(this,x,null),et(this,P,_n).call(this,L,o)},200))},V=new WeakSet,ti=function(L,o){const{width:d,height:c}=a(this,T);let f=d,g=c,M=a(this,T);for(;f>2*L||g>2*o;){const $=f,q=g;f>2*L&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2)),g>2*o&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2));const rt=new OffscreenCanvas(f,g);rt.getContext("2d").drawImage(M,0,0,$,q,0,0,f,g),M=rt.transferToImageBitmap()}return M},P=new WeakSet,_n=function(L,o){L=Math.ceil(L),o=Math.ceil(o);const d=a(this,C);if(!d||d.width===L&&d.height===o)return;d.width=L,d.height=o;const c=a(this,m)?a(this,T):et(this,V,ti).call(this,L,o),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(c,0,0,c.width,c.height,0,0,L,o)},ot=new WeakSet,je=function(L){if(L){if(a(this,m)){const c=this._uiManager.imageManager.getSvgUrl(a(this,E));if(c)return c}const o=document.createElement("canvas");return{width:o.width,height:o.height}=a(this,T),o.getContext("2d").drawImage(a(this,T),0,0),o.toDataURL()}if(a(this,m)){const[o,d]=this.pageDimensions,c=Math.round(this.width*o*y.PixelsPerInch.PDF_TO_CSS_UNITS),f=Math.round(this.height*d*y.PixelsPerInch.PDF_TO_CSS_UNITS),g=new OffscreenCanvas(c,f);return g.getContext("2d").drawImage(a(this,T),0,0,a(this,T).width,a(this,T).height,0,0,c,f),g.transferToImageBitmap()}return structuredClone(a(this,T))},Y=new WeakSet,ei=function(){lt(this,w,new ResizeObserver(L=>{const o=L[0].contentRect;o.width&&o.height&&et(this,j,Qn).call(this,o.width,o.height)})),a(this,w).observe(this.div)},ne(gt,"_type","stamp");let J=gt;n.StampEditor=J}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var n=__webpack_module_cache__[t];if(n!==void 0)return n.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return y.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return S.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return J.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return n.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return n.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return n.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),y=__w_pdfjs_require__(27),S=__w_pdfjs_require__(5),J=__w_pdfjs_require__(29),T=__w_pdfjs_require__(14),E=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(t,n,r){if(r||arguments.length===2)for(var i=0,s=n.length,y;i<s;i++)(y||!(i in n))&&(y||(y=Array.prototype.slice.call(n,0,i)),y[i]=n[i]);return t.concat(y||Array.prototype.slice.call(n))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(t,n){var r={};return allEvents.forEach(function(i){var s=t[i];s&&(n?r[i]=function(y){return s(y,n(i))}:r[i]=s)}),r}function makeCancellablePromise(t){var n=!1,r=new Promise(function(i,s){t.then(function(y){return!n&&i(y)}).catch(function(y){return!n&&s(y)})});return{promise:r,cancel:function(){n=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(t,n){if(!t){if(isProduction$1)throw new Error(prefix);var r=typeof n=="function"?n():n,i=r?"".concat(prefix,": ").concat(r):prefix;throw new Error(i)}}var warning$1=function(){},warning_1=warning$1;const warning$2=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(t,n,r){for(r of t.keys())if(dequal(r,n))return r}function dequal(t,n){var r,i,s;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((i=t.length)===n.length)for(;i--&&dequal(t[i],n[i]););return i===-1}if(r===Set){if(t.size!==n.size)return!1;for(i of t)if(s=i,s&&typeof s=="object"&&(s=find(n,s),!s)||!n.has(s))return!1;return!0}if(r===Map){if(t.size!==n.size)return!1;for(i of t)if(s=i[0],s&&typeof s=="object"&&(s=find(n,s),!s)||!dequal(i[1],n.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),n=new Uint8Array(n);else if(r===DataView){if((i=t.byteLength)===n.byteLength)for(;i--&&t.getInt8(i)===n.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===n.byteLength)for(;i--&&t[i]===n[i];);return i===-1}if(!r||typeof t=="object"){i=0;for(r in t)if(has.call(t,r)&&++i&&!has.call(n,r)||!(r in n)||!dequal(t[r],n[r]))return!1;return Object.keys(n).length===i}}return t!==t&&n!==n}const DocumentContext=reactExports.createContext(null);function Message({children:t,type:n}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${n}`,children:t})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(n){this.pdfDocument=n}setViewer(n){this.pdfViewer=n}setExternalLinkRel(n){this.externalLinkRel=n}setExternalLinkTarget(n){this.externalLinkTarget=n}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(n){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=n}get rotation(){return 0}set rotation(n){}goToDestination(n){return new Promise(r=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(n,"Destination is not specified."),typeof n=="string"?this.pdfDocument.getDestination(n).then(r):Array.isArray(n)?r(n):n.then(r)}).then(r=>{invariant(Array.isArray(r),`"${r}" is not a valid destination array.`);const i=r[0];new Promise(s=>{invariant(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(y=>{s(y)}).catch(()=>{invariant(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):invariant(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const y=s+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(y>=1&&y<=this.pagesCount,`"${y}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:r,pageIndex:s,pageNumber:y})})})}navigateTo(n){this.goToDestination(n)}goToPage(n){const r=n-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(n>=1&&n<=this.pagesCount,`"${n}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:r,pageNumber:n})}addLinkAttributes(n,r,i){n.href=r,n.rel=this.externalLinkRel||DEFAULT_LINK_REL,n.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(t){return typeof t<"u"}function isProvided(t){return isDefined(t)&&t!==null}function isString$1(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant(isBrowser,"isBlob can only be used in a browser environment"),t instanceof Blob}function isDataURI(t){return isString$1(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant(isDataURI(t),"Invalid data URI.");const[n="",r=""]=t.split(",");return n.split(";").indexOf("base64")!==-1?atob(r):unescape(r)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$2(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$2(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t&&t.cancel&&t.cancel()}function makePageCallback(t,n){return Object.defineProperty(t,"width",{get(){return this.view[2]*n},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*n},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return r(new Error("Error while reading a file."));n(i.result)},i.onerror=s=>{if(!s.target)return r(new Error("Error while reading a file."));const{error:y}=s.target;if(!y)return r(new Error("Error while reading a file."));switch(y.code){case y.NOT_FOUND_ERR:return r(new Error("Error while reading a file: File not found."));case y.SECURITY_ERR:return r(new Error("Error while reading a file: Security error."));case y.ABORT_ERR:return r(new Error("Error while reading a file: Aborted."));default:return r(new Error("Error while reading a file."))}},i.readAsArrayBuffer(t)})}function reducer(t,n){switch(n.type){case"RESOLVE":return{value:n.value,error:void 0};case"REJECT":return{value:!1,error:n.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=globalThis&&globalThis.__awaiter||function(t,n,r,i){function s(y){return y instanceof r?y:new r(function(S){S(y)})}return new(r||(r=Promise))(function(y,S){function J(v){try{E(i.next(v))}catch(B){S(B)}}function T(v){try{E(i.throw(v))}catch(B){S(B)}}function E(v){v.done?y(v.value):s(v.value).then(J,T)}E((i=i.apply(t,n||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(t,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(t,n)=>{switch(n){case PasswordResponses$1.NEED_PASSWORD:{const r=prompt("Enter the password to open this PDF file.");t(r);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const r=prompt("Invalid password. Please try again.");t(r);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t(n,r){var{children:i,className:s,error:y="Failed to load PDF file.",externalLinkRel:S,externalLinkTarget:J,file:T,inputRef:E,imageResourcesPath:v,loading:B="Loading PDF…",noData:R="No PDF file specified.",onItemClick:C,onLoadError:w,onLoadProgress:x,onLoadSuccess:m,onPassword:_=defaultOnPassword,onSourceError:D,onSourceSuccess:O,options:k,renderMode:u,rotate:p}=n,I=__rest$1(n,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[A,h]=useResolver(),{value:j,error:b}=A,[V,X]=useResolver(),{value:P,error:Z}=V,ot=reactExports.useRef(new LinkService),ct=reactExports.useRef([]),Y=reactExports.useRef(void 0),dt=reactExports.useRef(void 0);T&&T!==Y.current&&isParameterObject(T)&&(warning$2(!dequal(T,Y.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Y.current=T),k&&k!==dt.current&&(warning$2(!dequal(k,dt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),dt.current=k);const gt=reactExports.useRef({scrollPageIntoView:yt=>{const{dest:ft,pageNumber:Pt,pageIndex:It=Pt-1}=yt;if(C){C({dest:ft,pageIndex:It,pageNumber:Pt});return}const St=ct.current[It];if(St){St.scrollIntoView();return}warning$2(!1,`An internal link leading to page ${Pt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(r,()=>({linkService:ot,pages:ct,viewer:gt}),[]);function xt(){O&&O()}function _t(){b&&(warning$2(!1,b.toString()),D&&D(b))}function L(){h({type:"RESET"})}reactExports.useEffect(L,[T,h]);const o=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!T)return null;if(typeof T=="string")return isDataURI(T)?{data:dataURItoByteString(T)}:(displayCORSWarning(),{url:T});if(T instanceof PDFDataRangeTransport)return{range:T};if(isArrayBuffer(T))return{data:T};if(isBrowser&&isBlob(T))return{data:yield loadFromFile(T)};if(invariant(typeof T=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(T),"Invalid parameter object: need either .data, .range or .url"),"url"in T&&typeof T.url=="string"){if(isDataURI(T.url)){const{url:yt}=T,ft=__rest$1(T,["url"]),Pt=dataURItoByteString(yt);return Object.assign({data:Pt},ft)}displayCORSWarning()}return T}),[T]);reactExports.useEffect(()=>{const yt=makeCancellablePromise(o());return yt.promise.then(ft=>{h({type:"RESOLVE",value:ft})}).catch(ft=>{h({type:"REJECT",error:ft})}),()=>{cancelRunningTask(yt)}},[o,h]),reactExports.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){_t();return}xt()}},[j]);function d(){P&&(m&&m(P),ct.current=new Array(P.numPages),ot.current.setDocument(P))}function c(){Z&&(warning$2(!1,Z.toString()),w&&w(Z))}function f(){X({type:"RESET"})}reactExports.useEffect(f,[X,j]);function g(){if(!j)return;const yt=Object.assign(Object.assign({},k),{isEvalSupported:!1}),ft=Object.assign(Object.assign({},j),yt),Pt=pdfjs$1.getDocument(ft);x&&(Pt.onProgress=x),_&&(Pt.onPassword=_);const It=Pt;return It.promise.then(St=>{X({type:"RESOLVE",value:St})}).catch(St=>{It.destroyed||X({type:"REJECT",error:St})}),()=>{It.destroy()}}reactExports.useEffect(g,[k,X,j]),reactExports.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){c();return}d()}},[P]);function M(){ot.current.setViewer(gt.current),ot.current.setExternalLinkRel(S),ot.current.setExternalLinkTarget(J)}reactExports.useEffect(M,[S,J]);function $(yt,ft){ct.current[yt]=ft}function q(yt){delete ct.current[yt]}const rt=reactExports.useMemo(()=>({imageResourcesPath:v,linkService:ot.current,onItemClick:C,pdf:P,registerPage:$,renderMode:u,rotate:p,unregisterPage:q}),[v,C,P,u,p]),nt=reactExports.useMemo(()=>makeEventProps(I,()=>P),[I,P]);function ut(){return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:rt,children:i})}function mt(){return T?P==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof B=="function"?B():B}):P===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof y=="function"?y():y}):ut():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof R=="function"?R():R})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",s),ref:E,style:{"--scale-factor":"1"}},nt,{children:mt()}))}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(r.length<=1){var i=r[0];return i||null}return function(y){r.forEach(function(S){typeof S=="function"?S(y):S&&(S.current=y)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const n={};if(isStructTreeNode(t)){const{role:r}=t,i=r.match(HEADING_PATTERN);if(i)n.role="heading",n["aria-level"]=Number(i[1]);else if(isPdfRole(r)){const s=PDF_ROLE_TO_HTML_ROLE[r];s&&(n.role=s)}}return n}function getBaseAttributes(t){const n={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(n["aria-label"]=t.alt),t.lang!==void 0&&(n.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[r]=t.children;if(r){const i=getBaseAttributes(r);return Object.assign(Object.assign({},n),i)}}}else"id"in t&&(n["aria-owns"]=t.id);return n}function getAttributes(t){return t?Object.assign(Object.assign({},getRoleAttributes(t)),getBaseAttributes(t)):null}function StructTreeItem({className:t,node:n}){const r=reactExports.useMemo(()=>getAttributes(n),[n]),i=reactExports.useMemo(()=>!isStructTreeNode(n)||isStructTreeNodeWithOnlyContentChild(n)?null:n.children.map((s,y)=>jsxRuntimeExports.jsx(StructTreeItem,{node:s},y)),[n]);return jsxRuntimeExports.jsx("span",Object.assign({className:t},r,{children:i}))}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{onGetStructTreeError:n,onGetStructTreeSuccess:r}=t,[i,s]=useResolver(),{value:y,error:S}=i,{customTextRenderer:J,page:T}=t;function E(){y&&r&&r(y)}function v(){S&&(warning$2(!1,S.toString()),n&&n(S))}function B(){s({type:"RESET"})}reactExports.useEffect(B,[s,T]);function R(){if(J||!T)return;const C=makeCancellablePromise(T.getStructTree()),w=C;return C.promise.then(x=>{s({type:"RESOLVE",value:x})}).catch(x=>{s({type:"REJECT",error:x})}),()=>cancelRunningTask(w)}return reactExports.useEffect(R,[J,T,s]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){v();return}E()}},[y]),y?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:y}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(t){const n=usePageContext();invariant(n,"Unable to find Page context.");const r=Object.assign(Object.assign({},n),t),{_className:i,canvasBackground:s,devicePixelRatio:y=getDevicePixelRatio(),onRenderError:S,onRenderSuccess:J,page:T,renderForms:E,renderTextLayer:v,rotate:B,scale:R}=r,{canvasRef:C}=t;invariant(T,"Attempted to render page canvas, but no page was specified.");const w=reactExports.useRef(null);function x(){T&&J&&J(makePageCallback(T,R))}function m(u){isCancelException(u)||(warning$2(!1,u.toString()),S&&S(u))}const _=reactExports.useMemo(()=>T.getViewport({scale:R*y,rotation:B}),[y,T,B,R]),D=reactExports.useMemo(()=>T.getViewport({scale:R,rotation:B}),[T,B,R]);function O(){if(!T)return;T.cleanup();const{current:u}=w;if(!u)return;u.width=_.width,u.height=_.height,u.style.width=`${Math.floor(D.width)}px`,u.style.height=`${Math.floor(D.height)}px`,u.style.visibility="hidden";const p={annotationMode:E?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:u.getContext("2d",{alpha:!1}),viewport:_};s&&(p.background=s);const I=T.render(p),A=I;return I.promise.then(()=>{u.style.visibility="",x()}).catch(m),()=>cancelRunningTask(A)}reactExports.useEffect(O,[s,w,y,T,E,_,D]);const k=reactExports.useCallback(()=>{const{current:u}=w;u&&(u.width=0,u.height=0)},[w]);return reactExports.useEffect(()=>k,[k]),jsxRuntimeExports.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:mergeRefs(C,w),style:{display:"block",userSelect:"none"},children:v?jsxRuntimeExports.jsx(StructTree,{}):null})}function PageSVG(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{_className:n,onRenderSuccess:r,onRenderError:i,page:s,rotate:y,scale:S}=t;invariant(s,"Attempted to render page SVG, but no page was specified.");const[J,T]=useResolver(),{value:E,error:v}=J;function B(){s&&r&&r(makePageCallback(s,S))}function R(){v&&(isCancelException(v)||(warning$2(!1,v.toString()),i&&i(v)))}const C=reactExports.useMemo(()=>s.getViewport({scale:S,rotation:y}),[s,y,S]);function w(){T({type:"RESET"})}reactExports.useEffect(w,[s,T,C]);function x(){if(!s)return;const O=makeCancellablePromise(s.getOperatorList());return O.promise.then(k=>{new pdfjs$1.SVGGraphics(s.commonObjs,s.objs).getSVG(k,C).then(p=>{if(!(p instanceof SVGElement))throw new Error("getSVG returned unexpected result.");T({type:"RESOLVE",value:p})}).catch(p=>{T({type:"REJECT",error:p})})}).catch(k=>{T({type:"REJECT",error:k})}),()=>cancelRunningTask(O)}reactExports.useEffect(x,[s,T,C]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){R();return}B()}},[E]);function m(O){if(!O||!E)return;O.firstElementChild||O.appendChild(E);const{width:k,height:u}=C;E.setAttribute("width",`${k}`),E.setAttribute("height",`${u}`)}const{width:_,height:D}=C;return jsxRuntimeExports.jsx("div",{className:`${n}__svg`,ref:O=>m(O),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:_,height:D,userSelect:"none"}})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{customTextRenderer:n,onGetTextError:r,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:y,page:S,pageIndex:J,pageNumber:T,rotate:E,scale:v}=t;invariant(S,"Attempted to load page text content, but no page was specified.");const[B,R]=useResolver(),{value:C,error:w}=B,x=reactExports.useRef(null),m=reactExports.useRef(void 0);warning$2(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){C&&i&&i(C)}function D(){w&&(warning$2(!1,w.toString()),r&&r(w))}function O(){R({type:"RESET"})}reactExports.useEffect(O,[S,R]);function k(){if(!S)return;const b=makeCancellablePromise(S.getTextContent()),V=b;return b.promise.then(X=>{R({type:"RESOLVE",value:X})}).catch(X=>{R({type:"REJECT",error:X})}),()=>cancelRunningTask(V)}reactExports.useEffect(k,[S,R]),reactExports.useEffect(()=>{if(C!==void 0){if(C===!1){D();return}_()}},[C]);const u=reactExports.useCallback(()=>{y&&y()},[y]),p=reactExports.useCallback(b=>{warning$2(!1,b.toString()),s&&s(b)},[s]);function I(){const b=m.current;b&&b.classList.add("active")}function A(){const b=m.current;b&&b.classList.remove("active")}const h=reactExports.useMemo(()=>S.getViewport({scale:v,rotation:E}),[S,E,v]);function j(){if(!S||!C)return;const{current:b}=x;if(!b)return;b.innerHTML="";const V=S.streamTextContent({includeMarkedContent:!0}),X={container:b,textContentSource:V,viewport:h},P=pdfjs$1.renderTextLayer(X),Z=P;return P.promise.then(()=>{const ot=document.createElement("div");ot.className="endOfContent",b.append(ot),m.current=ot;const ct=b.querySelectorAll('[role="presentation"]');if(n){let Y=0;C.items.forEach((dt,gt)=>{if(!isTextItem(dt))return;const xt=ct[Y];if(!xt)return;const _t=n(Object.assign({pageIndex:J,pageNumber:T,itemIndex:gt},dt));xt.innerHTML=_t,Y+=dt.str&&dt.hasEOL?2:1})}u()}).catch(p),()=>cancelRunningTask(Z)}return reactExports.useLayoutEffect(j,[n,p,u,S,J,T,C,h]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:A,onMouseDown:I,ref:x})}function AnnotationLayer(){const t=useDocumentContext(),n=usePageContext();invariant(n,"Unable to find Page context.");const r=Object.assign(Object.assign({},t),n),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:y,onGetAnnotationsSuccess:S,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:T,page:E,pdf:v,renderForms:B,rotate:R,scale:C=1}=r;invariant(v,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(E,"Attempted to load page annotations, but no page was specified."),invariant(s,"Attempted to load page annotations, but no linkService was specified.");const[w,x]=useResolver(),{value:m,error:_}=w,D=reactExports.useRef(null);warning$2(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){m&&S&&S(m)}function k(){_&&(warning$2(!1,_.toString()),y&&y(_))}function u(){x({type:"RESET"})}reactExports.useEffect(u,[x,E]);function p(){if(!E)return;const b=makeCancellablePromise(E.getAnnotations()),V=b;return b.promise.then(X=>{x({type:"RESOLVE",value:X})}).catch(X=>{x({type:"REJECT",error:X})}),()=>{cancelRunningTask(V)}}reactExports.useEffect(p,[x,E,B]),reactExports.useEffect(()=>{if(m!==void 0){if(m===!1){k();return}O()}},[m]);function I(){T&&T()}function A(b){warning$2(!1,`${b}`),J&&J(b)}const h=reactExports.useMemo(()=>E.getViewport({scale:C,rotation:R}),[E,R,C]);function j(){if(!v||!E||!s||!m)return;const{current:b}=D;if(!b)return;const V=h.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,div:b,l10n:null,page:E,viewport:V},P={annotations:m,annotationStorage:v.annotationStorage,div:b,downloadManager:null,imageResourcesPath:i,linkService:s,page:E,renderForms:B,viewport:V};b.innerHTML="";try{new pdfjs$1.AnnotationLayer(X).render(P),I()}catch(Z){A(Z)}return()=>{}}return reactExports.useEffect(j,[m,i,s,E,B,h]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:D})}var __rest=globalThis&&globalThis.__rest||function(t,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};const defaultScale=1;function Page(t){const n=useDocumentContext(),r=Object.assign(Object.assign({},n),t),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:y,canvasRef:S,children:J,className:T,customRenderer:E,customTextRenderer:v,devicePixelRatio:B,error:R="Failed to load the page.",height:C,inputRef:w,loading:x="Loading page…",noData:m="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:k,onGetTextError:u,onGetTextSuccess:p,onLoadError:I,onLoadSuccess:A,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:j,onRenderError:b,onRenderSuccess:V,onRenderTextLayerError:X,onRenderTextLayerSuccess:P,pageIndex:Z,pageNumber:ot,pdf:ct,registerPage:Y,renderAnnotationLayer:dt=!0,renderForms:gt=!1,renderMode:xt="canvas",renderTextLayer:_t=!0,rotate:L,scale:o=defaultScale,unregisterPage:d,width:c}=r,f=__rest(r,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[g,M]=useResolver(),{value:$,error:q}=g,rt=reactExports.useRef(null);invariant(ct,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const nt=isProvided(ot)?ot-1:Z??null,ut=ot??(isProvided(Z)?Z+1:null),mt=L??($?$.rotate:null),yt=reactExports.useMemo(()=>{if(!$)return null;let Ht=1;const Gt=o??defaultScale;if(c||C){const Wt=$.getViewport({scale:1,rotation:mt});c?Ht=c/Wt.width:C&&(Ht=C/Wt.height)}return Gt*Ht},[C,$,mt,o,c]);function ft(){return()=>{isProvided(nt)&&s&&d&&d(nt)}}reactExports.useEffect(ft,[s,ct,nt,d]);function Pt(){if(A){if(!$||!yt)return;A(makePageCallback($,yt))}if(s&&Y){if(!isProvided(nt)||!rt.current)return;Y(nt,rt.current)}}function It(){q&&(warning$2(!1,q.toString()),I&&I(q))}function St(){M({type:"RESET"})}reactExports.useEffect(St,[M,ct,nt]);function Dt(){if(!ct||!ut)return;const Ht=makeCancellablePromise(ct.getPage(ut)),Gt=Ht;return Ht.promise.then(Wt=>{M({type:"RESOLVE",value:Wt})}).catch(Wt=>{M({type:"REJECT",error:Wt})}),()=>cancelRunningTask(Gt)}reactExports.useEffect(Dt,[M,ct,nt,ut,Y]),reactExports.useEffect(()=>{if($!==void 0){if($===!1){It();return}Pt()}},[$,yt]);const U=reactExports.useMemo(()=>$&&isProvided(nt)&&ut&&isProvided(mt)&&isProvided(yt)?{_className:i,canvasBackground:y,customTextRenderer:v,devicePixelRatio:B,onGetAnnotationsError:_,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:k,onGetTextError:u,onGetTextSuccess:p,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:j,onRenderError:b,onRenderSuccess:V,onRenderTextLayerError:X,onRenderTextLayerSuccess:P,page:$,pageIndex:nt,pageNumber:ut,renderForms:gt,renderTextLayer:_t,rotate:mt,scale:yt}:null,[i,y,v,B,_,D,O,k,u,p,h,j,b,V,X,P,$,nt,ut,gt,_t,mt,yt]),G=reactExports.useMemo(()=>makeEventProps(f,()=>$&&(yt?makePageCallback($,yt):void 0)),[f,$,yt]),N=`${nt}@${yt}/${mt}`,K=`${nt}/${mt}`;function pt(){switch(xt){case"custom":return invariant(E,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(E,{},`${N}_custom`);case"none":return null;case"svg":return jsxRuntimeExports.jsx(PageSVG,{},`${K}_svg`);case"canvas":default:return jsxRuntimeExports.jsx(PageCanvas,{canvasRef:S},`${N}_canvas`)}}function bt(){return _t?jsxRuntimeExports.jsx(TextLayer,{},`${N}_text`):null}function Rt(){return dt?jsxRuntimeExports.jsx(AnnotationLayer,{},`${N}_annotations`):null}function jt(){return jsxRuntimeExports.jsxs(PageContext.Provider,{value:U,children:[pt(),bt(),Rt(),J]})}function Bt(){return ut?ct===null||$===void 0||$===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof x=="function"?x():x}):ct===!1||$===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof R=="function"?R():R}):jt():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof m=="function"?m():m})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(i,T),"data-page-number":ut,ref:mergeRefs(w,rt),style:{"--scale-factor":`${yt}`,backgroundColor:y||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},G,{children:Bt()}))}displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const StyledFilePreview=styled.div`
	position: absolute;
	top: 8px;
	left: 8px;
	overflow: hidden;
	width: calc(100% - 16px);
	height: calc(100% - 16px);
	object-fit: contain;
	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.xs};
`,WrappableText=styled(Text)`
	word-wrap: break-word;
	width: 100%;
`;pdfjs$1.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs$1.version}/pdf.worker.min.js`;const FilePreview=({file:t,onPassword:n,passwordQueue:r})=>{const i=(s,y)=>{parseInt(y,10)===PasswordResponses$1.NEED_PASSWORD?r.add({callback:s,incorrect:!1,filename:t.name}):parseInt(y,10)===PasswordResponses$1.INCORRECT_PASSWORD&&r.editCurrentItem({callback:s,incorrect:!0})};return t.name.endsWith(".pdf")?e.createElement(StyledFilePreview,null,e.createElement(Document$1,{file:t,onPassword:i,onLoadSuccess:()=>{var s;(s=r.currentItem)!=null&&s.password&&(n==null||n(t.name,r.currentItem.password),r.remove())}},e.createElement(Page,{pageNumber:1,width:142}))):t.name.endsWith(".csv")?e.createElement(StyledFilePreview,null,e.createElement(Flex,{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},e.createElement(WrappableText,{bold:!0,size:"sm",px:"xs"},t.name),e.createElement(Text,{color:"quaternary",size:"xs",mt:"3xs"},(Number(t.size)/1e3).toFixed(1)," kB"))):e.createElement(StyledFilePreview,{src:t.preview,as:"img"})},FilePreview$1=FilePreview;FilePreview.__docgenInfo={description:"",methods:[],displayName:"FilePreview",props:{setFiles:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileWithPreview[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},name:"files"}],return:{name:"void"}}},description:""},passwordQueue:{required:!0,tsType:{name:"PasswordQueue"},description:""},file:{required:!0,tsType:{name:"FileWithPreview"},description:""}}};var isMergeableObject=function t(n){return isNonNullObject(n)&&!isSpecial(n)};function isNonNullObject(t){return!!t&&typeof t=="object"}function isSpecial(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||isReactElement(t)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(t){return t.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(t){return Array.isArray(t)?[]:{}}function cloneUnlessOtherwiseSpecified(t,n){return n.clone!==!1&&n.isMergeableObject(t)?deepmerge(emptyTarget(t),t,n):t}function defaultArrayMerge(t,n,r){return t.concat(n).map(function(i){return cloneUnlessOtherwiseSpecified(i,r)})}function mergeObject(t,n,r){var i={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(s){i[s]=cloneUnlessOtherwiseSpecified(t[s],r)}),Object.keys(n).forEach(function(s){!r.isMergeableObject(n[s])||!t[s]?i[s]=cloneUnlessOtherwiseSpecified(n[s],r):i[s]=deepmerge(t[s],n[s],r)}),i}function deepmerge(t,n,r){r=r||{},r.arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject;var i=Array.isArray(n),s=Array.isArray(t),y=i===s;return y?i?r.arrayMerge(t,n,r):mergeObject(t,n,r):cloneUnlessOtherwiseSpecified(n,r)}deepmerge.all=function t(n,r){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(i,s){return deepmerge(i,s,r)},{})};var deepmerge_1=deepmerge,freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var n=hasOwnProperty$a.call(t,symToStringTag$1),r=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var i=!0}catch{}var s=nativeObjectToString$1.call(t);return i&&(n?t[symToStringTag$1]=r:delete t[symToStringTag$1]),s}var objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function overArg(t,n){return function(r){return t(n(r))}}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;function isObjectLike(t){return t!=null&&typeof t=="object"}var objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$b=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var n=getPrototype$1(t);if(n===null)return!0;var r=hasOwnProperty$9.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString$2.call(r)==objectCtorString}function listCacheClear(){this.__data__=[],this.size=0}function eq(t,n){return t===n||t!==t&&n!==n}function assocIndexOf(t,n){for(var r=t.length;r--;)if(eq(t[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var n=this.__data__,r=assocIndexOf(n,t);if(r<0)return!1;var i=n.length-1;return r==i?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(t){var n=this.__data__,r=assocIndexOf(n,t);return r<0?void 0:n[r][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,n){var r=this.__data__,i=assocIndexOf(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}function ListCache(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}function isObject$1(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var n=baseGetTag(t);return n==funcTag$2||n==genTag$1||n==asyncTag||n==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(t){if(t!=null){try{return funcToString$1.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$a=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$8=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$8).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var n=isFunction$1(t)?reIsNative:reIsHostCtor;return n.test(toSource(t))}function getValue(t,n){return t==null?void 0:t[n]}function getNative(t,n){var r=getValue(t,n);return baseIsNative(r)?r:void 0}var Map$1=getNative(root$1,"Map");const Map$2=Map$1;var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(t){var n=this.__data__;if(nativeCreate$1){var r=n[t];return r===HASH_UNDEFINED$1?void 0:r}return hasOwnProperty$7.call(n,t)?n[t]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(t){var n=this.__data__;return nativeCreate$1?n[t]!==void 0:hasOwnProperty$6.call(n,t)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nativeCreate$1&&n===void 0?HASH_UNDEFINED:n,this}function Hash(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function getMapData(t,n){var r=t.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(t){var n=getMapData(this,t).delete(t);return this.size-=n?1:0,n}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,n){var r=getMapData(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}function MapCache(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(t,n){var r=this.__data__;if(r instanceof ListCache){var i=r.__data__;if(!Map$2||i.length<LARGE_ARRAY_SIZE-1)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new MapCache(i)}return r.set(t,n),this.size=r.size,this}function Stack(t){var n=this.__data__=new ListCache(t);this.size=n.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayEach(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;function baseAssignValue(t,n,r){n=="__proto__"&&defineProperty$1?defineProperty$1(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function assignValue(t,n,r){var i=t[n];(!(hasOwnProperty$5.call(t,n)&&eq(i,r))||r===void 0&&!(n in t))&&baseAssignValue(t,n,r)}function copyObject(t,n,r,i){var s=!r;r||(r={});for(var y=-1,S=n.length;++y<S;){var J=n[y],T=i?i(r[J],t[J],J,r,t):void 0;T===void 0&&(T=t[J]),s?baseAssignValue(r,J,T):assignValue(r,J,T)}return r}function baseTimes(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}var argsTag$2="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$2}var objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$4.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;var isArray$1=Array.isArray;const isArray$2=isArray$1;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,n){var r=typeof t;return n=n??MAX_SAFE_INTEGER$1,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<n}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(n){return t(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(t,n){var r=isArray$2(t),i=!r&&isArguments$1(t),s=!r&&!i&&isBuffer$1(t),y=!r&&!i&&!s&&isTypedArray$1(t),S=r||i||s||y,J=S?baseTimes(t.length,String):[],T=J.length;for(var E in t)(n||hasOwnProperty$3.call(t,E))&&!(S&&(E=="length"||s&&(E=="offset"||E=="parent")||y&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||isIndex(E,T)))&&J.push(E);return J}var objectProto$4=Object.prototype;function isPrototype(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||objectProto$4;return t===r}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var n=[];for(var r in Object(t))hasOwnProperty$2.call(t,r)&&r!="constructor"&&n.push(r);return n}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function baseAssign(t,n){return t&&copyObject(n,keys(n),t)}function nativeKeysIn(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}var objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var n=isPrototype(t),r=[];for(var i in t)i=="constructor"&&(n||!hasOwnProperty$1.call(t,i))||r.push(i);return r}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}function baseAssignIn(t,n){return t&&copyObject(n,keysIn(n),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,n){if(n)return t.slice();var r=t.length,i=allocUnsafe?allocUnsafe(r):new t.constructor(r);return t.copy(i),i}function copyArray(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}function arrayFilter(t,n){for(var r=-1,i=t==null?0:t.length,s=0,y=[];++r<i;){var S=t[r];n(S,r,t)&&(y[s++]=S)}return y}function stubArray(){return[]}var objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(n){return propertyIsEnumerable.call(t,n)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,n){return copyObject(t,getSymbols$1(t),n)}function arrayPush(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var n=[];t;)arrayPush(n,getSymbols$1(t)),t=getPrototype$1(t);return n}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,n){return copyObject(t,getSymbolsIn$1(t),n)}function baseGetAllKeys(t,n,r){var i=n(t);return isArray$2(t)?i:arrayPush(i,r(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$2||Map$2&&getTag(new Map$2)!=mapTag$3||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$3||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var n=baseGetTag(t),r=n==objectTag$1?t.constructor:void 0,i=r?toSource(r):"";if(i)switch(i){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return n});const getTag$1=getTag;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var n=new t.constructor(t.byteLength);return new Uint8Array$2(n).set(new Uint8Array$2(t)),n}function cloneDataView(t,n){var r=n?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var n=new t.constructor(t.source,reFlags.exec(t));return n.lastIndex=t.lastIndex,n}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf?Object(symbolValueOf.call(t)):{}}function cloneTypedArray(t,n){var r=n?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,n,r){var i=t.constructor;switch(n){case arrayBufferTag$1:return cloneArrayBuffer(t);case boolTag$1:case dateTag$1:return new i(+t);case dataViewTag$1:return cloneDataView(t,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,r);case mapTag$2:return new i;case numberTag$1:case stringTag$1:return new i(t);case regexpTag$1:return cloneRegExp(t);case setTag$2:return new i;case symbolTag$2:return cloneSymbol(t)}}var objectCreate=Object.create,baseCreate=function(){function t(){}return function(n){if(!isObject$1(n))return{};if(objectCreate)return objectCreate(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();const baseCreate$1=baseCreate;function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$1="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$1}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$1="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$1}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,n,r,i,s,y){var S,J=n&CLONE_DEEP_FLAG$1,T=n&CLONE_FLAT_FLAG,E=n&CLONE_SYMBOLS_FLAG$2;if(r&&(S=s?r(t,i,s,y):r(t)),S!==void 0)return S;if(!isObject$1(t))return t;var v=isArray$2(t);if(v){if(S=initCloneArray(t),!J)return copyArray(t,S)}else{var B=getTag$1(t),R=B==funcTag||B==genTag;if(isBuffer$1(t))return cloneBuffer(t,J);if(B==objectTag||B==argsTag||R&&!s){if(S=T||R?{}:initCloneObject(t),!J)return T?copySymbolsIn(t,baseAssignIn(S,t)):copySymbols(t,baseAssign(S,t))}else{if(!cloneableTags[B])return s?t:{};S=initCloneByTag(t,B,J)}}y||(y=new Stack);var C=y.get(t);if(C)return C;y.set(t,S),isSet$1(t)?t.forEach(function(m){S.add(baseClone(m,n,r,m,t,y))}):isMap$1(t)&&t.forEach(function(m,_){S.set(_,baseClone(m,n,r,_,t,y))});var w=E?T?getAllKeysIn:getAllKeys:T?keysIn:keys,x=v?void 0:w(t);return arrayEach(x||t,function(m,_){x&&(_=m,m=t[_]),assignValue(S,_,baseClone(m,n,r,_,t,y))}),S}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG$1)}var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,hasElementType=typeof Element<"u";function equal(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){var r=isArray(t),i=isArray(n),s,y,S;if(r&&i){if(y=t.length,y!=n.length)return!1;for(s=y;s--!==0;)if(!equal(t[s],n[s]))return!1;return!0}if(r!=i)return!1;var J=t instanceof Date,T=n instanceof Date;if(J!=T)return!1;if(J&&T)return t.getTime()==n.getTime();var E=t instanceof RegExp,v=n instanceof RegExp;if(E!=v)return!1;if(E&&v)return t.toString()==n.toString();var B=keyList(t);if(y=B.length,y!==keyList(n).length)return!1;for(s=y;s--!==0;)if(!hasProp.call(n,B[s]))return!1;if(hasElementType&&t instanceof Element&&n instanceof Element)return t===n;for(s=y;s--!==0;)if(S=B[s],!(S==="_owner"&&t.$$typeof)&&!equal(t[S],n[S]))return!1;return!0}return t!==t&&n!==n}var reactFastCompare=function t(n,r){try{return equal(n,r)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}};const isEqual=getDefaultExportFromCjs(reactFastCompare);var isProduction=!0;function warning(t,n){if(!isProduction){if(t)return;var r="Warning: "+n;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var CLONE_SYMBOLS_FLAG=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG)}function arrayMap(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}var symbolTag="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag}var FUNC_ERROR_TEXT="Expected a function";function memoize(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var i=arguments,s=n?n.apply(this,i):i[0],y=r.cache;if(y.has(s))return y.get(s);var S=t.apply(this,i);return r.cache=y.set(s,S)||y,S};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var n=memoize(t,function(i){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),i}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(rePropName,function(r,i,s,y){n.push(s?y.replace(reEscapeChar,"$1"):i||r)}),n});const stringToPath$1=stringToPath;var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var n=t+"";return n=="0"&&1/t==-INFINITY$1?"-0":n}var INFINITY=1/0,symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var n=t+"";return n=="0"&&1/t==-INFINITY?"-0":n}function toString(t){return t==null?"":baseToString(t)}function toPath(t){return isArray$2(t)?arrayMap(t,toKey):isSymbol(t)?[t]:copyArray(stringToPath$1(toString(t)))}function _extends(){return _extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var r={},i=Object.keys(t),s,y;for(y=0;y<i.length;y++)s=i[y],!(n.indexOf(s)>=0)&&(r[s]=t[s]);return r}var FormikContext=reactExports.createContext(void 0);FormikContext.displayName="FormikContext";var FormikProvider=FormikContext.Provider;FormikContext.Consumer;function useFormikContext(){var t=reactExports.useContext(FormikContext);return t||warning(!1),t}var isFunction=function t(n){return typeof n=="function"},isObject=function t(n){return n!==null&&typeof n=="object"},isInteger=function t(n){return String(Math.floor(Number(n)))===n},isString=function t(n){return Object.prototype.toString.call(n)==="[object String]"},isEmptyChildren=function t(n){return reactExports.Children.count(n)===0},isPromise=function t(n){return isObject(n)&&isFunction(n.then)};function getIn(t,n,r,i){i===void 0&&(i=0);for(var s=toPath(n);t&&i<s.length;)t=t[s[i++]];return i!==s.length&&!t||t===void 0?r:t}function setIn(t,n,r){for(var i=clone(t),s=i,y=0,S=toPath(n);y<S.length-1;y++){var J=S[y],T=getIn(t,S.slice(0,y+1));if(T&&(isObject(T)||Array.isArray(T)))s=s[J]=clone(T);else{var E=S[y+1];s=s[J]=isInteger(E)&&Number(E)>=0?[]:{}}}return(y===0?t:s)[S[y]]===r?t:(r===void 0?delete s[S[y]]:s[S[y]]=r,y===0&&r===void 0&&delete i[S[y]],i)}function setNestedObjectValues(t,n,r,i){r===void 0&&(r=new WeakMap),i===void 0&&(i={});for(var s=0,y=Object.keys(t);s<y.length;s++){var S=y[s],J=t[S];isObject(J)?r.get(J)||(r.set(J,!0),i[S]=Array.isArray(J)?[]:{},setNestedObjectValues(J,n,r,i[S])):i[S]=n}return i}function formikReducer(t,n){switch(n.type){case"SET_VALUES":return _extends({},t,{values:n.payload});case"SET_TOUCHED":return _extends({},t,{touched:n.payload});case"SET_ERRORS":return isEqual(t.errors,n.payload)?t:_extends({},t,{errors:n.payload});case"SET_STATUS":return _extends({},t,{status:n.payload});case"SET_ISSUBMITTING":return _extends({},t,{isSubmitting:n.payload});case"SET_ISVALIDATING":return _extends({},t,{isValidating:n.payload});case"SET_FIELD_VALUE":return _extends({},t,{values:setIn(t.values,n.payload.field,n.payload.value)});case"SET_FIELD_TOUCHED":return _extends({},t,{touched:setIn(t.touched,n.payload.field,n.payload.value)});case"SET_FIELD_ERROR":return _extends({},t,{errors:setIn(t.errors,n.payload.field,n.payload.value)});case"RESET_FORM":return _extends({},t,n.payload);case"SET_FORMIK_STATE":return n.payload(t);case"SUBMIT_ATTEMPT":return _extends({},t,{touched:setNestedObjectValues(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return _extends({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return _extends({},t,{isSubmitting:!1});default:return t}}var emptyErrors={},emptyTouched={};function useFormik(t){var n=t.validateOnChange,r=n===void 0?!0:n,i=t.validateOnBlur,s=i===void 0?!0:i,y=t.validateOnMount,S=y===void 0?!1:y,J=t.isInitialValid,T=t.enableReinitialize,E=T===void 0?!1:T,v=t.onSubmit,B=_objectWithoutPropertiesLoose(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),R=_extends({validateOnChange:r,validateOnBlur:s,validateOnMount:S,onSubmit:v},B),C=reactExports.useRef(R.initialValues),w=reactExports.useRef(R.initialErrors||emptyErrors),x=reactExports.useRef(R.initialTouched||emptyTouched),m=reactExports.useRef(R.initialStatus),_=reactExports.useRef(!1),D=reactExports.useRef({});reactExports.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var O=reactExports.useState(0),k=O[1],u=reactExports.useRef({values:cloneDeep(R.initialValues),errors:cloneDeep(R.initialErrors)||emptyErrors,touched:cloneDeep(R.initialTouched)||emptyTouched,status:cloneDeep(R.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),p=u.current,I=reactExports.useCallback(function(U){var G=u.current;u.current=formikReducer(G,U),G!==u.current&&k(function(N){return N+1})},[]),A=reactExports.useCallback(function(U,G){return new Promise(function(N,K){var pt=R.validate(U,G);pt==null?N(emptyErrors):isPromise(pt)?pt.then(function(bt){N(bt||emptyErrors)},function(bt){K(bt)}):N(pt)})},[R.validate]),h=reactExports.useCallback(function(U,G){var N=R.validationSchema,K=isFunction(N)?N(G):N,pt=G&&K.validateAt?K.validateAt(G,U):validateYupSchema(U,K);return new Promise(function(bt,Rt){pt.then(function(){bt(emptyErrors)},function(jt){jt.name==="ValidationError"?bt(yupToFormErrors(jt)):Rt(jt)})})},[R.validationSchema]),j=reactExports.useCallback(function(U,G){return new Promise(function(N){return N(D.current[U].validate(G))})},[]),b=reactExports.useCallback(function(U){var G=Object.keys(D.current).filter(function(K){return isFunction(D.current[K].validate)}),N=G.length>0?G.map(function(K){return j(K,getIn(U,K))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(N).then(function(K){return K.reduce(function(pt,bt,Rt){return bt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||bt&&(pt=setIn(pt,G[Rt],bt)),pt},{})})},[j]),V=reactExports.useCallback(function(U){return Promise.all([b(U),R.validationSchema?h(U):{},R.validate?A(U):{}]).then(function(G){var N=G[0],K=G[1],pt=G[2],bt=deepmerge_1.all([N,K,pt],{arrayMerge});return bt})},[R.validate,R.validationSchema,b,A,h]),X=useEventCallback(function(U){return U===void 0&&(U=p.values),I({type:"SET_ISVALIDATING",payload:!0}),V(U).then(function(G){return _.current&&(I({type:"SET_ISVALIDATING",payload:!1}),I({type:"SET_ERRORS",payload:G})),G})});reactExports.useEffect(function(){S&&_.current===!0&&isEqual(C.current,R.initialValues)&&X(C.current)},[S,X]);var P=reactExports.useCallback(function(U){var G=U&&U.values?U.values:C.current,N=U&&U.errors?U.errors:w.current?w.current:R.initialErrors||{},K=U&&U.touched?U.touched:x.current?x.current:R.initialTouched||{},pt=U&&U.status?U.status:m.current?m.current:R.initialStatus;C.current=G,w.current=N,x.current=K,m.current=pt;var bt=function(){I({type:"RESET_FORM",payload:{isSubmitting:!!U&&!!U.isSubmitting,errors:N,touched:K,status:pt,values:G,isValidating:!!U&&!!U.isValidating,submitCount:U&&U.submitCount&&typeof U.submitCount=="number"?U.submitCount:0}})};if(R.onReset){var Rt=R.onReset(p.values,nt);isPromise(Rt)?Rt.then(bt):bt()}else bt()},[R.initialErrors,R.initialStatus,R.initialTouched,R.onReset]);reactExports.useEffect(function(){_.current===!0&&!isEqual(C.current,R.initialValues)&&E&&(C.current=R.initialValues,P(),S&&X(C.current))},[E,R.initialValues,P,S,X]),reactExports.useEffect(function(){E&&_.current===!0&&!isEqual(w.current,R.initialErrors)&&(w.current=R.initialErrors||emptyErrors,I({type:"SET_ERRORS",payload:R.initialErrors||emptyErrors}))},[E,R.initialErrors]),reactExports.useEffect(function(){E&&_.current===!0&&!isEqual(x.current,R.initialTouched)&&(x.current=R.initialTouched||emptyTouched,I({type:"SET_TOUCHED",payload:R.initialTouched||emptyTouched}))},[E,R.initialTouched]),reactExports.useEffect(function(){E&&_.current===!0&&!isEqual(m.current,R.initialStatus)&&(m.current=R.initialStatus,I({type:"SET_STATUS",payload:R.initialStatus}))},[E,R.initialStatus,R.initialTouched]);var Z=useEventCallback(function(U){if(D.current[U]&&isFunction(D.current[U].validate)){var G=getIn(p.values,U),N=D.current[U].validate(G);return isPromise(N)?(I({type:"SET_ISVALIDATING",payload:!0}),N.then(function(K){return K}).then(function(K){I({type:"SET_FIELD_ERROR",payload:{field:U,value:K}}),I({type:"SET_ISVALIDATING",payload:!1})})):(I({type:"SET_FIELD_ERROR",payload:{field:U,value:N}}),Promise.resolve(N))}else if(R.validationSchema)return I({type:"SET_ISVALIDATING",payload:!0}),h(p.values,U).then(function(K){return K}).then(function(K){I({type:"SET_FIELD_ERROR",payload:{field:U,value:getIn(K,U)}}),I({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),ot=reactExports.useCallback(function(U,G){var N=G.validate;D.current[U]={validate:N}},[]),ct=reactExports.useCallback(function(U){delete D.current[U]},[]),Y=useEventCallback(function(U,G){I({type:"SET_TOUCHED",payload:U});var N=G===void 0?s:G;return N?X(p.values):Promise.resolve()}),dt=reactExports.useCallback(function(U){I({type:"SET_ERRORS",payload:U})},[]),gt=useEventCallback(function(U,G){var N=isFunction(U)?U(p.values):U;I({type:"SET_VALUES",payload:N});var K=G===void 0?r:G;return K?X(N):Promise.resolve()}),xt=reactExports.useCallback(function(U,G){I({type:"SET_FIELD_ERROR",payload:{field:U,value:G}})},[]),_t=useEventCallback(function(U,G,N){I({type:"SET_FIELD_VALUE",payload:{field:U,value:G}});var K=N===void 0?r:N;return K?X(setIn(p.values,U,G)):Promise.resolve()}),L=reactExports.useCallback(function(U,G){var N=G,K=U,pt;if(!isString(U)){U.persist&&U.persist();var bt=U.target?U.target:U.currentTarget,Rt=bt.type,jt=bt.name,Bt=bt.id,Ht=bt.value,Gt=bt.checked,Wt=bt.outerHTML,qt=bt.options,vt=bt.multiple;N=G||jt||Bt,K=/number|range/.test(Rt)?(pt=parseFloat(Ht),isNaN(pt)?"":pt):/checkbox/.test(Rt)?getValueForCheckbox(getIn(p.values,N),Gt,Ht):qt&&vt?getSelectedValues(qt):Ht}N&&_t(N,K)},[_t,p.values]),o=useEventCallback(function(U){if(isString(U))return function(G){return L(G,U)};L(U)}),d=useEventCallback(function(U,G,N){G===void 0&&(G=!0),I({type:"SET_FIELD_TOUCHED",payload:{field:U,value:G}});var K=N===void 0?s:N;return K?X(p.values):Promise.resolve()}),c=reactExports.useCallback(function(U,G){U.persist&&U.persist();var N=U.target,K=N.name,pt=N.id,bt=N.outerHTML,Rt=G||K||pt;d(Rt,!0)},[d]),f=useEventCallback(function(U){if(isString(U))return function(G){return c(G,U)};c(U)}),g=reactExports.useCallback(function(U){isFunction(U)?I({type:"SET_FORMIK_STATE",payload:U}):I({type:"SET_FORMIK_STATE",payload:function(){return U}})},[]),M=reactExports.useCallback(function(U){I({type:"SET_STATUS",payload:U})},[]),$=reactExports.useCallback(function(U){I({type:"SET_ISSUBMITTING",payload:U})},[]),q=useEventCallback(function(){return I({type:"SUBMIT_ATTEMPT"}),X().then(function(U){var G=U instanceof Error,N=!G&&Object.keys(U).length===0;if(N){var K;try{if(K=ut(),K===void 0)return}catch(pt){throw pt}return Promise.resolve(K).then(function(pt){return _.current&&I({type:"SUBMIT_SUCCESS"}),pt}).catch(function(pt){if(_.current)throw I({type:"SUBMIT_FAILURE"}),pt})}else if(_.current&&(I({type:"SUBMIT_FAILURE"}),G))throw U})}),rt=useEventCallback(function(U){U&&U.preventDefault&&isFunction(U.preventDefault)&&U.preventDefault(),U&&U.stopPropagation&&isFunction(U.stopPropagation)&&U.stopPropagation(),q().catch(function(G){console.warn("Warning: An unhandled error was caught from submitForm()",G)})}),nt={resetForm:P,validateForm:X,validateField:Z,setErrors:dt,setFieldError:xt,setFieldTouched:d,setFieldValue:_t,setStatus:M,setSubmitting:$,setTouched:Y,setValues:gt,setFormikState:g,submitForm:q},ut=useEventCallback(function(){return v(p.values,nt)}),mt=useEventCallback(function(U){U&&U.preventDefault&&isFunction(U.preventDefault)&&U.preventDefault(),U&&U.stopPropagation&&isFunction(U.stopPropagation)&&U.stopPropagation(),P()}),yt=reactExports.useCallback(function(U){return{value:getIn(p.values,U),error:getIn(p.errors,U),touched:!!getIn(p.touched,U),initialValue:getIn(C.current,U),initialTouched:!!getIn(x.current,U),initialError:getIn(w.current,U)}},[p.errors,p.touched,p.values]),ft=reactExports.useCallback(function(U){return{setValue:function(N,K){return _t(U,N,K)},setTouched:function(N,K){return d(U,N,K)},setError:function(N){return xt(U,N)}}},[_t,d,xt]),Pt=reactExports.useCallback(function(U){var G=isObject(U),N=G?U.name:U,K=getIn(p.values,N),pt={name:N,value:K,onChange:o,onBlur:f};if(G){var bt=U.type,Rt=U.value,jt=U.as,Bt=U.multiple;bt==="checkbox"?Rt===void 0?pt.checked=!!K:(pt.checked=!!(Array.isArray(K)&&~K.indexOf(Rt)),pt.value=Rt):bt==="radio"?(pt.checked=K===Rt,pt.value=Rt):jt==="select"&&Bt&&(pt.value=pt.value||[],pt.multiple=!0)}return pt},[f,o,p.values]),It=reactExports.useMemo(function(){return!isEqual(C.current,p.values)},[C.current,p.values]),St=reactExports.useMemo(function(){return typeof J<"u"?It?p.errors&&Object.keys(p.errors).length===0:J!==!1&&isFunction(J)?J(R):J:p.errors&&Object.keys(p.errors).length===0},[J,It,p.errors,R]),Dt=_extends({},p,{initialValues:C.current,initialErrors:w.current,initialTouched:x.current,initialStatus:m.current,handleBlur:f,handleChange:o,handleReset:mt,handleSubmit:rt,resetForm:P,setErrors:dt,setFormikState:g,setFieldTouched:d,setFieldValue:_t,setFieldError:xt,setStatus:M,setSubmitting:$,setTouched:Y,setValues:gt,submitForm:q,validateForm:X,validateField:Z,isValid:St,dirty:It,unregisterField:ct,registerField:ot,getFieldProps:Pt,getFieldMeta:yt,getFieldHelpers:ft,validateOnBlur:s,validateOnChange:r,validateOnMount:S});return Dt}function Formik(t){var n=useFormik(t),r=t.component,i=t.children,s=t.render,y=t.innerRef;return reactExports.useImperativeHandle(y,function(){return n}),reactExports.createElement(FormikProvider,{value:n},r?reactExports.createElement(r,n):s?s(n):i?isFunction(i)?i(n):isEmptyChildren(i)?null:reactExports.Children.only(i):null)}function warnAboutMissingIdentifier(t){var n=t.htmlContent,r=t.documentationAnchorLink,i=t.handlerName;console.warn("Warning: Formik called `"+i+"`, but you forgot to pass an `id` or `name` attribute to your input:\n    "+n+`
    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#`+r+`
  `)}function yupToFormErrors(t){var n={};if(t.inner){if(t.inner.length===0)return setIn(n,t.path,t.message);for(var s=t.inner,r=Array.isArray(s),i=0,s=r?s:s[Symbol.iterator]();;){var y;if(r){if(i>=s.length)break;y=s[i++]}else{if(i=s.next(),i.done)break;y=i.value}var S=y;getIn(n,S.path)||(n=setIn(n,S.path,S.message))}}return n}function validateYupSchema(t,n,r,i){r===void 0&&(r=!1);var s=prepareDataForValidation(t);return n[r?"validateSync":"validate"](s,{abortEarly:!1,context:i||s})}function prepareDataForValidation(t){var n=Array.isArray(t)?[]:{};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=String(r);Array.isArray(t[i])===!0?n[i]=t[i].map(function(s){return Array.isArray(s)===!0||isPlainObject(s)?prepareDataForValidation(s):s!==""?s:void 0}):isPlainObject(t[i])?n[i]=prepareDataForValidation(t[i]):n[i]=t[i]!==""?t[i]:void 0}return n}function arrayMerge(t,n,r){var i=t.slice();return n.forEach(function(y,S){if(typeof i[S]>"u"){var J=r.clone!==!1,T=J&&r.isMergeableObject(y);i[S]=T?deepmerge_1(Array.isArray(y)?[]:{},y,r):y}else r.isMergeableObject(y)?i[S]=deepmerge_1(t[S],y,r):t.indexOf(y)===-1&&i.push(y)}),i}function getSelectedValues(t){return Array.from(t).filter(function(n){return n.selected}).map(function(n){return n.value})}function getValueForCheckbox(t,n,r){if(typeof t=="boolean")return!!n;var i=[],s=!1,y=-1;if(Array.isArray(t))i=t,y=t.indexOf(r),s=y>=0;else if(!r||r=="true"||r=="false")return!!n;return n&&r&&!s?i.concat(r):s?i.slice(0,y).concat(i.slice(y+1)):i}var useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useEventCallback(t){var n=reactExports.useRef(t);return useIsomorphicLayoutEffect(function(){n.current=t}),reactExports.useCallback(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n.current.apply(void 0,i)},[])}function Field(t){var n=t.validate,r=t.name,i=t.render,s=t.children,y=t.as,S=t.component,J=t.className,T=_objectWithoutPropertiesLoose(t,["validate","name","render","children","as","component","className"]),E=useFormikContext(),v=_objectWithoutPropertiesLoose(E,["validate","validationSchema"]),B=v.registerField,R=v.unregisterField;reactExports.useEffect(function(){return B(r,{validate:n}),function(){R(r)}},[B,R,r,n]);var C=v.getFieldProps(_extends({name:r},T)),w=v.getFieldMeta(r),x={field:C,form:v};if(i)return i(_extends({},x,{meta:w}));if(isFunction(s))return s(_extends({},x,{meta:w}));if(S){if(typeof S=="string"){var m=T.innerRef,_=_objectWithoutPropertiesLoose(T,["innerRef"]);return reactExports.createElement(S,_extends({ref:m},C,_,{className:J}),s)}return reactExports.createElement(S,_extends({field:C,form:v},T,{className:J}),s)}var D=y||"input";if(typeof D=="string"){var O=T.innerRef,k=_objectWithoutPropertiesLoose(T,["innerRef"]);return reactExports.createElement(D,_extends({ref:O},C,k,{className:J}),s)}return reactExports.createElement(D,_extends({},C,T,{className:J}),s)}var Form=reactExports.forwardRef(function(t,n){var r=t.action,i=_objectWithoutPropertiesLoose(t,["action"]),s=r??"#",y=useFormikContext(),S=y.handleReset,J=y.handleSubmit;return reactExports.createElement("form",_extends({onSubmit:J,ref:n,onReset:S,action:s},i))});Form.displayName="Form";const FormikTextInput=({field:t,form:{touched:n,errors:r},...i})=>e.createElement(TextInput,{...i,...t,error:n[t.name]&&r[t.name]});FormikTextInput.__docgenInfo={description:"",methods:[],displayName:"FormikTextInput"};const PasswordModal=({open:t,onClose:n,passwordPromptText:r,passwordIncorrectText:i,passwordConfirmButtonText:s,passwordCancelButtonText:y,passwordPlaceholderText:S,passwordQueue:J})=>{var B;const T=Ze(),[E,v]=reactExports.useState((B=J.currentItem)==null?void 0:B.filename);return reactExports.useEffect(()=>{var R;v(((R=J.currentItem)==null?void 0:R.filename)??E)},[J.currentItem]),e.createElement(Modal,{open:t,onClose:n,size:"xs",p:"xl",showCloseButton:!1,closeOnOverlayClick:!1,container:document.body},e.createElement(Box,{textAlign:"center"},e.createElement(Icon,{icon:"lock-brand",mb:"xs",size:40}),e.createElement(Paragraph,{bold:!0,size:"md",mb:"s"},r," [",E,"]")),e.createElement(Formik,{initialValues:{password:""},validate:({password:R})=>{if(!R)return{password:r}},onSubmit:({password:R},C)=>{var w,x;J.setAttr({password:R}),(x=(w=J.currentItem)==null?void 0:w.callback)==null||x.call(w,R),C.resetForm()}},R=>{var C;return e.createElement(Form,{onSubmit:R.handleSubmit,onInput:()=>J.setAttr({incorrect:!1})},e.createElement(Field,{component:FormikTextInput,name:"password",type:"password",placeholder:S,autoFocus:!0}),((C=J.currentItem)==null?void 0:C.incorrect)&&e.createElement(Notice,{colorTheme:"error",mt:"xxs"},i),e.createElement(Flex,{gap:T.tokens.ref.spacing["2xs"],justifyContent:"center",mt:"s"},e.createElement(Button,{type:"submit"},s),e.createElement(Button,{onClick:n,secondary:!0,colorTheme:"neutral"},y)))}))},PasswordModal$1=PasswordModal;PasswordModal.__docgenInfo={description:"",methods:[],displayName:"PasswordModal",props:{passwordPromptText:{required:!1,tsType:{name:"string"},description:"Prompt text for a password"},passwordIncorrectText:{required:!1,tsType:{name:"string"},description:"Prompt text when an incorrect password is entered"},passwordConfirmButtonText:{required:!1,tsType:{name:"string"},description:"Button text to confirm password"},passwordCancelButtonText:{required:!1,tsType:{name:"string"},description:"Button text to close password modal"},passwordPlaceholderText:{required:!1,tsType:{name:"string"},description:""},passwordQueue:{required:!0,tsType:{name:"PasswordQueue"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const getDashedBorder=(t,n,r)=>{let i=n?t.tokens.color.border.error.primary:r?t.tokens.color.border.primaryInteraction:t.tokens.color.border.primary;return i=i.slice(1),`url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='5' ry='5' stroke='%23${i}' stroke-width='2' stroke-dasharray='8%2c8' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e");`},Remove=styled.div`
	position: absolute;
	top: 3px;
	right: 9px;
	width: 20px;
	height: 20px;
	color: ${({theme:t})=>t.tokens.color.text.error.primary};
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	&:hover {
		filter: brightness(0.9);
	}
`,PreviewFilesWrapper=styled.div`
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
	justify-items: center;
	grid-gap: 0 12px;
`,RelativeWrap=styled.div`
	position: relative;
	border: 1px solid
		${({theme:t})=>t.tokens.color.border.secondary};
	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.md};
	margin-bottom: 12px;
	width: 100%;
	max-width: 160px;

	&::before {
		content: '';
		display: block;
		padding-top: 100%;
	}
`,Wrapper=styled.div`
	max-width: 600px;
	width: 100%;
`,StyledUpload=styled.div`
	padding: ${({theme:t})=>t.tokens.ref.spacing.lg};
	text-align: center;
	width: 100%;
	outline: none;
	box-sizing: border-box;
	transition: background-image 0.3s;

	background-image: ${({theme:t,error:n,isDragActive:r})=>getDashedBorder(t,n,r)};
	background-size: 100% calc(100% - 1px);
	background-repeat: no-repeat;

	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.md};

	button {
		margin: 0 auto;
	}
`,Label=styled.div`
	margin-bottom: 1rem;
`,LabelDesktop=styled.div`
	@media (hover: none) {
		display: none;
	}
`,LabelTouchDevice=styled.div`
	@media (hover: hover) {
		display: none;
	}
`,UploadIcon=styled.img`
	margin-bottom: 1rem;
`,usePasswordQueue=()=>{const[t,n]=reactExports.useState([]),r=T=>{n(E=>[...E,T])},i=T=>{n(E=>[{...E[0],...T},...E.slice(1)])},s=t.length>0?t[0]:null;return{add:r,editCurrentItem:i,currentItem:s,setAttr:T=>{n([{...t[0],...T},...t.slice(1)])},remove:()=>n(t.slice(1)),removeAll:()=>n([])}},FileUpload=({multiple:t=!0,additive:n=!1,testId:r="FileUpload",files:i,setFiles:s,label:y,labelTouchDevice:S,dragInstructions:J,onFileDrop:T,acceptedFilePattern:E,uploadButtonText:v,uploadButtonTextTouchDevice:B,onFileRemove:R,error:C,className:w,fileValidation:x,withIcon:m,onPassword:_,passwordPromptText:D="Enter the password to open this PDF file.",passwordIncorrectText:O="Invalid password. Please try again.",passwordConfirmButtonText:k="Confirm",passwordCancelButtonText:u="Cancel",passwordPlaceholderText:p="Password",unsupportedFileFormatErrorMessage:I="Unsupported file format. Supported formats: "})=>{const[A,h]=reactExports.useState([]),j=usePasswordQueue(),b=E??{"image/*":[".png",".jpg",".jpeg",".gif"],"application/pdf":[".pdf"]},V=reactExports.useCallback(async gt=>{const xt=x?[]:gt;if(x){const _t=[];await Promise.all(gt.map(async L=>{const o=await x(L);o?_t.push(`${L.name}: ${o}`):xt.push(L)})),h(_t)}s(xt)},[s,x]);reactExports.useEffect(()=>()=>{i.forEach(gt=>URL.revokeObjectURL(gt.preview))},[]);const X=reactExports.useCallback(gt=>{A.includes(I)&&h(_t=>_t.filter(L=>L!==I));const xt=gt.map(_t=>Object.assign(_t,{preview:URL.createObjectURL(_t)}));typeof T<"u"&&T(xt),V(n?[...i,...xt].reduce((_t,L)=>(_t.some(o=>o.name===L.name)||_t.push(L),_t),[]):xt)},[i,n,T,V,A,I]),P=reactExports.useCallback(gt=>{const xt=Object.values(b).flat().join(", "),_t=`${I} ${xt}.`;gt.map(L=>{L.errors.map(o=>{o.code==="file-invalid-type"&&h(d=>d.includes(_t)?d:[...d,_t])})})},[I]),{getRootProps:Z,getInputProps:ot,isDragActive:ct,open:Y}=useDropzone({accept:b,onDrop:X,onDropRejected:P,noClick:!0,multiple:t}),dt=gt=>{URL.revokeObjectURL(gt.preview),V(i.filter(xt=>xt.preview!==gt.preview)),typeof R<"u"&&R(gt)};return e.createElement(Wrapper,{className:w,"data-testid":r},e.createElement(PasswordModal$1,{open:!!j.currentItem,onClose:()=>{V([]),j.removeAll()},passwordPromptText:D,passwordIncorrectText:O,passwordConfirmButtonText:k,passwordCancelButtonText:u,passwordPlaceholderText:p,passwordQueue:j}),e.createElement(StyledUpload,{...Z(),isDragActive:ct,error:C||A.length>0},e.createElement("input",{...ot()}),e.createElement(PreviewFilesWrapper,null,i.map(gt=>e.createElement(RelativeWrap,{key:gt.name},e.createElement(FilePreview$1,{file:gt,setFiles:V,onPassword:_,passwordQueue:j}),e.createElement(Remove,{onClick:()=>dt(gt)},e.createElement(Icon,{icon:"trash-error",size:"s"}))))),m&&e.createElement(UploadIcon,{src:uploadIcon}),ct?e.createElement(Label,null,J??"Drop the files here ..."):e.createElement(e.Fragment,null,e.createElement(LabelDesktop,null,e.createElement(Label,null,y??"Drag 'n' drop some files here, or ")),S&&e.createElement(Label,null,e.createElement(LabelTouchDevice,null,S))),e.createElement(Button,{name:"uploadButton",type:"button",onClick:Y,size:"sm",icon:"paper",colorTheme:"brand",secondary:!0},e.createElement(LabelDesktop,null,v??"Select files"),e.createElement(LabelTouchDevice,null,B??"Select files"))),typeof C=="string"&&C&&e.createElement(FormControlWarningError,{error:C}),A.length>0&&A.map((gt,xt)=>e.createElement(FormControlWarningError,{error:gt,key:xt})))};FileUpload.__docgenInfo={description:"",methods:[],displayName:"FileUpload",props:{testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'FileUpload'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},setFiles:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileWithPreview[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},name:"files"}],return:{name:"void"}}},description:""},passwordPromptText:{required:!1,tsType:{name:"string"},description:"Prompt text for a password",defaultValue:{value:"'Enter the password to open this PDF file.'",computed:!1}},passwordIncorrectText:{required:!1,tsType:{name:"string"},description:"Prompt text when an incorrect password is entered",defaultValue:{value:"'Invalid password. Please try again.'",computed:!1}},passwordConfirmButtonText:{required:!1,tsType:{name:"string"},description:"Button text to confirm password",defaultValue:{value:"'Confirm'",computed:!1}},passwordCancelButtonText:{required:!1,tsType:{name:"string"},description:"Button text to close password modal",defaultValue:{value:"'Cancel'",computed:!1}},passwordPlaceholderText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Password'",computed:!1}},files:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelTouchDevice:{required:!1,tsType:{name:"string"},description:""},dragInstructions:{required:!1,tsType:{name:"string"},description:""},onFileDrop:{required:!1,tsType:{name:"signature",type:"function",raw:"(newFiles: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"newFiles"}],return:{name:"void"}}},description:""},acceptedFilePattern:{required:!1,tsType:{name:"Accept"},description:""},uploadButtonText:{required:!1,tsType:{name:"string"},description:""},uploadButtonTextTouchDevice:{required:!1,tsType:{name:"string"},description:""},onFileRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"Allows multiple files in the input at once when true",defaultValue:{value:"true",computed:!1}},additive:{required:!1,tsType:{name:"boolean"},description:"Adds files to already uploaded files when true; otherwise, replaces files on drop",defaultValue:{value:"false",computed:!1}},maxSizeBytes:{required:!1,tsType:{name:"number"},description:""},maxFiles:{required:!1,tsType:{name:"number"},description:""},error:{required:!1,tsType:{name:"union",raw:"string | boolean",elements:[{name:"string"},{name:"boolean"}]},description:""},fileValidation:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => Promise<string | null>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"Promise",elements:[{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}],raw:"Promise<string | null>"}}},description:""},withIcon:{required:!1,tsType:{name:"boolean"},description:""},unsupportedFileFormatErrorMessage:{required:!1,tsType:{name:"string"},description:"Error message displayed when a dropped file is rejected due to its format not matching the acceptedFilePattern. After ':' it automatically appends supported extensions.",defaultValue:{value:"'Unsupported file format. Supported formats: '",computed:!1}}}};export{FileUpload as F,Formik as a};
