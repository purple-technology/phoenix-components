var ii=Object.defineProperty;var ri=(t,n,r)=>n in t?ii(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var re=(t,n,r)=>(ri(t,typeof n!="symbol"?n+"":n,r),r),Be=(t,n,r)=>{if(!n.has(t))throw TypeError("Cannot "+r)};var a=(t,n,r)=>(Be(t,n,"read from private field"),r?r.call(t):n.get(t)),H=(t,n,r)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,r)},ct=(t,n,r,i)=>(Be(t,n,"write to private field"),i?i.call(t,r):n.set(t,r),r);var be=(t,n,r,i)=>({set _(s){ct(t,n,s,r)},get _(){return a(t,n,i)}}),et=(t,n,r)=>(Be(t,n,"access private method"),r);import{r as reactExports,e,i as getAugmentedNamespace,g as getDefaultExportFromCjs,j as jsxRuntimeExports,d as dt,n as nt}from"./iframe-bef07166.js";import{P as PropTypes,c as clsx}from"./clsx-3f4d3d07.js";import{B as Button}from"./index-66c357df.js";import{F as FormControlWarningError}from"./index-9a14469c.js";import{I as Icon}from"./index-3f76cd62.js";import{F as Flex}from"./index-007cde26.js";import{T as Text}from"./index-4ddb66de.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import{B as Box}from"./index-643a9259.js";import{M as Modal}from"./index-549d7226.js";import{N as Notice}from"./index-76942c0a.js";import{P as Paragraph}from"./index-61567d96.js";import{T as TextInput}from"./index-2b2adb63.js";function _mergeNamespaces(t,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const y=Object.getOwnPropertyDescriptor(i,s);y&&Object.defineProperty(t,s,y.get?y:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function __awaiter$1(t,n,r,i){function s(y){return y instanceof r?y:new r(function(S){S(y)})}return new(r||(r=Promise))(function(y,S){function J(v){try{E(i.next(v))}catch(B){S(B)}}function T(v){try{E(i.throw(v))}catch(B){S(B)}}function E(v){v.done?y(v.value):s(v.value).then(J,T)}E((i=i.apply(t,n||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(t,n,r){const i=withMimeType(t),{webkitRelativePath:s}=t,y=typeof n=="string"?n:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof i.path!="string"&&setObjProp(i,"path",y),r!==void 0&&Object.defineProperty(i,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),setObjProp(i,"relativePath",y),i}function withMimeType(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const i=n.split(".").pop().toLowerCase(),s=COMMON_MIME_TYPES.get(i);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function setObjProp(t,n,r){Object.defineProperty(t,n,{value:r,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(t){return __awaiter$1(this,void 0,void 0,function*(){return isObject$2(t)&&isDataTransfer(t.dataTransfer)?getDataTransferFiles(t.dataTransfer,t.type):isChangeEvt(t)?getInputFiles(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?getFsHandleFiles(t):[]})}function isDataTransfer(t){return isObject$2(t)}function isChangeEvt(t){return isObject$2(t)&&isObject$2(t.target)}function isObject$2(t){return typeof t=="object"&&t!==null}function getInputFiles(t){return fromList(t.target.files).map(n=>toFileWithPath(n))}function getFsHandleFiles(t){return __awaiter$1(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>toFileWithPath(r))})}function getDataTransferFiles(t,n){return __awaiter$1(this,void 0,void 0,function*(){if(t.items){const r=fromList(t.items).filter(s=>s.kind==="file");if(n!=="drop")return r;const i=yield Promise.all(r.map(toFilePromises));return noIgnoredFiles(flatten(i))}return noIgnoredFiles(fromList(t.files).map(r=>toFileWithPath(r)))})}function noIgnoredFiles(t){return t.filter(n=>FILES_TO_IGNORE.indexOf(n.name)===-1)}function fromList(t){if(t===null)return[];const n=[];for(let r=0;r<t.length;r++){const i=t[r];n.push(i)}return n}function toFilePromises(t){if(typeof t.webkitGetAsEntry!="function")return fromDataTransferItem(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?fromDirEntry(n):fromDataTransferItem(t,n)}function flatten(t){return t.reduce((n,r)=>[...n,...Array.isArray(r)?flatten(r):[r]],[])}function fromDataTransferItem(t,n){return __awaiter$1(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const y=yield t.getAsFileSystemHandle();if(y===null)throw new Error(`${t} is not a File`);if(y!==void 0){const S=yield y.getFile();return S.handle=y,toFileWithPath(S)}}const i=t.getAsFile();if(!i)throw new Error(`${t} is not a File`);return toFileWithPath(i,(r=n==null?void 0:n.fullPath)!==null&&r!==void 0?r:void 0)})}function fromEntry(t){return __awaiter$1(this,void 0,void 0,function*(){return t.isDirectory?fromDirEntry(t):fromFileEntry(t)})}function fromDirEntry(t){const n=t.createReader();return new Promise((r,i)=>{const s=[];function y(){n.readEntries(S=>__awaiter$1(this,void 0,void 0,function*(){if(S.length){const J=Promise.all(S.map(fromEntry));s.push(J),y()}else try{const J=yield Promise.all(s);r(J)}catch(J){i(J)}}),S=>{i(S)})}y()})}function fromFileEntry(t){return __awaiter$1(this,void 0,void 0,function*(){return new Promise((n,r)=>{t.file(i=>{const s=toFileWithPath(i,t.fullPath);n(s)},i=>{r(i)})})})}var _default=function(t,n){if(t&&n){var r=Array.isArray(n)?n:n.split(",");if(r.length===0)return!0;var i=t.name||"",s=(t.type||"").toLowerCase(),y=s.replace(/\/.*$/,"");return r.some(function(S){var J=S.trim().toLowerCase();return J.charAt(0)==="."?i.toLowerCase().endsWith(J):J.endsWith("/*")?y===J.replace(/\/.*$/,""):s===J})}return!0};function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function ownKeys$1(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function _objectSpread$1(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(i){_defineProperty$1(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function _defineProperty$1(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _slicedToArray$1(t,n){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,n)||_unsupportedIterableToArray$1(t,n)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,n){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray$1(t,n)}}function _arrayLikeToArray$1(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function _iterableToArrayLimit$1(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],s=!0,y=!1,S,J;try{for(r=r.call(t);!(s=(S=r.next()).done)&&(i.push(S.value),!(n&&i.length===n));s=!0);}catch(T){y=!0,J=T}finally{try{!s&&r.return!=null&&r.return()}finally{if(y)throw J}}return i}}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=n.split(","),i=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(i)}},getTooLargeRejectionErr=function(n){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},getTooSmallRejectionErr=function(n){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(t,n){var r=t.type==="application/x-moz-file"||accepts(t,n);return[r,r?null:getInvalidTypeRejectionErr(n)]}function fileMatchSize(t,n,r){if(isDefined$1(t.size))if(isDefined$1(n)&&isDefined$1(r)){if(t.size>r)return[!1,getTooLargeRejectionErr(r)];if(t.size<n)return[!1,getTooSmallRejectionErr(n)]}else{if(isDefined$1(n)&&t.size<n)return[!1,getTooSmallRejectionErr(n)];if(isDefined$1(r)&&t.size>r)return[!1,getTooLargeRejectionErr(r)]}return[!0,null]}function isDefined$1(t){return t!=null}function allFilesAccepted(t){var n=t.files,r=t.accept,i=t.minSize,s=t.maxSize,y=t.multiple,S=t.maxFiles,J=t.validator;return!y&&n.length>1||y&&S>=1&&n.length>S?!1:n.every(function(T){var E=fileAccepted(T,r),v=_slicedToArray$1(E,1),B=v[0],F=fileMatchSize(T,i,s),C=_slicedToArray$1(F,1),w=C[0],_=J?J(T):null;return B&&w&&!_})}function isPropagationStopped(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function isEvtWithFiles(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function onDocumentDragOver(t){t.preventDefault()}function isIe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function isEdge(t){return t.indexOf("Edge/")!==-1}function isIeOrEdge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(t)||isEdge(t)}function composeEventHandlers(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){for(var s=arguments.length,y=new Array(s>1?s-1:0),S=1;S<s;S++)y[S-1]=arguments[S];return n.some(function(J){return!isPropagationStopped(i)&&J&&J.apply(void 0,[i].concat(y)),isPropagationStopped(i)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(t){if(isDefined$1(t)){var n=Object.entries(t).filter(function(r){var i=_slicedToArray$1(r,2),s=i[0],y=i[1],S=!0;return isMIMEType(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),S=!1),(!Array.isArray(y)||!y.every(isExt))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),S=!1),S}).reduce(function(r,i){var s=_slicedToArray$1(i,2),y=s[0],S=s[1];return _objectSpread$1(_objectSpread$1({},r),{},_defineProperty$1({},y,S))},{});return[{description:"Files",accept:n}]}return t}function acceptPropAsAcceptAttr(t){if(isDefined$1(t))return Object.entries(t).reduce(function(n,r){var i=_slicedToArray$1(r,2),s=i[0],y=i[1];return[].concat(_toConsumableArray$1(n),[s],_toConsumableArray$1(y))},[]).filter(function(n){return isMIMEType(n)||isExt(n)}).join(",")}function isAbort(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function isSecurityError(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function isMIMEType(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function isExt(t){return/^.*\.[\w]+$/.test(t)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,n){return _arrayWithHoles(t)||_iterableToArrayLimit(t,n)||_unsupportedIterableToArray(t,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,n){if(t){if(typeof t=="string")return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}}function _arrayLikeToArray(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function _iterableToArrayLimit(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],s=!0,y=!1,S,J;try{for(r=r.call(t);!(s=(S=r.next()).done)&&(i.push(S.value),!(n&&i.length===n));s=!0);}catch(T){y=!0,J=T}finally{try{!s&&r.return!=null&&r.return()}finally{if(y)throw J}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(i){_defineProperty(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _objectWithoutProperties(t,n){if(t==null)return{};var r=_objectWithoutPropertiesLoose$1(t,n),i,s;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(t);for(s=0;s<y.length;s++)i=y[s],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function _objectWithoutPropertiesLoose$1(t,n){if(t==null)return{};var r={},i=Object.keys(t),s,y;for(y=0;y<i.length;y++)s=i[y],!(n.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Dropzone=reactExports.forwardRef(function(t,n){var r=t.children,i=_objectWithoutProperties(t,_excluded),s=useDropzone(i),y=s.open,S=_objectWithoutProperties(s,_excluded2);return reactExports.useImperativeHandle(n,function(){return{open:y}},[y]),e.createElement(reactExports.Fragment,null,r(_objectSpread(_objectSpread({},S),{},{open:y})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=_objectSpread(_objectSpread({},defaultProps),t),r=n.accept,i=n.disabled,s=n.getFilesFromEvent,y=n.maxSize,S=n.minSize,J=n.multiple,T=n.maxFiles,E=n.onDragEnter,v=n.onDragLeave,B=n.onDragOver,F=n.onDrop,C=n.onDropAccepted,w=n.onDropRejected,_=n.onFileDialogCancel,m=n.onFileDialogOpen,x=n.useFsAccessApi,D=n.autoFocus,O=n.preventDropOnDocument,k=n.noClick,u=n.noKeyboard,p=n.noDrag,I=n.noDragEventsBubbling,A=n.onError,h=n.validator,j=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(r)},[r]),b=reactExports.useMemo(function(){return pickerOptionsFromAccept(r)},[r]),V=reactExports.useMemo(function(){return typeof m=="function"?m:noop},[m]),X=reactExports.useMemo(function(){return typeof _=="function"?_:noop},[_]),P=reactExports.useRef(null),Q=reactExports.useRef(null),lt=reactExports.useReducer(reducer$1,initialState),ut=_slicedToArray(lt,2),Y=ut[0],ht=ut[1],bt=Y.isFocused,Et=Y.isFileDialogActive,At=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&x&&canUseFileSystemAccessAPI()),L=function(){!At.current&&Et&&setTimeout(function(){if(Q.current){var K=Q.current.files;K.length||(ht({type:"closeDialog"}),X())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[Q,Et,X,At]);var o=reactExports.useRef([]),d=function(K){P.current&&P.current.contains(K.target)||(K.preventDefault(),o.current=[])};reactExports.useEffect(function(){return O&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",d,!1)),function(){O&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",d))}},[P,O]),reactExports.useEffect(function(){return!i&&D&&P.current&&P.current.focus(),function(){}},[P,D,i]);var c=reactExports.useCallback(function(N){A?A(N):console.error(N)},[A]),f=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),Tt(N),o.current=[].concat(_toConsumableArray(o.current),[N.target]),isEvtWithFiles(N)&&Promise.resolve(s(N)).then(function(K){if(!(isPropagationStopped(N)&&!I)){var mt=K.length,xt=mt>0&&allFilesAccepted({files:K,accept:j,minSize:S,maxSize:y,multiple:J,maxFiles:T,validator:h}),Dt=mt>0&&!xt;ht({isDragAccept:xt,isDragReject:Dt,isDragActive:!0,type:"setDraggedFiles"}),E&&E(N)}}).catch(function(K){return c(K)})},[s,E,c,I,j,S,y,J,T,h]),g=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),Tt(N);var K=isEvtWithFiles(N);if(K&&N.dataTransfer)try{N.dataTransfer.dropEffect="copy"}catch{}return K&&B&&B(N),!1},[B,I]),M=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),Tt(N);var K=o.current.filter(function(xt){return P.current&&P.current.contains(xt)}),mt=K.indexOf(N.target);mt!==-1&&K.splice(mt,1),o.current=K,!(K.length>0)&&(ht({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(N)&&v&&v(N))},[P,v,I]),$=reactExports.useCallback(function(N,K){var mt=[],xt=[];N.forEach(function(Dt){var $t=fileAccepted(Dt,j),zt=_slicedToArray($t,2),Vt=zt[0],qt=zt[1],Gt=fileMatchSize(Dt,S,y),Kt=_slicedToArray(Gt,2),yt=Kt[0],st=Kt[1],tt=h?h(Dt):null;if(Vt&&yt&&!tt)mt.push(Dt);else{var St=[qt,st];tt&&(St=St.concat(tt)),xt.push({file:Dt,errors:St.filter(function(Ct){return Ct})})}}),(!J&&mt.length>1||J&&T>=1&&mt.length>T)&&(mt.forEach(function(Dt){xt.push({file:Dt,errors:[TOO_MANY_FILES_REJECTION]})}),mt.splice(0)),ht({acceptedFiles:mt,fileRejections:xt,isDragReject:xt.length>0,type:"setFiles"}),F&&F(mt,xt,K),xt.length>0&&w&&w(xt,K),mt.length>0&&C&&C(mt,K)},[ht,J,j,S,y,T,F,C,w,h]),q=reactExports.useCallback(function(N){N.preventDefault(),N.persist(),Tt(N),o.current=[],isEvtWithFiles(N)&&Promise.resolve(s(N)).then(function(K){isPropagationStopped(N)&&!I||$(K,N)}).catch(function(K){return c(K)}),ht({type:"reset"})},[s,$,c,I]),at=reactExports.useCallback(function(){if(At.current){ht({type:"openDialog"}),V();var N={multiple:J,types:b};window.showOpenFilePicker(N).then(function(K){return s(K)}).then(function(K){$(K,null),ht({type:"closeDialog"})}).catch(function(K){isAbort(K)?(X(K),ht({type:"closeDialog"})):isSecurityError(K)?(At.current=!1,Q.current?(Q.current.value=null,Q.current.click()):c(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):c(K)});return}Q.current&&(ht({type:"openDialog"}),V(),Q.current.value=null,Q.current.click())},[ht,V,X,x,$,c,b,J]),it=reactExports.useCallback(function(N){!P.current||!P.current.isEqualNode(N.target)||(N.key===" "||N.key==="Enter"||N.keyCode===32||N.keyCode===13)&&(N.preventDefault(),at())},[P,at]),pt=reactExports.useCallback(function(){ht({type:"focus"})},[]),vt=reactExports.useCallback(function(){ht({type:"blur"})},[]),_t=reactExports.useCallback(function(){k||(isIeOrEdge()?setTimeout(at,0):at())},[k,at]),gt=function(K){return i?null:K},Rt=function(K){return u?null:gt(K)},Lt=function(K){return p?null:gt(K)},Tt=function(K){I&&K.stopPropagation()},Ot=reactExports.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=N.refKey,mt=K===void 0?"ref":K,xt=N.role,Dt=N.onKeyDown,$t=N.onFocus,zt=N.onBlur,Vt=N.onClick,qt=N.onDragEnter,Gt=N.onDragOver,Kt=N.onDragLeave,yt=N.onDrop,st=_objectWithoutProperties(N,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Rt(composeEventHandlers(Dt,it)),onFocus:Rt(composeEventHandlers($t,pt)),onBlur:Rt(composeEventHandlers(zt,vt)),onClick:gt(composeEventHandlers(Vt,_t)),onDragEnter:Lt(composeEventHandlers(qt,f)),onDragOver:Lt(composeEventHandlers(Gt,g)),onDragLeave:Lt(composeEventHandlers(Kt,M)),onDrop:Lt(composeEventHandlers(yt,q)),role:typeof xt=="string"&&xt!==""?xt:"presentation"},mt,P),!i&&!u?{tabIndex:0}:{}),st)}},[P,it,pt,vt,_t,f,g,M,q,u,p,i]),U=reactExports.useCallback(function(N){N.stopPropagation()},[]),G=reactExports.useMemo(function(){return function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=N.refKey,mt=K===void 0?"ref":K,xt=N.onChange,Dt=N.onClick,$t=_objectWithoutProperties(N,_excluded4),zt=_defineProperty({accept:j,multiple:J,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:gt(composeEventHandlers(xt,q)),onClick:gt(composeEventHandlers(Dt,U)),tabIndex:-1},mt,Q);return _objectSpread(_objectSpread({},zt),$t)}},[Q,r,J,q,i]);return _objectSpread(_objectSpread({},Y),{},{isFocused:bt&&!i,getRootProps:Ot,getInputProps:G,rootRef:P,inputRef:Q,open:gt(at)})}function reducer$1(t,n){switch(n.type){case"focus":return _objectSpread(_objectSpread({},t),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},t),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return _objectSpread({},initialState);default:return t}}function noop(){}const uploadIcon=""+new URL("file-upload-421da4b6.svg",import.meta.url).href;function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(n,r){module.exports=n.pdfjsLib=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,n)=>{var Kt;Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PromiseCapability=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationReplyType=n.AnnotationPrefix=n.AnnotationMode=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=ht,n.bytesToString=q,n.createValidAbsoluteUrl=Et,n.getModificationDate=xt,n.getUuid=qt,n.getVerbosityLevel=Q,n.info=lt,n.isArrayBuffer=K,n.isArrayEqual=mt,n.isNodeJS=void 0,n.normalizeUnicode=Vt,n.objectFromMap=vt,n.objectSize=pt,n.setVerbosityLevel=P,n.shadow=At,n.string32=it,n.stringToBytes=at,n.stringToPDFString=U,n.stringToUTF8String=G,n.unreachable=Y,n.utf8StringToString=N,n.warn=ut;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r;const i=[1,0,0,1,0,0];n.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=s;const y=1e7;n.MAX_IMAGE_SIZE_TO_CACHE=y;const S=1.35;n.LINE_FACTOR=S;const J=.35;n.LINE_DESCENT_FACTOR=J;const T=J/S;n.BASELINE_FACTOR=T;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=E;const v={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=v;const B="pdfjs_internal_editor_";n.AnnotationEditorPrefix=B;const F={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};n.AnnotationEditorType=F;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};n.AnnotationEditorParamsType=C;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=w;const _={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=_;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=m;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=x;const D={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=D;const O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=O;const k={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=k;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=u;const p={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=p;const I={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=I;const A={O:"PageOpen",C:"PageClose"};n.PageActionEventType=A;const h={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=h;const j={NONE:0,BINARY:1};n.CMapCompressionType=j;const b={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=b;const V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=V;let X=h.WARNINGS;function P(yt){Number.isInteger(yt)&&(X=yt)}function Q(){return X}function lt(yt){X>=h.INFOS&&console.log(`Info: ${yt}`)}function ut(yt){X>=h.WARNINGS&&console.log(`Warning: ${yt}`)}function Y(yt){throw new Error(yt)}function ht(yt,st){yt||Y(st)}function bt(yt){switch(yt==null?void 0:yt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Et(yt,st=null,tt=null){if(!yt)return null;try{if(tt&&typeof yt=="string"){if(tt.addDefaultProtocol&&yt.startsWith("www.")){const Ct=yt.match(/\./g);(Ct==null?void 0:Ct.length)>=2&&(yt=`http://${yt}`)}if(tt.tryConvertEncoding)try{yt=G(yt)}catch{}}const St=st?new URL(yt,st):new URL(yt);if(bt(St))return St}catch{}return null}function At(yt,st,tt,St=!1){return Object.defineProperty(yt,st,{value:tt,enumerable:!St,configurable:!0,writable:!1}),tt}const L=function(){function st(tt,St){this.constructor===st&&Y("Cannot initialize BaseException."),this.message=tt,this.name=St}return st.prototype=new Error,st.constructor=st,st}();n.BaseException=L;class o extends L{constructor(st,tt){super(st,"PasswordException"),this.code=tt}}n.PasswordException=o;class d extends L{constructor(st,tt){super(st,"UnknownErrorException"),this.details=tt}}n.UnknownErrorException=d;class c extends L{constructor(st){super(st,"InvalidPDFException")}}n.InvalidPDFException=c;class f extends L{constructor(st){super(st,"MissingPDFException")}}n.MissingPDFException=f;class g extends L{constructor(st,tt){super(st,"UnexpectedResponseException"),this.status=tt}}n.UnexpectedResponseException=g;class M extends L{constructor(st){super(st,"FormatError")}}n.FormatError=M;class $ extends L{constructor(st){super(st,"AbortException")}}n.AbortException=$;function q(yt){(typeof yt!="object"||(yt==null?void 0:yt.length)===void 0)&&Y("Invalid argument for bytesToString");const st=yt.length,tt=8192;if(st<tt)return String.fromCharCode.apply(null,yt);const St=[];for(let Ct=0;Ct<st;Ct+=tt){const ie=Math.min(Ct+tt,st),ne=yt.subarray(Ct,ie);St.push(String.fromCharCode.apply(null,ne))}return St.join("")}function at(yt){typeof yt!="string"&&Y("Invalid argument for stringToBytes");const st=yt.length,tt=new Uint8Array(st);for(let St=0;St<st;++St)tt[St]=yt.charCodeAt(St)&255;return tt}function it(yt){return String.fromCharCode(yt>>24&255,yt>>16&255,yt>>8&255,yt&255)}function pt(yt){return Object.keys(yt).length}function vt(yt){const st=Object.create(null);for(const[tt,St]of yt)st[tt]=St;return st}function _t(){const yt=new Uint8Array(4);return yt[0]=1,new Uint32Array(yt.buffer,0,1)[0]===1}function gt(){try{return new Function(""),!0}catch{return!1}}class Rt{static get isLittleEndian(){return At(this,"isLittleEndian",_t())}static get isEvalSupported(){return At(this,"isEvalSupported",gt())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?At(this,"platform",{isWin:!1,isMac:!1}):At(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var st,tt;return At(this,"isCSSRoundSupported",(tt=(st=globalThis.CSS)==null?void 0:st.supports)==null?void 0:tt.call(st,"width: round(1.5px, 1px)"))}}n.FeatureTest=Rt;const Lt=[...Array(256).keys()].map(yt=>yt.toString(16).padStart(2,"0"));class Tt{static makeHexColor(st,tt,St){return`#${Lt[st]}${Lt[tt]}${Lt[St]}`}static scaleMinMax(st,tt){let St;st[0]?(st[0]<0&&(St=tt[0],tt[0]=tt[1],tt[1]=St),tt[0]*=st[0],tt[1]*=st[0],st[3]<0&&(St=tt[2],tt[2]=tt[3],tt[3]=St),tt[2]*=st[3],tt[3]*=st[3]):(St=tt[0],tt[0]=tt[2],tt[2]=St,St=tt[1],tt[1]=tt[3],tt[3]=St,st[1]<0&&(St=tt[2],tt[2]=tt[3],tt[3]=St),tt[2]*=st[1],tt[3]*=st[1],st[2]<0&&(St=tt[0],tt[0]=tt[1],tt[1]=St),tt[0]*=st[2],tt[1]*=st[2]),tt[0]+=st[4],tt[1]+=st[4],tt[2]+=st[5],tt[3]+=st[5]}static transform(st,tt){return[st[0]*tt[0]+st[2]*tt[1],st[1]*tt[0]+st[3]*tt[1],st[0]*tt[2]+st[2]*tt[3],st[1]*tt[2]+st[3]*tt[3],st[0]*tt[4]+st[2]*tt[5]+st[4],st[1]*tt[4]+st[3]*tt[5]+st[5]]}static applyTransform(st,tt){const St=st[0]*tt[0]+st[1]*tt[2]+tt[4],Ct=st[0]*tt[1]+st[1]*tt[3]+tt[5];return[St,Ct]}static applyInverseTransform(st,tt){const St=tt[0]*tt[3]-tt[1]*tt[2],Ct=(st[0]*tt[3]-st[1]*tt[2]+tt[2]*tt[5]-tt[4]*tt[3])/St,ie=(-st[0]*tt[1]+st[1]*tt[0]+tt[4]*tt[1]-tt[5]*tt[0])/St;return[Ct,ie]}static getAxialAlignedBoundingBox(st,tt){const St=this.applyTransform(st,tt),Ct=this.applyTransform(st.slice(2,4),tt),ie=this.applyTransform([st[0],st[3]],tt),ne=this.applyTransform([st[2],st[1]],tt);return[Math.min(St[0],Ct[0],ie[0],ne[0]),Math.min(St[1],Ct[1],ie[1],ne[1]),Math.max(St[0],Ct[0],ie[0],ne[0]),Math.max(St[1],Ct[1],ie[1],ne[1])]}static inverseTransform(st){const tt=st[0]*st[3]-st[1]*st[2];return[st[3]/tt,-st[1]/tt,-st[2]/tt,st[0]/tt,(st[2]*st[5]-st[4]*st[3])/tt,(st[4]*st[1]-st[5]*st[0])/tt]}static singularValueDecompose2dScale(st){const tt=[st[0],st[2],st[1],st[3]],St=st[0]*tt[0]+st[1]*tt[2],Ct=st[0]*tt[1]+st[1]*tt[3],ie=st[2]*tt[0]+st[3]*tt[2],ne=st[2]*tt[1]+st[3]*tt[3],ot=(St+ne)/2,kt=Math.sqrt((St+ne)**2-4*(St*ne-ie*Ct))/2,Ut=ot+kt||1,Ft=ot-kt||1;return[Math.sqrt(Ut),Math.sqrt(Ft)]}static normalizeRect(st){const tt=st.slice(0);return st[0]>st[2]&&(tt[0]=st[2],tt[2]=st[0]),st[1]>st[3]&&(tt[1]=st[3],tt[3]=st[1]),tt}static intersect(st,tt){const St=Math.max(Math.min(st[0],st[2]),Math.min(tt[0],tt[2])),Ct=Math.min(Math.max(st[0],st[2]),Math.max(tt[0],tt[2]));if(St>Ct)return null;const ie=Math.max(Math.min(st[1],st[3]),Math.min(tt[1],tt[3])),ne=Math.min(Math.max(st[1],st[3]),Math.max(tt[1],tt[3]));return ie>ne?null:[St,ie,Ct,ne]}static bezierBoundingBox(st,tt,St,Ct,ie,ne,ot,kt){const Ut=[],Ft=[[],[]];let Wt,Ht,te,Pt,Qt,Bt,z,l;for(let rt=0;rt<2;++rt){if(rt===0?(Ht=6*st-12*St+6*ie,Wt=-3*st+9*St-9*ie+3*ot,te=3*St-3*st):(Ht=6*tt-12*Ct+6*ne,Wt=-3*tt+9*Ct-9*ne+3*kt,te=3*Ct-3*tt),Math.abs(Wt)<1e-12){if(Math.abs(Ht)<1e-12)continue;Pt=-te/Ht,0<Pt&&Pt<1&&Ut.push(Pt);continue}z=Ht*Ht-4*te*Wt,l=Math.sqrt(z),!(z<0)&&(Qt=(-Ht+l)/(2*Wt),0<Qt&&Qt<1&&Ut.push(Qt),Bt=(-Ht-l)/(2*Wt),0<Bt&&Bt<1&&Ut.push(Bt))}let R=Ut.length,W;const Z=R;for(;R--;)Pt=Ut[R],W=1-Pt,Ft[0][R]=W*W*W*st+3*W*W*Pt*St+3*W*Pt*Pt*ie+Pt*Pt*Pt*ot,Ft[1][R]=W*W*W*tt+3*W*W*Pt*Ct+3*W*Pt*Pt*ne+Pt*Pt*Pt*kt;return Ft[0][Z]=st,Ft[1][Z]=tt,Ft[0][Z+1]=ot,Ft[1][Z+1]=kt,Ft[0].length=Ft[1].length=Z+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}n.Util=Tt;const Ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function U(yt){if(yt[0]>=""){let tt;if(yt[0]===""&&yt[1]===""?tt="utf-16be":yt[0]===""&&yt[1]===""?tt="utf-16le":yt[0]===""&&yt[1]===""&&yt[2]===""&&(tt="utf-8"),tt)try{const St=new TextDecoder(tt,{fatal:!0}),Ct=at(yt);return St.decode(Ct)}catch(St){ut(`stringToPDFString: "${St}".`)}}const st=[];for(let tt=0,St=yt.length;tt<St;tt++){const Ct=Ot[yt.charCodeAt(tt)];st.push(Ct?String.fromCharCode(Ct):yt.charAt(tt))}return st.join("")}function G(yt){return decodeURIComponent(escape(yt))}function N(yt){return unescape(encodeURIComponent(yt))}function K(yt){return typeof yt=="object"&&(yt==null?void 0:yt.byteLength)!==void 0}function mt(yt,st){if(yt.length!==st.length)return!1;for(let tt=0,St=yt.length;tt<St;tt++)if(yt[tt]!==st[tt])return!1;return!0}function xt(yt=new Date){return[yt.getUTCFullYear().toString(),(yt.getUTCMonth()+1).toString().padStart(2,"0"),yt.getUTCDate().toString().padStart(2,"0"),yt.getUTCHours().toString().padStart(2,"0"),yt.getUTCMinutes().toString().padStart(2,"0"),yt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){H(this,Kt,!1);this.promise=new Promise((st,tt)=>{this.resolve=St=>{ct(this,Kt,!0),st(St)},this.reject=St=>{ct(this,Kt,!0),tt(St)}})}get settled(){return a(this,Kt)}}Kt=new WeakMap,n.PromiseCapability=Dt;let $t=null,zt=null;function Vt(yt){return $t||($t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zt=new Map([["","t"]])),yt.replaceAll($t,(st,tt,St)=>tt?tt.normalize("NFKC"):zt.get(St))}function qt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const yt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(yt);else for(let st=0;st<32;st++)yt[st]=Math.floor(Math.random()*255);return q(yt)}const Gt="pdfjs_internal_id_";n.AnnotationPrefix=Gt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,r,i,s,pe,S,Te,T,E,v,B,F,C,w,_,m,Ce,D,O,Ue,u,p;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(A){if(typeof A=="string"||A instanceof URL?A={url:A}:(0,_util.isArrayBuffer)(A)&&(A={data:A}),typeof A!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:j}=h,b=A.url?getUrlProp(A.url):null,V=A.data?getDataProp(A.data):null,X=A.httpHeaders||null,P=A.withCredentials===!0,Q=A.password??null,lt=A.range instanceof PDFDataRangeTransport?A.range:null,ut=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Y=A.worker instanceof PDFWorker?A.worker:null;const ht=A.verbosity,bt=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,Et=typeof A.cMapUrl=="string"?A.cMapUrl:null,At=A.cMapPacked!==!1,L=A.CMapReaderFactory||DefaultCMapReaderFactory,o=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,d=A.StandardFontDataFactory||DefaultStandardFontDataFactory,c=A.stopAtErrors!==!0,f=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,g=A.isEvalSupported!==!1,M=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(A.canvasMaxAreaInBytes)?A.canvasMaxAreaInBytes:-1,q=typeof A.disableFontFace=="boolean"?A.disableFontFace:_util.isNodeJS,at=A.fontExtraProperties===!0,it=A.enableXfa===!0,pt=A.ownerDocument||globalThis.document,vt=A.disableRange===!0,_t=A.disableStream===!0,gt=A.disableAutoFetch===!0,Rt=A.pdfBug===!0,Lt=lt?lt.length:A.length??NaN,Tt=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_util.isNodeJS&&!q,Ot=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:L===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&Et&&o&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(o,document.baseURI),U=A.canvasFactory||new DefaultCanvasFactory({ownerDocument:pt}),G=A.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:pt}),N=null;(0,_util.setVerbosityLevel)(ht);const K={canvasFactory:U,filterFactory:G};if(Ot||(K.cMapReaderFactory=new L({baseUrl:Et,isCompressed:At}),K.standardFontDataFactory=new d({baseUrl:o})),!Y){const Dt={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};Y=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),h._worker=Y}const mt={docId:j,apiVersion:"3.11.174",data:V,password:Q,disableAutoFetch:gt,rangeChunkSize:ut,length:Lt,docBaseUrl:bt,enableXfa:it,evaluatorOptions:{maxImageSize:f,disableFontFace:q,ignoreErrors:c,isEvalSupported:g,isOffscreenCanvasSupported:M,canvasMaxAreaInBytes:$,fontExtraProperties:at,useSystemFonts:Tt,cMapUrl:Ot?Et:null,standardFontDataUrl:Ot?o:null}},xt={ignoreErrors:c,isEvalSupported:g,disableFontFace:q,fontExtraProperties:at,enableXfa:it,ownerDocument:pt,disableAutoFetch:gt,pdfBug:Rt,styleElement:N};return Y.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(Y,mt),$t=new Promise(function(zt){let Vt;lt?Vt=new _transport_stream.PDFDataTransportStream({length:Lt,initialData:lt.initialData,progressiveDone:lt.progressiveDone,contentDispositionFilename:lt.contentDispositionFilename,disableRange:vt,disableStream:_t},lt):V||(Vt=(Gt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Gt):(0,_display_utils.isValidFetchUrl)(Gt.url)?new _displayFetch_stream.PDFFetchStream(Gt):new _displayNetwork.PDFNetworkStream(Gt))({url:b,length:Lt,httpHeaders:X,withCredentials:P,rangeChunkSize:ut,disableRange:vt,disableStream:_t})),zt(Vt)});return Promise.all([Dt,$t]).then(function([zt,Vt]){if(h.destroyed)throw new Error("Loading aborted");const qt=new _message_handler.MessageHandler(j,zt,Y.port),Gt=new WorkerTransport(qt,h,Vt,xt,K);h._transport=Gt,qt.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(A,h){if(A.destroyed)throw new Error("Worker was destroyed");const j=await A.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_util.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_util.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A==null?void 0:A.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const n=class n{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${be(n,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,j,b;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(V){throw(b=this._worker)!=null&&b.port&&delete this._worker._pendingDestroy,V}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,H(n,t,0);let PDFDocumentLoadingTask=n;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,j,b=!1,V=null){this.length=h,this.initialData=j,this.progressiveDone=b,this.contentDispositionFilename=V,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,j){for(const b of this._rangeListeners)b(h,j)}onDataProgress(h,j){this._readyCapability.promise.then(()=>{for(const b of this._progressListeners)b(h,j)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,j){this._pdfInfo=h,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(b=>{if(!b)return b;const V=[];for(const X in b)V.push(...b[X]);return V}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,j,b,V=!1){H(this,s);H(this,S);H(this,r,null);H(this,i,!1);this._pageIndex=h,this._pageInfo=j,this._transport=b,this._stats=V?new _display_utils.StatTimer:null,this._pdfBug=V,this.commonObjs=b.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:j=this.rotate,offsetX:b=0,offsetY:V=0,dontFlip:X=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:j,offsetX:b,offsetY:V,dontFlip:X})}getAnnotations({intent:h="display"}={}){const j=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:j,intent:b="display",annotationMode:V=_util.AnnotationMode.ENABLE,transform:X=null,background:P=null,optionalContentConfigPromise:Q=null,annotationCanvasMap:lt=null,pageColors:ut=null,printAnnotationStorage:Y=null}){var d,c;(d=this._stats)==null||d.time("Overall");const ht=this._transport.getRenderingIntent(b,V,Y);ct(this,i,!1),et(this,S,Te).call(this),Q||(Q=this._transport.getOptionalContentConfig());let bt=this._intentStates.get(ht.cacheKey);bt||(bt=Object.create(null),this._intentStates.set(ht.cacheKey,bt)),bt.streamReaderCancelTimeout&&(clearTimeout(bt.streamReaderCancelTimeout),bt.streamReaderCancelTimeout=null);const Et=!!(ht.renderingIntent&_util.RenderingIntentFlag.PRINT);bt.displayReadyCapability||(bt.displayReadyCapability=new _util.PromiseCapability,bt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(ht));const At=f=>{var g,M;bt.renderTasks.delete(L),(this._maybeCleanupAfterRender||Et)&&ct(this,i,!0),et(this,s,pe).call(this,!Et),f?(L.capability.reject(f),this._abortOperatorList({intentState:bt,reason:f instanceof Error?f:new Error(f)})):L.capability.resolve(),(g=this._stats)==null||g.timeEnd("Rendering"),(M=this._stats)==null||M.timeEnd("Overall")},L=new InternalRenderTask({callback:At,params:{canvasContext:h,viewport:j,transform:X,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:lt,operatorList:bt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:ut});(bt.renderTasks||(bt.renderTasks=new Set)).add(L);const o=L.task;return Promise.all([bt.displayReadyCapability.promise,Q]).then(([f,g])=>{var M;if(this.destroyed){At();return}(M=this._stats)==null||M.time("Rendering"),L.initializeGraphics({transparency:f,optionalContentConfig:g}),L.operatorListChanged()}).catch(At),o}getOperatorList({intent:h="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:b=null}={}){var lt;function V(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(Q))}const X=this._transport.getRenderingIntent(h,j,b,!0);let P=this._intentStates.get(X.cacheKey);P||(P=Object.create(null),this._intentStates.set(X.cacheKey,P));let Q;return P.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=V,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||(P.renderTasks=new Set)).add(Q),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(lt=this._stats)==null||lt.time("Page Request"),this._pumpOperatorList(X)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:j===!0},{highWaterMark:100,size(V){return V.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(b=>_xfa_text.XfaText.textContent(b));const j=this.streamTextContent(h);return new Promise(function(b,V){function X(){P.read().then(function({value:lt,done:ut}){if(ut){b(Q);return}Object.assign(Q.styles,lt.styles),Q.items.push(...lt.items),X()},V)}const P=j.getReader(),Q={items:[],styles:Object.create(null)};X()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const b of j.renderTasks)h.push(b.completed),b.cancel();return this.objs.clear(),ct(this,i,!1),et(this,S,Te).call(this),Promise.all(h)}cleanup(h=!1){ct(this,i,!0);const j=et(this,s,pe).call(this,!1);return h&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(h,j){var V,X;const b=this._intentStates.get(j);b&&((V=this._stats)==null||V.timeEnd("Page Request"),(X=b.displayReadyCapability)==null||X.resolve(h))}_renderPageChunk(h,j){for(let b=0,V=h.length;b<V;b++)j.operatorList.fnArray.push(h.fnArray[b]),j.operatorList.argsArray.push(h.argsArray[b]);j.operatorList.lastChunk=h.lastChunk,j.operatorList.separateAnnots=h.separateAnnots;for(const b of j.renderTasks)b.operatorListChanged();h.lastChunk&&et(this,s,pe).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:j,annotationStorageSerializable:b}){const{map:V,transfers:X}=b,Q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:j,annotationStorage:V},X).getReader(),lt=this._intentStates.get(j);lt.streamReader=Q;const ut=()=>{Q.read().then(({value:Y,done:ht})=>{if(ht){lt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Y,lt),ut())},Y=>{if(lt.streamReader=null,!this._transport.destroyed){if(lt.operatorList){lt.operatorList.lastChunk=!0;for(const ht of lt.renderTasks)ht.operatorListChanged();et(this,s,pe).call(this,!0)}if(lt.displayReadyCapability)lt.displayReadyCapability.reject(Y);else if(lt.opListReadCapability)lt.opListReadCapability.reject(Y);else throw Y}})};ut()}_abortOperatorList({intentState:h,reason:j,force:b=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!b){if(h.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let V=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(V+=j.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:j,force:!0})},V);return}}if(h.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[V,X]of this._intentStates)if(X===h){this._intentStates.delete(V);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,i=new WeakMap,s=new WeakSet,pe=function(h=!1){if(et(this,S,Te).call(this),!a(this,i)||this.destroyed)return!1;if(h)return ct(this,r,setTimeout(()=>{ct(this,r,null),et(this,s,pe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:b}of this._intentStates.values())if(j.size>0||!b.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ct(this,i,!1),!0},S=new WeakSet,Te=function(){a(this,r)&&(clearTimeout(a(this,r)),ct(this,r,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){H(this,T,new Set);H(this,E,Promise.resolve())}postMessage(h,j){const b={data:structuredClone(h,j?{transfer:j}:null)};a(this,E).then(()=>{for(const V of a(this,T))V.call(this,b)})}addEventListener(h,j){a(this,T).add(j)}removeEventListener(h,j){a(this,T).delete(j)}terminate(){a(this,T).clear()}}T=new WeakMap,E=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,h){let j;try{if(j=new URL(A),!j.origin||j.origin==="null")return!1}catch{return!1}const b=new URL(h,j);return j.origin===b.origin},PDFWorkerUtil.createCDNWrapper=function(A){const h=`importScripts("${A}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:A=null,port:h=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var b;if(this.name=A,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((b=a(_PDFWorker,B))!=null&&b.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,B)||ct(_PDFWorker,B,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const h=new Worker(A),j=new _message_handler.MessageHandler("main","worker",h),b=()=>{h.removeEventListener("error",V),j.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},V=()=>{this._webWorker||b()};h.addEventListener("error",V),j.on("test",P=>{if(h.removeEventListener("error",V),this.destroyed){b();return}P?(this._messageHandler=j,this._port=h,this._webWorker=h,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),h.terminate())}),j.on("ready",P=>{if(h.removeEventListener("error",V),this.destroyed){b();return}try{X()}catch{this._setupFakeWorker()}});const X=()=>{const P=new Uint8Array;j.send("test",P,[P.buffer])};X();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,b=new _message_handler.MessageHandler(j+"_worker",j,h);A.setup(b,h);const V=new _message_handler.MessageHandler(j,j+"_worker",h);this._messageHandler=V,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){var A;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(A=a(_PDFWorker,B))==null||A.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){var j;if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(j=a(this,B))==null?void 0:j.get(A.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};B=new WeakMap,H(_PDFWorker,B,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,j,b,V,X){H(this,m);H(this,F,new Map);H(this,C,new Map);H(this,w,new Map);H(this,_,null);this.messageHandler=h,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:V.ownerDocument,styleElement:V.styleElement}),this._params=V,this.canvasFactory=X.canvasFactory,this.filterFactory=X.filterFactory,this.cMapReaderFactory=X.cMapReaderFactory,this.standardFontDataFactory=X.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=b,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,j=_util.AnnotationMode.ENABLE,b=null,V=!1){let X=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(h){case"any":X=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":X=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(j){case _util.AnnotationMode.DISABLE:X+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:X+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:X+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(X&_util.RenderingIntentFlag.PRINT&&b instanceof _annotation_storage.PrintAnnotationStorage?b:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return V&&(X+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:X,cacheKey:`${X}_${P.hash}`,annotationStorageSerializable:P}}destroy(){var b;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(b=a(this,_))==null||b.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const V of a(this,C).values())h.push(V._destroy());a(this,C).clear(),a(this,w).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return h.push(j),Promise.all(h).then(()=>{var V;this.commonObjs.clear(),this.fontLoader.clear(),a(this,F).clear(),this.filterFactory.destroy(),(V=this._networkStream)==null||V.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:j}=this;h.on("GetReader",(b,V)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=X=>{this._lastProgress={loaded:X.loaded,total:X.total}},V.onPull=()=>{this._fullReader.read().then(function({value:X,done:P}){if(P){V.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{V.error(X)})},V.onCancel=X=>{this._fullReader.cancel(X),V.ready.catch(P=>{if(!this.destroyed)throw P})}}),h.on("ReaderHeadersReady",b=>{const V=new _util.PromiseCapability,X=this._fullReader;return X.headersReady.then(()=>{var P;(!X.isStreamingSupported||!X.isRangeSupported)&&(this._lastProgress&&((P=j.onProgress)==null||P.call(j,this._lastProgress)),X.onProgress=Q=>{var lt;(lt=j.onProgress)==null||lt.call(j,{loaded:Q.loaded,total:Q.total})}),V.resolve({isStreamingSupported:X.isStreamingSupported,isRangeSupported:X.isRangeSupported,contentLength:X.contentLength})},V.reject),V.promise}),h.on("GetRangeReader",(b,V)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const X=this._networkStream.getRangeReader(b.begin,b.end);if(!X){V.close();return}V.onPull=()=>{X.read().then(function({value:P,done:Q}){if(Q){V.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),V.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{V.error(P)})},V.onCancel=P=>{X.cancel(P),V.ready.catch(Q=>{if(!this.destroyed)throw Q})}}),h.on("GetDoc",({pdfInfo:b})=>{this._numPages=b.numPages,this._htmlForXfa=b.htmlForXfa,delete b.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(b,this))}),h.on("DocException",function(b){let V;switch(b.name){case"PasswordException":V=new _util.PasswordException(b.message,b.code);break;case"InvalidPDFException":V=new _util.InvalidPDFException(b.message);break;case"MissingPDFException":V=new _util.MissingPDFException(b.message);break;case"UnexpectedResponseException":V=new _util.UnexpectedResponseException(b.message,b.status);break;case"UnknownErrorException":V=new _util.UnknownErrorException(b.message,b.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(V)}),h.on("PasswordRequest",b=>{if(ct(this,_,new _util.PromiseCapability),j.onPassword){const V=X=>{X instanceof Error?a(this,_).reject(X):a(this,_).resolve({password:X})};try{j.onPassword(V,b.code)}catch(X){a(this,_).reject(X)}}else a(this,_).reject(new _util.PasswordException(b.message,b.code));return a(this,_).promise}),h.on("DataLoaded",b=>{var V;(V=j.onProgress)==null||V.call(j,{loaded:b.length,total:b.length}),this.downloadInfoCapability.resolve(b)}),h.on("StartRenderPage",b=>{if(this.destroyed)return;a(this,C).get(b.pageIndex)._startRenderPage(b.transparency,b.cacheKey)}),h.on("commonobj",([b,V,X])=>{var P;if(!this.destroyed&&!this.commonObjs.has(b))switch(V){case"Font":const Q=this._params;if("error"in X){const Y=X.error;(0,_util.warn)(`Error during font loading: ${Y}`),this.commonObjs.resolve(b,Y);break}const lt=Q.pdfBug&&((P=globalThis.FontInspector)!=null&&P.enabled)?(Y,ht)=>globalThis.FontInspector.fontAdded(Y,ht):null,ut=new _font_loader.FontFaceObject(X,{isEvalSupported:Q.isEvalSupported,disableFontFace:Q.disableFontFace,ignoreErrors:Q.ignoreErrors,inspectFont:lt});this.fontLoader.bind(ut).catch(Y=>h.sendWithPromise("FontFallback",{id:b})).finally(()=>{!Q.fontExtraProperties&&ut.data&&(ut.data=null),this.commonObjs.resolve(b,ut)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(b,X);break;default:throw new Error(`Got unknown common object type ${V}`)}}),h.on("obj",([b,V,X,P])=>{var lt;if(this.destroyed)return;const Q=a(this,C).get(V);if(!Q.objs.has(b))switch(X){case"Image":if(Q.objs.resolve(b,P),P){let ut;if(P.bitmap){const{width:Y,height:ht}=P;ut=Y*ht*4}else ut=((lt=P.data)==null?void 0:lt.length)||0;ut>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Q._maybeCleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(b,P);break;default:throw new Error(`Got unknown object type ${X}`)}}),h.on("DocProgress",b=>{var V;this.destroyed||(V=j.onProgress)==null||V.call(j,{loaded:b.loaded,total:b.total})}),h.on("FetchBuiltInCMap",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(b):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(b):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var b;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((b=this._fullReader)==null?void 0:b.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=h-1,b=a(this,w).get(j);if(b)return b;const V=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(X=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(j,X,this,this._params.pdfBug);return a(this,C).set(j,P),P});return a(this,w).set(j,V),V}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:j})}getFieldObjects(){return et(this,m,Ce).call(this,"GetFieldObjects")}hasJSActions(){return et(this,m,Ce).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return et(this,m,Ce).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",j=a(this,F).get(h);if(j)return j;const b=this.messageHandler.sendWithPromise(h,null).then(V=>{var X,P;return{info:V[0],metadata:V[1]?new _metadata.Metadata(V[1]):null,contentDispositionFilename:((X=this._fullReader)==null?void 0:X.filename)??null,contentLength:((P=this._fullReader)==null?void 0:P.contentLength)??null}});return a(this,F).set(h,b),b}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of a(this,C).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),a(this,F).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:j})}}F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakSet,Ce=function(h,j=null){const b=a(this,F).get(h);if(b)return b;const V=this.messageHandler.sendWithPromise(h,j);return a(this,F).set(h,V),V};class PDFObjects{constructor(){H(this,O);H(this,D,Object.create(null))}get(h,j=null){if(j){const V=et(this,O,Ue).call(this,h);return V.capability.promise.then(()=>j(V.data)),null}const b=a(this,D)[h];if(!(b!=null&&b.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return b.data}has(h){const j=a(this,D)[h];return(j==null?void 0:j.capability.settled)||!1}resolve(h,j=null){const b=et(this,O,Ue).call(this,h);b.data=j,b.capability.resolve()}clear(){var h;for(const j in a(this,D)){const{data:b}=a(this,D)[j];(h=b==null?void 0:b.bitmap)==null||h.close()}ct(this,D,Object.create(null))}}D=new WeakMap,O=new WeakSet,Ue=function(h){var j;return(j=a(this,D))[h]||(j[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){H(this,u,null);ct(this,u,h),this.onContinue=null}get promise(){return a(this,u).capability.promise}cancel(h=0){a(this,u).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=a(this,u).operatorList;if(!h)return!1;const{annotationCanvasMap:j}=a(this,u);return h.form||h.canvas&&(j==null?void 0:j.size)>0}}u=new WeakMap,exports.RenderTask=RenderTask;const I=class I{constructor({callback:h,params:j,objs:b,commonObjs:V,annotationCanvasMap:X,operatorList:P,pageIndex:Q,canvasFactory:lt,filterFactory:ut,useRequestAnimationFrame:Y=!1,pdfBug:ht=!1,pageColors:bt=null}){this.callback=h,this.params=j,this.objs=b,this.commonObjs=V,this.annotationCanvasMap=X,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=Q,this.canvasFactory=lt,this.filterFactory=ut,this._pdfBug=ht,this.pageColors=bt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Y===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:j}){var Q,lt;if(this.cancelled)return;if(this._canvas){if(a(I,p).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(I,p).add(this._canvas)}this._pdfBug&&((Q=globalThis.StepperManager)!=null&&Q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:b,viewport:V,transform:X,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(b,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:X,viewport:V,transparency:h,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,(lt=this.graphicsReadyCallback)==null||lt.call(this)}cancel(h=null,j=0){var b;this.running=!1,this.cancelled=!0,(b=this.gfx)==null||b.endDrawing(),a(I,p).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(I,p).delete(this._canvas),this.callback())))}};p=new WeakMap,H(I,p,new WeakSet);let InternalRenderTask=I;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,n,r)=>{var E,v,B,En,C;Object.defineProperty(n,"__esModule",{value:!0}),n.SerializableEmpty=n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var i=r(1),s=r(4),y=r(8);const S=Object.freeze({map:null,hash:"",transfers:void 0});n.SerializableEmpty=S;class J{constructor(){H(this,B);H(this,E,!1);H(this,v,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(_,m){const x=a(this,v).get(_);return x===void 0?m:Object.assign(m,x)}getRawValue(_){return a(this,v).get(_)}remove(_){if(a(this,v).delete(_),a(this,v).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const m of a(this,v).values())if(m instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(_,m){const x=a(this,v).get(_);let D=!1;if(x!==void 0)for(const[O,k]of Object.entries(m))x[O]!==k&&(D=!0,x[O]=k);else D=!0,a(this,v).set(_,m);D&&et(this,B,En).call(this),m instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(m.constructor._type)}has(_){return a(this,v).has(_)}getAll(){return a(this,v).size>0?(0,i.objectFromMap)(a(this,v)):null}setAll(_){for(const[m,x]of Object.entries(_))this.setValue(m,x)}get size(){return a(this,v).size}resetModified(){a(this,E)&&(ct(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(a(this,v).size===0)return S;const _=new Map,m=new y.MurmurHash3_64,x=[],D=Object.create(null);let O=!1;for(const[k,u]of a(this,v)){const p=u instanceof s.AnnotationEditor?u.serialize(!1,D):u;p&&(_.set(k,p),m.update(`${k}:${JSON.stringify(p)}`),O||(O=!!p.bitmap))}if(O)for(const k of _.values())k.bitmap&&x.push(k.bitmap);return _.size>0?{map:_,hash:m.hexdigest(),transfers:x}:S}}E=new WeakMap,v=new WeakMap,B=new WeakSet,En=function(){a(this,E)||(ct(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},n.AnnotationStorage=J;class T extends J{constructor(m){super();H(this,C,void 0);const{map:x,hash:D,transfers:O}=m.serializable,k=structuredClone(x,O?{transfer:O}:null);ct(this,C,{map:k,hash:D,transfers:O})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,C)}}C=new WeakMap,n.PrintAnnotationStorage=T},(t,n,r)=>{var T,E,v,B,F,C,w,_,m,x,D,O,k,u,p,ze,A,We,j,He,V,Ge,P,Sn,lt,wn,Y,Tn,bt,Ve,At,Cn;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var i=r(5),s=r(1),y=r(6);const o=class o{constructor(c){H(this,p);H(this,A);H(this,V);H(this,P);H(this,lt);H(this,Y);H(this,bt);H(this,At);H(this,T,"");H(this,E,!1);H(this,v,null);H(this,B,null);H(this,F,null);H(this,C,!1);H(this,w,null);H(this,_,this.focusin.bind(this));H(this,m,this.focusout.bind(this));H(this,x,!1);H(this,D,!1);H(this,O,!1);re(this,"_initialOptions",Object.create(null));re(this,"_uiManager",null);re(this,"_focusEventsAllowed",!0);re(this,"_l10nPromise",null);H(this,k,!1);H(this,u,o._zIndex++);this.constructor===o&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=c.parent,this.id=c.id,this.width=this.height=null,this.pageIndex=c.parent.pageIndex,this.name=c.name,this.div=null,this._uiManager=c.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=c.isCentered,this._structTreeParentId=null;const{rotation:f,rawDims:{pageWidth:g,pageHeight:M,pageX:$,pageY:q}}=this.parent.viewport;this.rotation=f,this.pageRotation=(360+f-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[g,M],this.pageTranslation=[$,q];const[at,it]=this.parentDimensions;this.x=c.x/at,this.y=c.y/it,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(c){const f=new J({id:c.parent.getNextId(),parent:c.parent,uiManager:c._uiManager});f.annotationElementId=c.annotationElementId,f.deleted=!0,f._uiManager.addToAnnotationStorage(f)}static initialize(c,f=null){if(o._l10nPromise||(o._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(M=>[M,c.get(M)]))),f!=null&&f.strings)for(const M of f.strings)o._l10nPromise.set(M,c.get(M));if(o._borderLineWidth!==-1)return;const g=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(g.getPropertyValue("--outline-width"))||0}static updateDefaultParams(c,f){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(c){return!1}static paste(c,f){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,k)}set _isDraggable(c){var f;ct(this,k,c),(f=this.div)==null||f.classList.toggle("draggable",c)}center(){const[c,f]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*f/(c*2),this.y+=this.width*c/(f*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*f/(c*2),this.y-=this.width*c/(f*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(c){this._uiManager.addCommands(c)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,u)}setParent(c){c!==null&&(this.pageIndex=c.pageIndex,this.pageDimensions=c.pageDimensions),this.parent=c}focusin(c){this._focusEventsAllowed&&(a(this,x)?ct(this,x,!1):this.parent.setSelected(this))}focusout(c){var g;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const f=c.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(c.preventDefault(),(g=this.parent)!=null&&g.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(c,f,g,M){const[$,q]=this.parentDimensions;[g,M]=this.screenToPageTranslation(g,M),this.x=(c+g)/$,this.y=(f+M)/q,this.fixAndSetPosition()}translate(c,f){et(this,p,ze).call(this,this.parentDimensions,c,f)}translateInPage(c,f){et(this,p,ze).call(this,this.pageDimensions,c,f),this.div.scrollIntoView({block:"nearest"})}drag(c,f){const[g,M]=this.parentDimensions;if(this.x+=c/g,this.y+=f/M,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:pt,y:vt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,pt,vt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:$,y:q}=this;const[at,it]=et(this,A,We).call(this);$+=at,q+=it,this.div.style.left=`${(100*$).toFixed(2)}%`,this.div.style.top=`${(100*q).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[c,f]=this.pageDimensions;let{x:g,y:M,width:$,height:q}=this;switch($*=c,q*=f,g*=c,M*=f,this.rotation){case 0:g=Math.max(0,Math.min(c-$,g)),M=Math.max(0,Math.min(f-q,M));break;case 90:g=Math.max(0,Math.min(c-q,g)),M=Math.min(f,Math.max($,M));break;case 180:g=Math.min(c,Math.max($,g)),M=Math.min(f,Math.max(q,M));break;case 270:g=Math.min(c,Math.max(q,g)),M=Math.max(0,Math.min(f-$,M));break}this.x=g/=c,this.y=M/=f;const[at,it]=et(this,A,We).call(this);g+=at,M+=it;const{style:pt}=this.div;pt.left=`${(100*g).toFixed(2)}%`,pt.top=`${(100*M).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(c,f){var g;return et(g=o,j,He).call(g,c,f,this.parentRotation)}pageTranslationToScreen(c,f){var g;return et(g=o,j,He).call(g,c,f,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:c,pageDimensions:[f,g]}=this,M=f*c,$=g*c;return s.FeatureTest.isCSSRoundSupported?[Math.round(M),Math.round($)]:[M,$]}setDims(c,f){var $;const[g,M]=this.parentDimensions;this.div.style.width=`${(100*c/g).toFixed(2)}%`,a(this,C)||(this.div.style.height=`${(100*f/M).toFixed(2)}%`),($=a(this,v))==null||$.classList.toggle("small",c<o.SMALL_EDITOR_SIZE||f<o.SMALL_EDITOR_SIZE)}fixDims(){const{style:c}=this.div,{height:f,width:g}=c,M=g.endsWith("%"),$=!a(this,C)&&f.endsWith("%");if(M&&$)return;const[q,at]=this.parentDimensions;M||(c.width=`${(100*parseFloat(g)/q).toFixed(2)}%`),!a(this,C)&&!$&&(c.height=`${(100*parseFloat(f)/at).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,v))return;const c=ct(this,v,document.createElement("button"));c.className="altText";const f=await o._l10nPromise.get("editor_alt_text_button_label");c.textContent=f,c.setAttribute("aria-label",f),c.tabIndex="0",c.addEventListener("contextmenu",y.noContextMenu),c.addEventListener("pointerdown",g=>g.stopPropagation()),c.addEventListener("click",g=>{g.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),c.addEventListener("keydown",g=>{g.target===c&&g.key==="Enter"&&(g.preventDefault(),this._uiManager.editAltText(this))}),et(this,bt,Ve).call(this),this.div.append(c),o.SMALL_EDITOR_SIZE||(o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(c.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,T),decorative:a(this,E)}}set altTextData({altText:c,decorative:f}){a(this,T)===c&&a(this,E)===f||(ct(this,T,c),ct(this,E,f),et(this,bt,Ve).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,_)),this.div.addEventListener("focusout",a(this,m));const[c,f]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*f/c).toFixed(2)}%`,this.div.style.maxHeight=`${(100*c/f).toFixed(2)}%`);const[g,M]=this.getInitialTranslation();return this.translate(g,M),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(c){const{isMac:f}=s.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&f){c.preventDefault();return}ct(this,x,!0),et(this,At,Cn).call(this,c)}moveInDOM(){var c;(c=this.parent)==null||c.moveEditorInDOM(this)}_setParentAndPosition(c,f,g){c.changeParent(this),this.x=f,this.y=g,this.fixAndSetPosition()}getRect(c,f){const g=this.parentScale,[M,$]=this.pageDimensions,[q,at]=this.pageTranslation,it=c/g,pt=f/g,vt=this.x*M,_t=this.y*$,gt=this.width*M,Rt=this.height*$;switch(this.rotation){case 0:return[vt+it+q,$-_t-pt-Rt+at,vt+it+gt+q,$-_t-pt+at];case 90:return[vt+pt+q,$-_t+it+at,vt+pt+Rt+q,$-_t+it+gt+at];case 180:return[vt-it-gt+q,$-_t+pt+at,vt-it+q,$-_t+pt+Rt+at];case 270:return[vt-pt-Rt+q,$-_t-it-gt+at,vt-pt+q,$-_t-it+at];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(c,f){const[g,M,$,q]=c,at=$-g,it=q-M;switch(this.rotation){case 0:return[g,f-q,at,it];case 90:return[g,f-M,it,at];case 180:return[$,f-M,at,it];case 270:return[$,f-q,it,at];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ct(this,O,!0)}disableEditMode(){ct(this,O,!1)}isInEditMode(){return a(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var c,f;(c=this.div)==null||c.addEventListener("focusin",a(this,_)),(f=this.div)==null||f.addEventListener("focusout",a(this,m))}serialize(c=!1,f=null){(0,s.unreachable)("An editor must be serializable")}static deserialize(c,f,g){const M=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:g});M.rotation=c.rotation;const[$,q]=M.pageDimensions,[at,it,pt,vt]=M.getRectInCurrentCoords(c.rect,q);return M.x=at/$,M.y=it/q,M.width=pt/$,M.height=vt/q,M}remove(){var c;this.div.removeEventListener("focusin",a(this,_)),this.div.removeEventListener("focusout",a(this,m)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(c=a(this,v))==null||c.remove(),ct(this,v,null),ct(this,B,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(et(this,P,Sn).call(this),a(this,w).classList.remove("hidden"))}select(){var c;this.makeResizable(),(c=this.div)==null||c.classList.add("selectedEditor")}unselect(){var c,f,g;(c=a(this,w))==null||c.classList.add("hidden"),(f=this.div)==null||f.classList.remove("selectedEditor"),(g=this.div)!=null&&g.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(c,f){}disableEditing(){a(this,v)&&(a(this,v).hidden=!0)}enableEditing(){a(this,v)&&(a(this,v).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,D)}set isEditing(c){ct(this,D,c),this.parent&&(c?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(c,f){ct(this,C,!0);const g=c/f,{style:M}=this.div;M.aspectRatio=g,M.height="auto"}static get MIN_SIZE(){return 16}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakMap,u=new WeakMap,p=new WeakSet,ze=function([c,f],g,M){[g,M]=this.screenToPageTranslation(g,M),this.x+=g/c,this.y+=M/f,this.fixAndSetPosition()},A=new WeakSet,We=function(){const[c,f]=this.parentDimensions,{_borderLineWidth:g}=o,M=g/c,$=g/f;switch(this.rotation){case 90:return[-M,$];case 180:return[M,$];case 270:return[M,-$];default:return[-M,-$]}},j=new WeakSet,He=function(c,f,g){switch(g){case 90:return[f,-c];case 180:return[-c,-f];case 270:return[-f,c];default:return[c,f]}},V=new WeakSet,Ge=function(c){switch(c){case 90:{const[f,g]=this.pageDimensions;return[0,-f/g,g/f,0]}case 180:return[-1,0,0,-1];case 270:{const[f,g]=this.pageDimensions;return[0,f/g,-g/f,0]}default:return[1,0,0,1]}},P=new WeakSet,Sn=function(){if(a(this,w))return;ct(this,w,document.createElement("div")),a(this,w).classList.add("resizers");const c=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||c.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const f of c){const g=document.createElement("div");a(this,w).append(g),g.classList.add("resizer",f),g.addEventListener("pointerdown",et(this,lt,wn).bind(this,f)),g.addEventListener("contextmenu",y.noContextMenu)}this.div.prepend(a(this,w))},lt=new WeakSet,wn=function(c,f){f.preventDefault();const{isMac:g}=s.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&g)return;const M=et(this,Y,Tn).bind(this,c),$=this._isDraggable;this._isDraggable=!1;const q={passive:!0,capture:!0};window.addEventListener("pointermove",M,q);const at=this.x,it=this.y,pt=this.width,vt=this.height,_t=this.parent.div.style.cursor,gt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(f.target).cursor;const Rt=()=>{this._isDraggable=$,window.removeEventListener("pointerup",Rt),window.removeEventListener("blur",Rt),window.removeEventListener("pointermove",M,q),this.parent.div.style.cursor=_t,this.div.style.cursor=gt;const Lt=this.x,Tt=this.y,Ot=this.width,U=this.height;Lt===at&&Tt===it&&Ot===pt&&U===vt||this.addCommands({cmd:()=>{this.width=Ot,this.height=U,this.x=Lt,this.y=Tt;const[G,N]=this.parentDimensions;this.setDims(G*Ot,N*U),this.fixAndSetPosition()},undo:()=>{this.width=pt,this.height=vt,this.x=at,this.y=it;const[G,N]=this.parentDimensions;this.setDims(G*pt,N*vt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Rt),window.addEventListener("blur",Rt)},Y=new WeakSet,Tn=function(c,f){const[g,M]=this.parentDimensions,$=this.x,q=this.y,at=this.width,it=this.height,pt=o.MIN_SIZE/g,vt=o.MIN_SIZE/M,_t=St=>Math.round(St*1e4)/1e4,gt=et(this,V,Ge).call(this,this.rotation),Rt=(St,Ct)=>[gt[0]*St+gt[2]*Ct,gt[1]*St+gt[3]*Ct],Lt=et(this,V,Ge).call(this,360-this.rotation),Tt=(St,Ct)=>[Lt[0]*St+Lt[2]*Ct,Lt[1]*St+Lt[3]*Ct];let Ot,U,G=!1,N=!1;switch(c){case"topLeft":G=!0,Ot=(St,Ct)=>[0,0],U=(St,Ct)=>[St,Ct];break;case"topMiddle":Ot=(St,Ct)=>[St/2,0],U=(St,Ct)=>[St/2,Ct];break;case"topRight":G=!0,Ot=(St,Ct)=>[St,0],U=(St,Ct)=>[0,Ct];break;case"middleRight":N=!0,Ot=(St,Ct)=>[St,Ct/2],U=(St,Ct)=>[0,Ct/2];break;case"bottomRight":G=!0,Ot=(St,Ct)=>[St,Ct],U=(St,Ct)=>[0,0];break;case"bottomMiddle":Ot=(St,Ct)=>[St/2,Ct],U=(St,Ct)=>[St/2,0];break;case"bottomLeft":G=!0,Ot=(St,Ct)=>[0,Ct],U=(St,Ct)=>[St,0];break;case"middleLeft":N=!0,Ot=(St,Ct)=>[0,Ct/2],U=(St,Ct)=>[St,Ct/2];break}const K=Ot(at,it),mt=U(at,it);let xt=Rt(...mt);const Dt=_t($+xt[0]),$t=_t(q+xt[1]);let zt=1,Vt=1,[qt,Gt]=this.screenToPageTranslation(f.movementX,f.movementY);if([qt,Gt]=Tt(qt/g,Gt/M),G){const St=Math.hypot(at,it);zt=Vt=Math.max(Math.min(Math.hypot(mt[0]-K[0]-qt,mt[1]-K[1]-Gt)/St,1/at,1/it),pt/at,vt/it)}else N?zt=Math.max(pt,Math.min(1,Math.abs(mt[0]-K[0]-qt)))/at:Vt=Math.max(vt,Math.min(1,Math.abs(mt[1]-K[1]-Gt)))/it;const Kt=_t(at*zt),yt=_t(it*Vt);xt=Rt(...U(Kt,yt));const st=Dt-xt[0],tt=$t-xt[1];this.width=Kt,this.height=yt,this.x=st,this.y=tt,this.setDims(g*Kt,M*yt),this.fixAndSetPosition()},bt=new WeakSet,Ve=async function(){var g;const c=a(this,v);if(!c)return;if(!a(this,T)&&!a(this,E)){c.classList.remove("done"),(g=a(this,B))==null||g.remove();return}o._l10nPromise.get("editor_alt_text_edit_button_label").then(M=>{c.setAttribute("aria-label",M)});let f=a(this,B);if(!f){ct(this,B,f=document.createElement("span")),f.className="tooltip",f.setAttribute("role","tooltip");const M=f.id=`alt-text-tooltip-${this.id}`;c.setAttribute("aria-describedby",M);const $=100;c.addEventListener("mouseenter",()=>{ct(this,F,setTimeout(()=>{ct(this,F,null),a(this,B).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$))}),c.addEventListener("mouseleave",()=>{var q;clearTimeout(a(this,F)),ct(this,F,null),(q=a(this,B))==null||q.classList.remove("show")})}c.classList.add("done"),f.innerText=a(this,E)?await o._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,T),f.parentNode||c.append(f)},At=new WeakSet,Cn=function(c){if(!this._isDraggable)return;const f=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let g,M;f&&(g={passive:!0,capture:!0},M=q=>{const[at,it]=this.screenToPageTranslation(q.movementX,q.movementY);this._uiManager.dragSelectedEditors(at,it)},window.addEventListener("pointermove",M,g));const $=()=>{if(window.removeEventListener("pointerup",$),window.removeEventListener("blur",$),f&&window.removeEventListener("pointermove",M,g),ct(this,x,!1),!this._uiManager.endDragSession()){const{isMac:q}=s.FeatureTest.platform;c.ctrlKey&&!q||c.shiftKey||c.metaKey&&q?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",$),window.addEventListener("blur",$)},H(o,j),re(o,"_borderLineWidth",-1),re(o,"_colorManager",new i.ColorManager),re(o,"_zIndex",1),re(o,"SMALL_EDITOR_SIZE",0);let S=o;n.AnnotationEditor=S;class J extends S{constructor(c){super(c),this.annotationElementId=c.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,n,r)=>{var C,w,_,m,x,qe,k,u,p,I,A,Pn,b,V,X,P,Q,lt,ut,Y,ht,bt,Et,At,L,o,d,c,f,g,M,$,q,at,it,pt,vt,_t,gt,Rt,Lt,Tt,Ot,U,G,N,K,kn,xt,Xe,$t,Ke,Vt,Pe,Gt,Ye,yt,Je,tt,le,Ct,ye,ne,Rn,kt,Fn,Ft,Qe,Ht,xe,Pt,Ze;Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=y,n.opacityToHex=S;var i=r(1),s=r(6);function y(z,l,R){for(const W of R)l.addEventListener(W,z[W].bind(z))}function S(z){return Math.round(Math.min(255,Math.max(1,255*z))).toString(16).padStart(2,"0")}class J{constructor(){H(this,C,0)}getId(){return`${i.AnnotationEditorPrefix}${be(this,C)._++}`}}C=new WeakMap;const O=class O{constructor(){H(this,x);H(this,w,(0,i.getUuid)());H(this,_,0);H(this,m,null)}static get _isSVGFittingCanvas(){const l='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',W=new OffscreenCanvas(1,3).getContext("2d"),Z=new Image;Z.src=l;const rt=Z.decode().then(()=>(W.drawImage(Z,0,0,1,1,0,0,1,3),new Uint32Array(W.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",rt)}async getFromFile(l){const{lastModified:R,name:W,size:Z,type:rt}=l;return et(this,x,qe).call(this,`${R}_${W}_${Z}_${rt}`,l)}async getFromUrl(l){return et(this,x,qe).call(this,l,l)}async getFromId(l){a(this,m)||ct(this,m,new Map);const R=a(this,m).get(l);return R?R.bitmap?(R.refCounter+=1,R):R.file?this.getFromFile(R.file):this.getFromUrl(R.url):null}getSvgUrl(l){const R=a(this,m).get(l);return R!=null&&R.isSvg?R.svgUrl:null}deleteId(l){a(this,m)||ct(this,m,new Map);const R=a(this,m).get(l);R&&(R.refCounter-=1,R.refCounter===0&&(R.bitmap=null))}isValidId(l){return l.startsWith(`image_${a(this,w)}_`)}};w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakSet,qe=async function(l,R){a(this,m)||ct(this,m,new Map);let W=a(this,m).get(l);if(W===null)return null;if(W!=null&&W.bitmap)return W.refCounter+=1,W;try{W||(W={bitmap:null,id:`image_${a(this,w)}_${be(this,_)._++}`,refCounter:0,isSvg:!1});let Z;if(typeof R=="string"){W.url=R;const rt=await fetch(R);if(!rt.ok)throw new Error(rt.statusText);Z=await rt.blob()}else Z=W.file=R;if(Z.type==="image/svg+xml"){const rt=O._isSVGFittingCanvas,ft=new FileReader,wt=new Image,It=new Promise((Mt,Yt)=>{wt.onload=()=>{W.bitmap=wt,W.isSvg=!0,Mt()},ft.onload=async()=>{const jt=W.svgUrl=ft.result;wt.src=await rt?`${jt}#svgView(preserveAspectRatio(none))`:jt},wt.onerror=ft.onerror=Yt});ft.readAsDataURL(Z),await It}else W.bitmap=await createImageBitmap(Z);W.refCounter=1}catch(Z){console.error(Z),W=null}return a(this,m).set(l,W),W&&a(this,m).set(W.id,W),W};let T=O;class E{constructor(l=128){H(this,k,[]);H(this,u,!1);H(this,p,void 0);H(this,I,-1);ct(this,p,l)}add({cmd:l,undo:R,mustExec:W,type:Z=NaN,overwriteIfSameType:rt=!1,keepUndo:ft=!1}){if(W&&l(),a(this,u))return;const wt={cmd:l,undo:R,type:Z};if(a(this,I)===-1){a(this,k).length>0&&(a(this,k).length=0),ct(this,I,0),a(this,k).push(wt);return}if(rt&&a(this,k)[a(this,I)].type===Z){ft&&(wt.undo=a(this,k)[a(this,I)].undo),a(this,k)[a(this,I)]=wt;return}const It=a(this,I)+1;It===a(this,p)?a(this,k).splice(0,1):(ct(this,I,It),It<a(this,k).length&&a(this,k).splice(It)),a(this,k).push(wt)}undo(){a(this,I)!==-1&&(ct(this,u,!0),a(this,k)[a(this,I)].undo(),ct(this,u,!1),ct(this,I,a(this,I)-1))}redo(){a(this,I)<a(this,k).length-1&&(ct(this,I,a(this,I)+1),ct(this,u,!0),a(this,k)[a(this,I)].cmd(),ct(this,u,!1))}hasSomethingToUndo(){return a(this,I)!==-1}hasSomethingToRedo(){return a(this,I)<a(this,k).length-1}destroy(){ct(this,k,null)}}k=new WeakMap,u=new WeakMap,p=new WeakMap,I=new WeakMap,n.CommandManager=E;class v{constructor(l){H(this,A);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:R}=i.FeatureTest.platform;for(const[W,Z,rt={}]of l)for(const ft of W){const wt=ft.startsWith("mac+");R&&wt?(this.callbacks.set(ft.slice(4),{callback:Z,options:rt}),this.allKeys.add(ft.split("+").at(-1))):!R&&!wt&&(this.callbacks.set(ft,{callback:Z,options:rt}),this.allKeys.add(ft.split("+").at(-1)))}}exec(l,R){if(!this.allKeys.has(R.key))return;const W=this.callbacks.get(et(this,A,Pn).call(this,R));if(!W)return;const{callback:Z,options:{bubbles:rt=!1,args:ft=[],checker:wt=null}}=W;wt&&!wt(l,R)||(Z.bind(l,...ft)(),rt||(R.stopPropagation(),R.preventDefault()))}}A=new WeakSet,Pn=function(l){l.altKey&&this.buffer.push("alt"),l.ctrlKey&&this.buffer.push("ctrl"),l.metaKey&&this.buffer.push("meta"),l.shiftKey&&this.buffer.push("shift"),this.buffer.push(l.key);const R=this.buffer.join("+");return this.buffer.length=0,R},n.KeyboardManager=v;const j=class j{get _colors(){const l=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(l),(0,i.shadow)(this,"_colors",l)}convert(l){const R=(0,s.getRGB)(l);if(!window.matchMedia("(forced-colors: active)").matches)return R;for(const[W,Z]of this._colors)if(Z.every((rt,ft)=>rt===R[ft]))return j._colorsMapping.get(W);return R}getHexCode(l){const R=this._colors.get(l);return R?i.Util.makeHexColor(...R):l}};re(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let B=j;n.ColorManager=B;const Bt=class Bt{constructor(l,R,W,Z,rt,ft){H(this,K);H(this,xt);H(this,$t);H(this,Vt);H(this,Gt);H(this,yt);H(this,tt);H(this,Ct);H(this,ne);H(this,kt);H(this,Ft);H(this,Ht);H(this,Pt);H(this,b,null);H(this,V,new Map);H(this,X,new Map);H(this,P,null);H(this,Q,null);H(this,lt,new E);H(this,ut,0);H(this,Y,new Set);H(this,ht,null);H(this,bt,null);H(this,Et,new Set);H(this,At,null);H(this,L,new J);H(this,o,!1);H(this,d,!1);H(this,c,null);H(this,f,i.AnnotationEditorType.NONE);H(this,g,new Set);H(this,M,null);H(this,$,this.blur.bind(this));H(this,q,this.focus.bind(this));H(this,at,this.copy.bind(this));H(this,it,this.cut.bind(this));H(this,pt,this.paste.bind(this));H(this,vt,this.keydown.bind(this));H(this,_t,this.onEditingAction.bind(this));H(this,gt,this.onPageChanging.bind(this));H(this,Rt,this.onScaleChanging.bind(this));H(this,Lt,this.onRotationChanging.bind(this));H(this,Tt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});H(this,Ot,[0,0]);H(this,U,null);H(this,G,null);H(this,N,null);ct(this,G,l),ct(this,N,R),ct(this,P,W),this._eventBus=Z,this._eventBus._on("editingaction",a(this,_t)),this._eventBus._on("pagechanging",a(this,gt)),this._eventBus._on("scalechanging",a(this,Rt)),this._eventBus._on("rotationchanging",a(this,Lt)),ct(this,Q,rt.annotationStorage),ct(this,At,rt.filterFactory),ct(this,M,ft),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const l=Bt.prototype,R=rt=>{const{activeElement:ft}=document;return ft&&a(rt,G).contains(ft)&&rt.hasSomethingToControl()},W=this.TRANSLATE_SMALL,Z=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new v([[["ctrl+a","mac+meta+a"],l.selectAll],[["ctrl+z","mac+meta+z"],l.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],l.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],l.delete],[["Escape","mac+Escape"],l.unselectAll],[["ArrowLeft","mac+ArrowLeft"],l.translateSelectedEditors,{args:[-W,0],checker:R}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],l.translateSelectedEditors,{args:[-Z,0],checker:R}],[["ArrowRight","mac+ArrowRight"],l.translateSelectedEditors,{args:[W,0],checker:R}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],l.translateSelectedEditors,{args:[Z,0],checker:R}],[["ArrowUp","mac+ArrowUp"],l.translateSelectedEditors,{args:[0,-W],checker:R}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],l.translateSelectedEditors,{args:[0,-Z],checker:R}],[["ArrowDown","mac+ArrowDown"],l.translateSelectedEditors,{args:[0,W],checker:R}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],l.translateSelectedEditors,{args:[0,Z],checker:R}]]))}destroy(){et(this,Vt,Pe).call(this),et(this,xt,Xe).call(this),this._eventBus._off("editingaction",a(this,_t)),this._eventBus._off("pagechanging",a(this,gt)),this._eventBus._off("scalechanging",a(this,Rt)),this._eventBus._off("rotationchanging",a(this,Lt));for(const l of a(this,X).values())l.destroy();a(this,X).clear(),a(this,V).clear(),a(this,Et).clear(),ct(this,b,null),a(this,g).clear(),a(this,lt).destroy(),a(this,P).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",a(this,M)?a(this,At).addHCMFilter(a(this,M).foreground,a(this,M).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(a(this,G)).direction)}editAltText(l){var R;(R=a(this,P))==null||R.editAltText(this,l)}onPageChanging({pageNumber:l}){ct(this,ut,l-1)}focusMainContainer(){a(this,G).focus()}findParent(l,R){for(const W of a(this,X).values()){const{x:Z,y:rt,width:ft,height:wt}=W.div.getBoundingClientRect();if(l>=Z&&l<=Z+ft&&R>=rt&&R<=rt+wt)return W}return null}disableUserSelect(l=!1){a(this,N).classList.toggle("noUserSelect",l)}addShouldRescale(l){a(this,Et).add(l)}removeShouldRescale(l){a(this,Et).delete(l)}onScaleChanging({scale:l}){this.commitOrRemove(),this.viewParameters.realScale=l*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const R of a(this,Et))R.onScaleChanging()}onRotationChanging({pagesRotation:l}){this.commitOrRemove(),this.viewParameters.rotation=l}addToAnnotationStorage(l){!l.isEmpty()&&a(this,Q)&&!a(this,Q).has(l.id)&&a(this,Q).setValue(l.id,l)}blur(){if(!this.hasSelection)return;const{activeElement:l}=document;for(const R of a(this,g))if(R.div.contains(l)){ct(this,c,[R,l]),R._focusEventsAllowed=!1;break}}focus(){if(!a(this,c))return;const[l,R]=a(this,c);ct(this,c,null),R.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),R.focus()}addEditListeners(){et(this,$t,Ke).call(this),et(this,Gt,Ye).call(this)}removeEditListeners(){et(this,Vt,Pe).call(this),et(this,yt,Je).call(this)}copy(l){var W;if(l.preventDefault(),(W=a(this,b))==null||W.commitOrRemove(),!this.hasSelection)return;const R=[];for(const Z of a(this,g)){const rt=Z.serialize(!0);rt&&R.push(rt)}R.length!==0&&l.clipboardData.setData("application/pdfjs",JSON.stringify(R))}cut(l){this.copy(l),this.delete()}paste(l){l.preventDefault();const{clipboardData:R}=l;for(const rt of R.items)for(const ft of a(this,bt))if(ft.isHandlingMimeForPasting(rt.type)){ft.paste(rt,this.currentLayer);return}let W=R.getData("application/pdfjs");if(!W)return;try{W=JSON.parse(W)}catch(rt){(0,i.warn)(`paste: "${rt.message}".`);return}if(!Array.isArray(W))return;this.unselectAll();const Z=this.currentLayer;try{const rt=[];for(const It of W){const Mt=Z.deserialize(It);if(!Mt)return;rt.push(Mt)}const ft=()=>{for(const It of rt)et(this,Ft,Qe).call(this,It);et(this,Pt,Ze).call(this,rt)},wt=()=>{for(const It of rt)It.remove()};this.addCommands({cmd:ft,undo:wt,mustExec:!0})}catch(rt){(0,i.warn)(`paste: "${rt.message}".`)}}keydown(l){var R;(R=this.getActive())!=null&&R.shouldGetKeyboardEvents()||Bt._keyboardManager.exec(this,l)}onEditingAction(l){["undo","redo","delete","selectAll"].includes(l.name)&&this[l.name]()}setEditingState(l){l?(et(this,K,kn).call(this),et(this,$t,Ke).call(this),et(this,Gt,Ye).call(this),et(this,tt,le).call(this,{isEditing:a(this,f)!==i.AnnotationEditorType.NONE,isEmpty:et(this,Ht,xe).call(this),hasSomethingToUndo:a(this,lt).hasSomethingToUndo(),hasSomethingToRedo:a(this,lt).hasSomethingToRedo(),hasSelectedEditor:!1})):(et(this,xt,Xe).call(this),et(this,Vt,Pe).call(this),et(this,yt,Je).call(this),et(this,tt,le).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(l){if(!a(this,bt)){ct(this,bt,l);for(const R of a(this,bt))et(this,Ct,ye).call(this,R.defaultPropertiesToUpdate)}}getId(){return a(this,L).getId()}get currentLayer(){return a(this,X).get(a(this,ut))}getLayer(l){return a(this,X).get(l)}get currentPageIndex(){return a(this,ut)}addLayer(l){a(this,X).set(l.pageIndex,l),a(this,o)?l.enable():l.disable()}removeLayer(l){a(this,X).delete(l.pageIndex)}updateMode(l,R=null){if(a(this,f)!==l){if(ct(this,f,l),l===i.AnnotationEditorType.NONE){this.setEditingState(!1),et(this,kt,Fn).call(this);return}this.setEditingState(!0),et(this,ne,Rn).call(this),this.unselectAll();for(const W of a(this,X).values())W.updateMode(l);if(R){for(const W of a(this,V).values())if(W.annotationElementId===R){this.setSelected(W),W.enterInEditMode();break}}}}updateToolbar(l){l!==a(this,f)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:l})}updateParams(l,R){if(a(this,bt)){if(l===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(l);return}for(const W of a(this,g))W.updateParams(l,R);for(const W of a(this,bt))W.updateDefaultParams(l,R)}}enableWaiting(l=!1){if(a(this,d)!==l){ct(this,d,l);for(const R of a(this,X).values())l?R.disableClick():R.enableClick(),R.div.classList.toggle("waiting",l)}}getEditors(l){const R=[];for(const W of a(this,V).values())W.pageIndex===l&&R.push(W);return R}getEditor(l){return a(this,V).get(l)}addEditor(l){a(this,V).set(l.id,l)}removeEditor(l){var R;a(this,V).delete(l.id),this.unselect(l),(!l.annotationElementId||!a(this,Y).has(l.annotationElementId))&&((R=a(this,Q))==null||R.remove(l.id))}addDeletedAnnotationElement(l){a(this,Y).add(l.annotationElementId),l.deleted=!0}isDeletedAnnotationElement(l){return a(this,Y).has(l)}removeDeletedAnnotationElement(l){a(this,Y).delete(l.annotationElementId),l.deleted=!1}setActiveEditor(l){a(this,b)!==l&&(ct(this,b,l),l&&et(this,Ct,ye).call(this,l.propertiesToUpdate))}toggleSelected(l){if(a(this,g).has(l)){a(this,g).delete(l),l.unselect(),et(this,tt,le).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,g).add(l),l.select(),et(this,Ct,ye).call(this,l.propertiesToUpdate),et(this,tt,le).call(this,{hasSelectedEditor:!0})}setSelected(l){for(const R of a(this,g))R!==l&&R.unselect();a(this,g).clear(),a(this,g).add(l),l.select(),et(this,Ct,ye).call(this,l.propertiesToUpdate),et(this,tt,le).call(this,{hasSelectedEditor:!0})}isSelected(l){return a(this,g).has(l)}unselect(l){l.unselect(),a(this,g).delete(l),et(this,tt,le).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,g).size!==0}undo(){a(this,lt).undo(),et(this,tt,le).call(this,{hasSomethingToUndo:a(this,lt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:et(this,Ht,xe).call(this)})}redo(){a(this,lt).redo(),et(this,tt,le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,lt).hasSomethingToRedo(),isEmpty:et(this,Ht,xe).call(this)})}addCommands(l){a(this,lt).add(l),et(this,tt,le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:et(this,Ht,xe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const l=[...a(this,g)],R=()=>{for(const Z of l)Z.remove()},W=()=>{for(const Z of l)et(this,Ft,Qe).call(this,Z)};this.addCommands({cmd:R,undo:W,mustExec:!0})}commitOrRemove(){var l;(l=a(this,b))==null||l.commitOrRemove()}hasSomethingToControl(){return a(this,b)||this.hasSelection}selectAll(){for(const l of a(this,g))l.commit();et(this,Pt,Ze).call(this,a(this,V).values())}unselectAll(){if(a(this,b)){a(this,b).commitOrRemove();return}if(this.hasSelection){for(const l of a(this,g))l.unselect();a(this,g).clear(),et(this,tt,le).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(l,R,W=!1){if(W||this.commitOrRemove(),!this.hasSelection)return;a(this,Ot)[0]+=l,a(this,Ot)[1]+=R;const[Z,rt]=a(this,Ot),ft=[...a(this,g)],wt=1e3;a(this,U)&&clearTimeout(a(this,U)),ct(this,U,setTimeout(()=>{ct(this,U,null),a(this,Ot)[0]=a(this,Ot)[1]=0,this.addCommands({cmd:()=>{for(const It of ft)a(this,V).has(It.id)&&It.translateInPage(Z,rt)},undo:()=>{for(const It of ft)a(this,V).has(It.id)&&It.translateInPage(-Z,-rt)},mustExec:!1})},wt));for(const It of ft)It.translateInPage(l,R)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ct(this,ht,new Map);for(const l of a(this,g))a(this,ht).set(l,{savedX:l.x,savedY:l.y,savedPageIndex:l.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,ht))return!1;this.disableUserSelect(!1);const l=a(this,ht);ct(this,ht,null);let R=!1;for(const[{x:Z,y:rt,pageIndex:ft},wt]of l)wt.newX=Z,wt.newY=rt,wt.newPageIndex=ft,R||(R=Z!==wt.savedX||rt!==wt.savedY||ft!==wt.savedPageIndex);if(!R)return!1;const W=(Z,rt,ft,wt)=>{if(a(this,V).has(Z.id)){const It=a(this,X).get(wt);It?Z._setParentAndPosition(It,rt,ft):(Z.pageIndex=wt,Z.x=rt,Z.y=ft)}};return this.addCommands({cmd:()=>{for(const[Z,{newX:rt,newY:ft,newPageIndex:wt}]of l)W(Z,rt,ft,wt)},undo:()=>{for(const[Z,{savedX:rt,savedY:ft,savedPageIndex:wt}]of l)W(Z,rt,ft,wt)},mustExec:!0}),!0}dragSelectedEditors(l,R){if(a(this,ht))for(const W of a(this,ht).keys())W.drag(l,R)}rebuild(l){if(l.parent===null){const R=this.getLayer(l.pageIndex);R?(R.changeParent(l),R.addOrRebuild(l)):(this.addEditor(l),this.addToAnnotationStorage(l),l.rebuild())}else l.parent.addOrRebuild(l)}isActive(l){return a(this,b)===l}getActive(){return a(this,b)}getMode(){return a(this,f)}get imageManager(){return(0,i.shadow)(this,"imageManager",new T)}};b=new WeakMap,V=new WeakMap,X=new WeakMap,P=new WeakMap,Q=new WeakMap,lt=new WeakMap,ut=new WeakMap,Y=new WeakMap,ht=new WeakMap,bt=new WeakMap,Et=new WeakMap,At=new WeakMap,L=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,f=new WeakMap,g=new WeakMap,M=new WeakMap,$=new WeakMap,q=new WeakMap,at=new WeakMap,it=new WeakMap,pt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,U=new WeakMap,G=new WeakMap,N=new WeakMap,K=new WeakSet,kn=function(){window.addEventListener("focus",a(this,q)),window.addEventListener("blur",a(this,$))},xt=new WeakSet,Xe=function(){window.removeEventListener("focus",a(this,q)),window.removeEventListener("blur",a(this,$))},$t=new WeakSet,Ke=function(){window.addEventListener("keydown",a(this,vt),{capture:!0})},Vt=new WeakSet,Pe=function(){window.removeEventListener("keydown",a(this,vt),{capture:!0})},Gt=new WeakSet,Ye=function(){document.addEventListener("copy",a(this,at)),document.addEventListener("cut",a(this,it)),document.addEventListener("paste",a(this,pt))},yt=new WeakSet,Je=function(){document.removeEventListener("copy",a(this,at)),document.removeEventListener("cut",a(this,it)),document.removeEventListener("paste",a(this,pt))},tt=new WeakSet,le=function(l){Object.entries(l).some(([W,Z])=>a(this,Tt)[W]!==Z)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Tt),l)})},Ct=new WeakSet,ye=function(l){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:l})},ne=new WeakSet,Rn=function(){if(!a(this,o)){ct(this,o,!0);for(const l of a(this,X).values())l.enable()}},kt=new WeakSet,Fn=function(){if(this.unselectAll(),a(this,o)){ct(this,o,!1);for(const l of a(this,X).values())l.disable()}},Ft=new WeakSet,Qe=function(l){const R=a(this,X).get(l.pageIndex);R?R.addOrRebuild(l):this.addEditor(l)},Ht=new WeakSet,xe=function(){if(a(this,V).size===0)return!0;if(a(this,V).size===1)for(const l of a(this,V).values())return l.isEmpty();return!1},Pt=new WeakSet,Ze=function(l){a(this,g).clear();for(const R of l)R.isEmpty()||(a(this,g).add(R),R.select());et(this,tt,le).call(this,{hasSelectedEditor:!0})},re(Bt,"TRANSLATE_SMALL",1),re(Bt,"TRANSLATE_BIG",10);let F=Bt;n.AnnotationEditorUIManager=F},(t,n,r)=>{var ut,Y,ht,bt,Et,At,L,o,d,c,f,g,fe,$,me,at,tn,pt,ke,_t,Re,Rt,_e,Tt,Ae;Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.deprecated=I,n.getColorValues=V,n.getCurrentTransform=X,n.getCurrentTransformInverse=P,n.getFilenameFromUrl=x,n.getPdfFilenameFromUrl=D,n.getRGB=b,n.getXfaPageViewport=j,n.isDataScheme=_,n.isPdfFile=m,n.isValidFetchUrl=k,n.loadScript=p,n.noContextMenu=u,n.setLayerDimensions=Q;var i=r(7),s=r(1);const y="http://www.w3.org/2000/svg",lt=class lt{};re(lt,"CSS",96),re(lt,"PDF",72),re(lt,"PDF_TO_CSS_UNITS",lt.CSS/lt.PDF);let S=lt;n.PixelsPerInch=S;class J extends i.BaseFilterFactory{constructor({docId:N,ownerDocument:K=globalThis.document}={}){super();H(this,g);H(this,$);H(this,at);H(this,pt);H(this,_t);H(this,Rt);H(this,Tt);H(this,ut,void 0);H(this,Y,void 0);H(this,ht,void 0);H(this,bt,void 0);H(this,Et,void 0);H(this,At,void 0);H(this,L,void 0);H(this,o,void 0);H(this,d,void 0);H(this,c,void 0);H(this,f,0);ct(this,ht,N),ct(this,bt,K)}addFilter(N){if(!N)return"none";let K=a(this,g,fe).get(N);if(K)return K;let mt,xt,Dt,$t;if(N.length===1){const Gt=N[0],Kt=new Array(256);for(let yt=0;yt<256;yt++)Kt[yt]=Gt[yt]/255;$t=mt=xt=Dt=Kt.join(",")}else{const[Gt,Kt,yt]=N,st=new Array(256),tt=new Array(256),St=new Array(256);for(let Ct=0;Ct<256;Ct++)st[Ct]=Gt[Ct]/255,tt[Ct]=Kt[Ct]/255,St[Ct]=yt[Ct]/255;mt=st.join(","),xt=tt.join(","),Dt=St.join(","),$t=`${mt}${xt}${Dt}`}if(K=a(this,g,fe).get($t),K)return a(this,g,fe).set(N,K),K;const zt=`g_${a(this,ht)}_transfer_map_${be(this,f)._++}`,Vt=`url(#${zt})`;a(this,g,fe).set(N,Vt),a(this,g,fe).set($t,Vt);const qt=et(this,pt,ke).call(this,zt);return et(this,Rt,_e).call(this,mt,xt,Dt,qt),Vt}addHCMFilter(N,K){var Kt;const mt=`${N}-${K}`;if(a(this,At)===mt)return a(this,L);if(ct(this,At,mt),ct(this,L,"none"),(Kt=a(this,Et))==null||Kt.remove(),!N||!K)return a(this,L);const xt=et(this,Tt,Ae).call(this,N);N=s.Util.makeHexColor(...xt);const Dt=et(this,Tt,Ae).call(this,K);if(K=s.Util.makeHexColor(...Dt),a(this,$,me).style.color="",N==="#000000"&&K==="#ffffff"||N===K)return a(this,L);const $t=new Array(256);for(let yt=0;yt<=255;yt++){const st=yt/255;$t[yt]=st<=.03928?st/12.92:((st+.055)/1.055)**2.4}const zt=$t.join(","),Vt=`g_${a(this,ht)}_hcm_filter`,qt=ct(this,o,et(this,pt,ke).call(this,Vt));et(this,Rt,_e).call(this,zt,zt,zt,qt),et(this,at,tn).call(this,qt);const Gt=(yt,st)=>{const tt=xt[yt]/255,St=Dt[yt]/255,Ct=new Array(st+1);for(let ie=0;ie<=st;ie++)Ct[ie]=tt+ie/st*(St-tt);return Ct.join(",")};return et(this,Rt,_e).call(this,Gt(0,5),Gt(1,5),Gt(2,5),qt),ct(this,L,`url(#${Vt})`),a(this,L)}addHighlightHCMFilter(N,K,mt,xt){var St;const Dt=`${N}-${K}-${mt}-${xt}`;if(a(this,d)===Dt)return a(this,c);if(ct(this,d,Dt),ct(this,c,"none"),(St=a(this,o))==null||St.remove(),!N||!K)return a(this,c);const[$t,zt]=[N,K].map(et(this,Tt,Ae).bind(this));let Vt=Math.round(.2126*$t[0]+.7152*$t[1]+.0722*$t[2]),qt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),[Gt,Kt]=[mt,xt].map(et(this,Tt,Ae).bind(this));qt<Vt&&([Vt,qt,Gt,Kt]=[qt,Vt,Kt,Gt]),a(this,$,me).style.color="";const yt=(Ct,ie,ne)=>{const ot=new Array(256),kt=(qt-Vt)/ne,Ut=Ct/255,Ft=(ie-Ct)/(255*ne);let Wt=0;for(let Ht=0;Ht<=ne;Ht++){const te=Math.round(Vt+Ht*kt),Pt=Ut+Ht*Ft;for(let Qt=Wt;Qt<=te;Qt++)ot[Qt]=Pt;Wt=te+1}for(let Ht=Wt;Ht<256;Ht++)ot[Ht]=ot[Wt-1];return ot.join(",")},st=`g_${a(this,ht)}_hcm_highlight_filter`,tt=ct(this,o,et(this,pt,ke).call(this,st));return et(this,at,tn).call(this,tt),et(this,Rt,_e).call(this,yt(Gt[0],Kt[0],5),yt(Gt[1],Kt[1],5),yt(Gt[2],Kt[2],5),tt),ct(this,c,`url(#${st})`),a(this,c)}destroy(N=!1){N&&(a(this,L)||a(this,c))||(a(this,Y)&&(a(this,Y).parentNode.parentNode.remove(),ct(this,Y,null)),a(this,ut)&&(a(this,ut).clear(),ct(this,ut,null)),ct(this,f,0))}}ut=new WeakMap,Y=new WeakMap,ht=new WeakMap,bt=new WeakMap,Et=new WeakMap,At=new WeakMap,L=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,f=new WeakMap,g=new WeakSet,fe=function(){return a(this,ut)||ct(this,ut,new Map)},$=new WeakSet,me=function(){if(!a(this,Y)){const N=a(this,bt).createElement("div"),{style:K}=N;K.visibility="hidden",K.contain="strict",K.width=K.height=0,K.position="absolute",K.top=K.left=0,K.zIndex=-1;const mt=a(this,bt).createElementNS(y,"svg");mt.setAttribute("width",0),mt.setAttribute("height",0),ct(this,Y,a(this,bt).createElementNS(y,"defs")),N.append(mt),mt.append(a(this,Y)),a(this,bt).body.append(N)}return a(this,Y)},at=new WeakSet,tn=function(N){const K=a(this,bt).createElementNS(y,"feColorMatrix");K.setAttribute("type","matrix"),K.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(K)},pt=new WeakSet,ke=function(N){const K=a(this,bt).createElementNS(y,"filter");return K.setAttribute("color-interpolation-filters","sRGB"),K.setAttribute("id",N),a(this,$,me).append(K),K},_t=new WeakSet,Re=function(N,K,mt){const xt=a(this,bt).createElementNS(y,K);xt.setAttribute("type","discrete"),xt.setAttribute("tableValues",mt),N.append(xt)},Rt=new WeakSet,_e=function(N,K,mt,xt){const Dt=a(this,bt).createElementNS(y,"feComponentTransfer");xt.append(Dt),et(this,_t,Re).call(this,Dt,"feFuncR",N),et(this,_t,Re).call(this,Dt,"feFuncG",K),et(this,_t,Re).call(this,Dt,"feFuncB",mt)},Tt=new WeakSet,Ae=function(N){return a(this,$,me).style.color=N,b(getComputedStyle(a(this,$,me)).getPropertyValue("color"))},n.DOMFilterFactory=J;class T extends i.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,N){const K=this._document.createElement("canvas");return K.width=G,K.height=N,K}}n.DOMCanvasFactory=T;async function E(U,G=!1){if(k(U,document.baseURI)){const N=await fetch(U);if(!N.ok)throw new Error(N.statusText);return G?new Uint8Array(await N.arrayBuffer()):(0,s.stringToBytes)(await N.text())}return new Promise((N,K)=>{const mt=new XMLHttpRequest;mt.open("GET",U,!0),G&&(mt.responseType="arraybuffer"),mt.onreadystatechange=()=>{if(mt.readyState===XMLHttpRequest.DONE){if(mt.status===200||mt.status===0){let xt;if(G&&mt.response?xt=new Uint8Array(mt.response):!G&&mt.responseText&&(xt=(0,s.stringToBytes)(mt.responseText)),xt){N(xt);return}}K(new Error(mt.statusText))}},mt.send(null)})}class v extends i.BaseCMapReaderFactory{_fetchData(G,N){return E(G,this.isCompressed).then(K=>({cMapData:K,compressionType:N}))}}n.DOMCMapReaderFactory=v;class B extends i.BaseStandardFontDataFactory{_fetchData(G){return E(G,!0)}}n.DOMStandardFontDataFactory=B;class F extends i.BaseSVGFactory{_createSVG(G){return document.createElementNS(y,G)}}n.DOMSVGFactory=F;class C{constructor({viewBox:G,scale:N,rotation:K,offsetX:mt=0,offsetY:xt=0,dontFlip:Dt=!1}){this.viewBox=G,this.scale=N,this.rotation=K,this.offsetX=mt,this.offsetY=xt;const $t=(G[2]+G[0])/2,zt=(G[3]+G[1])/2;let Vt,qt,Gt,Kt;switch(K%=360,K<0&&(K+=360),K){case 180:Vt=-1,qt=0,Gt=0,Kt=1;break;case 90:Vt=0,qt=1,Gt=1,Kt=0;break;case 270:Vt=0,qt=-1,Gt=-1,Kt=0;break;case 0:Vt=1,qt=0,Gt=0,Kt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Gt=-Gt,Kt=-Kt);let yt,st,tt,St;Vt===0?(yt=Math.abs(zt-G[1])*N+mt,st=Math.abs($t-G[0])*N+xt,tt=(G[3]-G[1])*N,St=(G[2]-G[0])*N):(yt=Math.abs($t-G[0])*N+mt,st=Math.abs(zt-G[1])*N+xt,tt=(G[2]-G[0])*N,St=(G[3]-G[1])*N),this.transform=[Vt*N,qt*N,Gt*N,Kt*N,yt-Vt*N*$t-Gt*N*zt,st-qt*N*$t-Kt*N*zt],this.width=tt,this.height=St}get rawDims(){const{viewBox:G}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:G[2]-G[0],pageHeight:G[3]-G[1],pageX:G[0],pageY:G[1]})}clone({scale:G=this.scale,rotation:N=this.rotation,offsetX:K=this.offsetX,offsetY:mt=this.offsetY,dontFlip:xt=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:G,rotation:N,offsetX:K,offsetY:mt,dontFlip:xt})}convertToViewportPoint(G,N){return s.Util.applyTransform([G,N],this.transform)}convertToViewportRectangle(G){const N=s.Util.applyTransform([G[0],G[1]],this.transform),K=s.Util.applyTransform([G[2],G[3]],this.transform);return[N[0],N[1],K[0],K[1]]}convertToPdfPoint(G,N){return s.Util.applyInverseTransform([G,N],this.transform)}}n.PageViewport=C;class w extends s.BaseException{constructor(G,N=0){super(G,"RenderingCancelledException"),this.extraDelay=N}}n.RenderingCancelledException=w;function _(U){const G=U.length;let N=0;for(;N<G&&U[N].trim()==="";)N++;return U.substring(N,N+5).toLowerCase()==="data:"}function m(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function x(U,G=!1){return G||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function D(U,G="document.pdf"){if(typeof U!="string")return G;if(_(U))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,K=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,mt=N.exec(U);let xt=K.exec(mt[1])||K.exec(mt[2])||K.exec(mt[3]);if(xt&&(xt=xt[0],xt.includes("%")))try{xt=K.exec(decodeURIComponent(xt))[0]}catch{}return xt||G}class O{constructor(){re(this,"started",Object.create(null));re(this,"times",[])}time(G){G in this.started&&(0,s.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,s.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let N=0;for(const{name:K}of this.times)N=Math.max(K.length,N);for(const{name:K,start:mt,end:xt}of this.times)G.push(`${K.padEnd(N)} ${xt-mt}ms
`);return G.join("")}}n.StatTimer=O;function k(U,G){try{const{protocol:N}=G?new URL(U,G):new URL(U);return N==="http:"||N==="https:"}catch{return!1}}function u(U){U.preventDefault()}function p(U,G=!1){return new Promise((N,K)=>{const mt=document.createElement("script");mt.src=U,mt.onload=function(xt){G&&mt.remove(),N(xt)},mt.onerror=function(){K(new Error(`Cannot load script at: ${mt.src}`))},(document.head||document.documentElement).append(mt)})}function I(U){console.log("Deprecated API usage: "+U)}let A;class h{static toDateObject(G){if(!G||typeof G!="string")return null;A||(A=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const N=A.exec(G);if(!N)return null;const K=parseInt(N[1],10);let mt=parseInt(N[2],10);mt=mt>=1&&mt<=12?mt-1:0;let xt=parseInt(N[3],10);xt=xt>=1&&xt<=31?xt:1;let Dt=parseInt(N[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let $t=parseInt(N[5],10);$t=$t>=0&&$t<=59?$t:0;let zt=parseInt(N[6],10);zt=zt>=0&&zt<=59?zt:0;const Vt=N[7]||"Z";let qt=parseInt(N[8],10);qt=qt>=0&&qt<=23?qt:0;let Gt=parseInt(N[9],10)||0;return Gt=Gt>=0&&Gt<=59?Gt:0,Vt==="-"?(Dt+=qt,$t+=Gt):Vt==="+"&&(Dt-=qt,$t-=Gt),new Date(Date.UTC(K,mt,xt,Dt,$t,zt))}}n.PDFDateString=h;function j(U,{scale:G=1,rotation:N=0}){const{width:K,height:mt}=U.attributes.style,xt=[0,0,parseInt(K),parseInt(mt)];return new C({viewBox:xt,scale:G,rotation:N})}function b(U){if(U.startsWith("#")){const G=parseInt(U.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(G=>parseInt(G)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,s.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function V(U){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const N of U.keys()){G.style.color=N;const K=window.getComputedStyle(G).color;U.set(N,b(K))}G.remove()}function X(U){const{a:G,b:N,c:K,d:mt,e:xt,f:Dt}=U.getTransform();return[G,N,K,mt,xt,Dt]}function P(U){const{a:G,b:N,c:K,d:mt,e:xt,f:Dt}=U.getTransform().invertSelf();return[G,N,K,mt,xt,Dt]}function Q(U,G,N=!1,K=!0){if(G instanceof C){const{pageWidth:mt,pageHeight:xt}=G.rawDims,{style:Dt}=U,$t=s.FeatureTest.isCSSRoundSupported,zt=`var(--scale-factor) * ${mt}px`,Vt=`var(--scale-factor) * ${xt}px`,qt=$t?`round(${zt}, 1px)`:`calc(${zt})`,Gt=$t?`round(${Vt}, 1px)`:`calc(${Vt})`;!N||G.rotation%180===0?(Dt.width=qt,Dt.height=Gt):(Dt.width=Gt,Dt.height=qt)}K&&U.setAttribute("data-main-rotation",G.rotation)}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var i=r(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(v){return"none"}addHCMFilter(v,B){return"none"}addHighlightHCMFilter(v,B,F,C){return"none"}destroy(v=!1){}}n.BaseFilterFactory=s;class y{constructor(){this.constructor===y&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,B){if(v<=0||B<=0)throw new Error("Invalid canvas size");const F=this._createCanvas(v,B);return{canvas:F,context:F.getContext("2d")}}reset(v,B,F){if(!v.canvas)throw new Error("Canvas is not specified");if(B<=0||F<=0)throw new Error("Invalid canvas size");v.canvas.width=B,v.canvas.height=F}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,B){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=y;class S{constructor({baseUrl:v=null,isCompressed:B=!0}){this.constructor===S&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=B}async fetch({name:v}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const B=this.baseUrl+v+(this.isCompressed?".bcmap":""),F=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(B,F).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${B}`)})}_fetchData(v,B){(0,i.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=S;class J{constructor({baseUrl:v=null}){this.constructor===J&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch({filename:v}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const B=`${this.baseUrl}${v}`;return this._fetchData(B).catch(F=>{throw new Error(`Unable to load font data at: ${B}`)})}_fetchData(v){(0,i.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=J;class T{constructor(){this.constructor===T&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,B,F=!1){if(v<=0||B<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),F||(C.setAttribute("width",`${v}px`),C.setAttribute("height",`${B}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${v} ${B}`),C}createElement(v){if(typeof v!="string")throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,i.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=T},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var i=r(1);const s=3285377520,y=4294901760,S=65535;class J{constructor(E){this.h1=E?E&4294967295:s,this.h2=E?E&4294967295:s}update(E){let v,B;if(typeof E=="string"){v=new Uint8Array(E.length*2),B=0;for(let I=0,A=E.length;I<A;I++){const h=E.charCodeAt(I);h<=255?v[B++]=h:(v[B++]=h>>>8,v[B++]=h&255)}}else if((0,i.isArrayBuffer)(E))v=E.slice(),B=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const F=B>>2,C=B-F*4,w=new Uint32Array(v.buffer,0,F);let _=0,m=0,x=this.h1,D=this.h2;const O=3432918353,k=461845907,u=O&S,p=k&S;for(let I=0;I<F;I++)I&1?(_=w[I],_=_*O&y|_*u&S,_=_<<15|_>>>17,_=_*k&y|_*p&S,x^=_,x=x<<13|x>>>19,x=x*5+3864292196):(m=w[I],m=m*O&y|m*u&S,m=m<<15|m>>>17,m=m*k&y|m*p&S,D^=m,D=D<<13|D>>>19,D=D*5+3864292196);switch(_=0,C){case 3:_^=v[F*4+2]<<16;case 2:_^=v[F*4+1]<<8;case 1:_^=v[F*4],_=_*O&y|_*u&S,_=_<<15|_>>>17,_=_*k&y|_*p&S,F&1?x^=_:D^=_}this.h1=x,this.h2=D}hexdigest(){let E=this.h1,v=this.h2;return E^=v>>>1,E=E*3981806797&y|E*36045&S,v=v*4283543511&y|((v<<16|E>>>16)*2950163797&y)>>>16,E^=v>>>1,E=E*444984403&y|E*60499&S,v=v*3301882366&y|((v<<16|E>>>16)*3120437893&y)>>>16,E^=v>>>1,(E>>>0).toString(16).padStart(8,"0")+(v>>>0).toString(16).padStart(8,"0")}}n.MurmurHash3_64=J},(t,n,r)=>{var S;Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var i=r(1);class s{constructor({ownerDocument:T=globalThis.document,styleElement:E=null}){H(this,S,new Set);this._document=T,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.add(T),this._document.fonts.add(T)}removeNativeFontFace(T){this.nativeFontFaces.delete(T),this._document.fonts.delete(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(T,E.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.clear(),a(this,S).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(T){if(!(!T||a(this,S).has(T.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:E,src:v,style:B}=T,F=new FontFace(E,v,B);this.addNativeFontFace(F);try{await F.load(),a(this,S).add(E)}catch{(0,i.warn)(`Cannot load system font: ${T.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(F)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(T){if(T.attached||T.missingFile&&!T.systemFontInfo)return;if(T.attached=!0,T.systemFontInfo){await this.loadSystemFont(T.systemFontInfo);return}if(this.isFontLoadingAPISupported){const v=T.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(B){throw(0,i.warn)(`Failed to load font '${v.family}': '${B}'.`),T.disableFontFace=!0,B}}return}const E=T.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const B=this._queueLoadingCallback(v);this._prepareFontLoadEvent(T,B)})}}get isFontLoadingAPISupported(){var E;const T=!!((E=this._document)!=null&&E.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function E(){for((0,i.assert)(!B.done,"completeRequest() cannot be called twice."),B.done=!0;v.length>0&&v[0].done;){const F=v.shift();setTimeout(F.callback,0)}}const{loadingRequests:v}=this,B={done:!1,complete:E,callback:T};return v.push(B),B}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,E){function v(b,V){return b.charCodeAt(V)<<24|b.charCodeAt(V+1)<<16|b.charCodeAt(V+2)<<8|b.charCodeAt(V+3)&255}function B(b,V,X,P){const Q=b.substring(0,V),lt=b.substring(V+X);return Q+P+lt}let F,C;const w=this._document.createElement("canvas");w.width=1,w.height=1;const _=w.getContext("2d");let m=0;function x(b,V){if(++m>30){(0,i.warn)("Load test font never loaded."),V();return}if(_.font="30px "+b,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(x.bind(null,b,V))}const D=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=B(O,976,D.length,D);const u=16,p=1482184792;let I=v(O,u);for(F=0,C=D.length-3;F<C;F+=4)I=I-p+v(D,F)|0;F<D.length&&(I=I-p+v(D+"XXX",F)|0),O=B(O,u,4,(0,i.string32)(I));const A=`url(data:font/opentype;base64,${btoa(O)});`,h=`@font-face {font-family:"${D}";src:${A}}`;this.insertRule(h);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const b of[T.loadedName,D]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=b,j.append(V)}this._document.body.append(j),x(D,()=>{j.remove(),E.complete()})}}S=new WeakMap,n.FontLoader=s;class y{constructor(T,{isEvalSupported:E=!0,disableFontFace:v=!1,ignoreErrors:B=!1,inspectFont:F=null}){this.compiledGlyphs=Object.create(null);for(const C in T)this[C]=T[C];this.isEvalSupported=E!==!1,this.disableFontFace=v===!0,this.ignoreErrors=B===!0,this._inspectFont=F}createNativeFontFace(){var E;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return(E=this._inspectFont)==null||E.call(this,this),T}createFontFaceRule(){var B;if(!this.data||this.disableFontFace)return null;const T=(0,i.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(T)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let F=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(F+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${F}src:${E}}`}return(B=this._inspectFont)==null||B.call(this,this,E),v}getPathGenerator(T,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let v;try{v=T.get(this.loadedName+"_path_"+E)}catch(B){if(!this.ignoreErrors)throw B;return(0,i.warn)(`getPathGenerator - ignoring character: "${B}".`),this.compiledGlyphs[E]=function(F,C){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const B=[];for(const F of v){const C=F.args!==void 0?F.args.join(","):"";B.push("c.",F.cmd,"(",C,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",B.join(""))}return this.compiledGlyphs[E]=function(B,F){for(const C of v)C.cmd==="scale"&&(C.args=[F,-F]),B[C.cmd].apply(B,C.args)}}}n.FontFaceObject=y},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var i=r(7);r(1);const s=function(E){return new Promise((v,B)=>{require$$5.readFile(E,(C,w)=>{if(C||!w){B(new Error(C));return}v(new Uint8Array(w))})})};class y extends i.BaseFilterFactory{}n.NodeFilterFactory=y;class S extends i.BaseCanvasFactory{_createCanvas(v,B){return require$$5.createCanvas(v,B)}}n.NodeCanvasFactory=S;class J extends i.BaseCMapReaderFactory{_fetchData(v,B){return s(v).then(F=>({cMapData:F,compressionType:B}))}}n.NodeCMapReaderFactory=J;class T extends i.BaseStandardFontDataFactory{_fetchData(v){return s(v)}}n.NodeStandardFontDataFactory=T},(t,n,r)=>{var Y,en,bt,nn;Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var i=r(1),s=r(6),y=r(12),S=r(13);const J=16,T=100,E=4096,v=15,B=10,F=1e3,C=16;function w(L,o){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){o.save(),this.__originalSave()},L.restore=function(){o.restore(),this.__originalRestore()},L.translate=function(c,f){o.translate(c,f),this.__originalTranslate(c,f)},L.scale=function(c,f){o.scale(c,f),this.__originalScale(c,f)},L.transform=function(c,f,g,M,$,q){o.transform(c,f,g,M,$,q),this.__originalTransform(c,f,g,M,$,q)},L.setTransform=function(c,f,g,M,$,q){o.setTransform(c,f,g,M,$,q),this.__originalSetTransform(c,f,g,M,$,q)},L.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},L.rotate=function(c){o.rotate(c),this.__originalRotate(c)},L.clip=function(c){o.clip(c),this.__originalClip(c)},L.moveTo=function(d,c){o.moveTo(d,c),this.__originalMoveTo(d,c)},L.lineTo=function(d,c){o.lineTo(d,c),this.__originalLineTo(d,c)},L.bezierCurveTo=function(d,c,f,g,M,$){o.bezierCurveTo(d,c,f,g,M,$),this.__originalBezierCurveTo(d,c,f,g,M,$)},L.rect=function(d,c,f,g){o.rect(d,c,f,g),this.__originalRect(d,c,f,g)},L.closePath=function(){o.closePath(),this.__originalClosePath()},L.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}class _{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,d,c){let f;return this.cache[o]!==void 0?(f=this.cache[o],this.canvasFactory.reset(f,d,c)):(f=this.canvasFactory.create(d,c),this.cache[o]=f),f}delete(o){delete this.cache[o]}clear(){for(const o in this.cache){const d=this.cache[o];this.canvasFactory.destroy(d),delete this.cache[o]}}}function m(L,o,d,c,f,g,M,$,q,at){const[it,pt,vt,_t,gt,Rt]=(0,s.getCurrentTransform)(L);if(pt===0&&vt===0){const Ot=M*it+gt,U=Math.round(Ot),G=$*_t+Rt,N=Math.round(G),K=(M+q)*it+gt,mt=Math.abs(Math.round(K)-U)||1,xt=($+at)*_t+Rt,Dt=Math.abs(Math.round(xt)-N)||1;return L.setTransform(Math.sign(it),0,0,Math.sign(_t),U,N),L.drawImage(o,d,c,f,g,0,0,mt,Dt),L.setTransform(it,pt,vt,_t,gt,Rt),[mt,Dt]}if(it===0&&_t===0){const Ot=$*vt+gt,U=Math.round(Ot),G=M*pt+Rt,N=Math.round(G),K=($+at)*vt+gt,mt=Math.abs(Math.round(K)-U)||1,xt=(M+q)*pt+Rt,Dt=Math.abs(Math.round(xt)-N)||1;return L.setTransform(0,Math.sign(pt),Math.sign(vt),0,U,N),L.drawImage(o,d,c,f,g,0,0,Dt,mt),L.setTransform(it,pt,vt,_t,gt,Rt),[Dt,mt]}L.drawImage(o,d,c,f,g,M,$,q,at);const Lt=Math.hypot(it,pt),Tt=Math.hypot(vt,_t);return[Lt*q,Tt*at]}function x(L){const{width:o,height:d}=L;if(o>F||d>F)return null;const c=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),g=o+1;let M=new Uint8Array(g*(d+1)),$,q,at;const it=o+7&-8;let pt=new Uint8Array(it*d),vt=0;for(const Tt of L.data){let Ot=128;for(;Ot>0;)pt[vt++]=Tt&Ot?0:255,Ot>>=1}let _t=0;for(vt=0,pt[vt]!==0&&(M[0]=1,++_t),q=1;q<o;q++)pt[vt]!==pt[vt+1]&&(M[q]=pt[vt]?2:1,++_t),vt++;for(pt[vt]!==0&&(M[q]=2,++_t),$=1;$<d;$++){vt=$*it,at=$*g,pt[vt-it]!==pt[vt]&&(M[at]=pt[vt]?1:8,++_t);let Tt=(pt[vt]?4:0)+(pt[vt-it]?8:0);for(q=1;q<o;q++)Tt=(Tt>>2)+(pt[vt+1]?4:0)+(pt[vt-it+1]?8:0),f[Tt]&&(M[at+q]=f[Tt],++_t),vt++;if(pt[vt-it]!==pt[vt]&&(M[at+q]=pt[vt]?2:4,++_t),_t>c)return null}for(vt=it*(d-1),at=$*g,pt[vt]!==0&&(M[at]=8,++_t),q=1;q<o;q++)pt[vt]!==pt[vt+1]&&(M[at+q]=pt[vt]?4:8,++_t),vt++;if(pt[vt]!==0&&(M[at+q]=4,++_t),_t>c)return null;const gt=new Int32Array([0,g,-1,0,-g,0,0,0,1]),Rt=new Path2D;for($=0;_t&&$<=d;$++){let Tt=$*g;const Ot=Tt+o;for(;Tt<Ot&&!M[Tt];)Tt++;if(Tt===Ot)continue;Rt.moveTo(Tt%g,$);const U=Tt;let G=M[Tt];do{const N=gt[G];do Tt+=N;while(!M[Tt]);const K=M[Tt];K!==5&&K!==10?(G=K,M[Tt]=0):(G=K&51*G>>4,M[Tt]&=G>>2|G<<2),Rt.lineTo(Tt%g,Tt/g|0),M[Tt]||--_t}while(U!==Tt);--$}return pt=null,M=null,function(Tt){Tt.save(),Tt.scale(1/o,-1/d),Tt.translate(0,-d),Tt.fill(Rt),Tt.beginPath(),Tt.restore()}}class D{constructor(o,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,o,d])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,d){this.x=o,this.y=d}updatePathMinMax(o,d,c){[d,c]=i.Util.applyTransform([d,c],o),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,c)}updateRectMinMax(o,d){const c=i.Util.applyTransform(d,o),f=i.Util.applyTransform(d.slice(2),o);this.minX=Math.min(this.minX,c[0],f[0]),this.minY=Math.min(this.minY,c[1],f[1]),this.maxX=Math.max(this.maxX,c[0],f[0]),this.maxY=Math.max(this.maxY,c[1],f[1])}updateScalingPathMinMax(o,d){i.Util.scaleMinMax(o,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(o,d,c,f,g,M,$,q,at,it){const pt=i.Util.bezierBoundingBox(d,c,f,g,M,$,q,at);if(it){it[0]=Math.min(it[0],pt[0],pt[2]),it[1]=Math.max(it[1],pt[0],pt[2]),it[2]=Math.min(it[2],pt[1],pt[3]),it[3]=Math.max(it[3],pt[1],pt[3]);return}this.updateRectMinMax(o,pt)}getPathBoundingBox(o=y.PathType.FILL,d=null){const c=[this.minX,this.minY,this.maxX,this.maxY];if(o===y.PathType.STROKE){d||(0,i.unreachable)("Stroke bounding box must include transform.");const f=i.Util.singularValueDecompose2dScale(d),g=f[0]*this.lineWidth/2,M=f[1]*this.lineWidth/2;c[0]-=g,c[1]-=M,c[2]+=g,c[3]+=M}return c}updateClipFromPath(){const o=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=y.PathType.FILL,d=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(o,d))}}function O(L,o){if(typeof ImageData<"u"&&o instanceof ImageData){L.putImageData(o,0,0);return}const d=o.height,c=o.width,f=d%C,g=(d-f)/C,M=f===0?g:g+1,$=L.createImageData(c,C);let q=0,at;const it=o.data,pt=$.data;let vt,_t,gt,Rt;if(o.kind===i.ImageKind.GRAYSCALE_1BPP){const Lt=it.byteLength,Tt=new Uint32Array(pt.buffer,0,pt.byteLength>>2),Ot=Tt.length,U=c+7>>3,G=4294967295,N=i.FeatureTest.isLittleEndian?4278190080:255;for(vt=0;vt<M;vt++){for(gt=vt<g?C:f,at=0,_t=0;_t<gt;_t++){const K=Lt-q;let mt=0;const xt=K>U?c:K*8-7,Dt=xt&-8;let $t=0,zt=0;for(;mt<Dt;mt+=8)zt=it[q++],Tt[at++]=zt&128?G:N,Tt[at++]=zt&64?G:N,Tt[at++]=zt&32?G:N,Tt[at++]=zt&16?G:N,Tt[at++]=zt&8?G:N,Tt[at++]=zt&4?G:N,Tt[at++]=zt&2?G:N,Tt[at++]=zt&1?G:N;for(;mt<xt;mt++)$t===0&&(zt=it[q++],$t=128),Tt[at++]=zt&$t?G:N,$t>>=1}for(;at<Ot;)Tt[at++]=0;L.putImageData($,0,vt*C)}}else if(o.kind===i.ImageKind.RGBA_32BPP){for(_t=0,Rt=c*C*4,vt=0;vt<g;vt++)pt.set(it.subarray(q,q+Rt)),q+=Rt,L.putImageData($,0,_t),_t+=C;vt<M&&(Rt=c*f*4,pt.set(it.subarray(q,q+Rt)),L.putImageData($,0,_t))}else if(o.kind===i.ImageKind.RGB_24BPP)for(gt=C,Rt=c*gt,vt=0;vt<M;vt++){for(vt>=g&&(gt=f,Rt=c*gt),at=0,_t=Rt;_t--;)pt[at++]=it[q++],pt[at++]=it[q++],pt[at++]=it[q++],pt[at++]=255;L.putImageData($,0,vt*C)}else throw new Error(`bad image kind: ${o.kind}`)}function k(L,o){if(o.bitmap){L.drawImage(o.bitmap,0,0);return}const d=o.height,c=o.width,f=d%C,g=(d-f)/C,M=f===0?g:g+1,$=L.createImageData(c,C);let q=0;const at=o.data,it=$.data;for(let pt=0;pt<M;pt++){const vt=pt<g?C:f;({srcPos:q}=(0,S.convertBlackAndWhiteToRGBA)({src:at,srcPos:q,dest:it,width:c,height:vt,nonBlackColor:0})),L.putImageData($,0,pt*C)}}function u(L,o){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const c of d)L[c]!==void 0&&(o[c]=L[c]);L.setLineDash!==void 0&&(o.setLineDash(L.getLineDash()),o.lineDashOffset=L.lineDashOffset)}function p(L){if(L.strokeStyle=L.fillStyle="#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0),!i.isNodeJS){const{filter:o}=L;o!=="none"&&o!==""&&(L.filter="none")}}function I(L,o,d,c){const f=L.length;for(let g=3;g<f;g+=4){const M=L[g];if(M===0)L[g-3]=o,L[g-2]=d,L[g-1]=c;else if(M<255){const $=255-M;L[g-3]=L[g-3]*M+o*$>>8,L[g-2]=L[g-2]*M+d*$>>8,L[g-1]=L[g-1]*M+c*$>>8}}}function A(L,o,d){const c=L.length,f=1/255;for(let g=3;g<c;g+=4){const M=d?d[L[g]]:L[g];o[g]=o[g]*M*f|0}}function h(L,o,d){const c=L.length;for(let f=3;f<c;f+=4){const g=L[f-3]*77+L[f-2]*152+L[f-1]*28;o[f]=d?o[f]*d[g>>8]>>8:o[f]*g>>16}}function j(L,o,d,c,f,g,M,$,q,at,it){const pt=!!g,vt=pt?g[0]:0,_t=pt?g[1]:0,gt=pt?g[2]:0,Rt=f==="Luminosity"?h:A,Tt=Math.min(c,Math.ceil(1048576/d));for(let Ot=0;Ot<c;Ot+=Tt){const U=Math.min(Tt,c-Ot),G=L.getImageData($-at,Ot+(q-it),d,U),N=o.getImageData($,Ot+q,d,U);pt&&I(G.data,vt,_t,gt),Rt(G.data,N.data,M),o.putImageData(N,$,Ot+q)}}function b(L,o,d,c){const f=c[0],g=c[1],M=c[2]-f,$=c[3]-g;M===0||$===0||(j(o.context,d,M,$,o.subtype,o.backdrop,o.transferMap,f,g,o.offsetX,o.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(d.canvas,0,0),L.restore())}function V(L,o){const d=i.Util.singularValueDecompose2dScale(L);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const c=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:d[0]<=c||d[1]<=c}const X=["butt","round","square"],P=["miter","round","bevel"],Q={},lt={},At=class At{constructor(o,d,c,f,g,{optionalContentConfig:M,markedContentStack:$=null},q,at){H(this,Y);H(this,bt);this.ctx=o,this.current=new D(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=c,this.canvasFactory=f,this.filterFactory=g,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$||[],this.optionalContentConfig=M,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=at,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,d=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):d}beginDrawing({transform:o,viewport:d,transparency:c=!1,background:f=null}){const g=this.ctx.canvas.width,M=this.ctx.canvas.height,$=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,g,M),this.ctx.fillStyle=$,c){const q=this.cachedCanvases.getCanvas("transparent",g,M);this.compositeCtx=this.ctx,this.transparentCanvas=q.canvas,this.ctx=q.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),p(this.ctx),o&&(this.ctx.transform(...o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(o,d,c,f){const g=o.argsArray,M=o.fnArray;let $=d||0;const q=g.length;if(q===$)return $;const at=q-$>B&&typeof c=="function",it=at?Date.now()+v:0;let pt=0;const vt=this.commonObjs,_t=this.objs;let gt;for(;;){if(f!==void 0&&$===f.nextBreakPoint)return f.breakIt($,c),$;if(gt=M[$],gt!==i.OPS.dependency)this[gt].apply(this,g[$]);else for(const Rt of g[$]){const Lt=Rt.startsWith("g_")?vt:_t;if(!Lt.has(Rt))return Lt.get(Rt,c),$}if($++,$===q)return $;if(at&&++pt>B){if(Date.now()>it)return c(),$;pt=0}}}endDrawing(){et(this,Y,en).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const o of this._cachedBitmapsMap.values()){for(const d of o.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);o.clear()}this._cachedBitmapsMap.clear(),et(this,bt,nn).call(this)}_scaleImage(o,d){const c=o.width,f=o.height;let g=Math.max(Math.hypot(d[0],d[1]),1),M=Math.max(Math.hypot(d[2],d[3]),1),$=c,q=f,at="prescale1",it,pt;for(;g>2&&$>1||M>2&&q>1;){let vt=$,_t=q;g>2&&$>1&&(vt=$>=16384?Math.floor($/2)-1||1:Math.ceil($/2),g/=$/vt),M>2&&q>1&&(_t=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q)/2,M/=q/_t),it=this.cachedCanvases.getCanvas(at,vt,_t),pt=it.context,pt.clearRect(0,0,vt,_t),pt.drawImage(o,0,0,$,q,0,0,vt,_t),o=it.canvas,$=vt,q=_t,at=at==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:$,paintHeight:q}}_createMaskCanvas(o){const d=this.ctx,{width:c,height:f}=o,g=this.current.fillColor,M=this.current.patternFill,$=(0,s.getCurrentTransform)(d);let q,at,it,pt;if((o.bitmap||o.data)&&o.count>1){const mt=o.bitmap||o.data.buffer;at=JSON.stringify(M?$:[$.slice(0,4),g]),q=this._cachedBitmapsMap.get(mt),q||(q=new Map,this._cachedBitmapsMap.set(mt,q));const xt=q.get(at);if(xt&&!M){const Dt=Math.round(Math.min($[0],$[2])+$[4]),$t=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:xt,offsetX:Dt,offsetY:$t}}it=xt}it||(pt=this.cachedCanvases.getCanvas("maskCanvas",c,f),k(pt.context,o));let vt=i.Util.transform($,[1/c,0,0,-1/f,0,0]);vt=i.Util.transform(vt,[1,0,0,1,0,-f]);const _t=i.Util.applyTransform([0,0],vt),gt=i.Util.applyTransform([c,f],vt),Rt=i.Util.normalizeRect([_t[0],_t[1],gt[0],gt[1]]),Lt=Math.round(Rt[2]-Rt[0])||1,Tt=Math.round(Rt[3]-Rt[1])||1,Ot=this.cachedCanvases.getCanvas("fillCanvas",Lt,Tt),U=Ot.context,G=Math.min(_t[0],gt[0]),N=Math.min(_t[1],gt[1]);U.translate(-G,-N),U.transform(...vt),it||(it=this._scaleImage(pt.canvas,(0,s.getCurrentTransformInverse)(U)),it=it.img,q&&M&&q.set(at,it)),U.imageSmoothingEnabled=V((0,s.getCurrentTransform)(U),o.interpolate),m(U,it,0,0,it.width,it.height,0,0,c,f),U.globalCompositeOperation="source-in";const K=i.Util.transform((0,s.getCurrentTransformInverse)(U),[1,0,0,1,-G,-N]);return U.fillStyle=M?g.getPattern(d,this,K,y.PathType.FILL):g,U.fillRect(0,0,c,f),q&&!M&&(this.cachedCanvases.delete("fillCanvas"),q.set(at,Ot.canvas)),{canvas:Ot.canvas,offsetX:Math.round(G),offsetY:Math.round(N)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=X[o]}setLineJoin(o){this.ctx.lineJoin=P[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,d){const c=this.ctx;c.setLineDash!==void 0&&(c.setLineDash(o),c.lineDashOffset=d)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[d,c]of o)switch(d){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c[0],c[1]);break;case"CA":this.current.strokeAlpha=c;break;case"ca":this.current.fillAlpha=c,this.ctx.globalAlpha=c;break;case"BM":this.ctx.globalCompositeOperation=c;break;case"SMask":this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,d=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(c,o,d);this.suspendedCtx=this.ctx,this.ctx=f.context;const g=this.ctx;g.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,g),w(g,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,c=this.suspendedCtx;b(c,d,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(o,d,c,f,g,M){this.ctx.transform(o,d,c,f,g,M),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(o,d,c){const f=this.ctx,g=this.current;let M=g.x,$=g.y,q,at;const it=(0,s.getCurrentTransform)(f),pt=it[0]===0&&it[3]===0||it[1]===0&&it[2]===0,vt=pt?c.slice(0):null;for(let _t=0,gt=0,Rt=o.length;_t<Rt;_t++)switch(o[_t]|0){case i.OPS.rectangle:M=d[gt++],$=d[gt++];const Lt=d[gt++],Tt=d[gt++],Ot=M+Lt,U=$+Tt;f.moveTo(M,$),Lt===0||Tt===0?f.lineTo(Ot,U):(f.lineTo(Ot,$),f.lineTo(Ot,U),f.lineTo(M,U)),pt||g.updateRectMinMax(it,[M,$,Ot,U]),f.closePath();break;case i.OPS.moveTo:M=d[gt++],$=d[gt++],f.moveTo(M,$),pt||g.updatePathMinMax(it,M,$);break;case i.OPS.lineTo:M=d[gt++],$=d[gt++],f.lineTo(M,$),pt||g.updatePathMinMax(it,M,$);break;case i.OPS.curveTo:q=M,at=$,M=d[gt+4],$=d[gt+5],f.bezierCurveTo(d[gt],d[gt+1],d[gt+2],d[gt+3],M,$),g.updateCurvePathMinMax(it,q,at,d[gt],d[gt+1],d[gt+2],d[gt+3],M,$,vt),gt+=6;break;case i.OPS.curveTo2:q=M,at=$,f.bezierCurveTo(M,$,d[gt],d[gt+1],d[gt+2],d[gt+3]),g.updateCurvePathMinMax(it,q,at,M,$,d[gt],d[gt+1],d[gt+2],d[gt+3],vt),M=d[gt+2],$=d[gt+3],gt+=4;break;case i.OPS.curveTo3:q=M,at=$,M=d[gt+2],$=d[gt+3],f.bezierCurveTo(d[gt],d[gt+1],M,$,M,$),g.updateCurvePathMinMax(it,q,at,d[gt],d[gt+1],M,$,M,$,vt),gt+=4;break;case i.OPS.closePath:f.closePath();break}pt&&g.updateScalingPathMinMax(it,vt),g.setCurrentPoint(M,$)}closePath(){this.ctx.closePath()}stroke(o=!0){const d=this.ctx,c=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof c=="object"&&(c!=null&&c.getPattern)?(d.save(),d.strokeStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o=!0){const d=this.ctx,c=this.current.fillColor,f=this.current.patternFill;let g=!1;f&&(d.save(),d.fillStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.FILL),g=!0);const M=this.current.getClippedPathBoundingBox();this.contentVisible&&M!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),g&&d.restore(),o&&this.consumePath(M)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Q}eoClip(){this.pendingClip=lt}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,d=this.ctx;if(o===void 0){d.beginPath();return}d.save(),d.beginPath();for(const c of o)d.setTransform(...c.transform),d.translate(c.x,c.y),c.addToPath(d,c.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,d){var it;const c=this.commonObjs.get(o),f=this.current;if(!c)throw new Error(`Can't find font for ${o}`);if(f.fontMatrix=c.fontMatrix||i.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+o),d<0?(d=-d,f.fontDirection=-1):f.fontDirection=1,this.current.font=c,this.current.fontSize=d,c.isType3Font)return;const g=c.loadedName||"sans-serif",M=((it=c.systemFontInfo)==null?void 0:it.css)||`"${g}", ${c.fallbackName}`;let $="normal";c.black?$="900":c.bold&&($="bold");const q=c.italic?"italic":"normal";let at=d;d<J?at=J:d>T&&(at=T),this.current.fontSizeScale=d/at,this.ctx.font=`${q} ${$} ${at}px ${M}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,d){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=d}setLeadingMoveText(o,d){this.setLeading(-d),this.moveText(o,d)}setTextMatrix(o,d,c,f,g,M){this.current.textMatrix=[o,d,c,f,g,M],this.current.textMatrixScale=Math.hypot(o,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,d,c,f){const g=this.ctx,M=this.current,$=M.font,q=M.textRenderingMode,at=M.fontSize/M.fontSizeScale,it=q&i.TextRenderingMode.FILL_STROKE_MASK,pt=!!(q&i.TextRenderingMode.ADD_TO_PATH_FLAG),vt=M.patternFill&&!$.missingFile;let _t;($.disableFontFace||pt||vt)&&(_t=$.getPathGenerator(this.commonObjs,o)),$.disableFontFace||vt?(g.save(),g.translate(d,c),g.beginPath(),_t(g,at),f&&g.setTransform(...f),(it===i.TextRenderingMode.FILL||it===i.TextRenderingMode.FILL_STROKE)&&g.fill(),(it===i.TextRenderingMode.STROKE||it===i.TextRenderingMode.FILL_STROKE)&&g.stroke(),g.restore()):((it===i.TextRenderingMode.FILL||it===i.TextRenderingMode.FILL_STROKE)&&g.fillText(o,d,c),(it===i.TextRenderingMode.STROKE||it===i.TextRenderingMode.FILL_STROKE)&&g.strokeText(o,d,c)),pt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(g),x:d,y:c,fontSize:at,addToPath:_t})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const d=o.getImageData(0,0,10,10).data;let c=!1;for(let f=3;f<d.length;f+=4)if(d[f]>0&&d[f]<255){c=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",c)}showText(o){const d=this.current,c=d.font;if(c.isType3Font)return this.showType3Text(o);const f=d.fontSize;if(f===0)return;const g=this.ctx,M=d.fontSizeScale,$=d.charSpacing,q=d.wordSpacing,at=d.fontDirection,it=d.textHScale*at,pt=o.length,vt=c.vertical,_t=vt?1:-1,gt=c.defaultVMetrics,Rt=f*d.fontMatrix[0],Lt=d.textRenderingMode===i.TextRenderingMode.FILL&&!c.disableFontFace&&!d.patternFill;g.save(),g.transform(...d.textMatrix),g.translate(d.x,d.y+d.textRise),at>0?g.scale(it,-1):g.scale(it,1);let Tt;if(d.patternFill){g.save();const K=d.fillColor.getPattern(g,this,(0,s.getCurrentTransformInverse)(g),y.PathType.FILL);Tt=(0,s.getCurrentTransform)(g),g.restore(),g.fillStyle=K}let Ot=d.lineWidth;const U=d.textMatrixScale;if(U===0||Ot===0){const K=d.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(K===i.TextRenderingMode.STROKE||K===i.TextRenderingMode.FILL_STROKE)&&(Ot=this.getSinglePixelWidth())}else Ot/=U;if(M!==1&&(g.scale(M,M),Ot/=M),g.lineWidth=Ot,c.isInvalidPDFjsFont){const K=[];let mt=0;for(const xt of o)K.push(xt.unicode),mt+=xt.width;g.fillText(K.join(""),0,0),d.x+=mt*Rt*it,g.restore(),this.compose();return}let G=0,N;for(N=0;N<pt;++N){const K=o[N];if(typeof K=="number"){G+=_t*K*f/1e3;continue}let mt=!1;const xt=(K.isSpace?q:0)+$,Dt=K.fontChar,$t=K.accent;let zt,Vt,qt=K.width;if(vt){const Kt=K.vmetric||gt,yt=-(K.vmetric?Kt[1]:qt*.5)*Rt,st=Kt[2]*Rt;qt=Kt?-Kt[0]:qt,zt=yt/M,Vt=(G+st)/M}else zt=G/M,Vt=0;if(c.remeasure&&qt>0){const Kt=g.measureText(Dt).width*1e3/f*M;if(qt<Kt&&this.isFontSubpixelAAEnabled){const yt=qt/Kt;mt=!0,g.save(),g.scale(yt,1),zt/=yt}else qt!==Kt&&(zt+=(qt-Kt)/2e3*f/M)}if(this.contentVisible&&(K.isInFont||c.missingFile)){if(Lt&&!$t)g.fillText(Dt,zt,Vt);else if(this.paintChar(Dt,zt,Vt,Tt),$t){const Kt=zt+f*$t.offset.x/M,yt=Vt-f*$t.offset.y/M;this.paintChar($t.fontChar,Kt,yt,Tt)}}const Gt=vt?qt*Rt-xt*at:qt*Rt+xt*at;G+=Gt,mt&&g.restore()}vt?d.y-=G:d.x+=G*it,g.restore(),this.compose()}showType3Text(o){const d=this.ctx,c=this.current,f=c.font,g=c.fontSize,M=c.fontDirection,$=f.vertical?1:-1,q=c.charSpacing,at=c.wordSpacing,it=c.textHScale*M,pt=c.fontMatrix||i.FONT_IDENTITY_MATRIX,vt=o.length,_t=c.textRenderingMode===i.TextRenderingMode.INVISIBLE;let gt,Rt,Lt,Tt;if(!(_t||g===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...c.textMatrix),d.translate(c.x,c.y),d.scale(it,M),gt=0;gt<vt;++gt){if(Rt=o[gt],typeof Rt=="number"){Tt=$*Rt*g/1e3,this.ctx.translate(Tt,0),c.x+=Tt*it;continue}const Ot=(Rt.isSpace?at:0)+q,U=f.charProcOperatorList[Rt.operatorListId];if(!U){(0,i.warn)(`Type3 character "${Rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Rt,this.save(),d.scale(g,g),d.transform(...pt),this.executeOperatorList(U),this.restore()),Lt=i.Util.applyTransform([Rt.width,0],pt)[0]*g+Ot,d.translate(Lt,0),c.x+=Lt*it}d.restore(),this.processingType3=null}}setCharWidth(o,d){}setCharWidthAndBounds(o,d,c,f,g,M){this.ctx.rect(c,f,g-c,M-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let d;if(o[0]==="TilingPattern"){const c=o[1],f=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),g={createCanvasGraphics:M=>new At(M,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new y.TilingPattern(o,c,this.ctx,g,f)}else d=this._getPattern(o[1],o[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,d,c){const f=i.Util.makeHexColor(o,d,c);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(o,d,c){const f=i.Util.makeHexColor(o,d,c);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(o,d=null){let c;return this.cachedPatterns.has(o)?c=this.cachedPatterns.get(o):(c=(0,y.getShadingPattern)(this.getObject(o)),this.cachedPatterns.set(o,c)),d&&(c.matrix=d),c}shadingFill(o){if(!this.contentVisible)return;const d=this.ctx;this.save();const c=this._getPattern(o);d.fillStyle=c.getPattern(d,this,(0,s.getCurrentTransformInverse)(d),y.PathType.SHADING);const f=(0,s.getCurrentTransformInverse)(d);if(f){const{width:g,height:M}=d.canvas,[$,q,at,it]=i.Util.getAxialAlignedBoundingBox([0,0,g,M],f);this.ctx.fillRect($,q,at-$,it-q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform(...o),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),d)){const c=d[2]-d[0],f=d[3]-d[1];this.ctx.rect(d[0],d[1],c,f),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;o.isolated||(0,i.info)("TODO: Support non-isolated groups."),o.knockout&&(0,i.warn)("Knockout groups not supported.");const c=(0,s.getCurrentTransform)(d);if(o.matrix&&d.transform(...o.matrix),!o.bbox)throw new Error("Bounding box is required.");let f=i.Util.getAxialAlignedBoundingBox(o.bbox,(0,s.getCurrentTransform)(d));const g=[0,0,d.canvas.width,d.canvas.height];f=i.Util.intersect(f,g)||[0,0,0,0];const M=Math.floor(f[0]),$=Math.floor(f[1]);let q=Math.max(Math.ceil(f[2])-M,1),at=Math.max(Math.ceil(f[3])-$,1),it=1,pt=1;q>E&&(it=q/E,q=E),at>E&&(pt=at/E,at=E),this.current.startNewPathAndClipBox([0,0,q,at]);let vt="groupAt"+this.groupLevel;o.smask&&(vt+="_smask_"+this.smaskCounter++%2);const _t=this.cachedCanvases.getCanvas(vt,q,at),gt=_t.context;gt.scale(1/it,1/pt),gt.translate(-M,-$),gt.transform(...c),o.smask?this.smaskStack.push({canvas:_t.canvas,context:gt,offsetX:M,offsetY:$,scaleX:it,scaleY:pt,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(M,$),d.scale(it,pt),d.save()),u(d,gt),this.ctx=gt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const g=i.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],f);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(g)}}beginAnnotation(o,d,c,f,g){if(et(this,Y,en).call(this),p(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const M=d[2]-d[0],$=d[3]-d[1];if(g&&this.annotationCanvasMap){c=c.slice(),c[4]-=d[0],c[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=M,d[3]=$;const[q,at]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:it}=this,pt=Math.ceil(M*this.outputScaleX*it),vt=Math.ceil($*this.outputScaleY*it);this.annotationCanvas=this.canvasFactory.create(pt,vt);const{canvas:_t,context:gt}=this.annotationCanvas;this.annotationCanvasMap.set(o,_t),this.annotationCanvas.savedCtx=this.ctx,this.ctx=gt,this.ctx.save(),this.ctx.setTransform(q,0,0,-at,0,$*at),p(this.ctx)}else p(this.ctx),this.ctx.rect(d[0],d[1],M,$),this.ctx.clip(),this.endPath()}this.current=new D(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...c),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),et(this,bt,nn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(o){if(!this.contentVisible)return;const d=o.count;o=this.getObject(o.data,o),o.count=d;const c=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=x(o)),f.compiled)){f.compiled(c);return}const g=this._createMaskCanvas(o),M=g.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(M,g.offsetX,g.offsetY),c.restore(),this.compose()}paintImageMaskXObjectRepeat(o,d,c=0,f=0,g,M){if(!this.contentVisible)return;o=this.getObject(o.data,o);const $=this.ctx;$.save();const q=(0,s.getCurrentTransform)($);$.transform(d,c,f,g,0,0);const at=this._createMaskCanvas(o);$.setTransform(1,0,0,1,at.offsetX-q[4],at.offsetY-q[5]);for(let it=0,pt=M.length;it<pt;it+=2){const vt=i.Util.transform(q,[d,c,f,g,M[it],M[it+1]]),[_t,gt]=i.Util.applyTransform([0,0],vt);$.drawImage(at.canvas,_t,gt)}$.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const d=this.ctx,c=this.current.fillColor,f=this.current.patternFill;for(const g of o){const{data:M,width:$,height:q,transform:at}=g,it=this.cachedCanvases.getCanvas("maskCanvas",$,q),pt=it.context;pt.save();const vt=this.getObject(M,g);k(pt,vt),pt.globalCompositeOperation="source-in",pt.fillStyle=f?c.getPattern(pt,this,(0,s.getCurrentTransformInverse)(d),y.PathType.FILL):c,pt.fillRect(0,0,$,q),pt.restore(),d.save(),d.transform(...at),d.scale(1,-1),m(d,it.canvas,0,0,$,q,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const d=this.getObject(o);if(!d){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(o,d,c,f){if(!this.contentVisible)return;const g=this.getObject(o);if(!g){(0,i.warn)("Dependent image isn't ready yet");return}const M=g.width,$=g.height,q=[];for(let at=0,it=f.length;at<it;at+=2)q.push({transform:[d,0,0,c,f[at],f[at+1]],x:0,y:0,w:M,h:$});this.paintInlineImageXObjectGroup(g,q)}applyTransferMapsToCanvas(o){return this.current.transferMaps!=="none"&&(o.filter=this.current.transferMaps,o.drawImage(o.canvas,0,0),o.filter="none"),o.canvas}applyTransferMapsToBitmap(o){if(this.current.transferMaps==="none")return o.bitmap;const{bitmap:d,width:c,height:f}=o,g=this.cachedCanvases.getCanvas("inlineImage",c,f),M=g.context;return M.filter=this.current.transferMaps,M.drawImage(d,0,0),M.filter="none",g.canvas}paintInlineImageXObject(o){if(!this.contentVisible)return;const d=o.width,c=o.height,f=this.ctx;if(this.save(),!i.isNodeJS){const{filter:$}=f;$!=="none"&&$!==""&&(f.filter="none")}f.scale(1/d,-1/c);let g;if(o.bitmap)g=this.applyTransferMapsToBitmap(o);else if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)g=o;else{const q=this.cachedCanvases.getCanvas("inlineImage",d,c).context;O(q,o),g=this.applyTransferMapsToCanvas(q)}const M=this._scaleImage(g,(0,s.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=V((0,s.getCurrentTransform)(f),o.interpolate),m(f,M.img,0,0,M.paintWidth,M.paintHeight,0,-c,d,c),this.compose(),this.restore()}paintInlineImageXObjectGroup(o,d){if(!this.contentVisible)return;const c=this.ctx;let f;if(o.bitmap)f=o.bitmap;else{const g=o.width,M=o.height,q=this.cachedCanvases.getCanvas("inlineImage",g,M).context;O(q,o),f=this.applyTransferMapsToCanvas(q)}for(const g of d)c.save(),c.transform(...g.transform),c.scale(1,-1),m(c,f,g.x,g.y,g.w,g.h,0,-1,1,1),c.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,d){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,d){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const c=this.ctx;this.pendingClip&&(d||(this.pendingClip===lt?c.clip("evenodd"):c.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const o=(0,s.getCurrentTransform)(this.ctx);if(o[1]===0&&o[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{const d=Math.abs(o[0]*o[3]-o[2]*o[1]),c=Math.hypot(o[0],o[2]),f=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(c,f)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:o}=this.current,{a:d,b:c,c:f,d:g}=this.ctx.getTransform();let M,$;if(c===0&&f===0){const q=Math.abs(d),at=Math.abs(g);if(q===at)if(o===0)M=$=1/q;else{const it=q*o;M=$=it<1?1/it:1}else if(o===0)M=1/q,$=1/at;else{const it=q*o,pt=at*o;M=it<1?1/it:1,$=pt<1?1/pt:1}}else{const q=Math.abs(d*g-c*f),at=Math.hypot(d,c),it=Math.hypot(f,g);if(o===0)M=it/q,$=at/q;else{const pt=o*q;M=it>pt?it/pt:1,$=at>pt?at/pt:1}}this._cachedScaleForStroking[0]=M,this._cachedScaleForStroking[1]=$}return this._cachedScaleForStroking}rescaleAndStroke(o){const{ctx:d}=this,{lineWidth:c}=this.current,[f,g]=this.getScaleForStroking();if(d.lineWidth=c||1,f===1&&g===1){d.stroke();return}const M=d.getLineDash();if(o&&d.save(),d.scale(f,g),M.length>0){const $=Math.max(f,g);d.setLineDash(M.map(q=>q/$)),d.lineDashOffset/=$}d.stroke(),o&&d.restore()}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}};Y=new WeakSet,en=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},bt=new WeakSet,nn=function(){if(this.pageColors){const o=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(o!=="none"){const d=this.ctx.filter;this.ctx.filter=o,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let ut=At;n.CanvasGraphics=ut;for(const L in i.OPS)ut.prototype[L]!==void 0&&(ut.prototype[i.OPS[L]]=ut.prototype[L])},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=C;var i=r(1),s=r(6);const y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=y;function S(x,D){if(!D)return;const O=D[2]-D[0],k=D[3]-D[1],u=new Path2D;u.rect(D[0],D[1],O,k),x.clip(u)}class J{constructor(){this.constructor===J&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class T extends J{constructor(D){super(),this._type=D[1],this._bbox=D[2],this._colorStops=D[3],this._p0=D[4],this._p1=D[5],this._r0=D[6],this._r1=D[7],this.matrix=null}_createGradient(D){let O;this._type==="axial"?O=D.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=D.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)O.addColorStop(k[0],k[1]);return O}getPattern(D,O,k,u){let p;if(u===y.STROKE||u===y.FILL){const I=O.current.getClippedPathBoundingBox(u,(0,s.getCurrentTransform)(D))||[0,0,0,0],A=Math.ceil(I[2]-I[0])||1,h=Math.ceil(I[3]-I[1])||1,j=O.cachedCanvases.getCanvas("pattern",A,h,!0),b=j.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-I[0],-I[1]),k=i.Util.transform(k,[1,0,0,1,I[0],I[1]]),b.transform(...O.baseTransform),this.matrix&&b.transform(...this.matrix),S(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),p=D.createPattern(j.canvas,"no-repeat");const V=new DOMMatrix(k);p.setTransform(V)}else S(D,this._bbox),p=this._createGradient(D);return p}}function E(x,D,O,k,u,p,I,A){const h=D.coords,j=D.colors,b=x.data,V=x.width*4;let X;h[O+1]>h[k+1]&&(X=O,O=k,k=X,X=p,p=I,I=X),h[k+1]>h[u+1]&&(X=k,k=u,u=X,X=I,I=A,A=X),h[O+1]>h[k+1]&&(X=O,O=k,k=X,X=p,p=I,I=X);const P=(h[O]+D.offsetX)*D.scaleX,Q=(h[O+1]+D.offsetY)*D.scaleY,lt=(h[k]+D.offsetX)*D.scaleX,ut=(h[k+1]+D.offsetY)*D.scaleY,Y=(h[u]+D.offsetX)*D.scaleX,ht=(h[u+1]+D.offsetY)*D.scaleY;if(Q>=ht)return;const bt=j[p],Et=j[p+1],At=j[p+2],L=j[I],o=j[I+1],d=j[I+2],c=j[A],f=j[A+1],g=j[A+2],M=Math.round(Q),$=Math.round(ht);let q,at,it,pt,vt,_t,gt,Rt;for(let Lt=M;Lt<=$;Lt++){if(Lt<ut){const N=Lt<Q?0:(Q-Lt)/(Q-ut);q=P-(P-lt)*N,at=bt-(bt-L)*N,it=Et-(Et-o)*N,pt=At-(At-d)*N}else{let N;Lt>ht?N=1:ut===ht?N=0:N=(ut-Lt)/(ut-ht),q=lt-(lt-Y)*N,at=L-(L-c)*N,it=o-(o-f)*N,pt=d-(d-g)*N}let Tt;Lt<Q?Tt=0:Lt>ht?Tt=1:Tt=(Q-Lt)/(Q-ht),vt=P-(P-Y)*Tt,_t=bt-(bt-c)*Tt,gt=Et-(Et-f)*Tt,Rt=At-(At-g)*Tt;const Ot=Math.round(Math.min(q,vt)),U=Math.round(Math.max(q,vt));let G=V*Lt+Ot*4;for(let N=Ot;N<=U;N++)Tt=(q-N)/(q-vt),Tt<0?Tt=0:Tt>1&&(Tt=1),b[G++]=at-(at-_t)*Tt|0,b[G++]=it-(it-gt)*Tt|0,b[G++]=pt-(pt-Rt)*Tt|0,b[G++]=255}}function v(x,D,O){const k=D.coords,u=D.colors;let p,I;switch(D.type){case"lattice":const A=D.verticesPerRow,h=Math.floor(k.length/A)-1,j=A-1;for(p=0;p<h;p++){let b=p*A;for(let V=0;V<j;V++,b++)E(x,O,k[b],k[b+1],k[b+A],u[b],u[b+1],u[b+A]),E(x,O,k[b+A+1],k[b+1],k[b+A],u[b+A+1],u[b+1],u[b+A])}break;case"triangles":for(p=0,I=k.length;p<I;p+=3)E(x,O,k[p],k[p+1],k[p+2],u[p],u[p+1],u[p+2]);break;default:throw new Error("illegal figure")}}class B extends J{constructor(D){super(),this._coords=D[2],this._colors=D[3],this._figures=D[4],this._bounds=D[5],this._bbox=D[7],this._background=D[8],this.matrix=null}_createMeshCanvas(D,O,k){const A=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-A,b=Math.ceil(this._bounds[3])-h,V=Math.min(Math.ceil(Math.abs(j*D[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(b*D[1]*1.1)),3e3),P=j/V,Q=b/X,lt={coords:this._coords,colors:this._colors,offsetX:-A,offsetY:-h,scaleX:1/P,scaleY:1/Q},ut=V+2*2,Y=X+2*2,ht=k.getCanvas("mesh",ut,Y,!1),bt=ht.context,Et=bt.createImageData(V,X);if(O){const L=Et.data;for(let o=0,d=L.length;o<d;o+=4)L[o]=O[0],L[o+1]=O[1],L[o+2]=O[2],L[o+3]=255}for(const L of this._figures)v(Et,L,lt);return bt.putImageData(Et,2,2),{canvas:ht.canvas,offsetX:A-2*P,offsetY:h-2*Q,scaleX:P,scaleY:Q}}getPattern(D,O,k,u){S(D,this._bbox);let p;if(u===y.SHADING)p=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(D));else if(p=i.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const A=i.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*A[0],p[1]*A[1]]}const I=this._createMeshCanvas(p,u===y.SHADING?null:this._background,O.cachedCanvases);return u!==y.SHADING&&(D.setTransform(...O.baseTransform),this.matrix&&D.transform(...this.matrix)),D.translate(I.offsetX,I.offsetY),D.scale(I.scaleX,I.scaleY),D.createPattern(I.canvas,"no-repeat")}}class F extends J{getPattern(){return"hotpink"}}function C(x){switch(x[0]){case"RadialAxial":return new T(x);case"Mesh":return new B(x);case"Dummy":return new F}throw new Error(`Unknown IR type: ${x[0]}`)}const w={COLORED:1,UNCOLORED:2},m=class m{constructor(D,O,k,u,p){this.operatorList=D[2],this.matrix=D[3]||[1,0,0,1,0,0],this.bbox=D[4],this.xstep=D[5],this.ystep=D[6],this.paintType=D[7],this.tilingType=D[8],this.color=O,this.ctx=k,this.canvasGraphicsFactory=u,this.baseTransform=p}createPatternCanvas(D){const O=this.operatorList,k=this.bbox,u=this.xstep,p=this.ystep,I=this.paintType,A=this.tilingType,h=this.color,j=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+A);const b=k[0],V=k[1],X=k[2],P=k[3],Q=i.Util.singularValueDecompose2dScale(this.matrix),lt=i.Util.singularValueDecompose2dScale(this.baseTransform),ut=[Q[0]*lt[0],Q[1]*lt[1]],Y=this.getSizeAndScale(u,this.ctx.canvas.width,ut[0]),ht=this.getSizeAndScale(p,this.ctx.canvas.height,ut[1]),bt=D.cachedCanvases.getCanvas("pattern",Y.size,ht.size,!0),Et=bt.context,At=j.createCanvasGraphics(Et);At.groupLevel=D.groupLevel,this.setFillAndStrokeStyleToContext(At,I,h);let L=b,o=V,d=X,c=P;return b<0&&(L=0,d+=Math.abs(b)),V<0&&(o=0,c+=Math.abs(V)),Et.translate(-(Y.scale*L),-(ht.scale*o)),At.transform(Y.scale,0,0,ht.scale,0,0),Et.save(),this.clipBbox(At,L,o,d,c),At.baseTransform=(0,s.getCurrentTransform)(At.ctx),At.executeOperatorList(O),At.endDrawing(),{canvas:bt.canvas,scaleX:Y.scale,scaleY:ht.scale,offsetX:L,offsetY:o}}getSizeAndScale(D,O,k){D=Math.abs(D);const u=Math.max(m.MAX_PATTERN_SIZE,O);let p=Math.ceil(D*k);return p>=u?p=u:k=p/D,{scale:k,size:p}}clipBbox(D,O,k,u,p){const I=u-O,A=p-k;D.ctx.rect(O,k,I,A),D.current.updateRectMinMax((0,s.getCurrentTransform)(D.ctx),[O,k,u,p]),D.clip(),D.endPath()}setFillAndStrokeStyleToContext(D,O,k){const u=D.ctx,p=D.current;switch(O){case w.COLORED:const I=this.ctx;u.fillStyle=I.fillStyle,u.strokeStyle=I.strokeStyle,p.fillColor=I.fillStyle,p.strokeColor=I.strokeStyle;break;case w.UNCOLORED:const A=i.Util.makeHexColor(k[0],k[1],k[2]);u.fillStyle=A,u.strokeStyle=A,p.fillColor=A,p.strokeColor=A;break;default:throw new i.FormatError(`Unsupported paint type: ${O}`)}}getPattern(D,O,k,u){let p=k;u!==y.SHADING&&(p=i.Util.transform(p,O.baseTransform),this.matrix&&(p=i.Util.transform(p,this.matrix)));const I=this.createPatternCanvas(O);let A=new DOMMatrix(p);A=A.translate(I.offsetX,I.offsetY),A=A.scale(1/I.scaleX,1/I.scaleY);const h=D.createPattern(I.canvas,"repeat");return h.setTransform(A),h}};re(m,"MAX_PATTERN_SIZE",3e3);let _=m;n.TilingPattern=_},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=y,n.convertToRGBA=s,n.grayToRGBA=J;var i=r(1);function s(T){switch(T.kind){case i.ImageKind.GRAYSCALE_1BPP:return y(T);case i.ImageKind.RGB_24BPP:return S(T)}return null}function y({src:T,srcPos:E=0,dest:v,width:B,height:F,nonBlackColor:C=4294967295,inverseDecode:w=!1}){const _=i.FeatureTest.isLittleEndian?4278190080:255,[m,x]=w?[C,_]:[_,C],D=B>>3,O=B&7,k=T.length;v=new Uint32Array(v.buffer);let u=0;for(let p=0;p<F;p++){for(const A=E+D;E<A;E++){const h=E<k?T[E]:255;v[u++]=h&128?x:m,v[u++]=h&64?x:m,v[u++]=h&32?x:m,v[u++]=h&16?x:m,v[u++]=h&8?x:m,v[u++]=h&4?x:m,v[u++]=h&2?x:m,v[u++]=h&1?x:m}if(O===0)continue;const I=E<k?T[E++]:255;for(let A=0;A<O;A++)v[u++]=I&1<<7-A?x:m}return{srcPos:E,destPos:u}}function S({src:T,srcPos:E=0,dest:v,destPos:B=0,width:F,height:C}){let w=0;const _=T.length>>2,m=new Uint32Array(T.buffer,E,_);if(i.FeatureTest.isLittleEndian){for(;w<_-2;w+=3,B+=4){const x=m[w],D=m[w+1],O=m[w+2];v[B]=x|4278190080,v[B+1]=x>>>24|D<<8|4278190080,v[B+2]=D>>>16|O<<16|4278190080,v[B+3]=O>>>8|4278190080}for(let x=w*4,D=T.length;x<D;x+=3)v[B++]=T[x]|T[x+1]<<8|T[x+2]<<16|4278190080}else{for(;w<_-2;w+=3,B+=4){const x=m[w],D=m[w+1],O=m[w+2];v[B]=x|255,v[B+1]=x<<24|D>>>8|255,v[B+2]=D<<16|O>>>16|255,v[B+3]=O<<8|255}for(let x=w*4,D=T.length;x<D;x+=3)v[B++]=T[x]<<24|T[x+1]<<16|T[x+2]<<8|255}return{srcPos:E,destPos:B}}function J(T,E){if(i.FeatureTest.isLittleEndian)for(let v=0,B=T.length;v<B;v++)E[v]=T[v]*65793|4278190080;else for(let v=0,B=T.length;v<B;v++)E[v]=T[v]*16843008|255}},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const r=Object.create(null);n.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(t,n,r)=>{var T,Mn,v,Dn,F,Fe;Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var i=r(1);const s={UNKNOWN:0,DATA:1,ERROR:2},y={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new i.AbortException(w.message);case"MissingPDFException":return new i.MissingPDFException(w.message);case"PasswordException":return new i.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new i.UnknownErrorException(w.message,w.details);default:return new i.UnknownErrorException(w.message,w.toString())}}class J{constructor(_,m,x){H(this,T);H(this,v);H(this,F);this.sourceName=_,this.targetName=m,this.comObj=x,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=D=>{const O=D.data;if(O.targetName!==this.sourceName)return;if(O.stream){et(this,v,Dn).call(this,O);return}if(O.callback){const u=O.callbackId,p=this.callbackCapabilities[u];if(!p)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],O.callback===s.DATA)p.resolve(O.data);else if(O.callback===s.ERROR)p.reject(S(O.reason));else throw new Error("Unexpected callback case");return}const k=this.actionHandler[O.action];if(!k)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const u=this.sourceName,p=O.sourceName;new Promise(function(I){I(k(O.data))}).then(function(I){x.postMessage({sourceName:u,targetName:p,callback:s.DATA,callbackId:O.callbackId,data:I})},function(I){x.postMessage({sourceName:u,targetName:p,callback:s.ERROR,callbackId:O.callbackId,reason:S(I)})});return}if(O.streamId){et(this,T,Mn).call(this,O);return}k(O.data)},x.addEventListener("message",this._onComObjOnMessage)}on(_,m){const x=this.actionHandler;if(x[_])throw new Error(`There is already an actionName called "${_}"`);x[_]=m}send(_,m,x){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:m},x)}sendWithPromise(_,m,x){const D=this.callbackId++,O=new i.PromiseCapability;this.callbackCapabilities[D]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:D,data:m},x)}catch(k){O.reject(k)}return O.promise}sendWithStream(_,m,x,D){const O=this.streamId++,k=this.sourceName,u=this.targetName,p=this.comObj;return new ReadableStream({start:I=>{const A=new i.PromiseCapability;return this.streamControllers[O]={controller:I,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:k,targetName:u,action:_,streamId:O,data:m,desiredSize:I.desiredSize},D),A.promise},pull:I=>{const A=new i.PromiseCapability;return this.streamControllers[O].pullCall=A,p.postMessage({sourceName:k,targetName:u,stream:y.PULL,streamId:O,desiredSize:I.desiredSize}),A.promise},cancel:I=>{(0,i.assert)(I instanceof Error,"cancel must have a valid reason");const A=new i.PromiseCapability;return this.streamControllers[O].cancelCall=A,this.streamControllers[O].isClosed=!0,p.postMessage({sourceName:k,targetName:u,stream:y.CANCEL,streamId:O,reason:S(I)}),A.promise}},x)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,Mn=function(_){const m=_.streamId,x=this.sourceName,D=_.sourceName,O=this.comObj,k=this,u=this.actionHandler[_.action],p={enqueue(I,A=1,h){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=A,j>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),O.postMessage({sourceName:x,targetName:D,stream:y.ENQUEUE,streamId:m,chunk:I},h)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:x,targetName:D,stream:y.CLOSE,streamId:m}),delete k.streamSinks[m])},error(I){(0,i.assert)(I instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:x,targetName:D,stream:y.ERROR,streamId:m,reason:S(I)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[m]=p,new Promise(function(I){I(u(_.data,p))}).then(function(){O.postMessage({sourceName:x,targetName:D,stream:y.START_COMPLETE,streamId:m,success:!0})},function(I){O.postMessage({sourceName:x,targetName:D,stream:y.START_COMPLETE,streamId:m,reason:S(I)})})},v=new WeakSet,Dn=function(_){const m=_.streamId,x=this.sourceName,D=_.sourceName,O=this.comObj,k=this.streamControllers[m],u=this.streamSinks[m];switch(_.stream){case y.START_COMPLETE:_.success?k.startCall.resolve():k.startCall.reject(S(_.reason));break;case y.PULL_COMPLETE:_.success?k.pullCall.resolve():k.pullCall.reject(S(_.reason));break;case y.PULL:if(!u){O.postMessage({sourceName:x,targetName:D,stream:y.PULL_COMPLETE,streamId:m,success:!0});break}u.desiredSize<=0&&_.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=_.desiredSize,new Promise(function(p){var I;p((I=u.onPull)==null?void 0:I.call(u))}).then(function(){O.postMessage({sourceName:x,targetName:D,stream:y.PULL_COMPLETE,streamId:m,success:!0})},function(p){O.postMessage({sourceName:x,targetName:D,stream:y.PULL_COMPLETE,streamId:m,reason:S(p)})});break;case y.ENQUEUE:if((0,i.assert)(k,"enqueue should have stream controller"),k.isClosed)break;k.controller.enqueue(_.chunk);break;case y.CLOSE:if((0,i.assert)(k,"close should have stream controller"),k.isClosed)break;k.isClosed=!0,k.controller.close(),et(this,F,Fe).call(this,k,m);break;case y.ERROR:(0,i.assert)(k,"error should have stream controller"),k.controller.error(S(_.reason)),et(this,F,Fe).call(this,k,m);break;case y.CANCEL_COMPLETE:_.success?k.cancelCall.resolve():k.cancelCall.reject(S(_.reason)),et(this,F,Fe).call(this,k,m);break;case y.CANCEL:if(!u)break;new Promise(function(p){var I;p((I=u.onCancel)==null?void 0:I.call(u,S(_.reason)))}).then(function(){O.postMessage({sourceName:x,targetName:D,stream:y.CANCEL_COMPLETE,streamId:m,success:!0})},function(p){O.postMessage({sourceName:x,targetName:D,stream:y.CANCEL_COMPLETE,streamId:m,reason:S(p)})}),u.sinkCapability.reject(S(_.reason)),u.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},F=new WeakSet,Fe=async function(_,m){var x,D,O;await Promise.allSettled([(x=_.startCall)==null?void 0:x.promise,(D=_.pullCall)==null?void 0:D.promise,(O=_.cancelCall)==null?void 0:O.promise]),delete this.streamControllers[m]},n.MessageHandler=J},(t,n,r)=>{var y,S;Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var i=r(1);class s{constructor({parsedData:T,rawData:E}){H(this,y,void 0);H(this,S,void 0);ct(this,y,T),ct(this,S,E)}getRaw(){return a(this,S)}get(T){return a(this,y).get(T)??null}getAll(){return(0,i.objectFromMap)(a(this,y))}has(T){return a(this,y).has(T)}}y=new WeakMap,S=new WeakMap,n.Metadata=s},(t,n,r)=>{var T,E,v,B,F,C,rn;Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var i=r(1),s=r(8);const y=Symbol("INTERNAL");class S{constructor(m,x){H(this,T,!0);this.name=m,this.intent=x}get visible(){return a(this,T)}_setVisible(m,x){m!==y&&(0,i.unreachable)("Internal method `_setVisible` called."),ct(this,T,x)}}T=new WeakMap;class J{constructor(m){H(this,C);H(this,E,null);H(this,v,new Map);H(this,B,null);H(this,F,null);if(this.name=null,this.creator=null,m!==null){this.name=m.name,this.creator=m.creator,ct(this,F,m.order);for(const x of m.groups)a(this,v).set(x.id,new S(x.name,x.intent));if(m.baseState==="OFF")for(const x of a(this,v).values())x._setVisible(y,!1);for(const x of m.on)a(this,v).get(x)._setVisible(y,!0);for(const x of m.off)a(this,v).get(x)._setVisible(y,!1);ct(this,B,this.getHash())}}isVisible(m){if(a(this,v).size===0)return!0;if(!m)return(0,i.warn)("Optional content group not defined."),!0;if(m.type==="OCG")return a(this,v).has(m.id)?a(this,v).get(m.id).visible:((0,i.warn)(`Optional content group not found: ${m.id}`),!0);if(m.type==="OCMD"){if(m.expression)return et(this,C,rn).call(this,m.expression);if(!m.policy||m.policy==="AnyOn"){for(const x of m.ids){if(!a(this,v).has(x))return(0,i.warn)(`Optional content group not found: ${x}`),!0;if(a(this,v).get(x).visible)return!0}return!1}else if(m.policy==="AllOn"){for(const x of m.ids){if(!a(this,v).has(x))return(0,i.warn)(`Optional content group not found: ${x}`),!0;if(!a(this,v).get(x).visible)return!1}return!0}else if(m.policy==="AnyOff"){for(const x of m.ids){if(!a(this,v).has(x))return(0,i.warn)(`Optional content group not found: ${x}`),!0;if(!a(this,v).get(x).visible)return!0}return!1}else if(m.policy==="AllOff"){for(const x of m.ids){if(!a(this,v).has(x))return(0,i.warn)(`Optional content group not found: ${x}`),!0;if(a(this,v).get(x).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${m.policy}.`),!0}return(0,i.warn)(`Unknown group type ${m.type}.`),!0}setVisibility(m,x=!0){if(!a(this,v).has(m)){(0,i.warn)(`Optional content group not found: ${m}`);return}a(this,v).get(m)._setVisible(y,!!x),ct(this,E,null)}get hasInitialVisibility(){return a(this,B)===null||this.getHash()===a(this,B)}getOrder(){return a(this,v).size?a(this,F)?a(this,F).slice():[...a(this,v).keys()]:null}getGroups(){return a(this,v).size>0?(0,i.objectFromMap)(a(this,v)):null}getGroup(m){return a(this,v).get(m)||null}getHash(){if(a(this,E)!==null)return a(this,E);const m=new s.MurmurHash3_64;for(const[x,D]of a(this,v))m.update(`${x}:${D.visible}`);return ct(this,E,m.hexdigest())}}E=new WeakMap,v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakSet,rn=function(m){const x=m.length;if(x<2)return!0;const D=m[0];for(let O=1;O<x;O++){const k=m[O];let u;if(Array.isArray(k))u=et(this,C,rn).call(this,k);else if(a(this,v).has(k))u=a(this,v).get(k).visible;else return(0,i.warn)(`Optional content group not found: ${k}`),!0;switch(D){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return D==="And"},n.OptionalContentConfig=J},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var i=r(1),s=r(6);class y{constructor({length:E,initialData:v,progressiveDone:B=!1,contentDispositionFilename:F=null,disableRange:C=!1,disableStream:w=!1},_){if((0,i.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=B,this._contentDispositionFilename=F,(v==null?void 0:v.length)>0){const m=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!w,this._isRangeSupported=!C,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,x)=>{this._onReceiveData({begin:m,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((m,x)=>{this._onProgress({loaded:m,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:v}){const B=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(B):this._queuedChunks.push(B);else{const F=this._rangeReaders.some(function(C){return C._begin!==E?!1:(C._enqueue(B),!0)});(0,i.assert)(F,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}_onProgress(E){var v,B,F,C;E.total===void 0?(B=(v=this._rangeReaders[0])==null?void 0:v.onProgress)==null||B.call(v,{loaded:E.loaded}):(C=(F=this._fullRequestReader)==null?void 0:F.onProgress)==null||C.call(F,{loaded:E.loaded,total:E.total})}_onProgressiveDone(){var E;(E=this._fullRequestReader)==null||E.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const v=this._rangeReaders.indexOf(E);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new S(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,v){if(v<=this._progressiveDataLength)return null;const B=new J(this,E,v);return this._pdfDataRangeTransport.requestDataRange(E,v),this._rangeReaders.push(B),B}cancelAllRequests(E){var v;(v=this._fullRequestReader)==null||v.cancel(E);for(const B of this._rangeReaders.slice(0))B.cancel(E);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=y;class S{constructor(E,v,B=!1,F=null){this._stream=E,this._done=B||!1,this._filename=(0,s.isPdfFile)(F)?F:null,this._queuedChunks=v||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class J{constructor(E,v,B){this._stream=E,this._begin=v,this._end=B,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new i.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var i=r(1),s=r(20);function y(B,F,C){return{method:"GET",headers:B,signal:C.signal,mode:"cors",credentials:F?"include":"same-origin",redirect:"follow"}}function S(B){const F=new Headers;for(const C in B){const w=B[C];w!==void 0&&F.append(C,w)}return F}function J(B){return B instanceof Uint8Array?B.buffer:B instanceof ArrayBuffer?B:((0,i.warn)(`getArrayBuffer - unexpected data format: ${B}`),new Uint8Array(B).buffer)}class T{constructor(F){this.source=F,this.isHttp=/^https?:/i.test(F.url),this.httpHeaders=this.isHttp&&F.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var F;return((F=this._fullRequestReader)==null?void 0:F._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(F,C){if(C<=this._progressiveDataLength)return null;const w=new v(this,F,C);return this._rangeRequestReaders.push(w),w}cancelAllRequests(F){var C;(C=this._fullRequestReader)==null||C.cancel(F);for(const w of this._rangeRequestReaders.slice(0))w.cancel(F)}}n.PDFFetchStream=T;class E{constructor(F){this._stream=F,this._reader=null,this._loaded=0,this._filename=null;const C=F.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new i.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=S(this._stream.httpHeaders);const w=C.url;fetch(w,y(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,s.validateResponseStatus)(_.status))throw(0,s.createResponseStatusError)(_.status,w);this._reader=_.body.getReader(),this._headersCapability.resolve();const m=O=>_.headers.get(O),{allowRangeRequests:x,suggestedLength:D}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=D||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._headersCapability.promise;const{value:F,done:C}=await this._reader.read();return C?{value:F,done:C}:(this._loaded+=F.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:J(F),done:!1})}cancel(F){var C;(C=this._reader)==null||C.cancel(F),this._abortController.abort()}}class v{constructor(F,C,w){this._stream=F,this._reader=null,this._loaded=0;const _=F.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=S(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${w-1}`);const m=_.url;fetch(m,y(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,s.validateResponseStatus)(x.status))throw(0,s.createResponseStatusError)(x.status,m);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._readCapability.promise;const{value:F,done:C}=await this._reader.read();return C?{value:F,done:C}:(this._loaded+=F.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:J(F),done:!1})}cancel(F){var C;(C=this._reader)==null||C.cancel(F),this._abortController.abort()}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=T,n.extractFilenameFromHeader=J,n.validateRangeRequestCapabilities=S,n.validateResponseStatus=E;var i=r(1),s=r(21),y=r(6);function S({getResponseHeader:v,isHttp:B,rangeChunkSize:F,disableRange:C}){const w={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(v("Content-Length"),10);return!Number.isInteger(_)||(w.suggestedLength=_,_<=2*F)||C||!B||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(w.allowRangeRequests=!0),w}function J(v){const B=v("Content-Disposition");if(B){let F=(0,s.getFilenameFromContentDispositionHeader)(B);if(F.includes("%"))try{F=decodeURIComponent(F)}catch{}if((0,y.isPdfFile)(F))return F}return null}function T(v,B){return v===404||v===0&&B.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+B+'".'):new i.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${B}".`,v)}function E(v){return v===200||v===206}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=s;var i=r(1);function s(y){let S=!0,J=T("filename\\*","i").exec(y);if(J){J=J[1];let _=F(J);return _=unescape(_),_=C(_),_=w(_),v(_)}if(J=B(y),J){const _=w(J);return v(_)}if(J=T("filename","i").exec(y),J){J=J[1];let _=F(J);return _=w(_),v(_)}function T(_,m){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function E(_,m){if(_){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const x=new TextDecoder(_,{fatal:!0}),D=(0,i.stringToBytes)(m);m=x.decode(D),S=!1}catch{}}return m}function v(_){return S&&/[\x80-\xff]/.test(_)&&(_=E("utf-8",_),S&&(_=E("iso-8859-1",_))),_}function B(_){const m=[];let x;const D=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=D.exec(_))!==null;){let[,k,u,p]=x;if(k=parseInt(k,10),k in m){if(k===0)break;continue}m[k]=[u,p]}const O=[];for(let k=0;k<m.length&&k in m;++k){let[u,p]=m[k];p=F(p),u&&(p=unescape(p),k===0&&(p=C(p))),O.push(p)}return O.join("")}function F(_){if(_.startsWith('"')){const m=_.slice(1).split('\\"');for(let x=0;x<m.length;++x){const D=m[x].indexOf('"');D!==-1&&(m[x]=m[x].slice(0,D),m.length=x+1),m[x]=m[x].replaceAll(/\\(.)/g,"$1")}_=m.join('"')}return _}function C(_){const m=_.indexOf("'");if(m===-1)return _;const x=_.slice(0,m),O=_.slice(m+1).replace(/^[^']*'/,"");return E(x,O)}function w(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,x,D,O){if(D==="q"||D==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,u){return String.fromCharCode(parseInt(u,16))}),E(x,O);try{O=atob(O)}catch{}return E(x,O)})}return""}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var i=r(1),s=r(20);const y=200,S=206;function J(F){const C=F.response;return typeof C!="string"?C:(0,i.stringToBytes)(C).buffer}class T{constructor(C,w={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,w,_){const m={begin:C,end:w};for(const x in _)m[x]=_[x];return this.request(m)}requestFull(C){return this.request(C)}request(C){const w=new XMLHttpRequest,_=this.currXhrId++,m=this.pendingRequests[_]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const D=this.httpHeaders[x];D!==void 0&&w.setRequestHeader(x,D)}return this.isHttp&&"begin"in C&&"end"in C?(w.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),m.expectedStatus=S):m.expectedStatus=y,w.responseType="arraybuffer",C.onError&&(w.onerror=function(x){C.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,_),w.onprogress=this.onProgress.bind(this,_),m.onHeadersReceived=C.onHeadersReceived,m.onDone=C.onDone,m.onError=C.onError,m.onProgress=C.onProgress,w.send(null),_}onProgress(C,w){var m;const _=this.pendingRequests[C];_&&((m=_.onProgress)==null||m.call(_,w))}onStateChange(C,w){var k,u,p;const _=this.pendingRequests[C];if(!_)return;const m=_.xhr;if(m.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),m.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],m.status===0&&this.isHttp){(k=_.onError)==null||k.call(_,m.status);return}const x=m.status||y;if(!(x===y&&_.expectedStatus===S)&&x!==_.expectedStatus){(u=_.onError)==null||u.call(_,m.status);return}const O=J(m);if(x===S){const I=m.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(I);_.onDone({begin:parseInt(A[1],10),chunk:O})}else O?_.onDone({begin:0,chunk:O}):(p=_.onError)==null||p.call(_,m.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const w=this.pendingRequests[C].xhr;delete this.pendingRequests[C],w.abort()}}class E{constructor(C){this._source=C,this._manager=new T(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const w=this._rangeRequestReaders.indexOf(C);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(C,w){const _=new B(this._manager,C,w);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(C){var w;(w=this._fullRequestReader)==null||w.cancel(C);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(C)}}n.PDFNetworkStream=E;class v{constructor(C,w){this._manager=C;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=C.requestFull(_),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,w=this._manager.getRequestXhr(C),_=D=>w.getResponseHeader(D),{allowRangeRequests:m,suggestedLength:x}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});m&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var w;(w=this.onProgress)==null||w.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class B{constructor(C,w,_){this._manager=C;const m={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(w,_,m),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const w=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,s.createResponseStatusError)(C,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var w;this.isStreamingSupported||(w=this.onProgress)==null||w.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new i.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var i=r(1),s=r(20);const y=/^file:\/\/\/[a-zA-Z]:\//;function S(_){const m=require$$5,x=m.parse(_);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(_)?m.parse(`file:///${_}`):(x.host||(x.protocol="file:"),x)}class J{constructor(m){this.source=m,this.url=S(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new B(this),this._fullRequestReader}getRangeReader(m,x){if(x<=this._progressiveDataLength)return null;const D=this.isFsUrl?new w(this,m,x):new F(this,m,x);return this._rangeRequestReaders.push(D),D}cancelAllRequests(m){var x;(x=this._fullRequestReader)==null||x.cancel(m);for(const D of this._rangeRequestReaders.slice(0))D.cancel(m)}}n.PDFNodeStream=J;class T{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const x=m.source;this._contentLength=x.length,this._loaded=0,this._filename=null,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",x=>{this._error(x)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const x=m.source;this._isStreamingSupported=!x.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",x=>{this._error(x)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function v(_,m){return{protocol:_.protocol,auth:_.auth,host:_.hostname,port:_.port,path:_.path,method:"GET",headers:m}}class B extends T{constructor(m){super(m);const x=D=>{if(D.statusCode===404){const p=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p,this._headersCapability.reject(p);return}this._headersCapability.resolve(),this._setReadableStream(D);const O=p=>this._readableStream.headers[p.toLowerCase()],{allowRangeRequests:k,suggestedLength:u}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=u||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const D=require$$5;this._request=D.request(v(this._url,m.httpHeaders),x)}else{const D=require$$5;this._request=D.request(v(this._url,m.httpHeaders),x)}this._request.on("error",D=>{this._storedError=D,this._headersCapability.reject(D)}),this._request.end()}}class F extends E{constructor(m,x,D){super(m),this._httpHeaders={};for(const k in m.httpHeaders){const u=m.httpHeaders[k];u!==void 0&&(this._httpHeaders[k]=u)}this._httpHeaders.Range=`bytes=${x}-${D-1}`;const O=k=>{if(k.statusCode===404){const u=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(k)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(v(this._url,this._httpHeaders),O)}else{const k=require$$5;this._request=k.request(v(this._url,this._httpHeaders),O)}this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class C extends T{constructor(m){super(m);let x=decodeURIComponent(this._url.path);y.test(this._url.href)&&(x=x.replace(/^\//,""));const D=require$$5;D.lstat(x,(O,k)=>{if(O){O.code==="ENOENT"&&(O=new i.MissingPDFException(`Missing PDF "${x}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=k.size,this._setReadableStream(D.createReadStream(x)),this._headersCapability.resolve()})}}class w extends E{constructor(m,x,D){super(m);let O=decodeURIComponent(this._url.path);y.test(this._url.href)&&(O=O.replace(/^\//,""));const k=require$$5;this._setReadableStream(k.createReadStream(O,{start:x,end:D-1}))}}},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var i=r(6),s=r(1);const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",J="http://www.w3.org/1999/xlink",T=["butt","round","square"],E=["miter","round","bevel"],v=function(k,u="",p=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!p)return URL.createObjectURL(new Blob([k],{type:u}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${u};base64,`;for(let h=0,j=k.length;h<j;h+=3){const b=k[h]&255,V=k[h+1]&255,X=k[h+2]&255,P=b>>2,Q=(b&3)<<4|V>>4,lt=h+1<j?(V&15)<<2|X>>6:64,ut=h+2<j?X&63:64;A+=I[P]+I[Q]+I[lt]+I[ut]}return A},B=function(){const k=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,p=new Int32Array(256);for(let X=0;X<256;X++){let P=X;for(let Q=0;Q<8;Q++)P=P&1?3988292384^P>>1&2147483647:P>>1&2147483647;p[X]=P}function I(X,P,Q){let lt=-1;for(let ut=P;ut<Q;ut++){const Y=(lt^X[ut])&255,ht=p[Y];lt=lt>>>8^ht}return lt^-1}function A(X,P,Q,lt){let ut=lt;const Y=P.length;Q[ut]=Y>>24&255,Q[ut+1]=Y>>16&255,Q[ut+2]=Y>>8&255,Q[ut+3]=Y&255,ut+=4,Q[ut]=X.charCodeAt(0)&255,Q[ut+1]=X.charCodeAt(1)&255,Q[ut+2]=X.charCodeAt(2)&255,Q[ut+3]=X.charCodeAt(3)&255,ut+=4,Q.set(P,ut),ut+=P.length;const ht=I(Q,lt+4,ut);Q[ut]=ht>>24&255,Q[ut+1]=ht>>16&255,Q[ut+2]=ht>>8&255,Q[ut+3]=ht&255}function h(X,P,Q){let lt=1,ut=0;for(let Y=P;Y<Q;++Y)lt=(lt+(X[Y]&255))%65521,ut=(ut+lt)%65521;return ut<<16|lt}function j(X){if(!s.isNodeJS)return b(X);try{const P=parseInt(process.versions.node)>=8?X:Buffer.from(X),Q=require$$5.deflateSync(P,{level:9});return Q instanceof Uint8Array?Q:new Uint8Array(Q)}catch(P){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+P)}return b(X)}function b(X){let P=X.length;const Q=65535,lt=Math.ceil(P/Q),ut=new Uint8Array(2+P+lt*5+4);let Y=0;ut[Y++]=120,ut[Y++]=156;let ht=0;for(;P>Q;)ut[Y++]=0,ut[Y++]=255,ut[Y++]=255,ut[Y++]=0,ut[Y++]=0,ut.set(X.subarray(ht,ht+Q),Y),Y+=Q,ht+=Q,P-=Q;ut[Y++]=1,ut[Y++]=P&255,ut[Y++]=P>>8&255,ut[Y++]=~P&65535&255,ut[Y++]=(~P&65535)>>8&255,ut.set(X.subarray(ht),Y),Y+=X.length-ht;const bt=h(X,0,X.length);return ut[Y++]=bt>>24&255,ut[Y++]=bt>>16&255,ut[Y++]=bt>>8&255,ut[Y++]=bt&255,ut}function V(X,P,Q,lt){const ut=X.width,Y=X.height;let ht,bt,Et;const At=X.data;switch(P){case s.ImageKind.GRAYSCALE_1BPP:bt=0,ht=1,Et=ut+7>>3;break;case s.ImageKind.RGB_24BPP:bt=2,ht=8,Et=ut*3;break;case s.ImageKind.RGBA_32BPP:bt=6,ht=8,Et=ut*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+Et)*Y);let o=0,d=0;for(let q=0;q<Y;++q)L[o++]=0,L.set(At.subarray(d,d+Et),o),d+=Et,o+=Et;if(P===s.ImageKind.GRAYSCALE_1BPP&&lt){o=0;for(let q=0;q<Y;q++){o++;for(let at=0;at<Et;at++)L[o++]^=255}}const c=new Uint8Array([ut>>24&255,ut>>16&255,ut>>8&255,ut&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,ht,bt,0,0,0]),f=j(L),g=k.length+u*3+c.length+f.length,M=new Uint8Array(g);let $=0;return M.set(k,$),$+=k.length,A("IHDR",c,M,$),$+=u+c.length,A("IDATA",f,M,$),$+=u+f.length,A("IEND",new Uint8Array(0),M,$),v(M,"image/png",Q)}return function(P,Q,lt){const ut=P.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:P.kind;return V(P,ut,Q,lt)}}();class F{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,p){this.x=u,this.y=p}}function C(k){let u=[];const p=[];for(const I of k){if(I.fn==="save"){u.push({fnId:92,fn:"group",items:[]}),p.push(u),u=u.at(-1).items;continue}I.fn==="restore"?u=p.pop():u.push(I)}return u}function w(k){if(Number.isInteger(k))return k.toString();const u=k.toFixed(10);let p=u.length-1;if(u[p]!=="0")return u;do p--;while(u[p]==="0");return u.substring(0,u[p]==="."?p:p+1)}function _(k){if(k[4]===0&&k[5]===0){if(k[1]===0&&k[2]===0)return k[0]===1&&k[3]===1?"":`scale(${w(k[0])} ${w(k[3])})`;if(k[0]===k[3]&&k[1]===-k[2]){const u=Math.acos(k[0])*180/Math.PI;return`rotate(${w(u)})`}}else if(k[0]===1&&k[1]===0&&k[2]===0&&k[3]===1)return`translate(${w(k[4])} ${w(k[5])})`;return`matrix(${w(k[0])} ${w(k[1])} ${w(k[2])} ${w(k[3])} ${w(k[4])} ${w(k[5])})`}let m=0,x=0,D=0;class O{constructor(u,p,I=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new F,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!I,this._operatorIdMapping=[];for(const A in s.OPS)this._operatorIdMapping[s.OPS[A]]=A}getObject(u,p=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):p}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const p=u.fnArray,I=u.argsArray;for(let A=0,h=p.length;A<h;A++)if(p[A]===s.OPS.dependency)for(const j of I[A]){const b=j.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(X=>{b.get(j,X)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(u,p,I,A,h,j){const b=[u,p,I,A,h,j];this.transformMatrix=s.Util.transform(this.transformMatrix,b),this.tgrp=null}getSVG(u,p){this.viewport=p;const I=this._initialize(p);return this.loadDependencies(u).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),I))}convertOpList(u){const p=this._operatorIdMapping,I=u.argsArray,A=u.fnArray,h=[];for(let j=0,b=A.length;j<b;j++){const V=A[j];h.push({fnId:V,fn:p[V],args:I[j]})}return C(h)}executeOpTree(u){for(const p of u){const I=p.fn,A=p.fnId,h=p.args;switch(A|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(h);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case s.OPS.setFont:this.setFont(h);break;case s.OPS.showText:this.showText(h[0]);break;case s.OPS.showSpacedText:this.showText(h[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(h[0],h[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case s.OPS.setHScale:this.setHScale(h[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.setTextRise:this.setTextRise(h[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case s.OPS.setLineWidth:this.setLineWidth(h[0]);break;case s.OPS.setLineJoin:this.setLineJoin(h[0]);break;case s.OPS.setLineCap:this.setLineCap(h[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case s.OPS.setFillColorN:this.setFillColorN(h);break;case s.OPS.shadingFill:this.shadingFill(h[0]);break;case s.OPS.setDash:this.setDash(h[0],h[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case s.OPS.setFlatness:this.setFlatness(h[0]);break;case s.OPS.setGState:this.setGState(h[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case s.OPS.constructPath:this.constructPath(h[0],h[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,s.warn)(`Unimplemented operator ${I}`);break}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,p,I,A,h,j){const b=this.current;b.textMatrix=b.lineMatrix=[u,p,I,A,h,j],b.textMatrixScale=Math.hypot(u,p),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${w(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",w(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.append(b.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=s.IDENTITY_MATRIX,u.lineMatrix=s.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,p){const I=this.current;I.x=I.lineX+=u,I.y=I.lineY+=p,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${w(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",w(-I.y))}showText(u){const p=this.current,I=p.font,A=p.fontSize;if(A===0)return;const h=p.fontSizeScale,j=p.charSpacing,b=p.wordSpacing,V=p.fontDirection,X=p.textHScale*V,P=I.vertical,Q=P?1:-1,lt=I.defaultVMetrics,ut=A*p.fontMatrix[0];let Y=0;for(const Et of u){if(Et===null){Y+=V*b;continue}else if(typeof Et=="number"){Y+=Q*Et*A/1e3;continue}const At=(Et.isSpace?b:0)+j,L=Et.fontChar;let o,d,c=Et.width;if(P){let g;const M=Et.vmetric||lt;g=Et.vmetric?M[1]:c*.5,g=-g*ut;const $=M[2]*ut;c=M?-M[0]:c,o=g/h,d=(Y+$)/h}else o=Y/h,d=0;(Et.isInFont||I.missingFile)&&(p.xcoords.push(p.x+o),P&&p.ycoords.push(-p.y+d),p.tspan.textContent+=L);const f=P?c*ut-At*V:c*ut+At*V;Y+=f}p.tspan.setAttributeNS(null,"x",p.xcoords.map(w).join(" ")),P?p.tspan.setAttributeNS(null,"y",p.ycoords.map(w).join(" ")):p.tspan.setAttributeNS(null,"y",w(-p.y)),P?p.y-=Y:p.x+=Y*X,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${w(p.fontSize)}px`),p.fontStyle!==y.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==y.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const ht=p.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(ht===s.TextRenderingMode.FILL||ht===s.TextRenderingMode.FILL_STROKE?(p.fillColor!==y.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),ht===s.TextRenderingMode.STROKE||ht===s.TextRenderingMode.FILL_STROKE){const Et=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,Et)}let bt=p.textMatrix;p.textRise!==0&&(bt=bt.slice(),bt[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${_(bt)} scale(${w(X)}, -1)`),p.txtElement.setAttributeNS(S,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(u,p){this.setLeading(-p),this.moveText(u,p)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=v(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${p}); }
`}setFont(u){const p=this.current,I=this.commonObjs.get(u[0]);let A=u[1];p.font=I,this.embedFonts&&!I.missingFile&&!this.embeddedFonts[I.loadedName]&&(this.addFontStyle(I),this.embeddedFonts[I.loadedName]=I),p.fontMatrix=I.fontMatrix||s.FONT_IDENTITY_MATRIX;let h="normal";I.black?h="900":I.bold&&(h="bold");const j=I.italic?"italic":"normal";A<0?(A=-A,p.fontDirection=-1):p.fontDirection=1,p.fontSize=A,p.fontFamily=I.loadedName,p.fontWeight=h,p.fontStyle=j,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",w(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const u=this.current;u.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=u.txtElement)!=null&&p.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=T[u]}setLineJoin(u){this.current.lineJoin=E[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,p,I){this.current.strokeColor=s.Util.makeHexColor(u,p,I)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,p,I){this.current.fillColor=s.Util.makeHexColor(u,p,I),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const{width:p,height:I}=this.viewport,A=s.Util.inverseTransform(this.transformMatrix),[h,j,b,V]=s.Util.getAxialAlignedBoundingBox([0,0,p,I],A),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",h),X.setAttributeNS(null,"y",j),X.setAttributeNS(null,"width",b-h),X.setAttributeNS(null,"height",V-j),X.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(u){return u[0]==="TilingPattern"?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const p=u[1],I=u[2],A=u[3]||s.IDENTITY_MATRIX,[h,j,b,V]=u[4],X=u[5],P=u[6],Q=u[7],lt=`shading${D++}`,[ut,Y,ht,bt]=s.Util.normalizeRect([...s.Util.applyTransform([h,j],A),...s.Util.applyTransform([b,V],A)]),[Et,At]=s.Util.singularValueDecompose2dScale(A),L=X*Et,o=P*At,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",lt),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",L),d.setAttributeNS(null,"height",o),d.setAttributeNS(null,"x",`${ut}`),d.setAttributeNS(null,"y",`${Y}`);const c=this.svg,f=this.transformMatrix,g=this.current.fillColor,M=this.current.strokeColor,$=this.svgFactory.create(ht-ut,bt-Y);if(this.svg=$,this.transformMatrix=A,Q===2){const q=s.Util.makeHexColor(...p);this.current.fillColor=q,this.current.strokeColor=q}return this.executeOpTree(this.convertOpList(I)),this.svg=c,this.transformMatrix=f,this.current.fillColor=g,this.current.strokeColor=M,d.append($.childNodes[0]),this.defs.append(d),`url(#${lt})`}_makeShadingPattern(u){switch(typeof u=="string"&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const p=`shading${D++}`,I=u[3];let A;switch(u[1]){case"axial":const h=u[4],j=u[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",p),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",h[0]),A.setAttributeNS(null,"y1",h[1]),A.setAttributeNS(null,"x2",j[0]),A.setAttributeNS(null,"y2",j[1]);break;case"radial":const b=u[4],V=u[5],X=u[6],P=u[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",p),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",V[0]),A.setAttributeNS(null,"cy",V[1]),A.setAttributeNS(null,"r",P),A.setAttributeNS(null,"fx",b[0]),A.setAttributeNS(null,"fy",b[1]),A.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const h of I){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",h[0]),j.setAttributeNS(null,"stop-color",h[1]),A.append(j)}return this.defs.append(A),`url(#${p})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,p){this.current.dashArray=u,this.current.dashPhase=p}constructPath(u,p){const I=this.current;let A=I.x,h=I.y,j=[],b=0;for(const V of u)switch(V|0){case s.OPS.rectangle:A=p[b++],h=p[b++];const X=p[b++],P=p[b++],Q=A+X,lt=h+P;j.push("M",w(A),w(h),"L",w(Q),w(h),"L",w(Q),w(lt),"L",w(A),w(lt),"Z");break;case s.OPS.moveTo:A=p[b++],h=p[b++],j.push("M",w(A),w(h));break;case s.OPS.lineTo:A=p[b++],h=p[b++],j.push("L",w(A),w(h));break;case s.OPS.curveTo:A=p[b+4],h=p[b+5],j.push("C",w(p[b]),w(p[b+1]),w(p[b+2]),w(p[b+3]),w(A),w(h)),b+=6;break;case s.OPS.curveTo2:j.push("C",w(A),w(h),w(p[b]),w(p[b+1]),w(p[b+2]),w(p[b+3])),A=p[b+2],h=p[b+3],b+=4;break;case s.OPS.curveTo3:A=p[b+2],h=p[b+3],j.push("C",w(p[b]),w(p[b+1]),w(A),w(h),w(A),w(h)),b+=4;break;case s.OPS.closePath:j.push("Z");break}j=j.join(" "),I.path&&u.length>0&&u[0]!==s.OPS.rectangle&&u[0]!==s.OPS.moveTo?j=I.path.getAttributeNS(null,"d")+j:(I.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(I.path)),I.path.setAttributeNS(null,"d",j),I.path.setAttributeNS(null,"fill","none"),I.element=I.path,I.setCurrentPoint(A,h)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element){this.pendingClip=null;return}const p=`clippath${m++}`,I=this.svgFactory.createElement("svg:clipPath");I.setAttributeNS(null,"id",p),I.setAttributeNS(null,"transform",_(this.transformMatrix));const A=u.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,I.append(A),this.defs.append(I),u.activeClipUrl){u.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;I.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const p=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",p)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[p,I]of u)switch(p){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I);break;case"CA":this.setStrokeAlpha(I);break;case"ca":this.setFillAlpha(I);break;default:(0,s.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,p=1){const I=this.current;let A=I.dashArray;p!==1&&A.length>0&&(A=A.map(function(h){return p*h})),u.setAttributeNS(null,"stroke",I.strokeColor),u.setAttributeNS(null,"stroke-opacity",I.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",w(I.miterLimit)),u.setAttributeNS(null,"stroke-linecap",I.lineCap),u.setAttributeNS(null,"stroke-linejoin",I.lineJoin),u.setAttributeNS(null,"stroke-width",w(p*I.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",A.map(w).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",w(p*I.dashPhase)+"px")}eoFill(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(u)}paintImageXObject(u){const p=this.getObject(u);if(!p){(0,s.warn)(`Dependent image with object ID ${u} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(u,p){const I=u.width,A=u.height,h=B(u,this.forceDataSchema,!!p),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",w(I)),j.setAttributeNS(null,"height",w(A)),this.current.element=j,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(J,"xlink:href",h),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",w(-A)),b.setAttributeNS(null,"width",w(I)+"px"),b.setAttributeNS(null,"height",w(A)+"px"),b.setAttributeNS(null,"transform",`scale(${w(1/I)} ${w(-1/A)})`),p?p.append(b):this._ensureTransformGroup().append(b)}paintImageMaskXObject(u){const p=this.getObject(u.data,u);if(p.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const I=this.current,A=p.width,h=p.height,j=I.fillColor;I.maskId=`mask${x++}`;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",I.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",w(A)),V.setAttributeNS(null,"height",w(h)),V.setAttributeNS(null,"fill",j),V.setAttributeNS(null,"mask",`url(#${I.maskId})`),this.defs.append(b),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(p,b)}paintFormXObjectBegin(u,p){if(Array.isArray(u)&&u.length===6&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),p){const I=p[2]-p[0],A=p[3]-p[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",p[0]),h.setAttributeNS(null,"y",p[1]),h.setAttributeNS(null,"width",w(I)),h.setAttributeNS(null,"height",w(A)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const p=this.svgFactory.create(u.width,u.height),I=this.svgFactory.createElement("svg:defs");p.append(I),this.defs=I;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",_(u.transform)),p.append(A),this.svg=A,p}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}n.SVGGraphics=O},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class r{static textContent(s){const y=[],S={items:y,styles:Object.create(null)};function J(T){var B;if(!T)return;let E=null;const v=T.name;if(v==="#text")E=T.value;else if(r.shouldBuildText(v))(B=T==null?void 0:T.attributes)!=null&&B.textContent?E=T.attributes.textContent:T.value&&(E=T.value);else return;if(E!==null&&y.push({str:E}),!!T.children)for(const F of T.children)J(F)}return J(s),S}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}n.XfaText=r},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=_,n.updateTextLayer=m;var i=r(1),s=r(6);const y=1e5,S=30,J=.8,T=new Map;function E(x,D){let O;if(D&&i.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=x,O=k.getContext("2d",{alpha:!1})}return O}function v(x,D){const O=T.get(x);if(O)return O;const k=E(S,D);k.font=`${S}px ${x}`;const u=k.measureText("");let p=u.fontBoundingBoxAscent,I=Math.abs(u.fontBoundingBoxDescent);if(p){const h=p/(p+I);return T.set(x,h),k.canvas.width=k.canvas.height=0,h}k.strokeStyle="red",k.clearRect(0,0,S,S),k.strokeText("g",0,0);let A=k.getImageData(0,0,S,S).data;I=0;for(let h=A.length-1-3;h>=0;h-=4)if(A[h]>0){I=Math.ceil(h/4/S);break}k.clearRect(0,0,S,S),k.strokeText("A",0,S),A=k.getImageData(0,0,S,S).data,p=0;for(let h=0,j=A.length;h<j;h+=4)if(A[h]>0){p=S-Math.floor(h/4/S);break}if(k.canvas.width=k.canvas.height=0,p){const h=p/(p+I);return T.set(x,h),h}return T.set(x,J),J}function B(x,D,O){const k=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,fontSize:0};x._textDivs.push(k);const p=i.Util.transform(x._transform,D.transform);let I=Math.atan2(p[1],p[0]);const A=O[D.fontName];A.vertical&&(I+=Math.PI/2);const h=Math.hypot(p[2],p[3]),j=h*v(A.fontFamily,x._isOffscreenCanvasSupported);let b,V;I===0?(b=p[4],V=p[5]-j):(b=p[4]+j*Math.sin(I),V=p[5]-j*Math.cos(I));const X="calc(var(--scale-factor)*",P=k.style;x._container===x._rootContainer?(P.left=`${(100*b/x._pageWidth).toFixed(2)}%`,P.top=`${(100*V/x._pageHeight).toFixed(2)}%`):(P.left=`${X}${b.toFixed(2)}px)`,P.top=`${X}${V.toFixed(2)}px)`),P.fontSize=`${X}${h.toFixed(2)}px)`,P.fontFamily=A.fontFamily,u.fontSize=h,k.setAttribute("role","presentation"),k.textContent=D.str,k.dir=D.dir,x._fontInspectorEnabled&&(k.dataset.fontName=D.fontName),I!==0&&(u.angle=I*(180/Math.PI));let Q=!1;if(D.str.length>1)Q=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const lt=Math.abs(D.transform[0]),ut=Math.abs(D.transform[3]);lt!==ut&&Math.max(lt,ut)/Math.min(lt,ut)>1.5&&(Q=!0)}Q&&(u.canvasWidth=A.vertical?D.height:D.width),x._textDivProperties.set(k,u),x._isReadableStream&&x._layoutText(k)}function F(x){const{div:D,scale:O,properties:k,ctx:u,prevFontSize:p,prevFontFamily:I}=x,{style:A}=D;let h="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:j}=A,{canvasWidth:b,fontSize:V}=k;(p!==V||I!==j)&&(u.font=`${V*O}px ${j}`,x.prevFontSize=V,x.prevFontFamily=j);const{width:X}=u.measureText(D.textContent);X>0&&(h=`scaleX(${b*O/X})`)}k.angle!==0&&(h=`rotate(${k.angle}deg) ${h}`),h.length>0&&(A.transform=h)}function C(x){if(x._canceled)return;const D=x._textDivs,O=x._capability;if(D.length>y){O.resolve();return}if(!x._isReadableStream)for(const u of D)x._layoutText(u);O.resolve()}class w{constructor({textContentSource:D,container:O,viewport:k,textDivs:u,textDivProperties:p,textContentItemsStr:I,isOffscreenCanvasSupported:A}){var X;this._textContentSource=D,this._isReadableStream=D instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=u||[],this._textContentItemsStr=I||[],this._isOffscreenCanvasSupported=A,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,A)};const{pageWidth:h,pageHeight:j,pageX:b,pageY:V}=k.rawDims;this._transform=[1,0,0,-1,-b,V+j],this._pageWidth=h,this._pageHeight=j,(0,s.setLayerDimensions)(O,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(D,O){for(const k of D){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),u.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),B(this,k,O)}}_layoutText(D){const O=this._layoutTextParams.properties=this._textDivProperties.get(D);if(this._layoutTextParams.div=D,F(this._layoutTextParams),O.hasText&&this._container.append(D),O.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const D=new i.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:u,done:p})=>{if(p){D.resolve();return}Object.assign(O,u.styles),this._processItems(u.items,O),k()},D.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:u}=this._textContentSource;this._processItems(k,u),D.resolve()}else throw new Error('No "textContentSource" parameter specified.');D.promise.then(()=>{O=null,C(this)},this._capability.reject)}}n.TextLayerRenderTask=w;function _(x){!x.textContentSource&&(x.textContent||x.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),x.textContentSource=x.textContent||x.textContentStream);const{container:D,viewport:O}=x,k=getComputedStyle(D),u=k.getPropertyValue("visibility"),p=parseFloat(k.getPropertyValue("--scale-factor"));u==="visible"&&(!p||Math.abs(p-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const I=new w(x);return I._render(),I}function m({container:x,viewport:D,textDivs:O,textDivProperties:k,isOffscreenCanvasSupported:u,mustRotate:p=!0,mustRescale:I=!0}){if(p&&(0,s.setLayerDimensions)(x,{rotation:D.rotation}),I){const A=E(0,u),j={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:A};for(const b of O)j.properties=k.get(b),j.div=b,F(j)}}},(t,n,r)=>{var v,B,F,C,w,_,m,x,D,O,k,an,p,Me,A,sn,j,on;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var i=r(1),s=r(4),y=r(28),S=r(33),J=r(6),T=r(34);const V=class V{constructor({uiManager:P,pageIndex:Q,div:lt,accessibilityManager:ut,annotationLayer:Y,viewport:ht,l10n:bt}){H(this,k);H(this,p);H(this,A);H(this,j);H(this,v,void 0);H(this,B,!1);H(this,F,null);H(this,C,this.pointerup.bind(this));H(this,w,this.pointerdown.bind(this));H(this,_,new Map);H(this,m,!1);H(this,x,!1);H(this,D,!1);H(this,O,void 0);const Et=[y.FreeTextEditor,S.InkEditor,T.StampEditor];if(!V._initialized){V._initialized=!0;for(const At of Et)At.initialize(bt)}P.registerEditorTypes(Et),ct(this,O,P),this.pageIndex=Q,this.div=lt,ct(this,v,ut),ct(this,F,Y),this.viewport=ht,a(this,O).addLayer(this)}get isEmpty(){return a(this,_).size===0}updateToolbar(P){a(this,O).updateToolbar(P)}updateMode(P=a(this,O).getMode()){et(this,j,on).call(this),P===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),P!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",P===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&a(this,O).getMode()!==i.AnnotationEditorType.INK)return;if(!P){for(const lt of a(this,_).values())if(lt.isEmpty()){lt.setInBackground();return}}et(this,p,Me).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(P){a(this,O).setEditingState(P)}addCommands(P){a(this,O).addCommands(P)}enable(){this.div.style.pointerEvents="auto";const P=new Set;for(const lt of a(this,_).values())lt.enableEditing(),lt.annotationElementId&&P.add(lt.annotationElementId);if(!a(this,F))return;const Q=a(this,F).getEditableAnnotations();for(const lt of Q){if(lt.hide(),a(this,O).isDeletedAnnotationElement(lt.data.id)||P.has(lt.data.id))continue;const ut=this.deserialize(lt);ut&&(this.addOrRebuild(ut),ut.enableEditing())}}disable(){var Q;ct(this,D,!0),this.div.style.pointerEvents="none";const P=new Set;for(const lt of a(this,_).values()){if(lt.disableEditing(),!lt.annotationElementId||lt.serialize()!==null){P.add(lt.annotationElementId);continue}(Q=this.getEditableAnnotation(lt.annotationElementId))==null||Q.show(),lt.remove()}if(a(this,F)){const lt=a(this,F).getEditableAnnotations();for(const ut of lt){const{id:Y}=ut.data;P.has(Y)||a(this,O).isDeletedAnnotationElement(Y)||ut.show()}}et(this,j,on).call(this),this.isEmpty&&(this.div.hidden=!0),ct(this,D,!1)}getEditableAnnotation(P){var Q;return((Q=a(this,F))==null?void 0:Q.getEditableAnnotation(P))||null}setActiveEditor(P){a(this,O).getActive()!==P&&a(this,O).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",a(this,w)),this.div.addEventListener("pointerup",a(this,C))}disableClick(){this.div.removeEventListener("pointerdown",a(this,w)),this.div.removeEventListener("pointerup",a(this,C))}attach(P){a(this,_).set(P.id,P);const{annotationElementId:Q}=P;Q&&a(this,O).isDeletedAnnotationElement(Q)&&a(this,O).removeDeletedAnnotationElement(P)}detach(P){var Q;a(this,_).delete(P.id),(Q=a(this,v))==null||Q.removePointerInTextLayer(P.contentDiv),!a(this,D)&&P.annotationElementId&&a(this,O).addDeletedAnnotationElement(P)}remove(P){this.detach(P),a(this,O).removeEditor(P),P.div.contains(document.activeElement)&&setTimeout(()=>{a(this,O).focusMainContainer()},0),P.div.remove(),P.isAttachedToDOM=!1,a(this,x)||this.addInkEditorIfNeeded(!1)}changeParent(P){var Q;P.parent!==this&&(P.annotationElementId&&(a(this,O).addDeletedAnnotationElement(P.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(P),P.annotationElementId=null),this.attach(P),(Q=P.parent)==null||Q.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))}add(P){if(this.changeParent(P),a(this,O).addEditor(P),this.attach(P),!P.isAttachedToDOM){const Q=P.render();this.div.append(Q),P.isAttachedToDOM=!0}P.fixAndSetPosition(),P.onceAdded(),a(this,O).addToAnnotationStorage(P)}moveEditorInDOM(P){var lt;if(!P.isAttachedToDOM)return;const{activeElement:Q}=document;P.div.contains(Q)&&(P._focusEventsAllowed=!1,setTimeout(()=>{P.div.contains(document.activeElement)?P._focusEventsAllowed=!0:(P.div.addEventListener("focusin",()=>{P._focusEventsAllowed=!0},{once:!0}),Q.focus())},0)),P._structTreeParentId=(lt=a(this,v))==null?void 0:lt.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addUndoableEditor(P){const Q=()=>P._uiManager.rebuild(P),lt=()=>{P.remove()};this.addCommands({cmd:Q,undo:lt,mustExec:!1})}getNextId(){return a(this,O).getId()}pasteEditor(P,Q){a(this,O).updateToolbar(P),a(this,O).updateMode(P);const{offsetX:lt,offsetY:ut}=et(this,A,sn).call(this),Y=this.getNextId(),ht=et(this,k,an).call(this,{parent:this,id:Y,x:lt,y:ut,uiManager:a(this,O),isCentered:!0,...Q});ht&&this.add(ht)}deserialize(P){switch(P.annotationType??P.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return y.FreeTextEditor.deserialize(P,this,a(this,O));case i.AnnotationEditorType.INK:return S.InkEditor.deserialize(P,this,a(this,O));case i.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(P,this,a(this,O))}return null}addNewEditor(){et(this,p,Me).call(this,et(this,A,sn).call(this),!0)}setSelected(P){a(this,O).setSelected(P)}toggleSelected(P){a(this,O).toggleSelected(P)}isSelected(P){return a(this,O).isSelected(P)}unselect(P){a(this,O).unselect(P)}pointerup(P){const{isMac:Q}=i.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&Q)&&P.target===this.div&&a(this,m)){if(ct(this,m,!1),!a(this,B)){ct(this,B,!0);return}if(a(this,O).getMode()===i.AnnotationEditorType.STAMP){a(this,O).unselectAll();return}et(this,p,Me).call(this,P,!1)}}pointerdown(P){if(a(this,m)){ct(this,m,!1);return}const{isMac:Q}=i.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&Q||P.target!==this.div)return;ct(this,m,!0);const lt=a(this,O).getActive();ct(this,B,!lt||lt.isEmpty())}findNewParent(P,Q,lt){const ut=a(this,O).findParent(Q,lt);return ut===null||ut===this?!1:(ut.changeParent(P),!0)}destroy(){var P,Q;((P=a(this,O).getActive())==null?void 0:P.parent)===this&&(a(this,O).commitOrRemove(),a(this,O).setActiveEditor(null));for(const lt of a(this,_).values())(Q=a(this,v))==null||Q.removePointerInTextLayer(lt.contentDiv),lt.setParent(null),lt.isAttachedToDOM=!1,lt.div.remove();this.div=null,a(this,_).clear(),a(this,O).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,J.setLayerDimensions)(this.div,P);for(const Q of a(this,O).getEditors(this.pageIndex))this.add(Q);this.updateMode()}update({viewport:P}){a(this,O).commitOrRemove(),this.viewport=P,(0,J.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:Q}=this.viewport.rawDims;return[P,Q]}};v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakSet,an=function(P){switch(a(this,O).getMode()){case i.AnnotationEditorType.FREETEXT:return new y.FreeTextEditor(P);case i.AnnotationEditorType.INK:return new S.InkEditor(P);case i.AnnotationEditorType.STAMP:return new T.StampEditor(P)}return null},p=new WeakSet,Me=function(P,Q){const lt=this.getNextId(),ut=et(this,k,an).call(this,{parent:this,id:lt,x:P.offsetX,y:P.offsetY,uiManager:a(this,O),isCentered:Q});return ut&&this.add(ut),ut},A=new WeakSet,sn=function(){const{x:P,y:Q,width:lt,height:ut}=this.div.getBoundingClientRect(),Y=Math.max(0,P),ht=Math.max(0,Q),bt=Math.min(window.innerWidth,P+lt),Et=Math.min(window.innerHeight,Q+ut),At=(Y+bt)/2-P,L=(ht+Et)/2-Q,[o,d]=this.viewport.rotation%180===0?[At,L]:[L,At];return{offsetX:o,offsetY:d}},j=new WeakSet,on=function(){ct(this,x,!0);for(const P of a(this,_).values())P.isEmpty()&&P.remove();ct(this,x,!1)},re(V,"_initialized",!1);let E=V;n.AnnotationEditorLayer=E},(t,n,r)=>{var T,E,v,B,F,C,w,_,m,x,In,O,On,u,Ln,I,Ee,h,ln,b,jn,X,cn;Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var i=r(1),s=r(5),y=r(4),S=r(29);const Q=class Q extends y.AnnotationEditor{constructor(Y){super({...Y,name:"freeTextEditor"});H(this,x);H(this,O);H(this,u);H(this,I);H(this,h);H(this,b);H(this,X);H(this,T,this.editorDivBlur.bind(this));H(this,E,this.editorDivFocus.bind(this));H(this,v,this.editorDivInput.bind(this));H(this,B,this.editorDivKeydown.bind(this));H(this,F,void 0);H(this,C,"");H(this,w,`${this.id}-editor`);H(this,_,void 0);H(this,m,null);ct(this,F,Y.color||Q._defaultColor||y.AnnotationEditor._defaultLineColor),ct(this,_,Y.fontSize||Q._defaultFontSize)}static get _keyboardManager(){const Y=Q.prototype,ht=At=>At.isEmpty(),bt=s.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Y.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Y.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Y._translateEmpty,{args:[-bt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Y._translateEmpty,{args:[-Et,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],Y._translateEmpty,{args:[bt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Y._translateEmpty,{args:[Et,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],Y._translateEmpty,{args:[0,-bt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Y._translateEmpty,{args:[0,-Et],checker:ht}],[["ArrowDown","mac+ArrowDown"],Y._translateEmpty,{args:[0,bt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Y._translateEmpty,{args:[0,Et],checker:ht}]]))}static initialize(Y){y.AnnotationEditor.initialize(Y,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ht=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ht.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Y,ht){switch(Y){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Q._defaultFontSize=ht;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Q._defaultColor=ht;break}}updateParams(Y,ht){switch(Y){case i.AnnotationEditorParamsType.FREETEXT_SIZE:et(this,x,In).call(this,ht);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:et(this,O,On).call(this,ht);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,Q._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,Q._defaultColor||y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,_)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,F)]]}_translateEmpty(Y,ht){this._uiManager.translateSelectedEditors(Y,ht,!0)}getInitialTranslation(){const Y=this.parentScale;return[-Q._internalPadding*Y,-(Q._internalPadding+a(this,_))*Y]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,B)),this.editorDiv.addEventListener("focus",a(this,E)),this.editorDiv.addEventListener("blur",a(this,T)),this.editorDiv.addEventListener("input",a(this,v)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,w)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,B)),this.editorDiv.removeEventListener("focus",a(this,E)),this.editorDiv.removeEventListener("blur",a(this,T)),this.editorDiv.removeEventListener("input",a(this,v)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Y){this._focusEventsAllowed&&(super.focusin(Y),Y.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Y;if(this.width){et(this,X,cn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Y=this._initialOptions)!=null&&Y.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Y=a(this,C),ht=ct(this,C,et(this,u,Ln).call(this).trimEnd());if(Y===ht)return;const bt=Et=>{if(ct(this,C,Et),!Et){this.remove();return}et(this,h,ln).call(this),this._uiManager.rebuild(this),et(this,I,Ee).call(this)};this.addCommands({cmd:()=>{bt(ht)},undo:()=>{bt(Y)},mustExec:!1}),et(this,I,Ee).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Y){this.enterInEditMode()}keydown(Y){Y.target===this.div&&Y.key==="Enter"&&(this.enterInEditMode(),Y.preventDefault())}editorDivKeydown(Y){Q._keyboardManager.exec(this,Y)}editorDivFocus(Y){this.isEditing=!0}editorDivBlur(Y){this.isEditing=!1}editorDivInput(Y){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Y,ht;this.width&&(Y=this.x,ht=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,w)),this.enableEditing(),y.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var At;return(At=this.editorDiv)==null?void 0:At.setAttribute("aria-label",Et)}),y.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var At;return(At=this.editorDiv)==null?void 0:At.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:bt}=this.editorDiv;if(bt.fontSize=`calc(${a(this,_)}px * var(--scale-factor))`,bt.color=a(this,F),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,At]=this.parentDimensions;if(this.annotationElementId){const{position:L}=a(this,m);let[o,d]=this.getInitialTranslation();[o,d]=this.pageTranslationToScreen(o,d);const[c,f]=this.pageDimensions,[g,M]=this.pageTranslation;let $,q;switch(this.rotation){case 0:$=Y+(L[0]-g)/c,q=ht+this.height-(L[1]-M)/f;break;case 90:$=Y+(L[0]-g)/c,q=ht-(L[1]-M)/f,[o,d]=[d,-o];break;case 180:$=Y-this.width+(L[0]-g)/c,q=ht-(L[1]-M)/f,[o,d]=[-o,-d];break;case 270:$=Y+(L[0]-g-this.height*f)/c,q=ht+(L[1]-M-this.width*c)/f,[o,d]=[-d,o];break}this.setAt($*Et,q*At,o,d)}else this.setAt(Y*Et,ht*At,this.width*Et,this.height*At);et(this,h,ln).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Y,ht,bt){let Et=null;if(Y instanceof S.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:L,fontColor:o},rect:d,rotation:c,id:f},textContent:g,textPosition:M,parent:{page:{pageNumber:$}}}=Y;if(!g||g.length===0)return null;Et=Y={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(o),fontSize:L,value:g.join(`
`),position:M,pageIndex:$-1,rect:d,rotation:c,id:f,deleted:!1}}const At=super.deserialize(Y,ht,bt);return ct(At,_,Y.fontSize),ct(At,F,i.Util.makeHexColor(...Y.color)),ct(At,C,Y.value),At.annotationElementId=Y.id||null,ct(At,m,Et),At}serialize(Y=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ht=Q._internalPadding*this.parentScale,bt=this.getRect(ht,ht),Et=y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,F)),At={annotationType:i.AnnotationEditorType.FREETEXT,color:Et,fontSize:a(this,_),value:a(this,C),pageIndex:this.pageIndex,rect:bt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Y?At:this.annotationElementId&&!et(this,b,jn).call(this,At)?null:(At.id=this.annotationElementId,At)}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakSet,In=function(Y){const ht=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-a(this,_))*this.parentScale),ct(this,_,Et),et(this,I,Ee).call(this)},bt=a(this,_);this.addCommands({cmd:()=>{ht(Y)},undo:()=>{ht(bt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,On=function(Y){const ht=a(this,F);this.addCommands({cmd:()=>{ct(this,F,this.editorDiv.style.color=Y)},undo:()=>{ct(this,F,this.editorDiv.style.color=ht)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,Ln=function(){const Y=this.editorDiv.getElementsByTagName("div");if(Y.length===0)return this.editorDiv.innerText;const ht=[];for(const bt of Y)ht.push(bt.innerText.replace(/\r\n?|\n/,""));return ht.join(`
`)},I=new WeakSet,Ee=function(){const[Y,ht]=this.parentDimensions;let bt;if(this.isAttachedToDOM)bt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:At}=this,L=At.style.display;At.style.display="hidden",Et.div.append(this.div),bt=At.getBoundingClientRect(),At.remove(),At.style.display=L}this.rotation%180===this.parentRotation%180?(this.width=bt.width/Y,this.height=bt.height/ht):(this.width=bt.height/Y,this.height=bt.width/ht),this.fixAndSetPosition()},h=new WeakSet,ln=function(){if(this.editorDiv.replaceChildren(),!!a(this,C))for(const Y of a(this,C).split(`
`)){const ht=document.createElement("div");ht.append(Y?document.createTextNode(Y):document.createElement("br")),this.editorDiv.append(ht)}},b=new WeakSet,jn=function(Y){const{value:ht,fontSize:bt,color:Et,rect:At,pageIndex:L}=a(this,m);return Y.value!==ht||Y.fontSize!==bt||Y.rect.some((o,d)=>Math.abs(o-At[d])>=1)||Y.color.some((o,d)=>o!==Et[d])||Y.pageIndex!==L},X=new WeakSet,cn=function(Y=!1){if(!this.annotationElementId)return;if(et(this,I,Ee).call(this),!Y&&(this.width===0||this.height===0)){setTimeout(()=>et(this,X,cn).call(this,!0),0);return}const ht=Q._internalPadding*this.parentScale;a(this,m).rect=this.getRect(ht,ht)},re(Q,"_freeTextDefaultContent",""),re(Q,"_internalPadding",0),re(Q,"_defaultColor",null),re(Q,"_defaultFontSize",10),re(Q,"_type","freetext");let J=Q;n.FreeTextEditor=J},(t,n,r)=>{var d,f,he,M,Nn,q,at,it,pt,vt,_t,gt,Rt,Lt,Tt,Ot,U,G,N,K,mt,xt,Dt,$n,zt,De,qt,dn,Kt,un,st,tt,St,Ct,ie,ne,ot,hn,Ut,Ft,Wt,Ht,Bn,Pt,pn;Object.defineProperty(n,"__esModule",{value:!0}),n.StampAnnotationElement=n.InkAnnotationElement=n.FreeTextAnnotationElement=n.AnnotationLayer=void 0;var i=r(1),s=r(6),y=r(3),S=r(30),J=r(31),T=r(32);const E=1e3,v=9,B=new WeakSet;function F(Bt){return{width:Bt[2]-Bt[0],height:Bt[3]-Bt[1]}}class C{static create(z){switch(z.data.annotationType){case i.AnnotationType.LINK:return new _(z);case i.AnnotationType.TEXT:return new m(z);case i.AnnotationType.WIDGET:switch(z.data.fieldType){case"Tx":return new D(z);case"Btn":return z.data.radioButton?new u(z):z.data.checkBox?new k(z):new p(z);case"Ch":return new I(z);case"Sig":return new O(z)}return new x(z);case i.AnnotationType.POPUP:return new A(z);case i.AnnotationType.FREETEXT:return new j(z);case i.AnnotationType.LINE:return new b(z);case i.AnnotationType.SQUARE:return new V(z);case i.AnnotationType.CIRCLE:return new X(z);case i.AnnotationType.POLYLINE:return new P(z);case i.AnnotationType.CARET:return new lt(z);case i.AnnotationType.INK:return new ut(z);case i.AnnotationType.POLYGON:return new Q(z);case i.AnnotationType.HIGHLIGHT:return new Y(z);case i.AnnotationType.UNDERLINE:return new ht(z);case i.AnnotationType.SQUIGGLY:return new bt(z);case i.AnnotationType.STRIKEOUT:return new Et(z);case i.AnnotationType.STAMP:return new At(z);case i.AnnotationType.FILEATTACHMENT:return new L(z);default:return new w(z)}}}const c=class c{constructor(z,{isRenderable:l=!1,ignoreBorder:R=!1,createQuadrilaterals:W=!1}={}){H(this,d,!1);this.isRenderable=l,this.data=z.data,this.layer=z.layer,this.linkService=z.linkService,this.downloadManager=z.downloadManager,this.imageResourcesPath=z.imageResourcesPath,this.renderForms=z.renderForms,this.svgFactory=z.svgFactory,this.annotationStorage=z.annotationStorage,this.enableScripting=z.enableScripting,this.hasJSActions=z.hasJSActions,this._fieldObjects=z.fieldObjects,this.parent=z.parent,l&&(this.container=this._createContainer(R)),W&&this._createQuadrilaterals()}static _hasPopupData({titleObj:z,contentsObj:l,richText:R}){return!!(z!=null&&z.str||l!=null&&l.str||R!=null&&R.str)}get hasPopupData(){return c._hasPopupData(this.data)}_createContainer(z){const{data:l,parent:{page:R,viewport:W}}=this,Z=document.createElement("section");Z.setAttribute("data-annotation-id",l.id),this instanceof x||(Z.tabIndex=E),Z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Z.setAttribute("aria-haspopup","dialog"),l.noRotate&&Z.classList.add("norotate");const{pageWidth:rt,pageHeight:ft,pageX:wt,pageY:It}=W.rawDims;if(!l.rect||this instanceof A){const{rotation:Xt}=l;return!l.hasOwnCanvas&&Xt!==0&&this.setRotation(Xt,Z),Z}const{width:Mt,height:Yt}=F(l.rect),jt=i.Util.normalizeRect([l.rect[0],R.view[3]-l.rect[1]+R.view[1],l.rect[2],R.view[3]-l.rect[3]+R.view[1]]);if(!z&&l.borderStyle.width>0){Z.style.borderWidth=`${l.borderStyle.width}px`;const Xt=l.borderStyle.horizontalCornerRadius,Jt=l.borderStyle.verticalCornerRadius;if(Xt>0||Jt>0){const ee=`calc(${Xt}px * var(--scale-factor)) / calc(${Jt}px * var(--scale-factor))`;Z.style.borderRadius=ee}else if(this instanceof u){const ee=`calc(${Mt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;Z.style.borderRadius=ee}switch(l.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:Z.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:Z.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:Z.style.borderBottomStyle="solid";break}const Zt=l.borderColor||null;Zt?(ct(this,d,!0),Z.style.borderColor=i.Util.makeHexColor(Zt[0]|0,Zt[1]|0,Zt[2]|0)):Z.style.borderWidth=0}Z.style.left=`${100*(jt[0]-wt)/rt}%`,Z.style.top=`${100*(jt[1]-It)/ft}%`;const{rotation:Nt}=l;return l.hasOwnCanvas||Nt===0?(Z.style.width=`${100*Mt/rt}%`,Z.style.height=`${100*Yt/ft}%`):this.setRotation(Nt,Z),Z}setRotation(z,l=this.container){if(!this.data.rect)return;const{pageWidth:R,pageHeight:W}=this.parent.viewport.rawDims,{width:Z,height:rt}=F(this.data.rect);let ft,wt;z%180===0?(ft=100*Z/R,wt=100*rt/W):(ft=100*rt/R,wt=100*Z/W),l.style.width=`${ft}%`,l.style.height=`${wt}%`,l.setAttribute("data-main-rotation",(360-z)%360)}get _commonActions(){const z=(l,R,W)=>{const Z=W.detail[l],rt=Z[0],ft=Z.slice(1);W.target.style[R]=S.ColorConverters[`${rt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[R]:S.ColorConverters[`${rt}_rgb`](ft)})};return(0,i.shadow)(this,"_commonActions",{display:l=>{const{display:R}=l.detail,W=R%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:W,noPrint:R===1||R===2})},print:l=>{this.annotationStorage.setValue(this.data.id,{noPrint:!l.detail.print})},hidden:l=>{const{hidden:R}=l.detail;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:R,noView:R})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.target.disabled=l.detail.readonly},required:l=>{this._setRequired(l.target,l.detail.required)},bgColor:l=>{z("bgColor","backgroundColor",l)},fillColor:l=>{z("fillColor","backgroundColor",l)},fgColor:l=>{z("fgColor","color",l)},textColor:l=>{z("textColor","color",l)},borderColor:l=>{z("borderColor","borderColor",l)},strokeColor:l=>{z("strokeColor","borderColor",l)},rotation:l=>{const R=l.detail.rotation;this.setRotation(R),this.annotationStorage.setValue(this.data.id,{rotation:R})}})}_dispatchEventFromSandbox(z,l){const R=this._commonActions;for(const W of Object.keys(l.detail)){const Z=z[W]||R[W];Z==null||Z(l)}}_setDefaultPropertiesFromJS(z){if(!this.enableScripting)return;const l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;const R=this._commonActions;for(const[W,Z]of Object.entries(l)){const rt=R[W];if(rt){const ft={detail:{[W]:Z},target:z};rt(ft),delete l[W]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:z}=this.data;if(!z)return;const[l,R,W,Z]=this.data.rect;if(z.length===1){const[,{x:Jt,y:Zt},{x:ee,y:se}]=z[0];if(W===Jt&&Z===Zt&&l===ee&&R===se)return}const{style:rt}=this.container;let ft;if(a(this,d)){const{borderColor:Jt,borderWidth:Zt}=rt;rt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Jt}" stroke-width="${Zt}">`],this.container.classList.add("hasBorder")}const wt=W-l,It=Z-R,{svgFactory:Mt}=this,Yt=Mt.createElement("svg");Yt.classList.add("quadrilateralsContainer"),Yt.setAttribute("width",0),Yt.setAttribute("height",0);const jt=Mt.createElement("defs");Yt.append(jt);const Nt=Mt.createElement("clipPath"),Xt=`clippath_${this.data.id}`;Nt.setAttribute("id",Xt),Nt.setAttribute("clipPathUnits","objectBoundingBox"),jt.append(Nt);for(const[,{x:Jt,y:Zt},{x:ee,y:se}]of z){const ae=Mt.createElement("rect"),oe=(ee-l)/wt,de=(Z-Zt)/It,ue=(Jt-ee)/wt,An=(Zt-se)/It;ae.setAttribute("x",oe),ae.setAttribute("y",de),ae.setAttribute("width",ue),ae.setAttribute("height",An),Nt.append(ae),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${oe}" y="${de}" width="${ue}" height="${An}"/>`)}a(this,d)&&(ft.push("</g></svg>')"),rt.backgroundImage=ft.join("")),this.container.append(Yt),this.container.style.clipPath=`url(#${Xt})`}_createPopup(){const{container:z,data:l}=this;z.setAttribute("aria-haspopup","dialog");const R=new A({data:{color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,parentRect:l.rect,borderStyle:0,id:`popup_${l.id}`,rotation:l.rotation},parent:this.parent,elements:[this]});this.parent.div.append(R.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(z,l=null){const R=[];if(this._fieldObjects){const W=this._fieldObjects[z];if(W)for(const{page:Z,id:rt,exportValues:ft}of W){if(Z===-1||rt===l)continue;const wt=typeof ft=="string"?ft:null,It=document.querySelector(`[data-element-id="${rt}"]`);if(It&&!B.has(It)){(0,i.warn)(`_getElementsByName - element not allowed: ${rt}`);continue}R.push({id:rt,exportValue:wt,domElement:It})}return R}for(const W of document.getElementsByName(z)){const{exportValue:Z}=W,rt=W.getAttribute("data-element-id");rt!==l&&B.has(W)&&R.push({id:rt,exportValue:Z,domElement:W})}return R}show(){var z;this.container&&(this.container.hidden=!1),(z=this.popup)==null||z.maybeShow()}hide(){var z;this.container&&(this.container.hidden=!0),(z=this.popup)==null||z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const z=this.getElementsToTriggerPopup();if(Array.isArray(z))for(const l of z)l.classList.add("highlightArea");else z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:z,data:{id:l}}=this;this.container.addEventListener("dblclick",()=>{var R;(R=this.linkService.eventBus)==null||R.dispatch("switchannotationeditormode",{source:this,mode:z,editId:l})})}};d=new WeakMap;let w=c;class _ extends w{constructor(l,R=null){super(l,{isRenderable:!0,ignoreBorder:!!(R!=null&&R.ignoreBorder),createQuadrilaterals:!0});H(this,f);H(this,M);this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:R}=this,W=document.createElement("a");W.setAttribute("data-element-id",l.id);let Z=!1;return l.url?(R.addLinkAttributes(W,l.url,l.newWindow),Z=!0):l.action?(this._bindNamedAction(W,l.action),Z=!0):l.attachment?(this._bindAttachment(W,l.attachment),Z=!0):l.setOCGState?(et(this,M,Nn).call(this,W,l.setOCGState),Z=!0):l.dest?(this._bindLink(W,l.dest),Z=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(W,l),Z=!0),l.resetForm?(this._bindResetFormAction(W,l.resetForm),Z=!0):this.isTooltipOnly&&!Z&&(this._bindLink(W,""),Z=!0)),this.container.classList.add("linkAnnotation"),Z&&this.container.append(W),this.container}_bindLink(l,R){l.href=this.linkService.getDestinationHash(R),l.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&et(this,f,he).call(this)}_bindNamedAction(l,R){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(R),!1),et(this,f,he).call(this)}_bindAttachment(l,R){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>{var W;return(W=this.downloadManager)==null||W.openOrDownloadData(this.container,R.content,R.filename),!1},et(this,f,he).call(this)}_bindJSAction(l,R){l.href=this.linkService.getAnchorUrl("");const W=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Z of Object.keys(R.actions)){const rt=W.get(Z);rt&&(l[rt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:Z}}),!1})}l.onclick||(l.onclick=()=>!1),et(this,f,he).call(this)}_bindResetFormAction(l,R){const W=l.onclick;if(W||(l.href=this.linkService.getAnchorUrl("")),et(this,f,he).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),W||(l.onclick=()=>!1);return}l.onclick=()=>{var Yt;W==null||W();const{fields:Z,refs:rt,include:ft}=R,wt=[];if(Z.length!==0||rt.length!==0){const jt=new Set(rt);for(const Nt of Z){const Xt=this._fieldObjects[Nt]||[];for(const{id:Jt}of Xt)jt.add(Jt)}for(const Nt of Object.values(this._fieldObjects))for(const Xt of Nt)jt.has(Xt.id)===ft&&wt.push(Xt)}else for(const jt of Object.values(this._fieldObjects))wt.push(...jt);const It=this.annotationStorage,Mt=[];for(const jt of wt){const{id:Nt}=jt;switch(Mt.push(Nt),jt.type){case"text":{const Jt=jt.defaultValue||"";It.setValue(Nt,{value:Jt});break}case"checkbox":case"radiobutton":{const Jt=jt.defaultValue===jt.exportValues;It.setValue(Nt,{value:Jt});break}case"combobox":case"listbox":{const Jt=jt.defaultValue||"";It.setValue(Nt,{value:Jt});break}default:continue}const Xt=document.querySelector(`[data-element-id="${Nt}"]`);if(Xt){if(!B.has(Xt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Nt}`);continue}}else continue;Xt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Mt,name:"ResetForm"}})),!1}}}f=new WeakSet,he=function(){this.container.setAttribute("data-internal-link","")},M=new WeakSet,Nn=function(l,R){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(R),!1),et(this,f,he).call(this)};class m extends w{constructor(z){super(z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const z=document.createElement("img");return z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",z.alt="[{{type}} Annotation]",z.dataset.l10nId="text_annotation_type",z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(z),this.container}}class x extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(z){var l;this.data.hasOwnCanvas&&(((l=z.previousSibling)==null?void 0:l.nodeName)==="CANVAS"&&(z.previousSibling.hidden=!0),z.hidden=!1)}_getKeyModifier(z){const{isWin:l,isMac:R}=i.FeatureTest.platform;return l&&z.ctrlKey||R&&z.metaKey}_setEventListener(z,l,R,W,Z){R.includes("mouse")?z.addEventListener(R,rt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:Z(rt),shift:rt.shiftKey,modifier:this._getKeyModifier(rt)}})}):z.addEventListener(R,rt=>{var ft;if(R==="blur"){if(!l.focused||!rt.relatedTarget)return;l.focused=!1}else if(R==="focus"){if(l.focused)return;l.focused=!0}Z&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:Z(rt)}}))})}_setEventListeners(z,l,R,W){var Z,rt,ft;for(const[wt,It]of R)(It==="Action"||(Z=this.data.actions)!=null&&Z[It])&&((It==="Focus"||It==="Blur")&&(l||(l={focused:!1})),this._setEventListener(z,l,wt,It,W),It==="Focus"&&!((rt=this.data.actions)!=null&&rt.Blur)?this._setEventListener(z,l,"blur","Blur",null):It==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(z,l,"focus","Focus",null))}_setBackgroundColor(z){const l=this.data.backgroundColor||null;z.style.backgroundColor=l===null?"transparent":i.Util.makeHexColor(l[0],l[1],l[2])}_setTextStyle(z){const l=["left","center","right"],{fontColor:R}=this.data.defaultAppearanceData,W=this.data.defaultAppearanceData.fontSize||v,Z=z.style;let rt;const ft=2,wt=It=>Math.round(10*It)/10;if(this.data.multiLine){const It=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Mt=Math.round(It/(i.LINE_FACTOR*W))||1,Yt=It/Mt;rt=Math.min(W,wt(Yt/i.LINE_FACTOR))}else{const It=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);rt=Math.min(W,wt(It/i.LINE_FACTOR))}Z.fontSize=`calc(${rt}px * var(--scale-factor))`,Z.color=i.Util.makeHexColor(R[0],R[1],R[2]),this.data.textAlignment!==null&&(Z.textAlign=l[this.data.textAlignment])}_setRequired(z,l){l?z.setAttribute("required",!0):z.removeAttribute("required"),z.setAttribute("aria-required",l)}}class D extends x{constructor(z){const l=z.renderForms||!z.data.hasAppearance&&!!z.data.fieldValue;super(z,{isRenderable:l})}setPropertyOnSiblings(z,l,R,W){const Z=this.annotationStorage;for(const rt of this._getElementsByName(z.name,z.id))rt.domElement&&(rt.domElement[l]=R),Z.setValue(rt.id,{[W]:R})}render(){var W,Z;const z=this.annotationStorage,l=this.data.id;this.container.classList.add("textWidgetAnnotation");let R=null;if(this.renderForms){const rt=z.getValue(l,{value:this.data.fieldValue});let ft=rt.value||"";const wt=z.getValue(l,{charLimit:this.data.maxLen}).charLimit;wt&&ft.length>wt&&(ft=ft.slice(0,wt));let It=rt.formattedValue||((W=this.data.textContent)==null?void 0:W.join(`
`))||null;It&&this.data.comb&&(It=It.replaceAll(/\s+/g,""));const Mt={userValue:ft,formattedValue:It,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(R=document.createElement("textarea"),R.textContent=It??ft,this.data.doNotScroll&&(R.style.overflowY="hidden")):(R=document.createElement("input"),R.type="text",R.setAttribute("value",It??ft),this.data.doNotScroll&&(R.style.overflowX="hidden")),this.data.hasOwnCanvas&&(R.hidden=!0),B.add(R),R.setAttribute("data-element-id",l),R.disabled=this.data.readOnly,R.name=this.data.fieldName,R.tabIndex=E,this._setRequired(R,this.data.required),wt&&(R.maxLength=wt),R.addEventListener("input",jt=>{z.setValue(l,{value:jt.target.value}),this.setPropertyOnSiblings(R,"value",jt.target.value,"value"),Mt.formattedValue=null}),R.addEventListener("resetform",jt=>{const Nt=this.data.defaultFieldValue??"";R.value=Mt.userValue=Nt,Mt.formattedValue=null});let Yt=jt=>{const{formattedValue:Nt}=Mt;Nt!=null&&(jt.target.value=Nt),jt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){R.addEventListener("focus",Nt=>{if(Mt.focused)return;const{target:Xt}=Nt;Mt.userValue&&(Xt.value=Mt.userValue),Mt.lastCommittedValue=Xt.value,Mt.commitKey=1,Mt.focused=!0}),R.addEventListener("updatefromsandbox",Nt=>{this.showElementAndHideCanvas(Nt.target);const Xt={value(Jt){Mt.userValue=Jt.detail.value??"",z.setValue(l,{value:Mt.userValue.toString()}),Jt.target.value=Mt.userValue},formattedValue(Jt){const{formattedValue:Zt}=Jt.detail;Mt.formattedValue=Zt,Zt!=null&&Jt.target!==document.activeElement&&(Jt.target.value=Zt),z.setValue(l,{formattedValue:Zt})},selRange(Jt){Jt.target.setSelectionRange(...Jt.detail.selRange)},charLimit:Jt=>{var ae;const{charLimit:Zt}=Jt.detail,{target:ee}=Jt;if(Zt===0){ee.removeAttribute("maxLength");return}ee.setAttribute("maxLength",Zt);let se=Mt.userValue;!se||se.length<=Zt||(se=se.slice(0,Zt),ee.value=Mt.userValue=se,z.setValue(l,{value:se}),(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:ee.selectionStart,selEnd:ee.selectionEnd}}))}};this._dispatchEventFromSandbox(Xt,Nt)}),R.addEventListener("keydown",Nt=>{var Zt;Mt.commitKey=1;let Xt=-1;if(Nt.key==="Escape"?Xt=0:Nt.key==="Enter"&&!this.data.multiLine?Xt=2:Nt.key==="Tab"&&(Mt.commitKey=3),Xt===-1)return;const{value:Jt}=Nt.target;Mt.lastCommittedValue!==Jt&&(Mt.lastCommittedValue=Jt,Mt.userValue=Jt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Jt,willCommit:!0,commitKey:Xt,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}}))});const jt=Yt;Yt=null,R.addEventListener("blur",Nt=>{var Jt;if(!Mt.focused||!Nt.relatedTarget)return;Mt.focused=!1;const{value:Xt}=Nt.target;Mt.userValue=Xt,Mt.lastCommittedValue!==Xt&&((Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Xt,willCommit:!0,commitKey:Mt.commitKey,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}})),jt(Nt)}),(Z=this.data.actions)!=null&&Z.Keystroke&&R.addEventListener("beforeinput",Nt=>{var de;Mt.lastCommittedValue=null;const{data:Xt,target:Jt}=Nt,{value:Zt,selectionStart:ee,selectionEnd:se}=Jt;let ae=ee,oe=se;switch(Nt.inputType){case"deleteWordBackward":{const ue=Zt.substring(0,ee).match(/\w*[^\w]*$/);ue&&(ae-=ue[0].length);break}case"deleteWordForward":{const ue=Zt.substring(ee).match(/^[^\w]*\w*/);ue&&(oe+=ue[0].length);break}case"deleteContentBackward":ee===se&&(ae-=1);break;case"deleteContentForward":ee===se&&(oe+=1);break}Nt.preventDefault(),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Zt,change:Xt||"",willCommit:!1,selStart:ae,selEnd:oe}})}),this._setEventListeners(R,Mt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.value)}if(Yt&&R.addEventListener("blur",Yt),this.data.comb){const Nt=(this.data.rect[2]-this.data.rect[0])/wt;R.classList.add("comb"),R.style.letterSpacing=`calc(${Nt}px * var(--scale-factor) - 1ch)`}}else R=document.createElement("div"),R.textContent=this.data.fieldValue,R.style.verticalAlign="middle",R.style.display="table-cell";return this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class O extends x{constructor(z){super(z,{isRenderable:!!z.data.hasOwnCanvas})}}class k extends x{constructor(z){super(z,{isRenderable:z.renderForms})}render(){const z=this.annotationStorage,l=this.data,R=l.id;let W=z.getValue(R,{value:l.exportValue===l.fieldValue}).value;typeof W=="string"&&(W=W!=="Off",z.setValue(R,{value:W})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Z=document.createElement("input");return B.add(Z),Z.setAttribute("data-element-id",R),Z.disabled=l.readOnly,this._setRequired(Z,this.data.required),Z.type="checkbox",Z.name=l.fieldName,W&&Z.setAttribute("checked",!0),Z.setAttribute("exportValue",l.exportValue),Z.tabIndex=E,Z.addEventListener("change",rt=>{const{name:ft,checked:wt}=rt.target;for(const It of this._getElementsByName(ft,R)){const Mt=wt&&It.exportValue===l.exportValue;It.domElement&&(It.domElement.checked=Mt),z.setValue(It.id,{value:Mt})}z.setValue(R,{value:wt})}),Z.addEventListener("resetform",rt=>{const ft=l.defaultFieldValue||"Off";rt.target.checked=ft===l.exportValue}),this.enableScripting&&this.hasJSActions&&(Z.addEventListener("updatefromsandbox",rt=>{const ft={value(wt){wt.target.checked=wt.detail.value!=="Off",z.setValue(R,{value:wt.target.checked})}};this._dispatchEventFromSandbox(ft,rt)}),this._setEventListeners(Z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)),this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class u extends x{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const z=this.annotationStorage,l=this.data,R=l.id;let W=z.getValue(R,{value:l.fieldValue===l.buttonValue}).value;typeof W=="string"&&(W=W!==l.buttonValue,z.setValue(R,{value:W}));const Z=document.createElement("input");if(B.add(Z),Z.setAttribute("data-element-id",R),Z.disabled=l.readOnly,this._setRequired(Z,this.data.required),Z.type="radio",Z.name=l.fieldName,W&&Z.setAttribute("checked",!0),Z.tabIndex=E,Z.addEventListener("change",rt=>{const{name:ft,checked:wt}=rt.target;for(const It of this._getElementsByName(ft,R))z.setValue(It.id,{value:!1});z.setValue(R,{value:wt})}),Z.addEventListener("resetform",rt=>{const ft=l.defaultFieldValue;rt.target.checked=ft!=null&&ft===l.buttonValue}),this.enableScripting&&this.hasJSActions){const rt=l.buttonValue;Z.addEventListener("updatefromsandbox",ft=>{const wt={value:It=>{const Mt=rt===It.detail.value;for(const Yt of this._getElementsByName(It.target.name)){const jt=Mt&&Yt.id===R;Yt.domElement&&(Yt.domElement.checked=jt),z.setValue(Yt.id,{value:jt})}}};this._dispatchEventFromSandbox(wt,ft)}),this._setEventListeners(Z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class p extends _{constructor(z){super(z,{ignoreBorder:z.data.hasAppearance})}render(){const z=super.render();z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(z.title=this.data.alternativeText);const l=z.lastChild;return this.enableScripting&&this.hasJSActions&&l&&(this._setDefaultPropertiesFromJS(l),l.addEventListener("updatefromsandbox",R=>{this._dispatchEventFromSandbox({},R)})),z}}class I extends x{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const z=this.annotationStorage,l=this.data.id,R=z.getValue(l,{value:this.data.fieldValue}),W=document.createElement("select");B.add(W),W.setAttribute("data-element-id",l),W.disabled=this.data.readOnly,this._setRequired(W,this.data.required),W.name=this.data.fieldName,W.tabIndex=E;let Z=this.data.combo&&this.data.options.length>0;this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",Mt=>{const Yt=this.data.defaultFieldValue;for(const jt of W.options)jt.selected=jt.value===Yt});for(const Mt of this.data.options){const Yt=document.createElement("option");Yt.textContent=Mt.displayValue,Yt.value=Mt.exportValue,R.value.includes(Mt.exportValue)&&(Yt.setAttribute("selected",!0),Z=!1),W.append(Yt)}let rt=null;if(Z){const Mt=document.createElement("option");Mt.value=" ",Mt.setAttribute("hidden",!0),Mt.setAttribute("selected",!0),W.prepend(Mt),rt=()=>{Mt.remove(),W.removeEventListener("input",rt),rt=null},W.addEventListener("input",rt)}const ft=Mt=>{const Yt=Mt?"value":"textContent",{options:jt,multiple:Nt}=W;return Nt?Array.prototype.filter.call(jt,Xt=>Xt.selected).map(Xt=>Xt[Yt]):jt.selectedIndex===-1?null:jt[jt.selectedIndex][Yt]};let wt=ft(!1);const It=Mt=>{const Yt=Mt.target.options;return Array.prototype.map.call(Yt,jt=>({displayValue:jt.textContent,exportValue:jt.value}))};return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",Mt=>{const Yt={value(jt){rt==null||rt();const Nt=jt.detail.value,Xt=new Set(Array.isArray(Nt)?Nt:[Nt]);for(const Jt of W.options)Jt.selected=Xt.has(Jt.value);z.setValue(l,{value:ft(!0)}),wt=ft(!1)},multipleSelection(jt){W.multiple=!0},remove(jt){const Nt=W.options,Xt=jt.detail.remove;Nt[Xt].selected=!1,W.remove(Xt),Nt.length>0&&Array.prototype.findIndex.call(Nt,Zt=>Zt.selected)===-1&&(Nt[0].selected=!0),z.setValue(l,{value:ft(!0),items:It(jt)}),wt=ft(!1)},clear(jt){for(;W.length!==0;)W.remove(0);z.setValue(l,{value:null,items:[]}),wt=ft(!1)},insert(jt){const{index:Nt,displayValue:Xt,exportValue:Jt}=jt.detail.insert,Zt=W.children[Nt],ee=document.createElement("option");ee.textContent=Xt,ee.value=Jt,Zt?Zt.before(ee):W.append(ee),z.setValue(l,{value:ft(!0),items:It(jt)}),wt=ft(!1)},items(jt){const{items:Nt}=jt.detail;for(;W.length!==0;)W.remove(0);for(const Xt of Nt){const{displayValue:Jt,exportValue:Zt}=Xt,ee=document.createElement("option");ee.textContent=Jt,ee.value=Zt,W.append(ee)}W.options.length>0&&(W.options[0].selected=!0),z.setValue(l,{value:ft(!0),items:It(jt)}),wt=ft(!1)},indices(jt){const Nt=new Set(jt.detail.indices);for(const Xt of jt.target.options)Xt.selected=Nt.has(Xt.index);z.setValue(l,{value:ft(!0)}),wt=ft(!1)},editable(jt){jt.target.disabled=!jt.detail.editable}};this._dispatchEventFromSandbox(Yt,Mt)}),W.addEventListener("input",Mt=>{var jt;const Yt=ft(!0);z.setValue(l,{value:Yt}),Mt.preventDefault(),(jt=this.linkService.eventBus)==null||jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:wt,changeEx:Yt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Mt=>Mt.target.value)):W.addEventListener("input",function(Mt){z.setValue(l,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class A extends w{constructor(z){const{data:l,elements:R}=z;super(z,{isRenderable:w._hasPopupData(l)}),this.elements=R}render(){this.container.classList.add("popupAnnotation");const z=new h({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),l=[];for(const R of this.elements)R.popup=z,l.push(R.data.id),R.addHighlightArea();return this.container.setAttribute("aria-controls",l.map(R=>`${i.AnnotationPrefix}${R}`).join(",")),this.container}}class h{constructor({container:z,color:l,elements:R,titleObj:W,modificationDate:Z,contentsObj:rt,richText:ft,parent:wt,rect:It,parentRect:Mt,open:Yt}){H(this,Dt);H(this,zt);H(this,qt);H(this,Kt);H(this,q,null);H(this,at,et(this,Dt,$n).bind(this));H(this,it,et(this,Kt,un).bind(this));H(this,pt,et(this,qt,dn).bind(this));H(this,vt,et(this,zt,De).bind(this));H(this,_t,null);H(this,gt,null);H(this,Rt,null);H(this,Lt,null);H(this,Tt,null);H(this,Ot,null);H(this,U,!1);H(this,G,null);H(this,N,null);H(this,K,null);H(this,mt,null);H(this,xt,!1);var Nt;ct(this,gt,z),ct(this,mt,W),ct(this,Rt,rt),ct(this,K,ft),ct(this,Tt,wt),ct(this,_t,l),ct(this,N,It),ct(this,Ot,Mt),ct(this,Lt,R);const jt=s.PDFDateString.toDateObject(Z);jt&&ct(this,q,wt.l10n.get("annotation_date_string",{date:jt.toLocaleDateString(),time:jt.toLocaleTimeString()})),this.trigger=R.flatMap(Xt=>Xt.getElementsToTriggerPopup());for(const Xt of this.trigger)Xt.addEventListener("click",a(this,vt)),Xt.addEventListener("mouseenter",a(this,pt)),Xt.addEventListener("mouseleave",a(this,it)),Xt.classList.add("popupTriggerArea");for(const Xt of R)(Nt=Xt.container)==null||Nt.addEventListener("keydown",a(this,at));a(this,gt).hidden=!0,Yt&&et(this,zt,De).call(this)}render(){if(a(this,G))return;const{page:{view:z},viewport:{rawDims:{pageWidth:l,pageHeight:R,pageX:W,pageY:Z}}}=a(this,Tt),rt=ct(this,G,document.createElement("div"));if(rt.className="popup",a(this,_t)){const ae=rt.style.outlineColor=i.Util.makeHexColor(...a(this,_t));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?rt.style.backgroundColor=`color-mix(in srgb, ${ae} 30%, white)`:rt.style.backgroundColor=i.Util.makeHexColor(...a(this,_t).map(de=>Math.floor(.7*(255-de)+de)))}const ft=document.createElement("span");ft.className="header";const wt=document.createElement("h1");if(ft.append(wt),{dir:wt.dir,str:wt.textContent}=a(this,mt),rt.append(ft),a(this,q)){const ae=document.createElement("span");ae.classList.add("popupDate"),a(this,q).then(oe=>{ae.textContent=oe}),ft.append(ae)}const It=a(this,Rt),Mt=a(this,K);if(Mt!=null&&Mt.str&&(!(It!=null&&It.str)||It.str===Mt.str))T.XfaLayer.render({xfaHtml:Mt.html,intent:"richText",div:rt}),rt.lastChild.classList.add("richText","popupContent");else{const ae=this._formatContents(It);rt.append(ae)}let Yt=!!a(this,Ot),jt=Yt?a(this,Ot):a(this,N);for(const ae of a(this,Lt))if(!jt||i.Util.intersect(ae.data.rect,jt)!==null){jt=ae.data.rect,Yt=!0;break}const Nt=i.Util.normalizeRect([jt[0],z[3]-jt[1]+z[1],jt[2],z[3]-jt[3]+z[1]]),Xt=5,Jt=Yt?jt[2]-jt[0]+Xt:0,Zt=Nt[0]+Jt,ee=Nt[1],{style:se}=a(this,gt);se.left=`${100*(Zt-W)/l}%`,se.top=`${100*(ee-Z)/R}%`,a(this,gt).append(rt)}_formatContents({str:z,dir:l}){const R=document.createElement("p");R.classList.add("popupContent"),R.dir=l;const W=z.split(/(?:\r\n?|\n)/);for(let Z=0,rt=W.length;Z<rt;++Z){const ft=W[Z];R.append(document.createTextNode(ft)),Z<rt-1&&R.append(document.createElement("br"))}return R}forceHide(){ct(this,xt,this.isVisible),a(this,xt)&&(a(this,gt).hidden=!0)}maybeShow(){a(this,xt)&&(ct(this,xt,!1),a(this,gt).hidden=!1)}get isVisible(){return a(this,gt).hidden===!1}}q=new WeakMap,at=new WeakMap,it=new WeakMap,pt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,U=new WeakMap,G=new WeakMap,N=new WeakMap,K=new WeakMap,mt=new WeakMap,xt=new WeakMap,Dt=new WeakSet,$n=function(z){z.altKey||z.shiftKey||z.ctrlKey||z.metaKey||(z.key==="Enter"||z.key==="Escape"&&a(this,U))&&et(this,zt,De).call(this)},zt=new WeakSet,De=function(){ct(this,U,!a(this,U)),a(this,U)?(et(this,qt,dn).call(this),a(this,gt).addEventListener("click",a(this,vt)),a(this,gt).addEventListener("keydown",a(this,at))):(et(this,Kt,un).call(this),a(this,gt).removeEventListener("click",a(this,vt)),a(this,gt).removeEventListener("keydown",a(this,at)))},qt=new WeakSet,dn=function(){a(this,G)||this.render(),this.isVisible?a(this,U)&&a(this,gt).classList.add("focused"):(a(this,gt).hidden=!1,a(this,gt).style.zIndex=parseInt(a(this,gt).style.zIndex)+1e3)},Kt=new WeakSet,un=function(){a(this,gt).classList.remove("focused"),!(a(this,U)||!this.isVisible)&&(a(this,gt).hidden=!0,a(this,gt).style.zIndex=parseInt(a(this,gt).style.zIndex)-1e3)};class j extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=z.data.textContent,this.textPosition=z.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const z=document.createElement("div");z.classList.add("annotationTextContent"),z.setAttribute("role","comment");for(const l of this.textContent){const R=document.createElement("span");R.textContent=l,z.append(R)}this.container.append(z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}n.FreeTextAnnotationElement=j;class b extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,st,null)}render(){this.container.classList.add("lineAnnotation");const l=this.data,{width:R,height:W}=F(l.rect),Z=this.svgFactory.create(R,W,!0),rt=ct(this,st,this.svgFactory.createElement("svg:line"));return rt.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),rt.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),rt.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),rt.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),rt.setAttribute("stroke-width",l.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),Z.append(rt),this.container.append(Z),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap;class V extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,tt,null)}render(){this.container.classList.add("squareAnnotation");const l=this.data,{width:R,height:W}=F(l.rect),Z=this.svgFactory.create(R,W,!0),rt=l.borderStyle.width,ft=ct(this,tt,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",rt/2),ft.setAttribute("y",rt/2),ft.setAttribute("width",R-rt),ft.setAttribute("height",W-rt),ft.setAttribute("stroke-width",rt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),Z.append(ft),this.container.append(Z),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class X extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,St,null)}render(){this.container.classList.add("circleAnnotation");const l=this.data,{width:R,height:W}=F(l.rect),Z=this.svgFactory.create(R,W,!0),rt=l.borderStyle.width,ft=ct(this,St,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",R/2),ft.setAttribute("cy",W/2),ft.setAttribute("rx",R/2-rt/2),ft.setAttribute("ry",W/2-rt/2),ft.setAttribute("stroke-width",rt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),Z.append(ft),this.container.append(Z),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,St)}addHighlightArea(){this.container.classList.add("highlightArea")}}St=new WeakMap;class P extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,Ct,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:R,height:W}=F(l.rect),Z=this.svgFactory.create(R,W,!0);let rt=[];for(const wt of l.vertices){const It=wt.x-l.rect[0],Mt=l.rect[3]-wt.y;rt.push(It+","+Mt)}rt=rt.join(" ");const ft=ct(this,Ct,this.svgFactory.createElement(this.svgElementName));return ft.setAttribute("points",rt),ft.setAttribute("stroke-width",l.borderStyle.width||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),Z.append(ft),this.container.append(Z),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ct=new WeakMap;class Q extends P{constructor(z){super(z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lt extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ut extends w{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});H(this,ie,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:R,height:W}=F(l.rect),Z=this.svgFactory.create(R,W,!0);for(const rt of l.inkLists){let ft=[];for(const It of rt){const Mt=It.x-l.rect[0],Yt=l.rect[3]-It.y;ft.push(`${Mt},${Yt}`)}ft=ft.join(" ");const wt=this.svgFactory.createElement(this.svgElementName);a(this,ie).push(wt),wt.setAttribute("points",ft),wt.setAttribute("stroke-width",l.borderStyle.width||1),wt.setAttribute("stroke","transparent"),wt.setAttribute("fill","transparent"),!l.popupRef&&this.hasPopupData&&this._createPopup(),Z.append(wt)}return this.container.append(Z),this.container}getElementsToTriggerPopup(){return a(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap,n.InkAnnotationElement=ut;class Y extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class bt extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Et extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class At extends w{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}n.StampAnnotationElement=At;class L extends w{constructor(l){var Z;super(l,{isRenderable:!0});H(this,ot);H(this,ne,null);const{filename:R,content:W}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(R,!0),this.content=W,(Z=this.linkService.eventBus)==null||Z.dispatch("fileattachmentannotation",{source:this,filename:R,content:W})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:l,data:R}=this;let W;R.hasAppearance||R.fillAlpha===0?W=document.createElement("div"):(W=document.createElement("img"),W.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(R.name)?"paperclip":"pushpin"}.svg`,R.fillAlpha&&R.fillAlpha<1&&(W.style=`filter: opacity(${Math.round(R.fillAlpha*100)}%);`)),W.addEventListener("dblclick",et(this,ot,hn).bind(this)),ct(this,ne,W);const{isMac:Z}=i.FeatureTest.platform;return l.addEventListener("keydown",rt=>{rt.key==="Enter"&&(Z?rt.metaKey:rt.ctrlKey)&&et(this,ot,hn).call(this)}),!R.popupRef&&this.hasPopupData?this._createPopup():W.classList.add("popupTriggerArea"),l.append(W),l}getElementsToTriggerPopup(){return a(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,ot=new WeakSet,hn=function(){var l;(l=this.downloadManager)==null||l.openOrDownloadData(this.container,this.content,this.filename)};class o{constructor({div:z,accessibilityManager:l,annotationCanvasMap:R,l10n:W,page:Z,viewport:rt}){H(this,Ht);H(this,Pt);H(this,Ut,null);H(this,Ft,null);H(this,Wt,new Map);this.div=z,ct(this,Ut,l),ct(this,Ft,R),this.l10n=W,this.page=Z,this.viewport=rt,this.zIndex=0,this.l10n||(this.l10n=J.NullL10n)}async render(z){const{annotations:l}=z,R=this.div;(0,s.setLayerDimensions)(R,this.viewport);const W=new Map,Z={data:null,layer:R,linkService:z.linkService,downloadManager:z.downloadManager,imageResourcesPath:z.imageResourcesPath||"",renderForms:z.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:z.annotationStorage||new y.AnnotationStorage,enableScripting:z.enableScripting===!0,hasJSActions:z.hasJSActions,fieldObjects:z.fieldObjects,parent:this,elements:null};for(const rt of l){if(rt.noHTML)continue;const ft=rt.annotationType===i.AnnotationType.POPUP;if(ft){const Mt=W.get(rt.id);if(!Mt)continue;Z.elements=Mt}else{const{width:Mt,height:Yt}=F(rt.rect);if(Mt<=0||Yt<=0)continue}Z.data=rt;const wt=C.create(Z);if(!wt.isRenderable)continue;if(!ft&&rt.popupRef){const Mt=W.get(rt.popupRef);Mt?Mt.push(wt):W.set(rt.popupRef,[wt])}wt.annotationEditorType>0&&a(this,Wt).set(wt.data.id,wt);const It=wt.render();rt.hidden&&(It.style.visibility="hidden"),et(this,Ht,Bn).call(this,It,rt.id)}et(this,Pt,pn).call(this),await this.l10n.translate(R)}update({viewport:z}){const l=this.div;this.viewport=z,(0,s.setLayerDimensions)(l,{rotation:z.rotation}),et(this,Pt,pn).call(this),l.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Wt).values())}getEditableAnnotation(z){return a(this,Wt).get(z)}}Ut=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,Ht=new WeakSet,Bn=function(z,l){var W;const R=z.firstChild||z;R.id=`${i.AnnotationPrefix}${l}`,this.div.append(z),(W=a(this,Ut))==null||W.moveElementInDOM(this.div,z,R,!1)},Pt=new WeakSet,pn=function(){if(!a(this,Ft))return;const z=this.div;for(const[l,R]of a(this,Ft)){const W=z.querySelector(`[data-annotation-id="${l}"]`);if(!W)continue;const{firstChild:Z}=W;Z?Z.nodeName==="CANVAS"?Z.replaceWith(R):Z.before(R):W.append(R)}a(this,Ft).clear()},n.AnnotationLayer=o},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function r(y){return Math.floor(Math.max(0,Math.min(1,y))*255).toString(16).padStart(2,"0")}function i(y){return Math.max(0,Math.min(255,255*y))}class s{static CMYK_G([S,J,T,E]){return["G",1-Math.min(1,.3*S+.59*T+.11*J+E)]}static G_CMYK([S]){return["CMYK",0,0,0,1-S]}static G_RGB([S]){return["RGB",S,S,S]}static G_rgb([S]){return S=i(S),[S,S,S]}static G_HTML([S]){const J=r(S);return`#${J}${J}${J}`}static RGB_G([S,J,T]){return["G",.3*S+.59*J+.11*T]}static RGB_rgb(S){return S.map(i)}static RGB_HTML(S){return`#${S.map(r).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([S,J,T,E]){return["RGB",1-Math.min(1,S+E),1-Math.min(1,T+E),1-Math.min(1,J+E)]}static CMYK_rgb([S,J,T,E]){return[i(1-Math.min(1,S+E)),i(1-Math.min(1,T+E)),i(1-Math.min(1,J+E))]}static CMYK_HTML(S){const J=this.CMYK_RGB(S).slice(1);return this.RGB_HTML(J)}static RGB_CMYK([S,J,T]){const E=1-S,v=1-J,B=1-T,F=Math.min(E,v,B);return["CMYK",E,v,B,F]}}n.ColorConverters=s},(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NullL10n=void 0,n.getL10nFallback=i;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};r.print_progress_percent="{{progress}}%";function i(S,J){switch(S){case"find_match_count":S=`find_match_count[${J.total===1?"one":"other"}]`;break;case"find_match_count_limit":S=`find_match_count_limit[${J.limit===1?"one":"other"}]`;break}return r[S]||""}function s(S,J){return J?S.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(T,E)=>E in J?J[E]:"{{"+E+"}}"):S}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(S,J=null,T=i(S,J)){return s(T,J)},async translate(S){}};n.NullL10n=y},(t,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var i=r(25);class s{static setupStorage(S,J,T,E,v){const B=E.getValue(J,{value:null});switch(T.name){case"textarea":if(B.value!==null&&(S.textContent=B.value),v==="print")break;S.addEventListener("input",F=>{E.setValue(J,{value:F.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(B.value===T.attributes.xfaOn?S.setAttribute("checked",!0):B.value===T.attributes.xfaOff&&S.removeAttribute("checked"),v==="print")break;S.addEventListener("change",F=>{E.setValue(J,{value:F.target.checked?F.target.getAttribute("xfaOn"):F.target.getAttribute("xfaOff")})})}else{if(B.value!==null&&S.setAttribute("value",B.value),v==="print")break;S.addEventListener("input",F=>{E.setValue(J,{value:F.target.value})})}break;case"select":if(B.value!==null){S.setAttribute("value",B.value);for(const F of T.children)F.attributes.value===B.value?F.attributes.selected=!0:F.attributes.hasOwnProperty("selected")&&delete F.attributes.selected}S.addEventListener("input",F=>{const C=F.target.options,w=C.selectedIndex===-1?"":C[C.selectedIndex].value;E.setValue(J,{value:w})});break}}static setAttributes({html:S,element:J,storage:T=null,intent:E,linkService:v}){const{attributes:B}=J,F=S instanceof HTMLAnchorElement;B.type==="radio"&&(B.name=`${B.name}-${E}`);for(const[C,w]of Object.entries(B))if(w!=null)switch(C){case"class":w.length&&S.setAttribute(C,w.join(" "));break;case"dataId":break;case"id":S.setAttribute("data-element-id",w);break;case"style":Object.assign(S.style,w);break;case"textContent":S.textContent=w;break;default:(!F||C!=="href"&&C!=="newWindow")&&S.setAttribute(C,w)}F&&v.addLinkAttributes(S,B.href,B.newWindow),T&&B.dataId&&this.setupStorage(S,B.dataId,J,T)}static render(S){var _;const J=S.annotationStorage,T=S.linkService,E=S.xfaHtml,v=S.intent||"display",B=document.createElement(E.name);E.attributes&&this.setAttributes({html:B,element:E,intent:v,linkService:T});const F=[[E,-1,B]],C=S.div;if(C.append(B),S.viewport){const m=`matrix(${S.viewport.transform.join(",")})`;C.style.transform=m}v!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const w=[];for(;F.length>0;){const[m,x,D]=F.at(-1);if(x+1===m.children.length){F.pop();continue}const O=m.children[++F.at(-1)[1]];if(O===null)continue;const{name:k}=O;if(k==="#text"){const p=document.createTextNode(O.value);w.push(p),D.append(p);continue}const u=(_=O==null?void 0:O.attributes)!=null&&_.xmlns?document.createElementNS(O.attributes.xmlns,k):document.createElement(k);if(D.append(u),O.attributes&&this.setAttributes({html:u,element:O,storage:J,intent:v,linkService:T}),O.children&&O.children.length>0)F.push([O,-1,u]);else if(O.value){const p=document.createTextNode(O.value);i.XfaText.shouldBuildText(k)&&w.push(p),u.append(p)}}for(const m of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:w}}static update(S){const J=`matrix(${S.viewport.transform.join(",")})`;S.div.style.transform=J,S.div.hidden=!1}}n.XfaLayer=s},(t,n,r)=>{var E,v,B,F,C,w,_,m,x,D,O,k,u,p,I,Un,h,zn,b,Wn,X,Hn,Q,fn,ut,Gn,ht,mn,Et,Vn,L,qn,d,Xn,f,Kn,M,Yn,q,ce,it,gn,vt,Ie,gt,Oe,Lt,ge,Ot,vn,G,Le,K,Jn,xt,bn,$t,Qn,Vt,Zn,Gt,yn,yt,je,tt,ve;Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0;var i=r(1),s=r(4),y=r(29),S=r(6),J=r(5);const Ct=class Ct extends s.AnnotationEditor{constructor(ot){super({...ot,name:"inkEditor"});H(this,I);H(this,h);H(this,b);H(this,X);H(this,Q);H(this,ut);H(this,ht);H(this,Et);H(this,L);H(this,d);H(this,f);H(this,M);H(this,q);H(this,it);H(this,vt);H(this,gt);H(this,Lt);H(this,Ot);H(this,G);H(this,Vt);H(this,Gt);H(this,yt);H(this,tt);H(this,E,0);H(this,v,0);H(this,B,this.canvasPointermove.bind(this));H(this,F,this.canvasPointerleave.bind(this));H(this,C,this.canvasPointerup.bind(this));H(this,w,this.canvasPointerdown.bind(this));H(this,_,new Path2D);H(this,m,!1);H(this,x,!1);H(this,D,!1);H(this,O,null);H(this,k,0);H(this,u,0);H(this,p,null);this.color=ot.color||null,this.thickness=ot.thickness||null,this.opacity=ot.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ot){s.AnnotationEditor.initialize(ot,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ot,kt){switch(ot){case i.AnnotationEditorParamsType.INK_THICKNESS:Ct._defaultThickness=kt;break;case i.AnnotationEditorParamsType.INK_COLOR:Ct._defaultColor=kt;break;case i.AnnotationEditorParamsType.INK_OPACITY:Ct._defaultOpacity=kt/100;break}}updateParams(ot,kt){switch(ot){case i.AnnotationEditorParamsType.INK_THICKNESS:et(this,I,Un).call(this,kt);break;case i.AnnotationEditorParamsType.INK_COLOR:et(this,h,zn).call(this,kt);break;case i.AnnotationEditorParamsType.INK_OPACITY:et(this,b,Wn).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Ct._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Ct._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ct._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ct._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Ct._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ct._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(et(this,vt,Ie).call(this),et(this,gt,Oe).call(this)),this.isAttachedToDOM||(this.parent.add(this),et(this,Lt,ge).call(this)),et(this,tt,ve).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,O).disconnect(),ct(this,O,null),super.remove())}setParent(ot){!this.parent&&ot?this._uiManager.removeShouldRescale(this):this.parent&&ot===null&&this._uiManager.addShouldRescale(this),super.setParent(ot)}onScaleChanging(){const[ot,kt]=this.parentDimensions,Ut=this.width*ot,Ft=this.height*kt;this.setDimensions(Ut,Ft)}enableEditMode(){a(this,m)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,w)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,w)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,m)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ct(this,m,!0),this.div.classList.add("disabled"),et(this,tt,ve).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ot){this._focusEventsAllowed&&(super.focusin(ot),this.enableEditMode())}canvasPointerdown(ot){ot.button!==0||!this.isInEditMode()||a(this,m)||(this.setInForeground(),ot.preventDefault(),ot.type!=="mouse"&&this.div.focus(),et(this,ut,Gn).call(this,ot.offsetX,ot.offsetY))}canvasPointermove(ot){ot.preventDefault(),et(this,ht,mn).call(this,ot.offsetX,ot.offsetY)}canvasPointerup(ot){ot.preventDefault(),et(this,it,gn).call(this,ot)}canvasPointerleave(ot){et(this,it,gn).call(this,ot)}get isResizable(){return!this.isEmpty()&&a(this,m)}render(){if(this.div)return this.div;let ot,kt;this.width&&(ot=this.x,kt=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(te=>{var Pt;return(Pt=this.div)==null?void 0:Pt.setAttribute("aria-label",te)});const[Ut,Ft,Wt,Ht]=et(this,X,Hn).call(this);if(this.setAt(Ut,Ft,0,0),this.setDims(Wt,Ht),et(this,vt,Ie).call(this),this.width){const[te,Pt]=this.parentDimensions;this.setAspectRatio(this.width*te,this.height*Pt),this.setAt(ot*te,kt*Pt,this.width*te,this.height*Pt),ct(this,D,!0),et(this,Lt,ge).call(this),this.setDims(this.width*te,this.height*Pt),et(this,q,ce).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return et(this,gt,Oe).call(this),this.div}setDimensions(ot,kt){const Ut=Math.round(ot),Ft=Math.round(kt);if(a(this,k)===Ut&&a(this,u)===Ft)return;ct(this,k,Ut),ct(this,u,Ft),this.canvas.style.visibility="hidden";const[Wt,Ht]=this.parentDimensions;this.width=ot/Wt,this.height=kt/Ht,this.fixAndSetPosition(),a(this,m)&&et(this,Ot,vn).call(this,ot,kt),et(this,Lt,ge).call(this),et(this,q,ce).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ot,kt,Ut){var Z,rt,ft;if(ot instanceof y.InkAnnotationElement)return null;const Ft=super.deserialize(ot,kt,Ut);Ft.thickness=ot.thickness,Ft.color=i.Util.makeHexColor(...ot.color),Ft.opacity=ot.opacity;const[Wt,Ht]=Ft.pageDimensions,te=Ft.width*Wt,Pt=Ft.height*Ht,Qt=Ft.parentScale,Bt=ot.thickness/2;ct(Ft,m,!0),ct(Ft,k,Math.round(te)),ct(Ft,u,Math.round(Pt));const{paths:z,rect:l,rotation:R}=ot;for(let{bezier:wt}of z){wt=et(Z=Ct,$t,Qn).call(Z,wt,l,R);const It=[];Ft.paths.push(It);let Mt=Qt*(wt[0]-Bt),Yt=Qt*(wt[1]-Bt);for(let Nt=2,Xt=wt.length;Nt<Xt;Nt+=6){const Jt=Qt*(wt[Nt]-Bt),Zt=Qt*(wt[Nt+1]-Bt),ee=Qt*(wt[Nt+2]-Bt),se=Qt*(wt[Nt+3]-Bt),ae=Qt*(wt[Nt+4]-Bt),oe=Qt*(wt[Nt+5]-Bt);It.push([[Mt,Yt],[Jt,Zt],[ee,se],[ae,oe]]),Mt=ae,Yt=oe}const jt=et(this,K,Jn).call(this,It);Ft.bezierPath2D.push(jt)}const W=et(rt=Ft,Gt,yn).call(rt);return ct(Ft,v,Math.max(s.AnnotationEditor.MIN_SIZE,W[2]-W[0])),ct(Ft,E,Math.max(s.AnnotationEditor.MIN_SIZE,W[3]-W[1])),et(ft=Ft,Ot,vn).call(ft,te,Pt),Ft}serialize(){if(this.isEmpty())return null;const ot=this.getRect(0,0),kt=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:kt,thickness:this.thickness,opacity:this.opacity,paths:et(this,Vt,Zn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ot),pageIndex:this.pageIndex,rect:ot,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};E=new WeakMap,v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,k=new WeakMap,u=new WeakMap,p=new WeakMap,I=new WeakSet,Un=function(ot){const kt=this.thickness;this.addCommands({cmd:()=>{this.thickness=ot,et(this,tt,ve).call(this)},undo:()=>{this.thickness=kt,et(this,tt,ve).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,zn=function(ot){const kt=this.color;this.addCommands({cmd:()=>{this.color=ot,et(this,q,ce).call(this)},undo:()=>{this.color=kt,et(this,q,ce).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,Wn=function(ot){ot/=100;const kt=this.opacity;this.addCommands({cmd:()=>{this.opacity=ot,et(this,q,ce).call(this)},undo:()=>{this.opacity=kt,et(this,q,ce).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Hn=function(){const{parentRotation:ot,parentDimensions:[kt,Ut]}=this;switch(ot){case 90:return[0,Ut,Ut,kt];case 180:return[kt,Ut,kt,Ut];case 270:return[kt,0,Ut,kt];default:return[0,0,kt,Ut]}},Q=new WeakSet,fn=function(){const{ctx:ot,color:kt,opacity:Ut,thickness:Ft,parentScale:Wt,scaleFactor:Ht}=this;ot.lineWidth=Ft*Wt/Ht,ot.lineCap="round",ot.lineJoin="round",ot.miterLimit=10,ot.strokeStyle=`${kt}${(0,J.opacityToHex)(Ut)}`},ut=new WeakSet,Gn=function(ot,kt){this.canvas.addEventListener("contextmenu",S.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,F)),this.canvas.addEventListener("pointermove",a(this,B)),this.canvas.addEventListener("pointerup",a(this,C)),this.canvas.removeEventListener("pointerdown",a(this,w)),this.isEditing=!0,a(this,D)||(ct(this,D,!0),et(this,Lt,ge).call(this),this.thickness||(this.thickness=Ct._defaultThickness),this.color||(this.color=Ct._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ct._defaultOpacity)),this.currentPath.push([ot,kt]),ct(this,x,!1),et(this,Q,fn).call(this),ct(this,p,()=>{et(this,d,Xn).call(this),a(this,p)&&window.requestAnimationFrame(a(this,p))}),window.requestAnimationFrame(a(this,p))},ht=new WeakSet,mn=function(ot,kt){const[Ut,Ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&ot===Ut&&kt===Ft)return;const Wt=this.currentPath;let Ht=a(this,_);if(Wt.push([ot,kt]),ct(this,x,!0),Wt.length<=2){Ht.moveTo(...Wt[0]),Ht.lineTo(ot,kt);return}Wt.length===3&&(ct(this,_,Ht=new Path2D),Ht.moveTo(...Wt[0])),et(this,f,Kn).call(this,Ht,...Wt.at(-3),...Wt.at(-2),ot,kt)},Et=new WeakSet,Vn=function(){if(this.currentPath.length===0)return;const ot=this.currentPath.at(-1);a(this,_).lineTo(...ot)},L=new WeakSet,qn=function(ot,kt){ct(this,p,null),ot=Math.min(Math.max(ot,0),this.canvas.width),kt=Math.min(Math.max(kt,0),this.canvas.height),et(this,ht,mn).call(this,ot,kt),et(this,Et,Vn).call(this);let Ut;if(this.currentPath.length!==1)Ut=et(this,M,Yn).call(this);else{const Pt=[ot,kt];Ut=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const Ft=a(this,_),Wt=this.currentPath;this.currentPath=[],ct(this,_,new Path2D);const Ht=()=>{this.allRawPaths.push(Wt),this.paths.push(Ut),this.bezierPath2D.push(Ft),this.rebuild()},te=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(et(this,vt,Ie).call(this),et(this,gt,Oe).call(this)),et(this,tt,ve).call(this))};this.addCommands({cmd:Ht,undo:te,mustExec:!0})},d=new WeakSet,Xn=function(){if(!a(this,x))return;ct(this,x,!1);const ot=Math.ceil(this.thickness*this.parentScale),kt=this.currentPath.slice(-3),Ut=kt.map(Ht=>Ht[0]),Ft=kt.map(Ht=>Ht[1]);Math.min(...Ut)-ot,Math.max(...Ut)+ot,Math.min(...Ft)-ot,Math.max(...Ft)+ot;const{ctx:Wt}=this;Wt.save(),Wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ht of this.bezierPath2D)Wt.stroke(Ht);Wt.stroke(a(this,_)),Wt.restore()},f=new WeakSet,Kn=function(ot,kt,Ut,Ft,Wt,Ht,te){const Pt=(kt+Ft)/2,Qt=(Ut+Wt)/2,Bt=(Ft+Ht)/2,z=(Wt+te)/2;ot.bezierCurveTo(Pt+2*(Ft-Pt)/3,Qt+2*(Wt-Qt)/3,Bt+2*(Ft-Bt)/3,z+2*(Wt-z)/3,Bt,z)},M=new WeakSet,Yn=function(){const ot=this.currentPath;if(ot.length<=2)return[[ot[0],ot[0],ot.at(-1),ot.at(-1)]];const kt=[];let Ut,[Ft,Wt]=ot[0];for(Ut=1;Ut<ot.length-2;Ut++){const[l,R]=ot[Ut],[W,Z]=ot[Ut+1],rt=(l+W)/2,ft=(R+Z)/2,wt=[Ft+2*(l-Ft)/3,Wt+2*(R-Wt)/3],It=[rt+2*(l-rt)/3,ft+2*(R-ft)/3];kt.push([[Ft,Wt],wt,It,[rt,ft]]),[Ft,Wt]=[rt,ft]}const[Ht,te]=ot[Ut],[Pt,Qt]=ot[Ut+1],Bt=[Ft+2*(Ht-Ft)/3,Wt+2*(te-Wt)/3],z=[Pt+2*(Ht-Pt)/3,Qt+2*(te-Qt)/3];return kt.push([[Ft,Wt],Bt,z,[Pt,Qt]]),kt},q=new WeakSet,ce=function(){if(this.isEmpty()){et(this,G,Le).call(this);return}et(this,Q,fn).call(this);const{canvas:ot,ctx:kt}=this;kt.setTransform(1,0,0,1,0,0),kt.clearRect(0,0,ot.width,ot.height),et(this,G,Le).call(this);for(const Ut of this.bezierPath2D)kt.stroke(Ut)},it=new WeakSet,gn=function(ot){this.canvas.removeEventListener("pointerleave",a(this,F)),this.canvas.removeEventListener("pointermove",a(this,B)),this.canvas.removeEventListener("pointerup",a(this,C)),this.canvas.addEventListener("pointerdown",a(this,w)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",S.noContextMenu)},10),et(this,L,qn).call(this,ot.offsetX,ot.offsetY),this.addToAnnotationStorage(),this.setInBackground()},vt=new WeakSet,Ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ot=>{var kt;return(kt=this.canvas)==null?void 0:kt.setAttribute("aria-label",ot)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},gt=new WeakSet,Oe=function(){ct(this,O,new ResizeObserver(ot=>{const kt=ot[0].contentRect;kt.width&&kt.height&&this.setDimensions(kt.width,kt.height)})),a(this,O).observe(this.div)},Lt=new WeakSet,ge=function(){if(!a(this,D))return;const[ot,kt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ot),this.canvas.height=Math.ceil(this.height*kt),et(this,G,Le).call(this)},Ot=new WeakSet,vn=function(ot,kt){const Ut=et(this,yt,je).call(this),Ft=(ot-Ut)/a(this,v),Wt=(kt-Ut)/a(this,E);this.scaleFactor=Math.min(Ft,Wt)},G=new WeakSet,Le=function(){const ot=et(this,yt,je).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ot,this.translationY*this.scaleFactor+ot)},K=new WeakSet,Jn=function(ot){const kt=new Path2D;for(let Ut=0,Ft=ot.length;Ut<Ft;Ut++){const[Wt,Ht,te,Pt]=ot[Ut];Ut===0&&kt.moveTo(...Wt),kt.bezierCurveTo(Ht[0],Ht[1],te[0],te[1],Pt[0],Pt[1])}return kt},xt=new WeakSet,bn=function(ot,kt,Ut){const[Ft,Wt,Ht,te]=kt;switch(Ut){case 0:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2)ot[Pt]+=Ft,ot[Pt+1]=te-ot[Pt+1];break;case 90:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2){const Bt=ot[Pt];ot[Pt]=ot[Pt+1]+Ft,ot[Pt+1]=Bt+Wt}break;case 180:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2)ot[Pt]=Ht-ot[Pt],ot[Pt+1]+=Wt;break;case 270:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2){const Bt=ot[Pt];ot[Pt]=Ht-ot[Pt+1],ot[Pt+1]=te-Bt}break;default:throw new Error("Invalid rotation")}return ot},$t=new WeakSet,Qn=function(ot,kt,Ut){const[Ft,Wt,Ht,te]=kt;switch(Ut){case 0:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2)ot[Pt]-=Ft,ot[Pt+1]=te-ot[Pt+1];break;case 90:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2){const Bt=ot[Pt];ot[Pt]=ot[Pt+1]-Wt,ot[Pt+1]=Bt-Ft}break;case 180:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2)ot[Pt]=Ht-ot[Pt],ot[Pt+1]-=Wt;break;case 270:for(let Pt=0,Qt=ot.length;Pt<Qt;Pt+=2){const Bt=ot[Pt];ot[Pt]=te-ot[Pt+1],ot[Pt+1]=Ht-Bt}break;default:throw new Error("Invalid rotation")}return ot},Vt=new WeakSet,Zn=function(ot,kt,Ut,Ft){var Qt,Bt;const Wt=[],Ht=this.thickness/2,te=ot*kt+Ht,Pt=ot*Ut+Ht;for(const z of this.paths){const l=[],R=[];for(let W=0,Z=z.length;W<Z;W++){const[rt,ft,wt,It]=z[W],Mt=ot*rt[0]+te,Yt=ot*rt[1]+Pt,jt=ot*ft[0]+te,Nt=ot*ft[1]+Pt,Xt=ot*wt[0]+te,Jt=ot*wt[1]+Pt,Zt=ot*It[0]+te,ee=ot*It[1]+Pt;W===0&&(l.push(Mt,Yt),R.push(Mt,Yt)),l.push(jt,Nt,Xt,Jt,Zt,ee),R.push(jt,Nt),W===Z-1&&R.push(Zt,ee)}Wt.push({bezier:et(Qt=Ct,xt,bn).call(Qt,l,Ft,this.rotation),points:et(Bt=Ct,xt,bn).call(Bt,R,Ft,this.rotation)})}return Wt},Gt=new WeakSet,yn=function(){let ot=1/0,kt=-1/0,Ut=1/0,Ft=-1/0;for(const Wt of this.paths)for(const[Ht,te,Pt,Qt]of Wt){const Bt=i.Util.bezierBoundingBox(...Ht,...te,...Pt,...Qt);ot=Math.min(ot,Bt[0]),Ut=Math.min(Ut,Bt[1]),kt=Math.max(kt,Bt[2]),Ft=Math.max(Ft,Bt[3])}return[ot,Ut,kt,Ft]},yt=new WeakSet,je=function(){return a(this,m)?Math.ceil(this.thickness*this.parentScale):0},tt=new WeakSet,ve=function(ot=!1){if(this.isEmpty())return;if(!a(this,m)){et(this,q,ce).call(this);return}const kt=et(this,Gt,yn).call(this),Ut=et(this,yt,je).call(this);ct(this,v,Math.max(s.AnnotationEditor.MIN_SIZE,kt[2]-kt[0])),ct(this,E,Math.max(s.AnnotationEditor.MIN_SIZE,kt[3]-kt[1]));const Ft=Math.ceil(Ut+a(this,v)*this.scaleFactor),Wt=Math.ceil(Ut+a(this,E)*this.scaleFactor),[Ht,te]=this.parentDimensions;this.width=Ft/Ht,this.height=Wt/te,this.setAspectRatio(Ft,Wt);const Pt=this.translationX,Qt=this.translationY;this.translationX=-kt[0],this.translationY=-kt[1],et(this,Lt,ge).call(this),et(this,q,ce).call(this),ct(this,k,Ft),ct(this,u,Wt),this.setDims(Ft,Wt);const Bt=ot?Ut/this.scaleFactor/2:0;this.translate(Pt-this.translationX-Bt,Qt-this.translationY-Bt)},H(Ct,K),H(Ct,xt),H(Ct,$t),re(Ct,"_defaultColor",null),re(Ct,"_defaultOpacity",1),re(Ct,"_defaultThickness",1),re(Ct,"_type","ink");let T=Ct;n.InkEditor=T},(t,n,r)=>{var T,E,v,B,F,C,w,_,m,x,D,Se,k,we,p,Ne,A,xn,j,ti,V,ei,P,_n,lt,$e,Y,ni;Object.defineProperty(n,"__esModule",{value:!0}),n.StampEditor=void 0;var i=r(1),s=r(4),y=r(6),S=r(29);const bt=class bt extends s.AnnotationEditor{constructor(L){super({...L,name:"stampEditor"});H(this,D);H(this,k);H(this,p);H(this,A);H(this,j);H(this,V);H(this,P);H(this,lt);H(this,Y);H(this,T,null);H(this,E,null);H(this,v,null);H(this,B,null);H(this,F,null);H(this,C,null);H(this,w,null);H(this,_,null);H(this,m,!1);H(this,x,!1);ct(this,B,L.bitmapUrl),ct(this,F,L.bitmapFile)}static initialize(L){s.AnnotationEditor.initialize(L)}static get supportedTypes(){const L=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",L.map(o=>`image/${o}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(L){return this.supportedTypes.includes(L)}static paste(L,o){o.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:L.getAsFile()})}remove(){var L,o;a(this,E)&&(ct(this,T,null),this._uiManager.imageManager.deleteId(a(this,E)),(L=a(this,C))==null||L.remove(),ct(this,C,null),(o=a(this,w))==null||o.disconnect(),ct(this,w,null)),super.remove()}rebuild(){if(!this.parent){a(this,E)&&et(this,p,Ne).call(this);return}super.rebuild(),this.div!==null&&(a(this,E)&&et(this,p,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,v)||a(this,T)||a(this,B)||a(this,F))}get isResizable(){return!0}render(){if(this.div)return this.div;let L,o;if(this.width&&(L=this.x,o=this.y),super.render(),this.div.hidden=!0,a(this,T)?et(this,A,xn).call(this):et(this,p,Ne).call(this),this.width){const[d,c]=this.parentDimensions;this.setAt(L*d,o*c,this.width*d,this.height*c)}return this.div}static deserialize(L,o,d){if(L instanceof S.StampAnnotationElement)return null;const c=super.deserialize(L,o,d),{rect:f,bitmapUrl:g,bitmapId:M,isSvg:$,accessibilityData:q}=L;M&&d.imageManager.isValidId(M)?ct(c,E,M):ct(c,B,g),ct(c,m,$);const[at,it]=c.pageDimensions;return c.width=(f[2]-f[0])/at,c.height=(f[3]-f[1])/it,q&&(c.altTextData=q),c}serialize(L=!1,o=null){if(this.isEmpty())return null;const d={annotationType:i.AnnotationEditorType.STAMP,bitmapId:a(this,E),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,m),structTreeParentId:this._structTreeParentId};if(L)return d.bitmapUrl=et(this,lt,$e).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:c,altText:f}=this.altTextData;if(!c&&f&&(d.accessibilityData={type:"Figure",alt:f}),o===null)return d;o.stamps||(o.stamps=new Map);const g=a(this,m)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!o.stamps.has(a(this,E)))o.stamps.set(a(this,E),{area:g,serialized:d}),d.bitmap=et(this,lt,$e).call(this,!1);else if(a(this,m)){const M=o.stamps.get(a(this,E));g>M.area&&(M.area=g,M.serialized.bitmap.close(),M.serialized.bitmap=et(this,lt,$e).call(this,!1))}return d}};T=new WeakMap,E=new WeakMap,v=new WeakMap,B=new WeakMap,F=new WeakMap,C=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,x=new WeakMap,D=new WeakSet,Se=function(L,o=!1){if(!L){this.remove();return}ct(this,T,L.bitmap),o||(ct(this,E,L.id),ct(this,m,L.isSvg)),et(this,A,xn).call(this)},k=new WeakSet,we=function(){ct(this,v,null),this._uiManager.enableWaiting(!1),a(this,C)&&this.div.focus()},p=new WeakSet,Ne=function(){if(a(this,E)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,E)).then(o=>et(this,D,Se).call(this,o,!0)).finally(()=>et(this,k,we).call(this));return}if(a(this,B)){const o=a(this,B);ct(this,B,null),this._uiManager.enableWaiting(!0),ct(this,v,this._uiManager.imageManager.getFromUrl(o).then(d=>et(this,D,Se).call(this,d)).finally(()=>et(this,k,we).call(this)));return}if(a(this,F)){const o=a(this,F);ct(this,F,null),this._uiManager.enableWaiting(!0),ct(this,v,this._uiManager.imageManager.getFromFile(o).then(d=>et(this,D,Se).call(this,d)).finally(()=>et(this,k,we).call(this)));return}const L=document.createElement("input");L.type="file",L.accept=bt.supportedTypesStr,ct(this,v,new Promise(o=>{L.addEventListener("change",async()=>{if(!L.files||L.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(L.files[0]);et(this,D,Se).call(this,d)}o()}),L.addEventListener("cancel",()=>{this.remove(),o()})}).finally(()=>et(this,k,we).call(this))),L.click()},A=new WeakSet,xn=function(){const{div:L}=this;let{width:o,height:d}=a(this,T);const[c,f]=this.pageDimensions,g=.75;if(this.width)o=this.width*c,d=this.height*f;else if(o>g*c||d>g*f){const at=Math.min(g*c/o,g*f/d);o*=at,d*=at}const[M,$]=this.parentDimensions;this.setDims(o*M/c,d*$/f),this._uiManager.enableWaiting(!1);const q=ct(this,C,document.createElement("canvas"));L.append(q),L.hidden=!1,et(this,P,_n).call(this,o,d),et(this,Y,ni).call(this),a(this,x)||(this.parent.addUndoableEditor(this),ct(this,x,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},j=new WeakSet,ti=function(L,o){var g;const[d,c]=this.parentDimensions;this.width=L/d,this.height=o/c,this.setDims(L,o),(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,_)!==null&&clearTimeout(a(this,_)),ct(this,_,setTimeout(()=>{ct(this,_,null),et(this,P,_n).call(this,L,o)},200))},V=new WeakSet,ei=function(L,o){const{width:d,height:c}=a(this,T);let f=d,g=c,M=a(this,T);for(;f>2*L||g>2*o;){const $=f,q=g;f>2*L&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2)),g>2*o&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2));const at=new OffscreenCanvas(f,g);at.getContext("2d").drawImage(M,0,0,$,q,0,0,f,g),M=at.transferToImageBitmap()}return M},P=new WeakSet,_n=function(L,o){L=Math.ceil(L),o=Math.ceil(o);const d=a(this,C);if(!d||d.width===L&&d.height===o)return;d.width=L,d.height=o;const c=a(this,m)?a(this,T):et(this,V,ei).call(this,L,o),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(c,0,0,c.width,c.height,0,0,L,o)},lt=new WeakSet,$e=function(L){if(L){if(a(this,m)){const c=this._uiManager.imageManager.getSvgUrl(a(this,E));if(c)return c}const o=document.createElement("canvas");return{width:o.width,height:o.height}=a(this,T),o.getContext("2d").drawImage(a(this,T),0,0),o.toDataURL()}if(a(this,m)){const[o,d]=this.pageDimensions,c=Math.round(this.width*o*y.PixelsPerInch.PDF_TO_CSS_UNITS),f=Math.round(this.height*d*y.PixelsPerInch.PDF_TO_CSS_UNITS),g=new OffscreenCanvas(c,f);return g.getContext("2d").drawImage(a(this,T),0,0,a(this,T).width,a(this,T).height,0,0,c,f),g.transferToImageBitmap()}return structuredClone(a(this,T))},Y=new WeakSet,ni=function(){ct(this,w,new ResizeObserver(L=>{const o=L[0].contentRect;o.width&&o.height&&et(this,j,ti).call(this,o.width,o.height)})),a(this,w).observe(this.div)},re(bt,"_type","stamp");let J=bt;n.StampEditor=J}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var n=__webpack_module_cache__[t];if(n!==void 0)return n.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return y.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return S.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return J.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return n.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return n.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return n.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),y=__w_pdfjs_require__(27),S=__w_pdfjs_require__(5),J=__w_pdfjs_require__(29),T=__w_pdfjs_require__(14),E=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(t,n,r){if(r||arguments.length===2)for(var i=0,s=n.length,y;i<s;i++)(y||!(i in n))&&(y||(y=Array.prototype.slice.call(n,0,i)),y[i]=n[i]);return t.concat(y||Array.prototype.slice.call(n))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(t,n){var r={};return allEvents.forEach(function(i){var s=t[i];s&&(n?r[i]=function(y){return s(y,n(i))}:r[i]=s)}),r}function makeCancellablePromise(t){var n=!1,r=new Promise(function(i,s){t.then(function(y){return!n&&i(y)}).catch(function(y){return!n&&s(y)})});return{promise:r,cancel:function(){n=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(t,n){if(!t){if(isProduction$1)throw new Error(prefix);var r=typeof n=="function"?n():n,i=r?"".concat(prefix,": ").concat(r):prefix;throw new Error(i)}}var warning$1=function(){},warning_1=warning$1;const warning$2=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(t,n,r){for(r of t.keys())if(dequal(r,n))return r}function dequal(t,n){var r,i,s;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((i=t.length)===n.length)for(;i--&&dequal(t[i],n[i]););return i===-1}if(r===Set){if(t.size!==n.size)return!1;for(i of t)if(s=i,s&&typeof s=="object"&&(s=find(n,s),!s)||!n.has(s))return!1;return!0}if(r===Map){if(t.size!==n.size)return!1;for(i of t)if(s=i[0],s&&typeof s=="object"&&(s=find(n,s),!s)||!dequal(i[1],n.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),n=new Uint8Array(n);else if(r===DataView){if((i=t.byteLength)===n.byteLength)for(;i--&&t.getInt8(i)===n.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===n.byteLength)for(;i--&&t[i]===n[i];);return i===-1}if(!r||typeof t=="object"){i=0;for(r in t)if(has.call(t,r)&&++i&&!has.call(n,r)||!(r in n)||!dequal(t[r],n[r]))return!1;return Object.keys(n).length===i}}return t!==t&&n!==n}const DocumentContext=reactExports.createContext(null);function Message({children:t,type:n}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${n}`,children:t})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(n){this.pdfDocument=n}setViewer(n){this.pdfViewer=n}setExternalLinkRel(n){this.externalLinkRel=n}setExternalLinkTarget(n){this.externalLinkTarget=n}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(n){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=n}get rotation(){return 0}set rotation(n){}goToDestination(n){return new Promise(r=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(n,"Destination is not specified."),typeof n=="string"?this.pdfDocument.getDestination(n).then(r):Array.isArray(n)?r(n):n.then(r)}).then(r=>{invariant(Array.isArray(r),`"${r}" is not a valid destination array.`);const i=r[0];new Promise(s=>{invariant(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(y=>{s(y)}).catch(()=>{invariant(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):invariant(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const y=s+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(y>=1&&y<=this.pagesCount,`"${y}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:r,pageIndex:s,pageNumber:y})})})}navigateTo(n){this.goToDestination(n)}goToPage(n){const r=n-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(n>=1&&n<=this.pagesCount,`"${n}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:r,pageNumber:n})}addLinkAttributes(n,r,i){n.href=r,n.rel=this.externalLinkRel||DEFAULT_LINK_REL,n.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(t){return typeof t<"u"}function isProvided(t){return isDefined(t)&&t!==null}function isString$1(t){return typeof t=="string"}function isArrayBuffer(t){return t instanceof ArrayBuffer}function isBlob(t){return invariant(isBrowser,"isBlob can only be used in a browser environment"),t instanceof Blob}function isDataURI(t){return isString$1(t)&&/^data:/.test(t)}function dataURItoByteString(t){invariant(isDataURI(t),"Invalid data URI.");const[n="",r=""]=t.split(",");return n.split(";").indexOf("base64")!==-1?atob(r):unescape(r)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$2(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$2(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(t){t&&t.cancel&&t.cancel()}function makePageCallback(t,n){return Object.defineProperty(t,"width",{get(){return this.view[2]*n},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*n},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function isCancelException(t){return t.name==="RenderingCancelledException"}function loadFromFile(t){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return r(new Error("Error while reading a file."));n(i.result)},i.onerror=s=>{if(!s.target)return r(new Error("Error while reading a file."));const{error:y}=s.target;if(!y)return r(new Error("Error while reading a file."));switch(y.code){case y.NOT_FOUND_ERR:return r(new Error("Error while reading a file: File not found."));case y.SECURITY_ERR:return r(new Error("Error while reading a file: Security error."));case y.ABORT_ERR:return r(new Error("Error while reading a file: Aborted."));default:return r(new Error("Error while reading a file."))}},i.readAsArrayBuffer(t)})}function reducer(t,n){switch(n.type){case"RESOLVE":return{value:n.value,error:void 0};case"REJECT":return{value:!1,error:n.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=globalThis&&globalThis.__awaiter||function(t,n,r,i){function s(y){return y instanceof r?y:new r(function(S){S(y)})}return new(r||(r=Promise))(function(y,S){function J(v){try{E(i.next(v))}catch(B){S(B)}}function T(v){try{E(i.throw(v))}catch(B){S(B)}}function E(v){v.done?y(v.value):s(v.value).then(J,T)}E((i=i.apply(t,n||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(t,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(t,n)=>{switch(n){case PasswordResponses$1.NEED_PASSWORD:{const r=prompt("Enter the password to open this PDF file.");t(r);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const r=prompt("Invalid password. Please try again.");t(r);break}}};function isParameterObject(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const Document=reactExports.forwardRef(function t(n,r){var{children:i,className:s,error:y="Failed to load PDF file.",externalLinkRel:S,externalLinkTarget:J,file:T,inputRef:E,imageResourcesPath:v,loading:B="Loading PDF",noData:F="No PDF file specified.",onItemClick:C,onLoadError:w,onLoadProgress:_,onLoadSuccess:m,onPassword:x=defaultOnPassword,onSourceError:D,onSourceSuccess:O,options:k,renderMode:u,rotate:p}=n,I=__rest$1(n,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[A,h]=useResolver(),{value:j,error:b}=A,[V,X]=useResolver(),{value:P,error:Q}=V,lt=reactExports.useRef(new LinkService),ut=reactExports.useRef([]),Y=reactExports.useRef(void 0),ht=reactExports.useRef(void 0);T&&T!==Y.current&&isParameterObject(T)&&(warning$2(!dequal(T,Y.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Y.current=T),k&&k!==ht.current&&(warning$2(!dequal(k,ht.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ht.current=k);const bt=reactExports.useRef({scrollPageIntoView:_t=>{const{dest:gt,pageNumber:Rt,pageIndex:Lt=Rt-1}=_t;if(C){C({dest:gt,pageIndex:Lt,pageNumber:Rt});return}const Tt=ut.current[Lt];if(Tt){Tt.scrollIntoView();return}warning$2(!1,`An internal link leading to page ${Rt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(r,()=>({linkService:lt,pages:ut,viewer:bt}),[]);function Et(){O&&O()}function At(){b&&(warning$2(!1,b.toString()),D&&D(b))}function L(){h({type:"RESET"})}reactExports.useEffect(L,[T,h]);const o=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!T)return null;if(typeof T=="string")return isDataURI(T)?{data:dataURItoByteString(T)}:(displayCORSWarning(),{url:T});if(T instanceof PDFDataRangeTransport)return{range:T};if(isArrayBuffer(T))return{data:T};if(isBrowser&&isBlob(T))return{data:yield loadFromFile(T)};if(invariant(typeof T=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(T),"Invalid parameter object: need either .data, .range or .url"),"url"in T&&typeof T.url=="string"){if(isDataURI(T.url)){const{url:_t}=T,gt=__rest$1(T,["url"]),Rt=dataURItoByteString(_t);return Object.assign({data:Rt},gt)}displayCORSWarning()}return T}),[T]);reactExports.useEffect(()=>{const _t=makeCancellablePromise(o());return _t.promise.then(gt=>{h({type:"RESOLVE",value:gt})}).catch(gt=>{h({type:"REJECT",error:gt})}),()=>{cancelRunningTask(_t)}},[o,h]),reactExports.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){At();return}Et()}},[j]);function d(){P&&(m&&m(P),ut.current=new Array(P.numPages),lt.current.setDocument(P))}function c(){Q&&(warning$2(!1,Q.toString()),w&&w(Q))}function f(){X({type:"RESET"})}reactExports.useEffect(f,[X,j]);function g(){if(!j)return;const _t=Object.assign(Object.assign({},k),{isEvalSupported:!1}),gt=Object.assign(Object.assign({},j),_t),Rt=pdfjs$1.getDocument(gt);_&&(Rt.onProgress=_),x&&(Rt.onPassword=x);const Lt=Rt;return Lt.promise.then(Tt=>{X({type:"RESOLVE",value:Tt})}).catch(Tt=>{Lt.destroyed||X({type:"REJECT",error:Tt})}),()=>{Lt.destroy()}}reactExports.useEffect(g,[k,X,j]),reactExports.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){c();return}d()}},[P]);function M(){lt.current.setViewer(bt.current),lt.current.setExternalLinkRel(S),lt.current.setExternalLinkTarget(J)}reactExports.useEffect(M,[S,J]);function $(_t,gt){ut.current[_t]=gt}function q(_t){delete ut.current[_t]}const at=reactExports.useMemo(()=>({imageResourcesPath:v,linkService:lt.current,onItemClick:C,pdf:P,registerPage:$,renderMode:u,rotate:p,unregisterPage:q}),[v,C,P,u,p]),it=reactExports.useMemo(()=>makeEventProps(I,()=>P),[I,P]);function pt(){return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:at,children:i})}function vt(){return T?P==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof B=="function"?B():B}):P===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof y=="function"?y():y}):pt():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof F=="function"?F():F})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",s),ref:E,style:{"--scale-factor":"1"}},it,{children:vt()}))}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(r.length<=1){var i=r[0];return i||null}return function(y){r.forEach(function(S){typeof S=="function"?S(y):S&&(S.current=y)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(t){return t in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(t){return"children"in t}function isStructTreeNodeWithOnlyContentChild(t){return isStructTreeNode(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function getRoleAttributes(t){const n={};if(isStructTreeNode(t)){const{role:r}=t,i=r.match(HEADING_PATTERN);if(i)n.role="heading",n["aria-level"]=Number(i[1]);else if(isPdfRole(r)){const s=PDF_ROLE_TO_HTML_ROLE[r];s&&(n.role=s)}}return n}function getBaseAttributes(t){const n={};if(isStructTreeNode(t)){if(t.alt!==void 0&&(n["aria-label"]=t.alt),t.lang!==void 0&&(n.lang=t.lang),isStructTreeNodeWithOnlyContentChild(t)){const[r]=t.children;if(r){const i=getBaseAttributes(r);return Object.assign(Object.assign({},n),i)}}}else"id"in t&&(n["aria-owns"]=t.id);return n}function getAttributes(t){return t?Object.assign(Object.assign({},getRoleAttributes(t)),getBaseAttributes(t)):null}function StructTreeItem({className:t,node:n}){const r=reactExports.useMemo(()=>getAttributes(n),[n]),i=reactExports.useMemo(()=>!isStructTreeNode(n)||isStructTreeNodeWithOnlyContentChild(n)?null:n.children.map((s,y)=>jsxRuntimeExports.jsx(StructTreeItem,{node:s},y)),[n]);return jsxRuntimeExports.jsx("span",Object.assign({className:t},r,{children:i}))}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{onGetStructTreeError:n,onGetStructTreeSuccess:r}=t,[i,s]=useResolver(),{value:y,error:S}=i,{customTextRenderer:J,page:T}=t;function E(){y&&r&&r(y)}function v(){S&&(warning$2(!1,S.toString()),n&&n(S))}function B(){s({type:"RESET"})}reactExports.useEffect(B,[s,T]);function F(){if(J||!T)return;const C=makeCancellablePromise(T.getStructTree()),w=C;return C.promise.then(_=>{s({type:"RESOLVE",value:_})}).catch(_=>{s({type:"REJECT",error:_})}),()=>cancelRunningTask(w)}return reactExports.useEffect(F,[J,T,s]),reactExports.useEffect(()=>{if(y!==void 0){if(y===!1){v();return}E()}},[y]),y?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:y}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(t){const n=usePageContext();invariant(n,"Unable to find Page context.");const r=Object.assign(Object.assign({},n),t),{_className:i,canvasBackground:s,devicePixelRatio:y=getDevicePixelRatio(),onRenderError:S,onRenderSuccess:J,page:T,renderForms:E,renderTextLayer:v,rotate:B,scale:F}=r,{canvasRef:C}=t;invariant(T,"Attempted to render page canvas, but no page was specified.");const w=reactExports.useRef(null);function _(){T&&J&&J(makePageCallback(T,F))}function m(u){isCancelException(u)||(warning$2(!1,u.toString()),S&&S(u))}const x=reactExports.useMemo(()=>T.getViewport({scale:F*y,rotation:B}),[y,T,B,F]),D=reactExports.useMemo(()=>T.getViewport({scale:F,rotation:B}),[T,B,F]);function O(){if(!T)return;T.cleanup();const{current:u}=w;if(!u)return;u.width=x.width,u.height=x.height,u.style.width=`${Math.floor(D.width)}px`,u.style.height=`${Math.floor(D.height)}px`,u.style.visibility="hidden";const p={annotationMode:E?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:u.getContext("2d",{alpha:!1}),viewport:x};s&&(p.background=s);const I=T.render(p),A=I;return I.promise.then(()=>{u.style.visibility="",_()}).catch(m),()=>cancelRunningTask(A)}reactExports.useEffect(O,[s,w,y,T,E,x,D]);const k=reactExports.useCallback(()=>{const{current:u}=w;u&&(u.width=0,u.height=0)},[w]);return reactExports.useEffect(()=>k,[k]),jsxRuntimeExports.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:mergeRefs(C,w),style:{display:"block",userSelect:"none"},children:v?jsxRuntimeExports.jsx(StructTree,{}):null})}function PageSVG(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{_className:n,onRenderSuccess:r,onRenderError:i,page:s,rotate:y,scale:S}=t;invariant(s,"Attempted to render page SVG, but no page was specified.");const[J,T]=useResolver(),{value:E,error:v}=J;function B(){s&&r&&r(makePageCallback(s,S))}function F(){v&&(isCancelException(v)||(warning$2(!1,v.toString()),i&&i(v)))}const C=reactExports.useMemo(()=>s.getViewport({scale:S,rotation:y}),[s,y,S]);function w(){T({type:"RESET"})}reactExports.useEffect(w,[s,T,C]);function _(){if(!s)return;const O=makeCancellablePromise(s.getOperatorList());return O.promise.then(k=>{new pdfjs$1.SVGGraphics(s.commonObjs,s.objs).getSVG(k,C).then(p=>{if(!(p instanceof SVGElement))throw new Error("getSVG returned unexpected result.");T({type:"RESOLVE",value:p})}).catch(p=>{T({type:"REJECT",error:p})})}).catch(k=>{T({type:"REJECT",error:k})}),()=>cancelRunningTask(O)}reactExports.useEffect(_,[s,T,C]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){F();return}B()}},[E]);function m(O){if(!O||!E)return;O.firstElementChild||O.appendChild(E);const{width:k,height:u}=C;E.setAttribute("width",`${k}`),E.setAttribute("height",`${u}`)}const{width:x,height:D}=C;return jsxRuntimeExports.jsx("div",{className:`${n}__svg`,ref:O=>m(O),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:x,height:D,userSelect:"none"}})}function isTextItem(t){return"str"in t}function TextLayer(){const t=usePageContext();invariant(t,"Unable to find Page context.");const{customTextRenderer:n,onGetTextError:r,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:y,page:S,pageIndex:J,pageNumber:T,rotate:E,scale:v}=t;invariant(S,"Attempted to load page text content, but no page was specified.");const[B,F]=useResolver(),{value:C,error:w}=B,_=reactExports.useRef(null),m=reactExports.useRef(void 0);warning$2(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){C&&i&&i(C)}function D(){w&&(warning$2(!1,w.toString()),r&&r(w))}function O(){F({type:"RESET"})}reactExports.useEffect(O,[S,F]);function k(){if(!S)return;const b=makeCancellablePromise(S.getTextContent()),V=b;return b.promise.then(X=>{F({type:"RESOLVE",value:X})}).catch(X=>{F({type:"REJECT",error:X})}),()=>cancelRunningTask(V)}reactExports.useEffect(k,[S,F]),reactExports.useEffect(()=>{if(C!==void 0){if(C===!1){D();return}x()}},[C]);const u=reactExports.useCallback(()=>{y&&y()},[y]),p=reactExports.useCallback(b=>{warning$2(!1,b.toString()),s&&s(b)},[s]);function I(){const b=m.current;b&&b.classList.add("active")}function A(){const b=m.current;b&&b.classList.remove("active")}const h=reactExports.useMemo(()=>S.getViewport({scale:v,rotation:E}),[S,E,v]);function j(){if(!S||!C)return;const{current:b}=_;if(!b)return;b.innerHTML="";const V=S.streamTextContent({includeMarkedContent:!0}),X={container:b,textContentSource:V,viewport:h},P=pdfjs$1.renderTextLayer(X),Q=P;return P.promise.then(()=>{const lt=document.createElement("div");lt.className="endOfContent",b.append(lt),m.current=lt;const ut=b.querySelectorAll('[role="presentation"]');if(n){let Y=0;C.items.forEach((ht,bt)=>{if(!isTextItem(ht))return;const Et=ut[Y];if(!Et)return;const At=n(Object.assign({pageIndex:J,pageNumber:T,itemIndex:bt},ht));Et.innerHTML=At,Y+=ht.str&&ht.hasEOL?2:1})}u()}).catch(p),()=>cancelRunningTask(Q)}return reactExports.useLayoutEffect(j,[n,p,u,S,J,T,C,h]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:A,onMouseDown:I,ref:_})}function AnnotationLayer(){const t=useDocumentContext(),n=usePageContext();invariant(n,"Unable to find Page context.");const r=Object.assign(Object.assign({},t),n),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:y,onGetAnnotationsSuccess:S,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:T,page:E,pdf:v,renderForms:B,rotate:F,scale:C=1}=r;invariant(v,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(E,"Attempted to load page annotations, but no page was specified."),invariant(s,"Attempted to load page annotations, but no linkService was specified.");const[w,_]=useResolver(),{value:m,error:x}=w,D=reactExports.useRef(null);warning$2(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){m&&S&&S(m)}function k(){x&&(warning$2(!1,x.toString()),y&&y(x))}function u(){_({type:"RESET"})}reactExports.useEffect(u,[_,E]);function p(){if(!E)return;const b=makeCancellablePromise(E.getAnnotations()),V=b;return b.promise.then(X=>{_({type:"RESOLVE",value:X})}).catch(X=>{_({type:"REJECT",error:X})}),()=>{cancelRunningTask(V)}}reactExports.useEffect(p,[_,E,B]),reactExports.useEffect(()=>{if(m!==void 0){if(m===!1){k();return}O()}},[m]);function I(){T&&T()}function A(b){warning$2(!1,`${b}`),J&&J(b)}const h=reactExports.useMemo(()=>E.getViewport({scale:C,rotation:F}),[E,F,C]);function j(){if(!v||!E||!s||!m)return;const{current:b}=D;if(!b)return;const V=h.clone({dontFlip:!0}),X={accessibilityManager:null,annotationCanvasMap:null,div:b,l10n:null,page:E,viewport:V},P={annotations:m,annotationStorage:v.annotationStorage,div:b,downloadManager:null,imageResourcesPath:i,linkService:s,page:E,renderForms:B,viewport:V};b.innerHTML="";try{new pdfjs$1.AnnotationLayer(X).render(P),I()}catch(Q){A(Q)}return()=>{}}return reactExports.useEffect(j,[m,i,s,E,B,h]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:D})}var __rest=globalThis&&globalThis.__rest||function(t,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};const defaultScale=1;function Page(t){const n=useDocumentContext(),r=Object.assign(Object.assign({},n),t),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:y,canvasRef:S,children:J,className:T,customRenderer:E,customTextRenderer:v,devicePixelRatio:B,error:F="Failed to load the page.",height:C,inputRef:w,loading:_="Loading page",noData:m="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:k,onGetTextError:u,onGetTextSuccess:p,onLoadError:I,onLoadSuccess:A,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:j,onRenderError:b,onRenderSuccess:V,onRenderTextLayerError:X,onRenderTextLayerSuccess:P,pageIndex:Q,pageNumber:lt,pdf:ut,registerPage:Y,renderAnnotationLayer:ht=!0,renderForms:bt=!1,renderMode:Et="canvas",renderTextLayer:At=!0,rotate:L,scale:o=defaultScale,unregisterPage:d,width:c}=r,f=__rest(r,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[g,M]=useResolver(),{value:$,error:q}=g,at=reactExports.useRef(null);invariant(ut,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const it=isProvided(lt)?lt-1:Q??null,pt=lt??(isProvided(Q)?Q+1:null),vt=L??($?$.rotate:null),_t=reactExports.useMemo(()=>{if(!$)return null;let Vt=1;const qt=o??defaultScale;if(c||C){const Gt=$.getViewport({scale:1,rotation:vt});c?Vt=c/Gt.width:C&&(Vt=C/Gt.height)}return qt*Vt},[C,$,vt,o,c]);function gt(){return()=>{isProvided(it)&&s&&d&&d(it)}}reactExports.useEffect(gt,[s,ut,it,d]);function Rt(){if(A){if(!$||!_t)return;A(makePageCallback($,_t))}if(s&&Y){if(!isProvided(it)||!at.current)return;Y(it,at.current)}}function Lt(){q&&(warning$2(!1,q.toString()),I&&I(q))}function Tt(){M({type:"RESET"})}reactExports.useEffect(Tt,[M,ut,it]);function Ot(){if(!ut||!pt)return;const Vt=makeCancellablePromise(ut.getPage(pt)),qt=Vt;return Vt.promise.then(Gt=>{M({type:"RESOLVE",value:Gt})}).catch(Gt=>{M({type:"REJECT",error:Gt})}),()=>cancelRunningTask(qt)}reactExports.useEffect(Ot,[M,ut,it,pt,Y]),reactExports.useEffect(()=>{if($!==void 0){if($===!1){Lt();return}Rt()}},[$,_t]);const U=reactExports.useMemo(()=>$&&isProvided(it)&&pt&&isProvided(vt)&&isProvided(_t)?{_className:i,canvasBackground:y,customTextRenderer:v,devicePixelRatio:B,onGetAnnotationsError:x,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:k,onGetTextError:u,onGetTextSuccess:p,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:j,onRenderError:b,onRenderSuccess:V,onRenderTextLayerError:X,onRenderTextLayerSuccess:P,page:$,pageIndex:it,pageNumber:pt,renderForms:bt,renderTextLayer:At,rotate:vt,scale:_t}:null,[i,y,v,B,x,D,O,k,u,p,h,j,b,V,X,P,$,it,pt,bt,At,vt,_t]),G=reactExports.useMemo(()=>makeEventProps(f,()=>$&&(_t?makePageCallback($,_t):void 0)),[f,$,_t]),N=`${it}@${_t}/${vt}`,K=`${it}/${vt}`;function mt(){switch(Et){case"custom":return invariant(E,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(E,{},`${N}_custom`);case"none":return null;case"svg":return jsxRuntimeExports.jsx(PageSVG,{},`${K}_svg`);case"canvas":default:return jsxRuntimeExports.jsx(PageCanvas,{canvasRef:S},`${N}_canvas`)}}function xt(){return At?jsxRuntimeExports.jsx(TextLayer,{},`${N}_text`):null}function Dt(){return ht?jsxRuntimeExports.jsx(AnnotationLayer,{},`${N}_annotations`):null}function $t(){return jsxRuntimeExports.jsxs(PageContext.Provider,{value:U,children:[mt(),xt(),Dt(),J]})}function zt(){return pt?ut===null||$===void 0||$===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof _=="function"?_():_}):ut===!1||$===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof F=="function"?F():F}):$t():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof m=="function"?m():m})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(i,T),"data-page-number":pt,ref:mergeRefs(w,at),style:{"--scale-factor":`${_t}`,backgroundColor:y||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},G,{children:zt()}))}displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const StyledFilePreview=dt.div`
	position: absolute;
	top: 8px;
	left: 8px;
	overflow: hidden;
	width: calc(100% - 16px);
	height: calc(100% - 16px);
	object-fit: contain;
	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.xs};
`,WrappableText=dt(Text)`
	word-wrap: break-word;
	width: 100%;
`;pdfjs$1.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs$1.version}/pdf.worker.min.js`;const FilePreview=({file:t,onPassword:n,passwordQueue:r})=>{const i=(s,y)=>{parseInt(y,10)===PasswordResponses$1.NEED_PASSWORD?r.add({callback:s,incorrect:!1,filename:t.name}):parseInt(y,10)===PasswordResponses$1.INCORRECT_PASSWORD&&r.editCurrentItem({callback:s,incorrect:!0})};return t.name.endsWith(".pdf")?jsxRuntimeExports.jsx(StyledFilePreview,{children:jsxRuntimeExports.jsx(Document$1,{file:t,onPassword:i,onLoadSuccess:()=>{var s;(s=r.currentItem)!=null&&s.password&&(n==null||n(t.name,r.currentItem.password),r.remove())},children:jsxRuntimeExports.jsx(Page,{pageNumber:1,width:142})})}):t.name.endsWith(".csv")?jsxRuntimeExports.jsx(StyledFilePreview,{children:jsxRuntimeExports.jsxs(Flex,{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[jsxRuntimeExports.jsx(WrappableText,{bold:!0,size:"sm",px:"xs",children:t.name}),jsxRuntimeExports.jsxs(Text,{color:"quaternary",size:"xs",mt:"3xs",children:[(Number(t.size)/1e3).toFixed(1)," kB"]})]})}):jsxRuntimeExports.jsx(StyledFilePreview,{src:t.preview,as:"img"})},FilePreview$1=FilePreview;FilePreview.__docgenInfo={description:"",methods:[],displayName:"FilePreview",props:{setFiles:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileWithPreview[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},name:"files"}],return:{name:"void"}}},description:""},passwordQueue:{required:!0,tsType:{name:"PasswordQueue"},description:""},file:{required:!0,tsType:{name:"FileWithPreview"},description:""}}};var isMergeableObject=function t(n){return isNonNullObject(n)&&!isSpecial(n)};function isNonNullObject(t){return!!t&&typeof t=="object"}function isSpecial(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||isReactElement(t)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(t){return t.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(t){return Array.isArray(t)?[]:{}}function cloneUnlessOtherwiseSpecified(t,n){return n.clone!==!1&&n.isMergeableObject(t)?deepmerge(emptyTarget(t),t,n):t}function defaultArrayMerge(t,n,r){return t.concat(n).map(function(i){return cloneUnlessOtherwiseSpecified(i,r)})}function mergeObject(t,n,r){var i={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(s){i[s]=cloneUnlessOtherwiseSpecified(t[s],r)}),Object.keys(n).forEach(function(s){!r.isMergeableObject(n[s])||!t[s]?i[s]=cloneUnlessOtherwiseSpecified(n[s],r):i[s]=deepmerge(t[s],n[s],r)}),i}function deepmerge(t,n,r){r=r||{},r.arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject;var i=Array.isArray(n),s=Array.isArray(t),y=i===s;return y?i?r.arrayMerge(t,n,r):mergeObject(t,n,r):cloneUnlessOtherwiseSpecified(n,r)}deepmerge.all=function t(n,r){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(i,s){return deepmerge(i,s,r)},{})};var deepmerge_1=deepmerge,freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var n=hasOwnProperty$a.call(t,symToStringTag$1),r=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var i=!0}catch{}var s=nativeObjectToString$1.call(t);return i&&(n?t[symToStringTag$1]=r:delete t[symToStringTag$1]),s}var objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function overArg(t,n){return function(r){return t(n(r))}}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;function isObjectLike(t){return t!=null&&typeof t=="object"}var objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$b=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(t){if(!isObjectLike(t)||baseGetTag(t)!=objectTag$3)return!1;var n=getPrototype$1(t);if(n===null)return!0;var r=hasOwnProperty$9.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString$2.call(r)==objectCtorString}function listCacheClear(){this.__data__=[],this.size=0}function eq(t,n){return t===n||t!==t&&n!==n}function assocIndexOf(t,n){for(var r=t.length;r--;)if(eq(t[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var n=this.__data__,r=assocIndexOf(n,t);if(r<0)return!1;var i=n.length-1;return r==i?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(t){var n=this.__data__,r=assocIndexOf(n,t);return r<0?void 0:n[r][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,n){var r=this.__data__,i=assocIndexOf(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}function ListCache(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}function isObject$1(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var n=baseGetTag(t);return n==funcTag$2||n==genTag$1||n==asyncTag||n==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(t){if(t!=null){try{return funcToString$1.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$a=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$8=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$8).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var n=isFunction$1(t)?reIsNative:reIsHostCtor;return n.test(toSource(t))}function getValue(t,n){return t==null?void 0:t[n]}function getNative(t,n){var r=getValue(t,n);return baseIsNative(r)?r:void 0}var Map$1=getNative(root$1,"Map");const Map$2=Map$1;var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(t){var n=this.__data__;if(nativeCreate$1){var r=n[t];return r===HASH_UNDEFINED$1?void 0:r}return hasOwnProperty$7.call(n,t)?n[t]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(t){var n=this.__data__;return nativeCreate$1?n[t]!==void 0:hasOwnProperty$6.call(n,t)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nativeCreate$1&&n===void 0?HASH_UNDEFINED:n,this}function Hash(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function getMapData(t,n){var r=t.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(t){var n=getMapData(this,t).delete(t);return this.size-=n?1:0,n}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,n){var r=getMapData(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}function MapCache(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(t,n){var r=this.__data__;if(r instanceof ListCache){var i=r.__data__;if(!Map$2||i.length<LARGE_ARRAY_SIZE-1)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new MapCache(i)}return r.set(t,n),this.size=r.size,this}function Stack(t){var n=this.__data__=new ListCache(t);this.size=n.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayEach(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch{}}();const defineProperty$1=defineProperty;function baseAssignValue(t,n,r){n=="__proto__"&&defineProperty$1?defineProperty$1(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function assignValue(t,n,r){var i=t[n];(!(hasOwnProperty$5.call(t,n)&&eq(i,r))||r===void 0&&!(n in t))&&baseAssignValue(t,n,r)}function copyObject(t,n,r,i){var s=!r;r||(r={});for(var y=-1,S=n.length;++y<S;){var J=n[y],T=i?i(r[J],t[J],J,r,t):void 0;T===void 0&&(T=t[J]),s?baseAssignValue(r,J,T):assignValue(r,J,T)}return r}function baseTimes(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}var argsTag$2="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$2}var objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$4.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};const isArguments$1=isArguments;var isArray$1=Array.isArray;const isArray$2=isArray$1;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,n){var r=typeof t;return n=n??MAX_SAFE_INTEGER$1,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<n}var MAX_SAFE_INTEGER=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(n){return t(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(t,n){var r=isArray$2(t),i=!r&&isArguments$1(t),s=!r&&!i&&isBuffer$1(t),y=!r&&!i&&!s&&isTypedArray$1(t),S=r||i||s||y,J=S?baseTimes(t.length,String):[],T=J.length;for(var E in t)(n||hasOwnProperty$3.call(t,E))&&!(S&&(E=="length"||s&&(E=="offset"||E=="parent")||y&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||isIndex(E,T)))&&J.push(E);return J}var objectProto$4=Object.prototype;function isPrototype(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||objectProto$4;return t===r}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys$1(t);var n=[];for(var r in Object(t))hasOwnProperty$2.call(t,r)&&r!="constructor"&&n.push(r);return n}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}function baseAssign(t,n){return t&&copyObject(n,keys(n),t)}function nativeKeysIn(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}var objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn(t){if(!isObject$1(t))return nativeKeysIn(t);var n=isPrototype(t),r=[];for(var i in t)i=="constructor"&&(n||!hasOwnProperty$1.call(t,i))||r.push(i);return r}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}function baseAssignIn(t,n){return t&&copyObject(n,keysIn(n),t)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(t,n){if(n)return t.slice();var r=t.length,i=allocUnsafe?allocUnsafe(r):new t.constructor(r);return t.copy(i),i}function copyArray(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}function arrayFilter(t,n){for(var r=-1,i=t==null?0:t.length,s=0,y=[];++r<i;){var S=t[r];n(S,r,t)&&(y[s++]=S)}return y}function stubArray(){return[]}var objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols$1(t),function(n){return propertyIsEnumerable.call(t,n)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(t,n){return copyObject(t,getSymbols$1(t),n)}function arrayPush(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(t){for(var n=[];t;)arrayPush(n,getSymbols$1(t)),t=getPrototype$1(t);return n}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(t,n){return copyObject(t,getSymbolsIn$1(t),n)}function baseGetAllKeys(t,n,r){var i=n(t);return isArray$2(t)?i:arrayPush(i,r(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols$1)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$2||Map$2&&getTag(new Map$2)!=mapTag$3||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$3||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(t){var n=baseGetTag(t),r=n==objectTag$1?t.constructor:void 0,i=r?toSource(r):"";if(i)switch(i){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return n});const getTag$1=getTag;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(t){var n=new t.constructor(t.byteLength);return new Uint8Array$2(n).set(new Uint8Array$2(t)),n}function cloneDataView(t,n){var r=n?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var n=new t.constructor(t.source,reFlags.exec(t));return n.lastIndex=t.lastIndex,n}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf?Object(symbolValueOf.call(t)):{}}function cloneTypedArray(t,n){var r=n?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,n,r){var i=t.constructor;switch(n){case arrayBufferTag$1:return cloneArrayBuffer(t);case boolTag$1:case dateTag$1:return new i(+t);case dataViewTag$1:return cloneDataView(t,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,r);case mapTag$2:return new i;case numberTag$1:case stringTag$1:return new i(t);case regexpTag$1:return cloneRegExp(t);case setTag$2:return new i;case symbolTag$2:return cloneSymbol(t)}}var objectCreate=Object.create,baseCreate=function(){function t(){}return function(n){if(!isObject$1(n))return{};if(objectCreate)return objectCreate(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();const baseCreate$1=baseCreate;function initCloneObject(t){return typeof t.constructor=="function"&&!isPrototype(t)?baseCreate$1(getPrototype$1(t)):{}}var mapTag$1="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$1}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$1="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$1}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(t,n,r,i,s,y){var S,J=n&CLONE_DEEP_FLAG$1,T=n&CLONE_FLAT_FLAG,E=n&CLONE_SYMBOLS_FLAG$2;if(r&&(S=s?r(t,i,s,y):r(t)),S!==void 0)return S;if(!isObject$1(t))return t;var v=isArray$2(t);if(v){if(S=initCloneArray(t),!J)return copyArray(t,S)}else{var B=getTag$1(t),F=B==funcTag||B==genTag;if(isBuffer$1(t))return cloneBuffer(t,J);if(B==objectTag||B==argsTag||F&&!s){if(S=T||F?{}:initCloneObject(t),!J)return T?copySymbolsIn(t,baseAssignIn(S,t)):copySymbols(t,baseAssign(S,t))}else{if(!cloneableTags[B])return s?t:{};S=initCloneByTag(t,B,J)}}y||(y=new Stack);var C=y.get(t);if(C)return C;y.set(t,S),isSet$1(t)?t.forEach(function(m){S.add(baseClone(m,n,r,m,t,y))}):isMap$1(t)&&t.forEach(function(m,x){S.set(x,baseClone(m,n,r,x,t,y))});var w=E?T?getAllKeysIn:getAllKeys:T?keysIn:keys,_=v?void 0:w(t);return arrayEach(_||t,function(m,x){_&&(x=m,m=t[x]),assignValue(S,x,baseClone(m,n,r,x,t,y))}),S}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG$1)}var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,hasElementType=typeof Element<"u";function equal(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){var r=isArray(t),i=isArray(n),s,y,S;if(r&&i){if(y=t.length,y!=n.length)return!1;for(s=y;s--!==0;)if(!equal(t[s],n[s]))return!1;return!0}if(r!=i)return!1;var J=t instanceof Date,T=n instanceof Date;if(J!=T)return!1;if(J&&T)return t.getTime()==n.getTime();var E=t instanceof RegExp,v=n instanceof RegExp;if(E!=v)return!1;if(E&&v)return t.toString()==n.toString();var B=keyList(t);if(y=B.length,y!==keyList(n).length)return!1;for(s=y;s--!==0;)if(!hasProp.call(n,B[s]))return!1;if(hasElementType&&t instanceof Element&&n instanceof Element)return t===n;for(s=y;s--!==0;)if(S=B[s],!(S==="_owner"&&t.$$typeof)&&!equal(t[S],n[S]))return!1;return!0}return t!==t&&n!==n}var reactFastCompare=function t(n,r){try{return equal(n,r)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}};const isEqual=getDefaultExportFromCjs(reactFastCompare);var isProduction=!0;function warning(t,n){if(!isProduction){if(t)return;var r="Warning: "+n;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var CLONE_SYMBOLS_FLAG=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG)}function arrayMap(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}var symbolTag="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag}var FUNC_ERROR_TEXT="Expected a function";function memoize(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var i=arguments,s=n?n.apply(this,i):i[0],y=r.cache;if(y.has(s))return y.get(s);var S=t.apply(this,i);return r.cache=y.set(s,S)||y,S};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var n=memoize(t,function(i){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),i}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(rePropName,function(r,i,s,y){n.push(s?y.replace(reEscapeChar,"$1"):i||r)}),n});const stringToPath$1=stringToPath;var INFINITY$1=1/0;function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var n=t+"";return n=="0"&&1/t==-INFINITY$1?"-0":n}var INFINITY=1/0,symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$2(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var n=t+"";return n=="0"&&1/t==-INFINITY?"-0":n}function toString(t){return t==null?"":baseToString(t)}function toPath(t){return isArray$2(t)?arrayMap(t,toKey):isSymbol(t)?[t]:copyArray(stringToPath$1(toString(t)))}function _extends(){return _extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,n){if(t==null)return{};var r={},i=Object.keys(t),s,y;for(y=0;y<i.length;y++)s=i[y],!(n.indexOf(s)>=0)&&(r[s]=t[s]);return r}var FormikContext=reactExports.createContext(void 0);FormikContext.displayName="FormikContext";var FormikProvider=FormikContext.Provider;FormikContext.Consumer;function useFormikContext(){var t=reactExports.useContext(FormikContext);return t||warning(!1),t}var isFunction=function t(n){return typeof n=="function"},isObject=function t(n){return n!==null&&typeof n=="object"},isInteger=function t(n){return String(Math.floor(Number(n)))===n},isString=function t(n){return Object.prototype.toString.call(n)==="[object String]"},isEmptyChildren=function t(n){return reactExports.Children.count(n)===0},isPromise=function t(n){return isObject(n)&&isFunction(n.then)};function getIn(t,n,r,i){i===void 0&&(i=0);for(var s=toPath(n);t&&i<s.length;)t=t[s[i++]];return i!==s.length&&!t||t===void 0?r:t}function setIn(t,n,r){for(var i=clone(t),s=i,y=0,S=toPath(n);y<S.length-1;y++){var J=S[y],T=getIn(t,S.slice(0,y+1));if(T&&(isObject(T)||Array.isArray(T)))s=s[J]=clone(T);else{var E=S[y+1];s=s[J]=isInteger(E)&&Number(E)>=0?[]:{}}}return(y===0?t:s)[S[y]]===r?t:(r===void 0?delete s[S[y]]:s[S[y]]=r,y===0&&r===void 0&&delete i[S[y]],i)}function setNestedObjectValues(t,n,r,i){r===void 0&&(r=new WeakMap),i===void 0&&(i={});for(var s=0,y=Object.keys(t);s<y.length;s++){var S=y[s],J=t[S];isObject(J)?r.get(J)||(r.set(J,!0),i[S]=Array.isArray(J)?[]:{},setNestedObjectValues(J,n,r,i[S])):i[S]=n}return i}function formikReducer(t,n){switch(n.type){case"SET_VALUES":return _extends({},t,{values:n.payload});case"SET_TOUCHED":return _extends({},t,{touched:n.payload});case"SET_ERRORS":return isEqual(t.errors,n.payload)?t:_extends({},t,{errors:n.payload});case"SET_STATUS":return _extends({},t,{status:n.payload});case"SET_ISSUBMITTING":return _extends({},t,{isSubmitting:n.payload});case"SET_ISVALIDATING":return _extends({},t,{isValidating:n.payload});case"SET_FIELD_VALUE":return _extends({},t,{values:setIn(t.values,n.payload.field,n.payload.value)});case"SET_FIELD_TOUCHED":return _extends({},t,{touched:setIn(t.touched,n.payload.field,n.payload.value)});case"SET_FIELD_ERROR":return _extends({},t,{errors:setIn(t.errors,n.payload.field,n.payload.value)});case"RESET_FORM":return _extends({},t,n.payload);case"SET_FORMIK_STATE":return n.payload(t);case"SUBMIT_ATTEMPT":return _extends({},t,{touched:setNestedObjectValues(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return _extends({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return _extends({},t,{isSubmitting:!1});default:return t}}var emptyErrors={},emptyTouched={};function useFormik(t){var n=t.validateOnChange,r=n===void 0?!0:n,i=t.validateOnBlur,s=i===void 0?!0:i,y=t.validateOnMount,S=y===void 0?!1:y,J=t.isInitialValid,T=t.enableReinitialize,E=T===void 0?!1:T,v=t.onSubmit,B=_objectWithoutPropertiesLoose(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),F=_extends({validateOnChange:r,validateOnBlur:s,validateOnMount:S,onSubmit:v},B),C=reactExports.useRef(F.initialValues),w=reactExports.useRef(F.initialErrors||emptyErrors),_=reactExports.useRef(F.initialTouched||emptyTouched),m=reactExports.useRef(F.initialStatus),x=reactExports.useRef(!1),D=reactExports.useRef({});reactExports.useEffect(function(){return x.current=!0,function(){x.current=!1}},[]);var O=reactExports.useState(0),k=O[1],u=reactExports.useRef({values:cloneDeep(F.initialValues),errors:cloneDeep(F.initialErrors)||emptyErrors,touched:cloneDeep(F.initialTouched)||emptyTouched,status:cloneDeep(F.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),p=u.current,I=reactExports.useCallback(function(U){var G=u.current;u.current=formikReducer(G,U),G!==u.current&&k(function(N){return N+1})},[]),A=reactExports.useCallback(function(U,G){return new Promise(function(N,K){var mt=F.validate(U,G);mt==null?N(emptyErrors):isPromise(mt)?mt.then(function(xt){N(xt||emptyErrors)},function(xt){K(xt)}):N(mt)})},[F.validate]),h=reactExports.useCallback(function(U,G){var N=F.validationSchema,K=isFunction(N)?N(G):N,mt=G&&K.validateAt?K.validateAt(G,U):validateYupSchema(U,K);return new Promise(function(xt,Dt){mt.then(function(){xt(emptyErrors)},function($t){$t.name==="ValidationError"?xt(yupToFormErrors($t)):Dt($t)})})},[F.validationSchema]),j=reactExports.useCallback(function(U,G){return new Promise(function(N){return N(D.current[U].validate(G))})},[]),b=reactExports.useCallback(function(U){var G=Object.keys(D.current).filter(function(K){return isFunction(D.current[K].validate)}),N=G.length>0?G.map(function(K){return j(K,getIn(U,K))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(N).then(function(K){return K.reduce(function(mt,xt,Dt){return xt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||xt&&(mt=setIn(mt,G[Dt],xt)),mt},{})})},[j]),V=reactExports.useCallback(function(U){return Promise.all([b(U),F.validationSchema?h(U):{},F.validate?A(U):{}]).then(function(G){var N=G[0],K=G[1],mt=G[2],xt=deepmerge_1.all([N,K,mt],{arrayMerge});return xt})},[F.validate,F.validationSchema,b,A,h]),X=useEventCallback(function(U){return U===void 0&&(U=p.values),I({type:"SET_ISVALIDATING",payload:!0}),V(U).then(function(G){return x.current&&(I({type:"SET_ISVALIDATING",payload:!1}),I({type:"SET_ERRORS",payload:G})),G})});reactExports.useEffect(function(){S&&x.current===!0&&isEqual(C.current,F.initialValues)&&X(C.current)},[S,X]);var P=reactExports.useCallback(function(U){var G=U&&U.values?U.values:C.current,N=U&&U.errors?U.errors:w.current?w.current:F.initialErrors||{},K=U&&U.touched?U.touched:_.current?_.current:F.initialTouched||{},mt=U&&U.status?U.status:m.current?m.current:F.initialStatus;C.current=G,w.current=N,_.current=K,m.current=mt;var xt=function(){I({type:"RESET_FORM",payload:{isSubmitting:!!U&&!!U.isSubmitting,errors:N,touched:K,status:mt,values:G,isValidating:!!U&&!!U.isValidating,submitCount:U&&U.submitCount&&typeof U.submitCount=="number"?U.submitCount:0}})};if(F.onReset){var Dt=F.onReset(p.values,it);isPromise(Dt)?Dt.then(xt):xt()}else xt()},[F.initialErrors,F.initialStatus,F.initialTouched,F.onReset]);reactExports.useEffect(function(){x.current===!0&&!isEqual(C.current,F.initialValues)&&E&&(C.current=F.initialValues,P(),S&&X(C.current))},[E,F.initialValues,P,S,X]),reactExports.useEffect(function(){E&&x.current===!0&&!isEqual(w.current,F.initialErrors)&&(w.current=F.initialErrors||emptyErrors,I({type:"SET_ERRORS",payload:F.initialErrors||emptyErrors}))},[E,F.initialErrors]),reactExports.useEffect(function(){E&&x.current===!0&&!isEqual(_.current,F.initialTouched)&&(_.current=F.initialTouched||emptyTouched,I({type:"SET_TOUCHED",payload:F.initialTouched||emptyTouched}))},[E,F.initialTouched]),reactExports.useEffect(function(){E&&x.current===!0&&!isEqual(m.current,F.initialStatus)&&(m.current=F.initialStatus,I({type:"SET_STATUS",payload:F.initialStatus}))},[E,F.initialStatus,F.initialTouched]);var Q=useEventCallback(function(U){if(D.current[U]&&isFunction(D.current[U].validate)){var G=getIn(p.values,U),N=D.current[U].validate(G);return isPromise(N)?(I({type:"SET_ISVALIDATING",payload:!0}),N.then(function(K){return K}).then(function(K){I({type:"SET_FIELD_ERROR",payload:{field:U,value:K}}),I({type:"SET_ISVALIDATING",payload:!1})})):(I({type:"SET_FIELD_ERROR",payload:{field:U,value:N}}),Promise.resolve(N))}else if(F.validationSchema)return I({type:"SET_ISVALIDATING",payload:!0}),h(p.values,U).then(function(K){return K}).then(function(K){I({type:"SET_FIELD_ERROR",payload:{field:U,value:getIn(K,U)}}),I({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),lt=reactExports.useCallback(function(U,G){var N=G.validate;D.current[U]={validate:N}},[]),ut=reactExports.useCallback(function(U){delete D.current[U]},[]),Y=useEventCallback(function(U,G){I({type:"SET_TOUCHED",payload:U});var N=G===void 0?s:G;return N?X(p.values):Promise.resolve()}),ht=reactExports.useCallback(function(U){I({type:"SET_ERRORS",payload:U})},[]),bt=useEventCallback(function(U,G){var N=isFunction(U)?U(p.values):U;I({type:"SET_VALUES",payload:N});var K=G===void 0?r:G;return K?X(N):Promise.resolve()}),Et=reactExports.useCallback(function(U,G){I({type:"SET_FIELD_ERROR",payload:{field:U,value:G}})},[]),At=useEventCallback(function(U,G,N){I({type:"SET_FIELD_VALUE",payload:{field:U,value:G}});var K=N===void 0?r:N;return K?X(setIn(p.values,U,G)):Promise.resolve()}),L=reactExports.useCallback(function(U,G){var N=G,K=U,mt;if(!isString(U)){U.persist&&U.persist();var xt=U.target?U.target:U.currentTarget,Dt=xt.type,$t=xt.name,zt=xt.id,Vt=xt.value,qt=xt.checked,Gt=xt.outerHTML,Kt=xt.options,yt=xt.multiple;N=G||$t||zt,K=/number|range/.test(Dt)?(mt=parseFloat(Vt),isNaN(mt)?"":mt):/checkbox/.test(Dt)?getValueForCheckbox(getIn(p.values,N),qt,Vt):Kt&&yt?getSelectedValues(Kt):Vt}N&&At(N,K)},[At,p.values]),o=useEventCallback(function(U){if(isString(U))return function(G){return L(G,U)};L(U)}),d=useEventCallback(function(U,G,N){G===void 0&&(G=!0),I({type:"SET_FIELD_TOUCHED",payload:{field:U,value:G}});var K=N===void 0?s:N;return K?X(p.values):Promise.resolve()}),c=reactExports.useCallback(function(U,G){U.persist&&U.persist();var N=U.target,K=N.name,mt=N.id,xt=N.outerHTML,Dt=G||K||mt;d(Dt,!0)},[d]),f=useEventCallback(function(U){if(isString(U))return function(G){return c(G,U)};c(U)}),g=reactExports.useCallback(function(U){isFunction(U)?I({type:"SET_FORMIK_STATE",payload:U}):I({type:"SET_FORMIK_STATE",payload:function(){return U}})},[]),M=reactExports.useCallback(function(U){I({type:"SET_STATUS",payload:U})},[]),$=reactExports.useCallback(function(U){I({type:"SET_ISSUBMITTING",payload:U})},[]),q=useEventCallback(function(){return I({type:"SUBMIT_ATTEMPT"}),X().then(function(U){var G=U instanceof Error,N=!G&&Object.keys(U).length===0;if(N){var K;try{if(K=pt(),K===void 0)return}catch(mt){throw mt}return Promise.resolve(K).then(function(mt){return x.current&&I({type:"SUBMIT_SUCCESS"}),mt}).catch(function(mt){if(x.current)throw I({type:"SUBMIT_FAILURE"}),mt})}else if(x.current&&(I({type:"SUBMIT_FAILURE"}),G))throw U})}),at=useEventCallback(function(U){U&&U.preventDefault&&isFunction(U.preventDefault)&&U.preventDefault(),U&&U.stopPropagation&&isFunction(U.stopPropagation)&&U.stopPropagation(),q().catch(function(G){console.warn("Warning: An unhandled error was caught from submitForm()",G)})}),it={resetForm:P,validateForm:X,validateField:Q,setErrors:ht,setFieldError:Et,setFieldTouched:d,setFieldValue:At,setStatus:M,setSubmitting:$,setTouched:Y,setValues:bt,setFormikState:g,submitForm:q},pt=useEventCallback(function(){return v(p.values,it)}),vt=useEventCallback(function(U){U&&U.preventDefault&&isFunction(U.preventDefault)&&U.preventDefault(),U&&U.stopPropagation&&isFunction(U.stopPropagation)&&U.stopPropagation(),P()}),_t=reactExports.useCallback(function(U){return{value:getIn(p.values,U),error:getIn(p.errors,U),touched:!!getIn(p.touched,U),initialValue:getIn(C.current,U),initialTouched:!!getIn(_.current,U),initialError:getIn(w.current,U)}},[p.errors,p.touched,p.values]),gt=reactExports.useCallback(function(U){return{setValue:function(N,K){return At(U,N,K)},setTouched:function(N,K){return d(U,N,K)},setError:function(N){return Et(U,N)}}},[At,d,Et]),Rt=reactExports.useCallback(function(U){var G=isObject(U),N=G?U.name:U,K=getIn(p.values,N),mt={name:N,value:K,onChange:o,onBlur:f};if(G){var xt=U.type,Dt=U.value,$t=U.as,zt=U.multiple;xt==="checkbox"?Dt===void 0?mt.checked=!!K:(mt.checked=!!(Array.isArray(K)&&~K.indexOf(Dt)),mt.value=Dt):xt==="radio"?(mt.checked=K===Dt,mt.value=Dt):$t==="select"&&zt&&(mt.value=mt.value||[],mt.multiple=!0)}return mt},[f,o,p.values]),Lt=reactExports.useMemo(function(){return!isEqual(C.current,p.values)},[C.current,p.values]),Tt=reactExports.useMemo(function(){return typeof J<"u"?Lt?p.errors&&Object.keys(p.errors).length===0:J!==!1&&isFunction(J)?J(F):J:p.errors&&Object.keys(p.errors).length===0},[J,Lt,p.errors,F]),Ot=_extends({},p,{initialValues:C.current,initialErrors:w.current,initialTouched:_.current,initialStatus:m.current,handleBlur:f,handleChange:o,handleReset:vt,handleSubmit:at,resetForm:P,setErrors:ht,setFormikState:g,setFieldTouched:d,setFieldValue:At,setFieldError:Et,setStatus:M,setSubmitting:$,setTouched:Y,setValues:bt,submitForm:q,validateForm:X,validateField:Q,isValid:Tt,dirty:Lt,unregisterField:ut,registerField:lt,getFieldProps:Rt,getFieldMeta:_t,getFieldHelpers:gt,validateOnBlur:s,validateOnChange:r,validateOnMount:S});return Ot}function Formik(t){var n=useFormik(t),r=t.component,i=t.children,s=t.render,y=t.innerRef;return reactExports.useImperativeHandle(y,function(){return n}),reactExports.createElement(FormikProvider,{value:n},r?reactExports.createElement(r,n):s?s(n):i?isFunction(i)?i(n):isEmptyChildren(i)?null:reactExports.Children.only(i):null)}function warnAboutMissingIdentifier(t){var n=t.htmlContent,r=t.documentationAnchorLink,i=t.handlerName;console.warn("Warning: Formik called `"+i+"`, but you forgot to pass an `id` or `name` attribute to your input:\n    "+n+`
    Formik cannot determine which value to update. For more info see https://formik.org/docs/api/formik#`+r+`
  `)}function yupToFormErrors(t){var n={};if(t.inner){if(t.inner.length===0)return setIn(n,t.path,t.message);for(var s=t.inner,r=Array.isArray(s),i=0,s=r?s:s[Symbol.iterator]();;){var y;if(r){if(i>=s.length)break;y=s[i++]}else{if(i=s.next(),i.done)break;y=i.value}var S=y;getIn(n,S.path)||(n=setIn(n,S.path,S.message))}}return n}function validateYupSchema(t,n,r,i){r===void 0&&(r=!1);var s=prepareDataForValidation(t);return n[r?"validateSync":"validate"](s,{abortEarly:!1,context:i||s})}function prepareDataForValidation(t){var n=Array.isArray(t)?[]:{};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=String(r);Array.isArray(t[i])===!0?n[i]=t[i].map(function(s){return Array.isArray(s)===!0||isPlainObject(s)?prepareDataForValidation(s):s!==""?s:void 0}):isPlainObject(t[i])?n[i]=prepareDataForValidation(t[i]):n[i]=t[i]!==""?t[i]:void 0}return n}function arrayMerge(t,n,r){var i=t.slice();return n.forEach(function(y,S){if(typeof i[S]>"u"){var J=r.clone!==!1,T=J&&r.isMergeableObject(y);i[S]=T?deepmerge_1(Array.isArray(y)?[]:{},y,r):y}else r.isMergeableObject(y)?i[S]=deepmerge_1(t[S],y,r):t.indexOf(y)===-1&&i.push(y)}),i}function getSelectedValues(t){return Array.from(t).filter(function(n){return n.selected}).map(function(n){return n.value})}function getValueForCheckbox(t,n,r){if(typeof t=="boolean")return!!n;var i=[],s=!1,y=-1;if(Array.isArray(t))i=t,y=t.indexOf(r),s=y>=0;else if(!r||r=="true"||r=="false")return!!n;return n&&r&&!s?i.concat(r):s?i.slice(0,y).concat(i.slice(y+1)):i}var useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useEventCallback(t){var n=reactExports.useRef(t);return useIsomorphicLayoutEffect(function(){n.current=t}),reactExports.useCallback(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n.current.apply(void 0,i)},[])}function Field(t){var n=t.validate,r=t.name,i=t.render,s=t.children,y=t.as,S=t.component,J=t.className,T=_objectWithoutPropertiesLoose(t,["validate","name","render","children","as","component","className"]),E=useFormikContext(),v=_objectWithoutPropertiesLoose(E,["validate","validationSchema"]),B=v.registerField,F=v.unregisterField;reactExports.useEffect(function(){return B(r,{validate:n}),function(){F(r)}},[B,F,r,n]);var C=v.getFieldProps(_extends({name:r},T)),w=v.getFieldMeta(r),_={field:C,form:v};if(i)return i(_extends({},_,{meta:w}));if(isFunction(s))return s(_extends({},_,{meta:w}));if(S){if(typeof S=="string"){var m=T.innerRef,x=_objectWithoutPropertiesLoose(T,["innerRef"]);return reactExports.createElement(S,_extends({ref:m},C,x,{className:J}),s)}return reactExports.createElement(S,_extends({field:C,form:v},T,{className:J}),s)}var D=y||"input";if(typeof D=="string"){var O=T.innerRef,k=_objectWithoutPropertiesLoose(T,["innerRef"]);return reactExports.createElement(D,_extends({ref:O},C,k,{className:J}),s)}return reactExports.createElement(D,_extends({},C,T,{className:J}),s)}var Form=reactExports.forwardRef(function(t,n){var r=t.action,i=_objectWithoutPropertiesLoose(t,["action"]),s=r??"#",y=useFormikContext(),S=y.handleReset,J=y.handleSubmit;return reactExports.createElement("form",_extends({onSubmit:J,ref:n,onReset:S,action:s},i))});Form.displayName="Form";const FormikTextInput=({field:t,form:{touched:n,errors:r},...i})=>jsxRuntimeExports.jsx(TextInput,{...i,...t,error:n[t.name]&&r[t.name]});FormikTextInput.__docgenInfo={description:"",methods:[],displayName:"FormikTextInput"};const PasswordModal=({open:t,onClose:n,passwordPromptText:r,passwordIncorrectText:i,passwordConfirmButtonText:s,passwordCancelButtonText:y,passwordPlaceholderText:S,passwordQueue:J})=>{var B;const T=nt(),[E,v]=reactExports.useState((B=J.currentItem)==null?void 0:B.filename);return reactExports.useEffect(()=>{var F;v(((F=J.currentItem)==null?void 0:F.filename)??E)},[J.currentItem]),jsxRuntimeExports.jsxs(Modal,{open:t,onClose:n,size:"xs",p:"xl",showCloseButton:!1,closeOnOverlayClick:!1,container:document.body,children:[jsxRuntimeExports.jsxs(Box,{textAlign:"center",children:[jsxRuntimeExports.jsx(Icon,{icon:"lock-brand",mb:"xs",size:40}),jsxRuntimeExports.jsxs(Paragraph,{bold:!0,size:"md",mb:"s",children:[r," [",E,"]"]})]}),jsxRuntimeExports.jsx(Formik,{initialValues:{password:""},validate:({password:F})=>{if(!F)return{password:r}},onSubmit:({password:F},C)=>{var w,_;J.setAttr({password:F}),(_=(w=J.currentItem)==null?void 0:w.callback)==null||_.call(w,F),C.resetForm()},children:F=>{var C;return jsxRuntimeExports.jsxs(Form,{onSubmit:F.handleSubmit,onInput:()=>J.setAttr({incorrect:!1}),children:[jsxRuntimeExports.jsx(Field,{component:FormikTextInput,name:"password",type:"password",placeholder:S,autoFocus:!0}),((C=J.currentItem)==null?void 0:C.incorrect)&&jsxRuntimeExports.jsx(Notice,{colorTheme:"error",mt:"xxs",children:i}),jsxRuntimeExports.jsxs(Flex,{gap:T.tokens.ref.spacing["2xs"],justifyContent:"center",mt:"s",children:[jsxRuntimeExports.jsx(Button,{type:"submit",children:s}),jsxRuntimeExports.jsx(Button,{onClick:n,secondary:!0,colorTheme:"neutral",children:y})]})]})}})]})},PasswordModal$1=PasswordModal;PasswordModal.__docgenInfo={description:"",methods:[],displayName:"PasswordModal",props:{passwordPromptText:{required:!1,tsType:{name:"string"},description:"Prompt text for a password"},passwordIncorrectText:{required:!1,tsType:{name:"string"},description:"Prompt text when an incorrect password is entered"},passwordConfirmButtonText:{required:!1,tsType:{name:"string"},description:"Button text to confirm password"},passwordCancelButtonText:{required:!1,tsType:{name:"string"},description:"Button text to close password modal"},passwordPlaceholderText:{required:!1,tsType:{name:"string"},description:""},passwordQueue:{required:!0,tsType:{name:"PasswordQueue"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const getDashedBorder=(t,n,r)=>{let i=n?t.tokens.color.border.error.primary:r?t.tokens.color.border.primaryInteraction:t.tokens.color.border.primary;return i=i.slice(1),`url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='5' ry='5' stroke='%23${i}' stroke-width='2' stroke-dasharray='8%2c8' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e");`},Remove=dt.div`
	position: absolute;
	top: 3px;
	right: 9px;
	width: 20px;
	height: 20px;
	color: ${({theme:t})=>t.tokens.color.text.error.primary};
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	&:hover {
		filter: brightness(0.9);
	}
`,PreviewFilesWrapper=dt.div`
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
	justify-items: center;
	grid-gap: 0 12px;
`,RelativeWrap=dt.div`
	position: relative;
	border: 1px solid
		${({theme:t})=>t.tokens.color.border.secondary};
	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.md};
	margin-bottom: 12px;
	width: 100%;
	max-width: 160px;

	&::before {
		content: '';
		display: block;
		padding-top: 100%;
	}
`,Wrapper=dt.div`
	max-width: 600px;
	width: 100%;
`,StyledUpload=dt.div`
	padding: ${({theme:t})=>t.tokens.ref.spacing.lg};
	text-align: center;
	width: 100%;
	outline: none;
	box-sizing: border-box;
	transition: background-image 0.3s;

	background-image: ${({theme:t,error:n,isDragActive:r})=>getDashedBorder(t,n,r)};
	background-size: 100% calc(100% - 1px);
	background-repeat: no-repeat;

	border-radius: ${({theme:t})=>t.tokens.inputButton.borderRadius.md};

	button {
		margin: 0 auto;
	}
`,Label=dt.div`
	margin-bottom: 1rem;
`,LabelDesktop=dt.div`
	@media (hover: none) {
		display: none;
	}
`,LabelTouchDevice=dt.div`
	@media (hover: hover) {
		display: none;
	}
`,UploadIcon=dt.img`
	margin-bottom: 1rem;
`,usePasswordQueue=()=>{const[t,n]=reactExports.useState([]),r=T=>{n(E=>[...E,T])},i=T=>{n(E=>[{...E[0],...T},...E.slice(1)])},s=t.length>0?t[0]:null;return{add:r,editCurrentItem:i,currentItem:s,setAttr:T=>{n([{...t[0],...T},...t.slice(1)])},remove:()=>n(t.slice(1)),removeAll:()=>n([])}},FileUpload=({multiple:t=!0,additive:n=!1,testId:r="FileUpload",files:i,setFiles:s,label:y,labelTouchDevice:S,dragInstructions:J,onFileDrop:T,acceptedFilePattern:E,uploadButtonText:v,uploadButtonTextTouchDevice:B,onFileRemove:F,error:C,className:w,fileValidation:_,withIcon:m,onPassword:x,passwordPromptText:D="Enter the password to open this PDF file.",passwordIncorrectText:O="Invalid password. Please try again.",passwordConfirmButtonText:k="Confirm",passwordCancelButtonText:u="Cancel",passwordPlaceholderText:p="Password",unsupportedFileFormatErrorMessage:I="Unsupported file format. Supported formats: "})=>{const[A,h]=reactExports.useState([]),j=usePasswordQueue(),b=E??{"image/*":[".png",".jpg",".jpeg",".gif"],"application/pdf":[".pdf"]},V=reactExports.useCallback(async bt=>{const Et=_?[]:bt;if(_){const At=[];await Promise.all(bt.map(async L=>{const o=await _(L);o?At.push(`${L.name}: ${o}`):Et.push(L)})),h(At)}s(Et)},[s,_]);reactExports.useEffect(()=>()=>{i.forEach(bt=>URL.revokeObjectURL(bt.preview))},[]);const X=reactExports.useCallback(bt=>{A.includes(I)&&h(At=>At.filter(L=>L!==I));const Et=bt.map(At=>Object.assign(At,{preview:URL.createObjectURL(At)}));T==null||T(Et),V(n?[...i,...Et].reduce((At,L)=>(At.some(o=>o.name===L.name)||At.push(L),At),[]):Et)},[i,n,T,V,A,I]),P=reactExports.useCallback(bt=>{const Et=Object.values(b).flat().join(", "),At=`${I} ${Et}.`;bt.map(L=>{L.errors.map(o=>{o.code==="file-invalid-type"&&h(d=>d.includes(At)?d:[...d,At])})})},[I]),{getRootProps:Q,getInputProps:lt,isDragActive:ut,open:Y}=useDropzone({accept:b,onDrop:X,onDropRejected:P,noClick:!0,multiple:t}),ht=bt=>{URL.revokeObjectURL(bt.preview),V(i.filter(Et=>Et.preview!==bt.preview)),F==null||F(bt)};return jsxRuntimeExports.jsxs(Wrapper,{className:w,"data-testid":r,children:[jsxRuntimeExports.jsx(PasswordModal$1,{open:!!j.currentItem,onClose:()=>{V([]),j.removeAll()},passwordPromptText:D,passwordIncorrectText:O,passwordConfirmButtonText:k,passwordCancelButtonText:u,passwordPlaceholderText:p,passwordQueue:j}),jsxRuntimeExports.jsxs(StyledUpload,{...Q(),isDragActive:ut,error:C||A.length>0,children:[jsxRuntimeExports.jsx("input",{...lt()}),jsxRuntimeExports.jsx(PreviewFilesWrapper,{children:i.map(bt=>jsxRuntimeExports.jsxs(RelativeWrap,{children:[jsxRuntimeExports.jsx(FilePreview$1,{file:bt,setFiles:V,onPassword:x,passwordQueue:j}),jsxRuntimeExports.jsx(Remove,{onClick:()=>ht(bt),children:jsxRuntimeExports.jsx(Icon,{icon:"trash-error",size:"s"})})]},bt.name))}),m&&jsxRuntimeExports.jsx(UploadIcon,{src:uploadIcon}),ut?jsxRuntimeExports.jsx(Label,{children:J??"Drop the files here ..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LabelDesktop,{children:jsxRuntimeExports.jsx(Label,{children:y??"Drag 'n' drop some files here, or "})}),S&&jsxRuntimeExports.jsx(Label,{children:jsxRuntimeExports.jsx(LabelTouchDevice,{children:S})})]}),jsxRuntimeExports.jsxs(Button,{name:"uploadButton",type:"button",onClick:Y,size:"sm",icon:"paper",colorTheme:"brand",secondary:!0,children:[jsxRuntimeExports.jsx(LabelDesktop,{children:v??"Select files"}),jsxRuntimeExports.jsx(LabelTouchDevice,{children:B??"Select files"})]})]}),typeof C=="string"&&C&&jsxRuntimeExports.jsx(FormControlWarningError,{error:C}),A.length>0&&A.map((bt,Et)=>jsxRuntimeExports.jsx(FormControlWarningError,{error:bt},Et))]})};FileUpload.__docgenInfo={description:"",methods:[],displayName:"FileUpload",props:{testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'FileUpload'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},setFiles:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileWithPreview[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},name:"files"}],return:{name:"void"}}},description:""},passwordPromptText:{required:!1,tsType:{name:"string"},description:"Prompt text for a password",defaultValue:{value:"'Enter the password to open this PDF file.'",computed:!1}},passwordIncorrectText:{required:!1,tsType:{name:"string"},description:"Prompt text when an incorrect password is entered",defaultValue:{value:"'Invalid password. Please try again.'",computed:!1}},passwordConfirmButtonText:{required:!1,tsType:{name:"string"},description:"Button text to confirm password",defaultValue:{value:"'Confirm'",computed:!1}},passwordCancelButtonText:{required:!1,tsType:{name:"string"},description:"Button text to close password modal",defaultValue:{value:"'Cancel'",computed:!1}},passwordPlaceholderText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Password'",computed:!1}},files:{required:!0,tsType:{name:"Array",elements:[{name:"FileWithPreview"}],raw:"FileWithPreview[]"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelTouchDevice:{required:!1,tsType:{name:"string"},description:""},dragInstructions:{required:!1,tsType:{name:"string"},description:""},onFileDrop:{required:!1,tsType:{name:"signature",type:"function",raw:"(newFiles: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"newFiles"}],return:{name:"void"}}},description:""},acceptedFilePattern:{required:!1,tsType:{name:"Accept"},description:""},uploadButtonText:{required:!1,tsType:{name:"string"},description:""},uploadButtonTextTouchDevice:{required:!1,tsType:{name:"string"},description:""},onFileRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"Allows multiple files in the input at once when true",defaultValue:{value:"true",computed:!1}},additive:{required:!1,tsType:{name:"boolean"},description:"Adds files to already uploaded files when true; otherwise, replaces files on drop",defaultValue:{value:"false",computed:!1}},maxSizeBytes:{required:!1,tsType:{name:"number"},description:""},maxFiles:{required:!1,tsType:{name:"number"},description:""},error:{required:!1,tsType:{name:"union",raw:"string | boolean",elements:[{name:"string"},{name:"boolean"}]},description:""},fileValidation:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => Promise<string | null>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"Promise",elements:[{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}],raw:"Promise<string | null>"}}},description:""},withIcon:{required:!1,tsType:{name:"boolean"},description:""},unsupportedFileFormatErrorMessage:{required:!1,tsType:{name:"string"},description:"Error message displayed when a dropped file is rejected due to its format not matching the acceptedFilePattern. After ':' it automatically appends supported extensions.",defaultValue:{value:"'Unsupported file format. Supported formats: '",computed:!1}}}};export{FileUpload as F,Formik as a};
